\chapter{Wing Drag Characteristics}

\label{ch:wingdrag}
\markboth{Wing Drag Characteristics}{}

\begin{flushright}
	{\smaller
		\textit{Le avversità\\ possono essere delle formidabili occasioni}\\
		-- Thomas Mann}
\end{flushright}
As mentioned in the previous chapter, the drag is the force component acting in the opposite direction to the airspeed vector.\\
\section{Theoretical background}
There is not a single classification of the drag but, dependent on the purpose of the work, the drag may be broken down in different way. Following will be explained the two main classifications.

\begin{itemize}
\item The drag is subdivided using a causal breakdown. In this way the drag contributes are in accordance with the physical mechanism such as the viscosity of the flow.
\item The drag is subdivided using a component breakdown. Every component of aircraft added an own drag contribute.
\end{itemize}

\begin{figure}[H]
\centering
{\includegraphics[height=6.4cm]{Immagini/component.png}} 
\caption{Drag breakdown for a business jet in cruise.}
\end{figure}
According to the casual breakdown it's possible to make a preliminary division considering normal and tangential stress. The tangential forces produce the {\bfseries friction drag}. While it's possible to divide the drag due of the normal component in viscous, that generates {\bfseries form drag}, and inviscid. A further division can be made for the last one, in {\bfseries induced drag}  and {\bfseries wave drag}.\\
\begin{figure}[H]
\centering
{\includegraphics[height=8.9cm]{Immagini/dragcomponentlast.pdf}} 
\caption{Causal breakdown of airplane drags.}
\end{figure}
Friction drag is caused by the air closest to the body’s surface that is dragged along with it. Due to this interaction shearing stresses are born within the thin layer of air (boundary layer) adjacent to the skin. The magnitude of this drag depends on the kind of boundary layer what can be laminar or turbulent in dependence on the Raynolds number. Usually it's accustomed to assume, at the flight speed and altitudes at which aircraft fly, a fully turbulent flow over the entire airplane. In this way a conservative result is obtained.\\
Form drag is caused by the air that is flowing over the body. The separation of air creates turbulence and results in pockets of low and high pressure that leave a wake behind the airplane. The departure of the boundary layer alters the pressure field from its inviscid distribution resulting in an additional drag component. The general size and shape of the body are the most important factors in form drag; bodies with a larger presented cross-section will have a higher drag than thinner bodies.\\
Induced drag is the drag due to lift. It is the drag created by the vortices at the tip of an aircraft's wing. The high pressure underneath the wing causes the airflow at the tips of the wings to curl around from bottom to top in a circular motion. So it's depend on the spanwise distribution of lift. \\
Wave drag is a component of the drag due to the presence of shock waves. Wave drag is independent of viscous effects, and tends to present itself as a sudden and dramatic increase in drag as the vehicle increases speed.
\\ \\ 
In this work the drag will be classified using a component breakdown and for each component of the aircraft is used a causal breakdown. In this way it's possible to evaluate separately the wing drag and tail drag, considering the aerodynamic centers of these lifting surfaces as application point.
\begin{figure}[H]
\centering
{\includegraphics[height=3.6cm]{Immagini/dragco.pdf}} 
\caption{Components breakdown of airplane drags.}
\end{figure}
In JPAD is possible to use different methods in order to evaluate the drag coefficient of a wing and of the entire aircraft. In particular in this section will be explained two approaches and in the next chapter will be shown the results.\\ \\
In order to evaluate the drag coefficient you can divide it into different contributes as shown in the fig. \ref{newcomponent}

\begin{figure}[H]
	\centering
	{\includegraphics[height=6cm]{Immagini/dragfactors.pdf}} 
	\caption{Used breakdown for the wing drag.}
	\label{newcomponent}
\end{figure}

It's possible to evaluate the contributes using different methods.

\subsection{Case 1:  $CD_0$  and $k CL$}
Part of the parasite drag depends on the angle of attack and, consequently, on the CL; while part is constant and it's called $CD_0$. So the contributes of $CD$ which varies with the cl consist of the induced drag (due to vortex) and a part of parasite drag, not considering wave effects. It's possible to approximate the drag polar of a wing as a parabola where the $CD_0$ is the origin. It's important to note that using the parabolic approximation the $CD_0$ is the coefficient drag value at $CL=0$ but this is not properly correct.

\begin{equation}
CD = CD_0 + KCL^2 = CD_0 + \frac{CL^2}{\pi \AR e}
\end{equation}

In order to evaluate the zero lift drag coefficient it's possible to introduce the concept of equivalent parasite area f. This is the area of a thin plate that has the same drag of the wing.

\begin{equation}
f = CD_0 S
\label{cd01}
\end{equation}

Introducing the equivalent friction coefficient, it's possible to express the equivalent parasite area as follows

\begin{equation}
f= S_{wet} C_{f_{e}}
\label{cd02}
\end{equation}

Therefore it is possible to obtain the zero lift drag coefficient by eq. \ref{cd01} and \ref{cd02}.

\begin{equation}
CD_0 =  C_{f_{e}} \left( \frac{S_{wet}}{S}\right)
\end{equation}


\subsection{Case 2: Parasite Drag and Induced Drag}
It's possible to evaluate the parasite drag starting from the airfoils while the contribution that varies with the CL is calculated from the induced angle of attack.

\subsubsection{Parasite Drag}
\begin{enumerate}
	\item First of all the load distribution at a given angle of attack has been calculated
	\item Fifty points along the semispan are defined
	\item For each point, an intermediate profile is calculated
	\item To each profile correspond the lift coefficient at that station
	\item Starting from the CL, using a parabolic approximation for the drag polar, the CD is calculated with the following equation
	\begin{equation}
	CD = CD_{min} + (CL - CL_{CD_{min}})^2 \cdot k
	\end{equation}
	\item Known the drag distribution it is possible to calculate the drag coefficient of the lifting surface integrating
	\end{enumerate}
	
	In the tool it is possible to choose the method used to calculate the load distribution. In particular it's possible to use Shrenk or Nasa-Blackwell method.\\
{\bfseries Schrenk Method} is based on an elliptical lifting coefficient distribution span wise hypothesis on the wing. This method also assumes that the pressure distribution is proportional to the wing area. 
	The {\bfseries Nasa-Blackwell}, as mentioned, is a numerical method for calculating the subsonic load distribution for arbitrary lifting surface arrangements at a fixed angle of attack. \ref{ch:worklift}


\subsubsection{Induced Drag}

The induced drag introduces tridimensional effects on the drag estimation.

\begin{equation}
CD_i = CL \alpha_i
\end{equation}

So it's necessary to evaluate the induced angle of attack along the semi-span(CHAP. \ref{ch:iaoa}).
	
\begin{enumerate}
	\item First of all the load distribution at a given angle of attack has been calculated
	\item At given angle of attack is calculated the distribution of induced angle of attack
	\item Fifty points along the semispan are defined
	\item To each profile correspond the lift coefficient at that station and it's possible to evaluate the local drag coefficien
	\begin{equation}
	Cd =Cl \alpha_i
	\end{equation}
	\item Known the drag distribution it is possible to calculate the drag coefficient of the lifting surface integrating
\end{enumerate}



\section{Java Class Architecture}

In this paragraph the implementation inside the JPAD library of the calculation of the wing drag characteristics will be described. In this library there are several methods relating to the calculation of drag, which are summarized in the table below, all contained in \texttt{LSAerodynamicManager} class. As mentioned the drag may be broken down in different way: using a causal breakdown or a component breakdown, so there are various methods that evaluate the different contributions. In order to have a clear organization of the class, the methods relating to the calculations of the same items are organized in nested classes in  \texttt{LSAerodynamicManager}.\\ 

\begin{table}[H]
\begin{tabular}{p{7cm}p{7.5cm}}
\toprule
\lstinline[language=Java]!calculateCD0Total! & This class contains methods that calculates CD0\\ \hline 
\lstinline[language=Java]!CalcCdWaveDrag! & This method calculates a lifting surface wave drag\\ \hline 
\lstinline[language=Java]!CalcCDAtAlpha! & This method calculates the drag coefficient of the lifting surface using an integral and calling other method that fills the needed field. \\ \hline 
\lstinline[language=Java]!calculateCDParasiteFromAirfoil! &This method calculates drag distribution starting from the load distribution calculated with Nasa-Blackwell method or Schrenk method using a parabolic approximation for the drag polar.  
\\ \hline 
\lstinline[language=Java]!CalculateCdAirfoil! & This nested class has some methods that evaluates the cd of an airfoil corresponding to an alpha that is the input value of the method. The difference between the methods is the way to calculate cl from alpha.\\ \hline 
\lstinline[language=Java]!PlotCDvsAlphaCurve! & This method draws CD vs Alpha curve and CD vs CL curve of a wing, using 30 value of alpha between $\alpha=- 2^{\circ}$ and $\alpha = 18^{\circ}$.\\ \hline 
\lstinline[language=Java]!calculateCDInduced! & This method calculates the cd induced from cl distribution and induced angle of attack. \\ \hline 
\bottomrule
\end{tabular}
\caption{Methods for drag coefficient calculator of a lifting surface.}
\label{table:Table2}
\end{table}

As mentioned it's possible to evaluate the drag coefficient in JPAD using different methods. \\
The first method is to evaluate the zero lift drag coefficient using the nested class \texttt{calculate} \texttt{CD0Total}. In order to evaluate the induced drag it's possible to evaluate the CL of the wing and the oswald factor from an aerodynamic analysis.\\
The second method is to evaluate th CD0 as the zero lift defining an object of the class  \texttt{CalcCDAtAlpha}. This class evaluates the drag coefficient of a lifting surface. This method calls a method of an other class \texttt{CalcCdDistribution} in order to evaluate the Cd distribution at alpha. The drag coefficient distribution is calculated starting from the lift distribution and using a parabolic approximation for the lifting surface polar by the class \texttt{CalculateCd}.  In order to evaluate the induced drag it's necessary to use the method \texttt{calculateCDInduced} that calculate the wing lift distribution using NasaBlackwell method and the induced angle of attack using the methods of the class \texttt{AlphaEffective}.\\
The process are shown in following figures.
\noindent\\
\begin{figure}[H]
\centering
{\includegraphics[height=7cm,  angle=90]{immagini/dragflowchartcd0.pdf}}
\caption{Flow chart of drag estimation classes. Case 1.}
\label{fig:cd}
\end{figure}

\begin{figure}[H]
\centering
{\includegraphics[height=12.9cm, angle=90]{immagini/dragflowchart3.pdf}}
\caption{Flow chart of drag estimation classes. Case 2.}
\label{fig:cd}
\end{figure}




\section{Case Study}

In this section will present the results of the application of the previously introduced method on two aircraft: ATR-72 and B747-100B.
After initializing the Test class and defining the work object, it is possible to define an object of the class \texttt{CalcCDAtAlpha} that calculates the drag coefficient of a wing at a given angle of attack. This method accepts as input three parameters: the angle of attack of the wing,  the method used in order to calculate of lift distribution and an object of the lifting surface aerodynamic manager.
\noindent \\
\begin{lstlisting}[frame=rbl,caption={{\footnotesize Use of Drag Calculator class}},label= [style=\bfseries]{Listing}]

// -----------------------------------------------------------------------
// DRAG CHARACTERISTICS 
// ----------------------------------------------------------------------


System.out.println("\n\n------------------------------------");
System.out.println("\n DRAG CHARACTERISTICS  ");
System.out.println("\n------------------------------------");


         System.out.println("\n ------------------- ");
		System.out.println("|       WING        |");
		System.out.println(" ------------------- \n\n");



		//-----------------------------------------------CDairfoil+ CL*alpha_i


		// parasite Drag

		LSAerodynamicsManager.CalcCdvsAlpha theCDWingArrayCalculator = theLSAnalysis
				.new CalcCdvsAlpha();

		LSAerodynamicsManager.CalcCDAtAlpha theCDWingCalculator = theLSAnalysis
				.new CalcCDAtAlpha();

		parasiteCDWingCleanArray = new double [nValueAlpha];

		Double [] cDWingTemp =  theCDWingArrayCalculator
		.calculateCDParasiteFromAirfoil(alphaMinWing, alphaMaxWing, nValueAlpha);
		
		for (int i=0; i< parasiteCDWingCleanArray.length; i++){
			parasiteCDWingCleanArray[i] =(double)cDWingTemp[i];
		}


		// Induced Drag 

		inducedCDWingArray = theCDWingArrayCalculator
		            .calculateCDInduced(alphaMinWing, alphaMaxWing, nValueAlpha);


		// Total drag

		cDWingCleanArray = new double [nValueAlpha];
		
		for (int i = 0; i<nValueAlpha; i++){
			cDWingCleanArray[i] = parasiteCDWingCleanArray[i]+ 
			   inducedCDWingArray[i];
		}	
}


// Total Drag with Parabolic interpolation

		theWing.calculateFormFactor(theWing.getAerodynamics()
		                       .calculateCompressibility(
		                               theOperatingConditions.get_machCurrent()));
		double cD0WingPolar= theWing.getAerodynamics().calculateCd0Parasite();

		double oswaldFactor = aircraft.get_theAerodynamics().calculateOswald(
				theOperatingConditions.get_machCurrent(), MethodEnum.HOWE);
		System.out.println("oswald factor " + oswaldFactor);

		cD0WingPolarArray = new double [alphaStabilityArray.size()];
		cDiWingPolarArray = new double [alphaStabilityArray.size()];
		cDWaweWingPolarArray = new double [alphaStabilityArray.size()];
		cDWingPolarArray = new double [alphaStabilityArray.size()];


		for (int i=0; i<alphaStabilityArray.size(); i++){

			double cLLocal = theCLWingCalculator.nasaBlackwellAlphaBody(
			 Amount.valueOf(Math.toRadians 
			 (alphaStabilityArray.get(i)), SI.RADIAN));	
			 
			cD0WingPolarArray[i] = cD0WingPolar;
			cDiWingPolarArray[i] = (Math.pow(cLLocal, 2))/
			    (Math.PI * theWing.get_aspectRatio() * oswaldFactor);
			    
			cDWaweWingPolarArray[i] = theWing.getAerodynamics()
			  .getCalculateCdWaveDrag().lockKorn(
			           cLLocal, theOperatingConditions.get_machCurrent());

			cDWingPolarArray[i] = cD0WingPolar + cDiWingPolarArray[i]
			        + cDWaweWingPolarArray[i];
		}
		
		

\end{lstlisting}


%\begin{lstlisting}[caption={{\footnotesize Drag Characteristics of a Lifting Surface - Results. ATR-72}},label= [style=\bfseries]{Listing}]
%------------------------------------
%
% DRAG CHARACTERISTICS  
%
%------------------------------------
%
% ------------------- 
%|       WING        |
% ------------------- 
%
% CD of Wing at alpha body = 2.0 ° is 0.0145499801315
% 
% 
% 	 	 WRITING CHART TO FILE. Parabolic Polar. 
%-----------------------------------------------------
%	 	 DONE 
%	 	 
%\end{lstlisting}

\noindent \\

\subsection{ATR-72}

Following there are the summary diagrams of the results obtained for the ATR 72. In case 2, actually, there are not  contemplated the not linear effects due to induced drag.

\noindent \\ \\
\begin{figure}[H]
\centering
\input{immagini/parasitedragatr.tikz}
\caption{ATR 72 CD vs CL at Mach 0.4. Parasite Drag.}
\label{fig:DragATR}
\end{figure}

\begin{figure}[H]
\centering
\input{immagini/parasitedragatr2.tikz}
\caption{ATR 72 CD vs $\alpha_w$ at Mach 0.4. Parasite Drag.}
\label{fig:DragATR}
\end{figure}
\noindent \\\\
\begin{figure}[H]
\centering
\input{immagini/induceddragatr.tikz}
\caption{ATR 72 CD vs $\alpha_w$ at Mach 0.4. Induced Drag.}
\label{fig:DragATR}
\end{figure}

\begin{figure}[H]
\centering
\input{immagini/totaldragcoefficient.tikz}
\caption{ATR 72 CD vs $\alpha_w$\  at Mach 0.4. Drag Coefficients calculated as case 2.}
\label{fig:DragATR}
\end{figure}
\noindent \\
\begin{figure}[H]
\centering
\input{immagini/totaldragcd0atr.tikz}
\caption{ATR 72 CD vs $\alpha_w$  at Mach 0.4. Drag Coefficients calculated as case 1.}
\label{fig:DragATR}
\end{figure}

\begin{figure}[H]
\centering
\input{immagini/comparisonatr.tikz}
\caption{ATR 72 CD vs $\alpha_w$  at Mach 0.4. Method comparison.}
\label{fig:DragATR}
\end{figure}

\noindent \\
\begin{figure}[H]
\centering
\input{immagini/dragflap.tikz}
\caption{ATR 72 CD vs $\alpha_w$  at Mach 0.2. Clean and Flapped wing.}
\label{fig:DragATR}
\end{figure}


\subsection{BOEING 747-100B}

\begin{figure}[H]
\centering
\input{immagini/parasitedragboeing.tikz}
\caption{BOEING 747-100B CD vs CL at Mach 0.75. Parasite Drag.}
\label{fig:DragATR}
\end{figure}

\begin{figure}[H]
\centering
\input{immagini/parasitedragboeing2.tikz}
\caption{BOEING 747-100B CD vs $\alpha_w$ at Mach 0.75. Parasite Drag.}
\label{fig:DragATR}
\end{figure}
\noindent \\\\
\begin{figure}[H]
\centering
\input{immagini/induceddragboeing.tikz}
\caption{BOEING 747-100B CD vs $\alpha_w$ at Mach 0.75. Induced Drag.}
\label{fig:DragATR}
\end{figure}

\begin{figure}[H]
\centering
\input{immagini/totaldragcoefficientboeing.tikz}
\caption{BOEING 747-100B CD vs $\alpha_w$\  at Mach 0.75. Drag Coefficients calculated as case 2.}
\label{fig:DragATR}
\end{figure}
\noindent \\\\
\begin{figure}[H]
\centering
\input{immagini/totaldragcd0boeing.tikz}
\caption{BOEING 747-100B CD vs $\alpha_w$  at Mach 0.75. Drag Coefficients calculated as case 1.}
\label{fig:DragATR}
\end{figure}

\begin{figure}[H]
\centering
\input{immagini/comparisonboeing.tikz}
\caption{BOEING 747-100B CD vs $\alpha_w$  at Mach 0.75. Method comparison.}
\label{fig:DragATR}
\end{figure}
\noindent \\\\
\begin{figure}[H]
\centering
\input{immagini/dragflapboeing.tikz}
\caption{BOEING 747-100B CD vs $\alpha_w$  at Mach 0.2. Clean and Flapped wing.}
\label{fig:DragATR}
\end{figure}

%\begin{figure}[H]
%\centering
%\input{immagini/CDalfa.tikz}
%\caption{ATR 72 CD vs Alpha_w at Mach 0.4. Total drag.}
%\label{fig:DragATR}
%\end{figure}
%
%
%\begin{figure}[H]
%\centering
%\input{immagini/polar.tikz}
%\caption{ATR 72 Parabolic Polar Drag at Mach 0.43. Total drag.}
%\label{fig:DragATR}
%\end{figure}

%
%\begin{lstlisting}[caption={{\footnotesize Drag Characteristics of a Lifting Surface - Results. BOEING 747-100B}},label= [style=\bfseries]{Listing}]
%------------------------------------
%
% DRAG CHARACTERISTICS  
%
%------------------------------------
%
% ------------------- 
%|       WING        |
% ------------------- 
%
%
% CD of Wing at alpha body = 2.0° is 0.00809609934283
% 
% 
% 	 	 WRITING CHART TO FILE. Parabolic Polar. 
%-----------------------------------------------------
%	 	 DONE 
%	 	 
%\end{lstlisting}

%
%
%
%
%
%BOEING
%
%
%
%

%
%\noindent \\
%
%\begin{figure}[H]
%\centering
%\input{immagini/parassitedragatr.tikz}
%\caption{ATR 72 CD vs CL at Mach 0.4. Parasite drag.}
%\label{fig:DragATR}
%\end{figure}
%
%
%\begin{figure}[H]
%\centering
%\input{immagini/parasitedragatralpha.tikz}
%\caption{ATR 72 CD vs $\alpha_w$  at Mach 0.4. Parasite drag.}
%\label{fig:DragATR}
%\end{figure}
%
%\noindent \\
%
%\begin{figure}[H]
%\centering
%\input{immagini/induceddragatr.tikz}
%\caption{ATR 72 CD vs $\alpha_w$ at Mach 0.4. Induced drag.}
%\label{fig:DragATR}
%\end{figure}
%
%\begin{figure}[H]
%\centering
%\input{immagini/totaldragcoefficient.tikz}
%\caption{ATR 72 CD vs $\alpha_w$\  at Mach 0.4. Drag Coefficientscalculated as case 2.}
%\label{fig:DragATR}
%\end{figure}
%\noindent \\
%\begin{figure}[H]
%\centering
%\input{immagini/totaldragcd0atr.tikz}
%\caption{ATR 72 CD vs $\alpha_w$  at Mach 0.4. Drag Coefficients calculated as case 1.}
%\label{fig:DragATR}
%\end{figure}
%
%\begin{figure}[H]
%\centering
%\input{immagini/comparisonatr.tikz}
%\caption{ATR 72 CD vs $\alpha_w$  at Mach 0.4. Method comparison.}
%\label{fig:DragATR}
%\end{figure}
