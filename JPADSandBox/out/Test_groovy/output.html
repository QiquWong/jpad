<!DOCTYPE html>
<meta charset="utf-8">
<style>
  html,body{
    height:100%;
    min-height: 100%;
    width="100%";
    min-width="100%"
  }

#ChartArea {
  height : 100%;
  width : 100%;
}

.c3 svg{font:10px sans-serif;-webkit-tap-highlight-color:transparent}.c3 line,.c3 path{fill:none;stroke:#000}.c3 text{-webkit-user-select:none;-moz-user-select:none;user-select:none}.c3-bars path,.c3-event-rect,.c3-legend-item-tile,.c3-xgrid-focus,.c3-ygrid{shape-rendering:crispEdges}.c3-chart-arc path{stroke:#fff}.c3-chart-arc text{fill:#fff;font-size:13px}.c3-grid line{stroke:#aaa}.c3-grid text{fill:#aaa}.c3-xgrid,.c3-ygrid{stroke-dasharray:3 3}.c3-text.c3-empty{fill:gray;font-size:2em}.c3-line{stroke-width:1px}.c3-circle._expanded_{stroke-width:1px;stroke:#fff}.c3-selected-circle{fill:#fff;stroke-width:2px}.c3-bar{stroke-width:0}.c3-bar._expanded_{fill-opacity:.75}.c3-target.c3-focused{opacity:1}.c3-target.c3-focused path.c3-line,.c3-target.c3-focused path.c3-step{stroke-width:2px}.c3-target.c3-defocused{opacity:.3!important}.c3-region{fill:#4682b4;fill-opacity:.1}.c3-brush .extent{fill-opacity:.1}.c3-legend-item{font-size:12px}.c3-legend-item-hidden{opacity:.15}.c3-legend-background{opacity:.75;fill:#fff;stroke:#d3d3d3;stroke-width:1}.c3-title{font:14px sans-serif}.c3-tooltip-container{z-index:10}.c3-tooltip{border-collapse:collapse;border-spacing:0;background-color:#fff;empty-cells:show;-webkit-box-shadow:7px 7px 12px -9px #777;-moz-box-shadow:7px 7px 12px -9px #777;box-shadow:7px 7px 12px -9px #777;opacity:.9}.c3-tooltip tr{border:1px solid #CCC}.c3-tooltip th{background-color:#aaa;font-size:14px;padding:2px 5px;text-align:left;color:#FFF}.c3-tooltip td{font-size:13px;padding:3px 6px;background-color:#fff;border-left:1px dotted #999}.c3-tooltip td>span{display:inline-block;width:10px;height:10px;margin-right:6px}.c3-tooltip td.value{text-align:right}.c3-area{stroke-width:0;opacity:.2}.c3-chart-arcs-title{dominant-baseline:middle;font-size:1.3em}.c3-chart-arcs .c3-chart-arcs-background{fill:#e0e0e0;stroke:none}.c3-chart-arcs .c3-chart-arcs-gauge-unit{fill:#000;font-size:16px}.c3-chart-arcs .c3-chart-arcs-gauge-max,.c3-chart-arcs .c3-chart-arcs-gauge-min{fill:#777}.c3-chart-arc .c3-gauge-value{fill:#000}


</style>
<html>
  <head>
    <title>DexCharts : C3JS Bar Chart</title>
  </head>
  <body>
  <div id="ChartArea"></div>

<script>
!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function r(n){return null===n?0/0:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function c(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function l(){this._=Object.create(null)}function s(n){return(n+="")===pa||n[0]===va?va+n:n}function f(n){return(n+="")[0]===va?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=da.length;r>e;++e){var u=da[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new l;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){ta.event.preventDefault()}function k(){for(var n,t=ta.event;n=t.sourceEvent;)t=n;return t}function E(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=ta.event;u.target=n,ta.event=u,t[u.type].apply(e,r)}finally{ta.event=i}}},t}function A(n){return ya(n,_a),n}function N(n){return"function"==typeof n?n:function(){return Ma(n,this)}}function C(n){return"function"==typeof n?n:function(){return xa(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ta.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function q(n){return n.trim().replace(/\s+/g," ")}function L(n){return new RegExp("(?:^|\\s+)"+ta.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=L(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",q(u+" "+n))):e.setAttribute("class",q(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ta.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return ba(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function Z(n){return ya(n,Sa),n}function V(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,ra(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+ta.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=$;a>0&&(n=n.slice(0,a));var l=ka.get(n);return l&&(n=l,c=B),a?t?u:r:t?b:i}function $(n,t){return function(e){var r=ta.event;ta.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ta.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Aa,u="click"+r,i=ta.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ea&&(Ea="onselectstart"in e?!1:x(e.style,"userSelect")),Ea){var o=n(e).style,a=o[Ea];o[Ea]="none"}return function(n){if(i.on(r,null),Ea&&(o[Ea]=a),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Na){var i=t(n);if(i.scrollX||i.scrollY){r=ta.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Na=!(o.f||o.e),r.remove()}}return Na?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ta.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nt(n){return n>1?0:-1>n?qa:Math.acos(n)}function tt(n){return n>1?Ra:-1>n?-Ra:Math.asin(n)}function et(n){return((n=Math.exp(n))-1/n)/2}function rt(n){return((n=Math.exp(n))+1/n)/2}function ut(n){return((n=Math.exp(2*n))-1)/(n+1)}function it(n){return(n=Math.sin(n/2))*n}function ot(){}function at(n,t,e){return this instanceof at?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof at?new at(n.h,n.s,n.l):bt(""+n,_t,at):new at(n,t,e)}function ct(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new mt(u(n+120),u(n),u(n-120))}function lt(n,t,e){return this instanceof lt?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof lt?new lt(n.h,n.c,n.l):n instanceof ft?gt(n.l,n.a,n.b):gt((n=wt((n=ta.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new lt(n,t,e)}function st(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(e,Math.cos(n*=Da)*t,Math.sin(n)*t)}function ft(n,t,e){return this instanceof ft?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof lt?st(n.h,n.c,n.l):wt((n=mt(n)).r,n.g,n.b):new ft(n,t,e)}function ht(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=pt(u)*Xa,r=pt(r)*$a,i=pt(i)*Ba,new mt(dt(3.2404542*u-1.5371385*r-.4985314*i),dt(-.969266*u+1.8760108*r+.041556*i),dt(.0556434*u-.2040259*r+1.0572252*i))}function gt(n,t,e){return n>0?new lt(Math.atan2(e,t)*Pa,Math.sqrt(t*t+e*e),n):new lt(0/0,0/0,n)}function pt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function dt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mt(n,t,e){return this instanceof mt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mt?new mt(n.r,n.g,n.b):bt(""+n,mt,ct):new mt(n,t,e)}function yt(n){return new mt(n>>16,n>>8&255,255&n)}function Mt(n){return yt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function bt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=Ga.get(n.toLowerCase()))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new at(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=vt((.4124564*n+.3575761*t+.1804375*e)/Xa),u=vt((.2126729*n+.7151522*t+.072175*e)/$a),i=vt((.0193339*n+.119192*t+.9503041*e)/Ba);return ft(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return"function"==typeof n?n:function(){return n}}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(t,e,n,r)}}function Nt(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=ta.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=ta.event;ta.event=n;try{o.progress.call(i,c)}finally{ta.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ra(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},ta.rebind(i,o,"on"),null==r?i:i.get(Ct(r))}function Ct(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qt(){var n=Lt(),t=Tt()-n;t>24?(isFinite(t)&&(clearTimeout(tc),tc=setTimeout(qt,t)),nc=0):(nc=1,rc(qt))}function Lt(){var n=Date.now();for(ec=Ka;ec;)n>=ec.t&&(ec.f=ec.c(n-ec.t)),ec=ec.n;return n}function Tt(){for(var n,t=Ka,e=1/0;t;)t.f?t=n?n.n=t.n:Ka=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Qa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ga(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=ic.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=oc.get(g)||Ut;var M=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=ta.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!l&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new cc(e-1)),1),e}function i(n,e){return t(n=new cc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{cc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{cc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{cc=jt;var r=new jt;return r._=t,n(r,e)._}finally{cc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=sc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=N[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cc!==jt,o=new(i?jt:cc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in sc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,N.c.toString(),t,r)}function c(n,t,r){return e(n,N.x.toString(),t,r)}function l(n,t,r){return e(n,N.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{cc=jt;var t=new cc;return t._=n,r(t)}finally{cc=Date}}var r=t(n);return e.parse=function(n){try{cc=jt;var t=r.parse(n);return t&&t._}finally{cc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var M=ta.map(),x=Yt(v),b=Zt(v),_=Yt(d),w=Zt(d),S=Yt(m),k=Zt(m),E=Yt(y),A=Zt(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var N={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return It(n.getDate(),t,2)},e:function(n,t){return It(n.getDate(),t,2)},H:function(n,t){return It(n.getHours(),t,2)},I:function(n,t){return It(n.getHours()%12||12,t,2)},j:function(n,t){return It(1+ac.dayOfYear(n),t,3)},L:function(n,t){return It(n.getMilliseconds(),t,3)},m:function(n,t){return It(n.getMonth()+1,t,2)},M:function(n,t){return It(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return It(n.getSeconds(),t,2)},U:function(n,t){return It(ac.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return It(ac.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return It(n.getFullYear()%100,t,2)},Y:function(n,t){return It(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},C={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function It(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Yt(n){return new RegExp("^(?:"+n.map(ta.requote).join("|")+")","i")}function Zt(n){for(var t=new l,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=ga(t)/60|0,u=ga(t)%60;return e+It(r,"0",2)+It(u,"0",2)}function oe(n,t,e){hc.lastIndex=0;var r=hc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&dc.hasOwnProperty(n.type)&&dc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=Da,t=t*Da/2+qa/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);yc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;Mc.point=function(o,a){Mc.point=n,r=(t=o)*Da,u=Math.cos(a=(e=a)*Da/2+qa/4),i=Math.sin(a)},Mc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Me(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function xe(n){return[Math.atan2(n[1],n[0]),tt(n[2])]}function be(n,t){return ga(n[0]-t[0])<Ca&&ga(n[1]-t[1])<Ca}function _e(n,t){n*=Da;var e=Math.cos(t*=Da);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++xc,_c+=(n-_c)/xc,wc+=(t-wc)/xc,Sc+=(e-Sc)/xc}function Se(){function n(n,u){n*=Da;var i=Math.cos(u*=Da),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);bc+=l,kc+=l*(t+(t=o)),Ec+=l*(e+(e=a)),Ac+=l*(r+(r=c)),we(t,e,r)}var t,e,r;qc.point=function(u,i){u*=Da;var o=Math.cos(i*=Da);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),qc.point=n,we(t,e,r)}}function ke(){qc.point=_e}function Ee(){function n(n,t){n*=Da;var e=Math.cos(t*=Da),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-nt(g)/h,v=Math.atan2(h,g);Nc+=p*l,Cc+=p*s,zc+=p*f,bc+=v,kc+=v*(r+(r=o)),Ec+=v*(u+(u=a)),Ac+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;qc.point=function(o,a){t=o,e=a,qc.point=n,o*=Da;var c=Math.cos(a*=Da);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},qc.lineEnd=function(){n(t,e),qc.lineEnd=ke,qc.point=_e}}function Ae(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ne(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(be(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new qe(e,n,null,!0),l=new qe(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new qe(r,n,null,!1),l=new qe(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),ze(i),ze(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function ze(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function qe(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=ta.merge(g);var n=Fe(m,p);g.length?(b||(i.polygonStart(),b=!0),Ce(g,De,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Re(),x=t(M),b=!1;return y}}function Te(n){return n.length>1}function Re(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function De(n,t){return((n=n.x)[0]<0?n[1]-Ra-Ca:Ra-n[1])-((t=t.x)[0]<0?t[1]-Ra-Ca:Ra-t[1])}function Pe(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?qa:-qa,c=ga(i-e);ga(c-qa)<Ca?(n.point(e,r=(r+o)/2>0?Ra:-Ra),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=qa&&(ga(e-u)<Ca&&(e-=u*Ca),ga(i-a)<Ca&&(i-=a*Ca),r=Ue(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Ue(n,t,e,r){var u,i,o=Math.sin(n-e);return ga(o)>Ca?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function je(n,t,e,r){var u;if(null==n)u=e*Ra,r.point(-qa,u),r.point(0,u),r.point(qa,u),r.point(qa,0),r.point(qa,-u),r.point(0,-u),r.point(-qa,-u),r.point(-qa,0),r.point(-qa,u);else if(ga(n[0]-t[0])>Ca){var i=n[0]<t[0]?qa:-qa;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Fe(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;yc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+qa/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+qa/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>qa,k=p*M;if(yc.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*La:b,S^h>=e^m>=e){var E=de(pe(f),pe(n));Me(E);var A=de(u,E);Me(A);var N=(S^b>=0?-1:1)*tt(A[2]);(r>N||r===N&&(E[0]||E[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Ca>i||Ca>i&&0>yc)^1&o}function He(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?qa:-qa),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(be(e,g)||be(p,g))&&(p[0]+=Ca,p[1]+=Ca,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&be(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),M=m*m-y*(ve(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=ye(d,(-m-x)/y);if(me(b,p),b=xe(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(_=w,w=S,S=_);var A=S-w,N=ga(A-qa)<Ca,C=N||Ca>A;if(!N&&k>E&&(_=k,k=E,E=_),C?N?k+E>0^b[1]<(ga(b[0]-w)<Ca?k:E):k<=b[1]&&b[1]<=E:A>qa^(w<=b[0]&&b[0]<=S)){var z=ye(d,(-m+x)/y);return me(z,p),[b,xe(z)]}}}function u(t,e){var r=o?n:qa-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ga(i)>Ca,c=gr(n,6*Da);return Le(t,e,c,o?[0,-n]:[-qa,n-qa])}function Oe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Ie(n,t,e,r){function u(r,u){return ga(r[0]-n)<Ca?u>0?0:3:ga(r[0]-e)<Ca?u>0?2:1:ga(r[1]-t)<Ca?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&Q(l,i,n)>0&&++t:i[1]<=r&&Q(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=0/0}function g(){v&&(p(y,M),x&&w&&A.rejoin(),v.push(A.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Tc,Math.min(Tc,n)),t=Math.max(-Tc,Math.min(Tc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};N(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,E=a,A=Re(),N=Oe(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=ta.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return C}}function Ye(n){var t=0,e=qa/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*qa/180,e=n[1]*qa/180):[t/qa*180,e/qa*180]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,tt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Dc+=u*n-r*t,r=n,u=t}var t,e,r,u;Hc.point=function(i,o){Hc.point=n,t=r=i,e=u=o},Hc.lineEnd=function(){n(t,e)}}function Xe(n,t){Pc>n&&(Pc=n),n>jc&&(jc=n),Uc>t&&(Uc=t),t>Fc&&(Fc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){_c+=n,wc+=t,++Sc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);kc+=o*(t+n)/2,Ec+=o*(e+r)/2,Ac+=o,We(t=n,e=r)}var t,e;Ic.point=function(r,u){Ic.point=n,We(t=r,e=u)}}function Ge(){Ic.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);kc+=o*(r+n)/2,Ec+=o*(u+t)/2,Ac+=o,o=u*n-r*t,Nc+=o*(r+n),Cc+=o*(u+t),zc+=3*o,We(r=n,u=t)}var t,e,r,u;Ic.point=function(i,o){Ic.point=n,We(t=r=i,e=u=o)},Ic.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,La)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(M,x,y,b,_,w,M=o[0],x=o[1],y=e,b=i[0],_=i[1],w=i[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c
},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=a+g,_=c+p,w=l+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),E=ga(ga(w)-1)<Ca||ga(r-h)<Ca?(r+h)/2:Math.atan2(_,b),A=n(E,k),N=A[0],C=A[1],z=N-t,q=C-e,L=M*z-y*q;(L*L/x>i||ga((y*z+M*q)/x-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,N,C,E,b/=S,_/=S,w,d,m),m.point(N,C),u(N,C,E,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Da),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Pa,e*Pa])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*Da,n[1]*Da),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Pa,n[1]*Pa]}function r(){a=Ae(o=lr(m,M,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Lc,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(b(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Lc):He((w=+n)*Da),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Ie(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Da,d=n[1]%360*Da,r()):[v*Pa,d*Pa]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Da,M=n[1]%360*Da,x=n.length>2?n[2]%360*Da:0,r()):[m*Pa,M*Pa,x*Pa]},ta.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*Da,e*Da)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>qa?n-La:-qa>n?n+La:n,t]}function lr(n,t,e){return n?t||e?Ae(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>qa?t-La:-qa>t?t+La:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),tt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),tt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*La)):(u=n+o*La,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=xe([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,Me(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ca)%(2*Math.PI)}function vr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function Mr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(it(r-t)+u*o*it(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Pa,Math.atan2(o,Math.sqrt(r*r+u*u))*Pa]}:function(){return[n*Pa,t*Pa]};return p.distance=h,p}function xr(){function n(n,u){var i=Math.sin(u*=Da),o=Math.cos(u),a=ga((n*=Da)-t),c=Math.cos(a);Yc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Zc.point=function(u,i){t=u*Da,e=Math.sin(i*=Da),r=Math.cos(i),Zc.point=n},Zc.lineEnd=function(){Zc.point=Zc.lineEnd=b}}function br(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function _r(n,t){function e(n,t){o>0?-Ra+Ca>t&&(t=-Ra+Ca):t>Ra-Ca&&(t=Ra-Ca);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(qa/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ra]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ga(u)<Ca?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(qa/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=qa*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(qa/4+t/2)),-n]}function Ar(n){return n[0]}function Nr(n){return n[1]}function Cr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function qr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Lr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function Tr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=el.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Qc.remove(n),el.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ga(e-c.circle.x)<Ca&&ga(r-c.circle.cy)<Ca;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ga(e-l.circle.x)<Ca&&ga(r-l.circle.cy)<Ca;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Qc._;a;)if(r=Fr(a,o)-i,r>Ca)a=a.L;else{if(u=i-Hr(a,o),!(u>Ca)){r>-Ca?(t=a.P,e=a):u>-Ca?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Qc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Qc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),void Vr(e);if(!e)return void(c.edge=Jr(t.site,c.site));Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};Kr(e.edge,l,p,x),c.edge=Jr(l,n,null,x),e.edge=Jr(n,p,null,x),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Ir(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Kc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ga(r-t)>Ca||ga(u-e)>Ca)&&(a.splice(o,0,new Qr(Gr(i.site,s,ga(r-f)<Ca&&p-u>Ca?{x:f,y:ga(t-f)<Ca?e:p}:ga(u-p)<Ca&&h-r>Ca?{x:ga(e-p)<Ca?t:h,y:p}:ga(r-h)<Ca&&u-g>Ca?{x:h,y:ga(t-h)<Ca?e:g}:ga(u-g)<Ca&&r-f>Ca?{x:ga(e-g)<Ca?t:f,y:g}:null),i.site,null)),++c)}function Yr(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=rl.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=tl._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}tl.insert(y,m),y||(nl=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(nl=t.N),tl.remove(t),rl.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=Gc,r=Oe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ga(t.a.x-t.b.x)<Ca&&ga(t.a.y-t.b.y)<Ca)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return Gc.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Kc[n.i].edges.push(new Qr(u,n,t)),Kc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,Gc.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for(Gc=[],Kc=new Array(n.length),Qc=new nu,tl=new nu;;)if(u=nl,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Kc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Ir(t));var o={cells:Kc,edges:Gc};return Qc=tl=Gc=Kc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t,e,r,u,i,o){var a,c=1/0;return function l(n,s,f,h,g){if(!(s>i||f>o||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(c>m){var y=Math.sqrt(c=m);r=t-y,u=e-y,i=t+y,o=e+y,a=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:l(n,s,f,x,b);break;case 1:l(n,x,f,h,b);break;case 2:l(n,s,b,x,g);break;case 3:l(n,x,b,h,g)}}}(n,r,u,i,o),a}function gu(n,t){n=ta.rgb(n),t=ta.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function pu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=mu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function vu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function du(n,t){var e,r,u,i=il.lastIndex=ol.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=il.exec(n))&&(r=ol.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:vu(e,r)})),i=ol.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function mu(n,t){for(var e,r=ta.interpolators.length;--r>=0&&!(e=ta.interpolators[r](n,t)););return e}function yu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(mu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function Mu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function bu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function wu(n){return n*n*n}function Su(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function ku(n){return function(t){return Math.pow(t,n)}}function Eu(n){return 1-Math.cos(n*Ra)}function Au(n){return Math.pow(2,10*(n-1))}function Nu(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/La*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*La/t)}}function zu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function qu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=ta.hcl(n),t=ta.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return st(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=ta.hsl(n),t=ta.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){n=ta.lab(n),t=ta.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ht(e+i*n,r+o*n,u+a*n)+""}}function Du(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Pu(n){var t=[n.a,n.b],e=[n.c,n.d],r=ju(t),u=Uu(t,e),i=ju(Fu(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Pa,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Pa:0}function Uu(n,t){return n[0]*t[0]+n[1]*t[1]}function ju(n){var t=Math.sqrt(Uu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Fu(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Hu(n,t){var e,r=[],u=[],i=ta.transform(n),o=ta.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:vu(a[0],c[0])},{i:3,x:vu(a[1],c[1])})):r.push(c[0]||c[1]?"translate("+c+")":""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:vu(g[0],p[0])},{i:e-2,x:vu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Iu(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Vu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Zu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Vu(n,t){if(n===t)return n;for(var e=Zu(n),r=Zu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Xu(n){n.fixed|=2}function $u(n){n.fixed&=-7}function Bu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Wu(n){n.fixed&=-5}function Ju(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Ju(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Gu(n,t){return ta.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ri,n}function Ku(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Qu(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function ni(n){return n.children}function ti(n){return n.value}function ei(n,t){return t.value-n.value}function ri(n){return ta.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ui(n){return n.x}function ii(n){return n.y}function oi(n,t,e){n.y0=t,n.y=e}function ai(n){return ta.range(n.length)}function ci(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function li(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function si(n){return n.reduce(fi,0)}function fi(n,t){return n+t[1]}function hi(n,t){return gi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function pi(n){return[ta.min(n),ta.max(n)]}function vi(n,t){return n.value-t.value}function di(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function mi(n,t){n._pack_next=t,t._pack_prev=n}function yi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Mi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],wi(r,u,i),t(i),di(r,i),r._pack_prev=i,di(i,u),u=r._pack_next,o=3;l>o;o++){wi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(yi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!yi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?mi(r,u=a):mi(r=c,u),o--):(di(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(bi)}}function xi(n){n._pack_next=n._pack_prev=n}function bi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function wi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function Si(n,t){return n.parent==t.parent?1:2}function ki(n){var t=n.children;return t.length?t[0]:n.t}function Ei(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ai(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ni(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function zi(n){return 1+ta.max(n,function(n){return n.y})}function qi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function Ri(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Di(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Pi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Ui(n){return n.rangeExtent?n.rangeExtent():Pi(n.range())}function ji(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Fi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Hi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ml}function Oi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=ta.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ii(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Oi:ji,c=r?Iu:Ou;return o=u(n,t,c,e),a=u(t,n,c,mu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Du)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Xi(n,t)},i.tickFormat=function(t,e){return $i(n,t,e)},i.nice=function(t){return Zi(n,t),u()},i.copy=function(){return Ii(n,t,e,r)},u()}function Yi(n,t){return ta.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Zi(n,t){return Fi(n,Hi(Vi(n,t)[2]))}function Vi(n,t){null==t&&(t=10);var e=Pi(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Xi(n,t){return ta.range.apply(ta,Vi(n,t))}function $i(n,t,e){var r=Vi(n,t);if(e){var u=ic.exec(e);if(u.shift(),"s"===u[8]){var i=ta.formatPrefix(Math.max(ga(r[0]),ga(r[1])));return u[7]||(u[7]="."+Bi(i.scale(r[2]))),u[8]="f",e=ta.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Wi(u[8],r)),e=u.join("")}else e=",."+Bi(r[2])+"f";return ta.format(e)}function Bi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Wi(n,t){var e=Bi(t[2]);return n in yl?Math.abs(e-Bi(Math.max(ga(t[0]),ga(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Ji(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Fi(r.map(u),e?Math:xl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Pi(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return Ml;arguments.length<2?t=Ml:"function"!=typeof t&&(t=ta.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Ji(n.copy(),t,e,r)},Yi(o,n)}function Gi(n,t,e){function r(t){return n(u(t))}var u=Ki(t),i=Ki(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Xi(e,n)},r.tickFormat=function(n,t){return $i(e,n,t)},r.nice=function(n){return r.domain(Zi(e,n))},r.exponent=function(o){return arguments.length?(u=Ki(t=o),i=Ki(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Gi(n.copy(),t,e)},Yi(r,n)}function Ki(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Qi(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return ta.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new l;for(var i,o=-1,a=r.length;++o<a;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=(c+l)/2,0):(l-c)/(n.length-1+a);return i=r(c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(n.length-1+a)|0;return i=r(c+Math.round(s*a/2+(l-c-(n.length-1+a)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c));return i=r(s+Math.round((f-s-(n.length-a)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Pi(t.a[0])},e.copy=function(){return Qi(n,t)},e.domain(n)}function no(n,t){function i(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ta.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ta.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},o.range=function(n){return arguments.length?(t=n,i()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[0/0,0/0]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return no(n,t)},i()}function to(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return to(n,t,e)},u()}function eo(n,t){function e(e){return e>=e?t[ta.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return eo(n,t)},e}function ro(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Xi(n,t)},t.tickFormat=function(t,e){return $i(n,t,e)},t.copy=function(){return ro(n)},t}function uo(){return 0}function io(n){return n.innerRadius}function oo(n){return n.outerRadius}function ao(n){return n.startAngle}function co(n){return n.endAngle}function lo(n){return n&&n.padAngle}function so(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function fo(n,t,e,r,u){var i=n[0]-t[0],o=n[1]-t[1],a=(u?r:-r)/Math.sqrt(i*i+o*o),c=a*o,l=-a*i,s=n[0]+c,f=n[1]+l,h=t[0]+c,g=t[1]+l,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(M*M*y-x*x),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,E=_-p,A=w-v,N=S-p,C=k-v;return E*E+A*A>N*N+C*C&&(_=S,w=k),[[_-c,w-l],[_*e/M,w*e/M]]}function ho(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Nr,u=Ne,i=go,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=El.get(n)||go).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function go(n){return n.join("L")}function po(n){return go(n)+"Z"}function vo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function yo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function Mo(n,t){return n.length<4?go(n):n[1]+_o(n.slice(1,-1),wo(n,t))}function xo(n,t){return n.length<3?go(n):n[0]+_o((n.push(n[0]),n),wo([n[n.length-2]].concat(n,[n[1]]),t))}function bo(n,t){return n.length<3?go(n):n[0]+_o(n,wo(n,t))}function _o(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return go(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function wo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function So(n){if(n.length<3)return go(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",No(Cl,o),",",No(Cl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Co(c,o,a);return n.pop(),c.push("L",r),c.join("")}function ko(n){if(n.length<4)return go(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(No(Cl,i)+","+No(Cl,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Co(e,i,o);return e.join("")}function Eo(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[No(Cl,o),",",No(Cl,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Co(t,o,a);return t.join("")}function Ao(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return So(n)}function No(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Co(n,t,e){n.push("C",No(Al,t),",",No(Al,e),",",No(Nl,t),",",No(Nl,e),",",No(Cl,t),",",No(Cl,e))}function zo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function qo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=zo(u,i);++t<e;)r[t]=(o+(o=zo(u=i,i=n[t+1])))/2;return r[t]=o,r}function Lo(n){for(var t,e,r,u,i=[],o=qo(n),a=-1,c=n.length-1;++a<c;)t=zo(n[a],n[a+1]),ga(t)<Ca?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function To(n){return n.length<3?go(n):n[0]+_o(n,Lo(n))}function Ro(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Ra,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Do(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=Et(e),b=Et(u),_=e===r?function(){return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<M;)o.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Nr,o=Ne,a=go,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r
},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=El.get(n)||go).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Po(n){return n.radius}function Uo(n){return[n.x,n.y]}function jo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Ra;return[e*Math.cos(r),e*Math.sin(r)]}}function Fo(){return 64}function Ho(){return"circle"}function Oo(n){var t=Math.sqrt(n/qa);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Io(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Yo(n,t,e){return ya(n,Pl),n.namespace=t,n.id=e,n}function Zo(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[i][u].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Vo(n){return null==n&&(n=""),function(){this.textContent=n}}function Xo(n){return null==n?"__transition__":"__transition_"+n+"__"}function $o(n,t,e,r,u){var i=n[e]||(n[e]={active:0,count:0}),o=i[r];if(!o){var a=u.time;o=i[r]={tween:new l,time:a,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++i.count,ta.timer(function(u){function c(e){if(i.active>r)return s();var u=i[i.active];u&&(--i.count,delete i[i.active],u.event&&u.event.interrupt.call(n,n.__data__,u.index)),i.active=r,o.event&&o.event.start.call(n,n.__data__,t),o.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&v.push(r)}),h=o.ease,f=o.duration,ta.timer(function(){return p.c=l(e||1)?Ne:l,1},0,a)}function l(e){if(i.active!==r)return 1;for(var u=e/f,a=h(u),c=v.length;c>0;)v[--c].call(n,a);return u>=1?(o.event&&o.event.end.call(n,n.__data__,t),s()):void 0}function s(){return--i.count?delete i[r]:delete n[e],1}var f,h,g=o.delay,p=ec,v=[];return p.t=g+a,u>=g?c(u-g):void(p.c=c)},0,a)}}function Bo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Wo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Jo(n){return n.toISOString()}function Go(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=ta.bisect(Vl,u);return i==Vl.length?[t.year,Vi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Vl[i-1]<Vl[i]/u?i-1:i]:[Bl,Vi(n,e)[2]]}return r.invert=function(t){return Ko(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Ko)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Ko(+e+1),t).length}var i=r.domain(),o=Pi(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Fi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Ko(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Ko(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Pi(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Ko(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Go(n.copy(),t,e)},Yi(r,n)}function Ko(n){return new Date(n)}function Qo(n){return JSON.parse(n.responseText)}function na(n){var t=ua.createRange();return t.selectNode(ua.body),t.createContextualFragment(n.responseText)}var ta={version:"3.5.5"},ea=[].slice,ra=function(n){return ea.call(n)},ua=this.document;if(ua)try{ra(ua.documentElement.childNodes)[0].nodeType}catch(ia){ra=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),ua)try{ua.createElement("DIV").style.setProperty("opacity",0,"")}catch(oa){var aa=this.Element.prototype,ca=aa.setAttribute,la=aa.setAttributeNS,sa=this.CSSStyleDeclaration.prototype,fa=sa.setProperty;aa.setAttribute=function(n,t){ca.call(this,n,t+"")},aa.setAttributeNS=function(n,t,e){la.call(this,n,t,e+"")},sa.setProperty=function(n,t,e){fa.call(this,n,t+"",e)}}ta.ascending=e,ta.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},ta.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},ta.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},ta.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},ta.sum=function(n,t){var e,r=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)u(e=+n[o])&&(r+=e);else for(;++o<i;)u(e=+t.call(n,n[o],o))&&(r+=e);return r},ta.mean=function(n,t){var e,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)u(e=r(n[a]))?i+=e:--c;else for(;++a<o;)u(e=r(t.call(n,n[a],a)))?i+=e:--c;return c?i/c:void 0},ta.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},ta.median=function(n,t){var i,o=[],a=n.length,c=-1;if(1===arguments.length)for(;++c<a;)u(i=r(n[c]))&&o.push(i);else for(;++c<a;)u(i=r(t.call(n,n[c],c)))&&o.push(i);return o.length?ta.quantile(o.sort(e),.5):void 0},ta.variance=function(n,t){var e,i,o=n.length,a=0,c=0,l=-1,s=0;if(1===arguments.length)for(;++l<o;)u(e=r(n[l]))&&(i=e-a,a+=i/++s,c+=i*(e-a));else for(;++l<o;)u(e=r(t.call(n,n[l],l)))&&(i=e-a,a+=i/++s,c+=i*(e-a));return s>1?c/(s-1):void 0},ta.deviation=function(){var n=ta.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ha=i(e);ta.bisectLeft=ha.left,ta.bisect=ta.bisectRight=ha.right,ta.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},ta.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},ta.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ta.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},ta.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ta.min(arguments,o),e=new Array(t);++n<t;)for(var r,u=-1,i=e[n]=new Array(r);++u<r;)i[u]=arguments[u][n];return e},ta.transpose=function(n){return ta.zip.apply(ta,n)},ta.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ta.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ta.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ta.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ga=Math.abs;ta.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=a(ga(e)),o=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++o)>t;)u.push(r/i);else for(;(r=n+e*++o)<t;)u.push(r/i);return u},ta.map=function(n,t){var e=new l;if(n instanceof l)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var o in n)e.set(o,n[o]);return e};var pa="__proto__",va="\x00";c(l,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),ta.nest=function(){function n(t,o,a){if(a>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var c,s,f,h,g=-1,p=o.length,v=i[a++],d=new l;++g<p;)(h=d.get(c=v(s=o[g])))?h.push(s):d.set(c,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,a))}):(s={},f=function(e,r){s[e]=n(t,r,a)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(ta.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},ta.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},c(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),ta.behavior={},ta.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var da=["webkit","ms","moz","Moz","o","O"];ta.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ta.event=null,ta.requote=function(n){return n.replace(ma,"\\$&")};var ma=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},Ma=function(n,t){return t.querySelector(n)},xa=function(n,t){return t.querySelectorAll(n)},ba=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(ba=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(Ma=function(n,t){return Sizzle(n,t)[0]||null},xa=Sizzle,ba=Sizzle.matchesSelector),ta.selection=function(){return ta.select(ua.documentElement)};var _a=ta.selection.prototype=[];_a.select=function(n){var t,e,r,u,i=[];n=N(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return A(i)},_a.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=ra(n.call(e,e.__data__,a,u))),t.parentNode=e);return A(r)};var wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ta.ns={prefix:wa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),wa.hasOwnProperty(e)?{space:wa[e],local:n}:n}},_a.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ta.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},_a.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!L(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},_a.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},_a.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},_a.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},_a.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},_a.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},_a.insert=function(n,t){return n=j(n),t=N(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},_a.remove=function(){return this.each(F)},_a.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new l,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,a.push(p),c.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var a=Z([]),c=A([]),s=A([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return c.enter=function(){return a},c.exit=function(){return s},c},_a.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},_a.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return A(u)},_a.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_a.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},_a.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},_a.call=function(n){var t=ra(arguments);return n.apply(t[0]=this,t),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},_a.size=function(){var n=0;return Y(this,function(){++n}),n};var Sa=[];ta.selection.enter=Z,ta.selection.enter.prototype=Sa,Sa.append=_a.append,Sa.empty=_a.empty,Sa.node=_a.node,Sa.call=_a.call,Sa.size=_a.size,Sa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return A(o)},Sa.insert=function(n,t){return arguments.length<2&&(t=V(this)),_a.insert.call(this,n,t)},ta.select=function(t){var e;return"string"==typeof t?(e=[Ma(t,ua)],e.parentNode=ua.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ta.selectAll=function(n){var t;return"string"==typeof n?(t=ra(xa(n,ua)),t.parentNode=ua.documentElement):(t=n,t.parentNode=null),A([t])},_a.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var ka=ta.map({mouseenter:"mouseover",mouseleave:"mouseout"});ua&&ka.forEach(function(n){"on"+n in ua&&ka.remove(n)});var Ea,Aa=0;ta.mouse=function(n){return J(n,k())};var Na=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ta.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},ta.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(n,t,e,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&ta.event.target===f),g({type:"dragend"}))}var l,s=this,f=ta.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=ta.select(e(f)).on(i+d,a).on(o+d,c),y=W(f),M=t(h,v);u?(l=u.apply(s,arguments),l=[l.x-M[0],l.y-M[1]]):l=[0,0],g({type:"dragstart"})}}var r=E(n,"drag","dragstart","dragend"),u=null,i=e(b,ta.mouse,t,"mousemove","mouseup"),o=e(G,ta.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},ta.rebind(n,r,"on")},ta.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ra(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Ca=1e-6,za=Ca*Ca,qa=Math.PI,La=2*qa,Ta=La-Ca,Ra=qa/2,Da=qa/180,Pa=180/qa,Ua=Math.SQRT2,ja=2,Fa=4;ta.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=rt(v),o=i/(ja*h)*(e*ut(Ua*t+v)-et(v));return[r+o*l,u+o*s,i*e/rt(Ua*t+v)]}return[r+n*l,u+n*s,i*Math.exp(Ua*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Fa*f)/(2*i*ja*h),p=(c*c-i*i-Fa*f)/(2*c*ja*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Ua;return e.duration=1e3*y,e},ta.behavior.zoom=function(){function n(n){n.on(q,f).on(Oa+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,o)),i(d=e,r),t=ta.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function c(n){z++||n({type:"zoomstart"})}function l(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||n({type:"zoomend"}),d=null}function f(){function n(){f=1,i(ta.mouse(u),g),l(a)}function r(){h.on(L,null).on(T,null),p(f&&ta.event.target===o),s(a)}var u=this,o=ta.event.target,a=D.of(u,arguments),f=0,h=ta.select(t(u)).on(L,n).on(T,r),g=e(ta.mouse(u)),p=W(u);Dl.call(u),c(a)}function h(){function n(){var n=ta.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ta.event.target;ta.select(t).on(x,r).on(b,a),_.push(t);for(var e=ta.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var c=n(),l=Date.now();if(1===c.length){if(500>l-M){var s=c[0];o(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=l}else if(c.length>1){var s=c[0],f=c[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,o=ta.touches(p);Dl.call(p);for(var a=0,c=o.length;c>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),l(v)}function a(){if(ta.event.touches.length){for(var t=ta.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}ta.selectAll(_).on(y,null),w.on(q,f).on(R,h),E(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+ta.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=ta.select(p),E=W(p);t(),c(v),w.on(q,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(v=e(d=m||ta.mouse(this)),Dl.call(this),c(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*Ha())*k.k),i(d,v),l(n)}function p(){var n=ta.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ta.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},A=[960,500],N=Ia,C=250,z=0,q="mousedown.zoom",L="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=E(n,"zoomstart","zoom","zoomend");return Oa||(Oa="onwheel"in ua?(Ha=function(){return-ta.event.deltaY*(ta.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Ha=function(){return ta.event.wheelDelta},"mousewheel"):(Ha=function(){return-ta.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Tl?ta.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},c(n)}).tween("zoom:zoom",function(){var e=A[0],r=A[1],u=d?d[0]:e/2,i=d?d[1]:r/2,o=ta.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:u-r[0]*a,y:i-r[1]*a,k:a},l(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,c(n),l(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ia:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(A=t&&[+t[0],+t[1]],n):A},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ta.rebind(n,D,"on")};var Ha,Oa,Ia=[0,1/0];ta.color=ot,ot.prototype.toString=function(){return this.rgb()+""},ta.hsl=at;var Ya=at.prototype=new ot;Ya.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,this.l/n)},Ya.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,n*this.l)},Ya.rgb=function(){return ct(this.h,this.s,this.l)},ta.hcl=lt;var Za=lt.prototype=new ot;Za.brighter=function(n){return new lt(this.h,this.c,Math.min(100,this.l+Va*(arguments.length?n:1)))},Za.darker=function(n){return new lt(this.h,this.c,Math.max(0,this.l-Va*(arguments.length?n:1)))},Za.rgb=function(){return st(this.h,this.c,this.l).rgb()},ta.lab=ft;var Va=18,Xa=.95047,$a=1,Ba=1.08883,Wa=ft.prototype=new ot;Wa.brighter=function(n){return new ft(Math.min(100,this.l+Va*(arguments.length?n:1)),this.a,this.b)},Wa.darker=function(n){return new ft(Math.max(0,this.l-Va*(arguments.length?n:1)),this.a,this.b)},Wa.rgb=function(){return ht(this.l,this.a,this.b)},ta.rgb=mt;var Ja=mt.prototype=new ot;Ja.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new mt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mt(u,u,u)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mt(n*this.r,n*this.g,n*this.b)},Ja.hsl=function(){return _t(this.r,this.g,this.b)},Ja.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Ga=ta.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ga.forEach(function(n,t){Ga.set(n,yt(t))}),ta.functor=Et,ta.xhr=At(y),ta.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},ta.csv=ta.dsv(",","text/csv"),ta.tsv=ta.dsv("	","text/tab-separated-values");var Ka,Qa,nc,tc,ec,rc=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ta.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Qa?Qa.n=i:Ka=i,Qa=i,nc||(tc=clearTimeout(tc),nc=1,rc(qt))},ta.timer.flush=function(){Lt(),Tt()},ta.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var uc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ta.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=ta.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),uc[8+e/3]};var ic=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oc=ta.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ta.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),ac=ta.time={},cc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lc.setUTCDate.apply(this._,arguments)},setDay:function(){lc.setUTCDay.apply(this._,arguments)},setFullYear:function(){lc.setUTCFullYear.apply(this._,arguments)},setHours:function(){lc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lc.setUTCSeconds.apply(this._,arguments)},setTime:function(){lc.setTime.apply(this._,arguments)}};var lc=Date.prototype;ac.year=Ft(function(n){return n=ac.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ac.years=ac.year.range,ac.years.utc=ac.year.utc.range,ac.day=Ft(function(n){var t=new cc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ac.days=ac.day.range,ac.days.utc=ac.day.utc.range,ac.dayOfYear=function(n){var t=ac.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ac[n]=Ft(function(n){return(n=ac.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ac[n+"s"]=e.range,ac[n+"s"].utc=e.utc.range,ac[n+"OfYear"]=function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)}}),ac.week=ac.sunday,ac.weeks=ac.sunday.range,ac.weeks.utc=ac.sunday.utc.range,ac.weekOfYear=ac.sundayOfYear;var sc={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,hc=/^%/;ta.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var gc=ta.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ta.format=gc.numberFormat,ta.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,pc),le(pc.s,this.s,this),this.s?this.t+=pc.t:this.s=pc.t
},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pc=new ce;ta.geo.stream=function(n,t){n&&vc.hasOwnProperty(n.type)?vc[n.type](n,t):se(n,t)};var vc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},dc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};ta.geo.area=function(n){return mc=0,ta.geo.stream(n,Mc),mc};var mc,yc=new ce,Mc={sphere:function(){mc+=4*qa},point:b,lineStart:b,lineEnd:b,polygonStart:function(){yc.reset(),Mc.lineStart=ge},polygonEnd:function(){var n=2*yc;mc+=0>n?4*qa+n:n,Mc.lineStart=Mc.lineEnd=Mc.point=b}};ta.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*Da,e*Da]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);Me(o),o=xe(o);var c=t-p,l=c>0?1:-1,v=o[0]*Pa*l,d=ga(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Pa;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Pa;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ga(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Mc.point(n,e),t(n,e)}function i(){Mc.lineStart()}function o(){u(v,d),Mc.lineEnd(),ga(y)>Ca&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=o,y=0,Mc.polygonStart()},polygonEnd:function(){Mc.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>yc?(s=-(h=180),f=-(g=90)):y>Ca?g=90:-Ca>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],ta.geo.stream(n,b);var t=M.length;if(t){M.sort(c);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return M=x=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),ta.geo.centroid=function(n){xc=bc=_c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,qc);var t=Nc,e=Cc,r=zc,u=t*t+e*e+r*r;return za>u&&(t=kc,e=Ec,r=Ac,Ca>bc&&(t=_c,e=wc,r=Sc),u=t*t+e*e+r*r,za>u)?[0/0,0/0]:[Math.atan2(e,t)*Pa,tt(r/Math.sqrt(u))*Pa]};var xc,bc,_c,wc,Sc,kc,Ec,Ac,Nc,Cc,zc,qc={sphere:b,point:_e,lineStart:Se,lineEnd:ke,polygonStart:function(){qc.lineStart=Ee},polygonEnd:function(){qc.lineStart=Se}},Lc=Le(Ne,Pe,je,[-qa,-qa/2]),Tc=1e9;ta.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ie(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ta.geo.conicEqualArea=function(){return Ye(Ze)}).raw=Ze,ta.geo.albers=function(){return ta.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ta.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=ta.geo.albers(),o=ta.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ta.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Ca,f+.12*l+Ca],[s-.214*l-Ca,f+.234*l-Ca]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Ca,f+.166*l+Ca],[s-.115*l-Ca,f+.234*l-Ca]]).stream(c).point,n},n.scale(1070)};var Rc,Dc,Pc,Uc,jc,Fc,Hc={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Dc=0,Hc.lineStart=Ve},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=b,Rc+=ga(Dc/2)}},Oc={point:Xe,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Ic={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){Ic.lineStart=Ke},polygonEnd:function(){Ic.point=We,Ic.lineStart=Je,Ic.lineEnd=Ge}};ta.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),ta.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return Rc=0,ta.geo.stream(n,u(Hc)),Rc},n.centroid=function(n){return _c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,u(Ic)),zc?[Nc/zc,Cc/zc]:Ac?[kc/Ac,Ec/Ac]:Sc?[_c/Sc,wc/Sc]:[0/0,0/0]},n.bounds=function(n){return jc=Fc=-(Pc=Uc=1/0),ta.geo.stream(n,u(Oc)),[[Pc,Uc],[jc,Fc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(ta.geo.albersUsa()).context(null)},ta.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta.geo.projection=ur,ta.geo.projectionMutator=ir,(ta.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,ta.geo.rotation=function(n){function t(t){return t=n(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t}return n=lr(n[0]%360*Da,n[1]*Da,n.length>2?n[2]*Da:0),t.invert=function(t){return t=n.invert(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t},t},cr.invert=ar,ta.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*Da,-n[1]*Da,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Pa,n[1]*=Pa}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*Da,u*Da),n):t},n.precision=function(r){return arguments.length?(e=gr(t*Da,(u=+r)*Da),n):u},n.angle(90)},ta.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Da,u=n[1]*Da,i=t[1]*Da,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},ta.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ta.range(Math.ceil(i/d)*d,u,d).map(h).concat(ta.range(Math.ceil(l/m)*m,c,m).map(g)).concat(ta.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ga(n%d)>Ca}).map(s)).concat(ta.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ga(n%m)>Ca}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Ca],[180,90-Ca]]).minorExtent([[-180,-80-Ca],[180,80+Ca]])},ta.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return ta.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},ta.geo.interpolate=function(n,t){return Mr(n[0]*Da,n[1]*Da,t[0]*Da,t[1]*Da)},ta.geo.length=function(n){return Yc=0,ta.geo.stream(n,Zc),Yc};var Yc,Zc={sphere:b,point:b,lineStart:xr,lineEnd:b,polygonStart:b,polygonEnd:b},Vc=br(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ta.geo.azimuthalEqualArea=function(){return ur(Vc)}).raw=Vc;var Xc=br(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(ta.geo.azimuthalEquidistant=function(){return ur(Xc)}).raw=Xc,(ta.geo.conicConformal=function(){return Ye(_r)}).raw=_r,(ta.geo.conicEquidistant=function(){return Ye(wr)}).raw=wr;var $c=br(function(n){return 1/n},Math.atan);(ta.geo.gnomonic=function(){return ur($c)}).raw=$c,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ra]},(ta.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Bc=br(function(){return 1},Math.asin);(ta.geo.orthographic=function(){return ur(Bc)}).raw=Bc;var Wc=br(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ta.geo.stereographic=function(){return ur(Wc)}).raw=Wc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ra]},(ta.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,ta.geom={},ta.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Cr(a),s=Cr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Nr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ta.geom.polygon=function(n){return ya(n,Jc),n};var Jc=ta.geom.polygon.prototype=[];Jc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Jc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Jc.clip=function(n){for(var t,e,r,u,i,o,a=Tr(n),c=-1,l=this.length-Tr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],qr(o,s,u)?(qr(i,s,u)||n.push(Lr(i,o,s,u)),n.push(o)):qr(i,s,u)&&n.push(Lr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var Gc,Kc,Qc,nl,tl,el=[],rl=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Yr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},ta.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ca)*Ca,y:Math.round(o(n,t)/Ca)*Ca,i:t}})}var r=Ar,u=Nr,i=r,o=u,a=ul;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Yr),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?ul:n,t):a===ul?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===ul?null:a&&a[1]},t)};var ul=[[-1e6,-1e6],[1e6,1e6]];ta.geom.delaunay=function(n){return ta.geom.voronoi().triangles(n)},ta.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ga(c-e)+ga(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,M=Et(a),x=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},k.find=function(n){return hu(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Nr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},ta.interpolateRgb=gu,ta.interpolateObject=pu,ta.interpolateNumber=vu,ta.interpolateString=du;var il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ol=new RegExp(il.source,"g");ta.interpolate=mu,ta.interpolators=[function(n,t){var e=typeof t;return("string"===e?Ga.has(t)||/^(#|rgb\(|hsl\()/.test(t)?gu:du:t instanceof ot?gu:Array.isArray(t)?yu:"object"===e&&isNaN(t)?pu:vu)(n,t)}],ta.interpolateArray=yu;var al=function(){return y},cl=ta.map({linear:al,poly:ku,quad:function(){return _u},cubic:function(){return wu},sin:function(){return Eu},exp:function(){return Au},circle:function(){return Nu},elastic:Cu,back:zu,bounce:function(){return qu}}),ll=ta.map({"in":y,out:xu,"in-out":bu,"out-in":function(n){return bu(xu(n))}});ta.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=cl.get(e)||al,r=ll.get(r)||y,Mu(r(e.apply(null,ea.call(arguments,1))))},ta.interpolateHcl=Lu,ta.interpolateHsl=Tu,ta.interpolateLab=Ru,ta.interpolateRound=Du,ta.transform=function(n){var t=ua.createElementNS(ta.ns.prefix.svg,"g");return(ta.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Pu(e?e.matrix:sl)})(n)},Pu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};ta.interpolateTransform=Hu,ta.layout={},ta.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},ta.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=ta.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(ta.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(La-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=l,_=l+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ta.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=ta.event.x,n.py=ta.event.y,a.resume()}var e,r,u,i,o,a={},c=ta.dispatch("start","tick","end"),l=[1,1],s=.9,f=fl,h=hl,g=-30,p=gl,v=.1,d=.64,m=[],M=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,y,x,b=m.length,_=M.length;for(e=0;_>e;++e)a=M[e],f=a.source,h=a.target,y=h.x-f.x,x=h.y-f.y,(p=y*y+x*x)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,y*=p,x*=p,h.x-=y*(d=f.weight/(h.weight+f.weight)),h.y-=x*d,f.x+=y*(d=1-d),f.y+=x*d);if((d=r*v)&&(y=l[0]/2,x=l[1]/2,e=-1,d))for(;++e<b;)a=m[e],a.x+=(y-a.x)*d,a.y+=(x-a.y)*d;if(g)for(Ju(t=ta.geom.quadtree(m),r,o),e=-1;++e<b;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<b;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(M=n,a):M},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),ta.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=M[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=M.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=M[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,M[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,M[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=ta.behavior.drag().origin(y).on("dragstart.force",Xu).on("drag.force",t).on("dragend.force",$u)),arguments.length?void this.on("mouseover.force",Bu).on("mouseout.force",Wu).call(e):e},ta.rebind(a,c,"on")};var fl=20,hl=1,gl=1/0;ta.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Qu(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ei,e=ni,r=ti;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Ku(t,function(n){n.children&&(n.value=0)}),Qu(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ta.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=ta.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Gu(e,r)},ta.layout.pie=function(){function n(o){var a,c=o.length,l=o.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=(f-c*g)/ta.sum(l),v=ta.range(c),d=[];return null!=e&&v.sort(e===pl?function(n,t){return l[t]-l[n]}:function(n,t){return e(o[n],o[t])}),v.forEach(function(n){d[n]={data:o[n],value:a=l[n],startAngle:s,endAngle:s+=a*p+g,padAngle:h}}),d}var t=Number,e=pl,r=0,u=La,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var pl={};ta.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=ta.permute(l,f),s=ta.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=y,e=ai,r=ci,u=oi,i=ui,o=ii;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:vl.get(t)||ai,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:dl.get(t)||ci,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var vl=ta.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(li),i=n.map(si),o=ta.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return ta.range(n.length).reverse()},"default":ai}),dl=ta.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ci});ta.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[ta.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=pi,u=hi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return gi(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ta.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Qu(a,function(n){n.r=+s(n.value)}),Qu(a,Mi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Qu(a,function(n){n.r+=f}),Qu(a,Mi),Qu(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=ta.layout.hierarchy().sort(vi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Gu(n,e)},ta.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Qu(h,e),h.parent.m=-h.z,Ku(h,r),l)Ku(f,i);else{var g=f,p=f,v=f;Ku(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Ku(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ni(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=Ei(o),u=ki(u),o&&u;)c=ki(c),i=Ei(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ai(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!Ei(i)&&(i.t=o,i.m+=f-s),u&&!ki(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=ta.layout.hierarchy().sort(null).value(null),a=Si,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Gu(n,o)},ta.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Qu(c,function(n){var t=n.children;t&&t.length?(n.x=qi(t),n.y=zi(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Qu(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=ta.layout.hierarchy().sort(null).value(null),e=Si,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Gu(n,t)},ta.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=ta.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=Ri,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));
return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ri(t):Di(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Di(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ri:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Gu(i,a)},ta.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=ta.random.normal.apply(ta,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ta.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ta.scale={};var ml={floor:y,ceil:y};ta.scale.linear=function(){return Ii([0,1],[0,1],mu,!1)};var yl={s:1,g:1,p:1,r:1,e:1};ta.scale.log=function(){return Ji(ta.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ta.format(".0e"),xl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ta.scale.pow=function(){return Gi(ta.scale.linear(),1,[0,1])},ta.scale.sqrt=function(){return ta.scale.pow().exponent(.5)},ta.scale.ordinal=function(){return Qi([],{t:"range",a:[[]]})},ta.scale.category10=function(){return ta.scale.ordinal().range(bl)},ta.scale.category20=function(){return ta.scale.ordinal().range(_l)},ta.scale.category20b=function(){return ta.scale.ordinal().range(wl)},ta.scale.category20c=function(){return ta.scale.ordinal().range(Sl)};var bl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),_l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),wl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Sl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ta.scale.quantile=function(){return no([],[])},ta.scale.quantize=function(){return to(0,1,[0,1])},ta.scale.threshold=function(){return eo([.5],[0,1])},ta.scale.identity=function(){return ro([0,1])},ta.svg={},ta.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),s=o.apply(this,arguments)-Ra,f=a.apply(this,arguments)-Ra,h=Math.abs(f-s),g=s>f?0:1;if(n>l&&(p=l,l=n,n=p),h>=Ta)return t(l,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,E=0,A=0,N=[];if((m=(+c.apply(this,arguments)||0)/2)&&(d=i===kl?Math.sqrt(n*n+l*l):+i.apply(this,arguments),g||(A*=-1),l&&(A=tt(d/l*Math.sin(m))),n&&(E=tt(d/n*Math.sin(m)))),l){y=l*Math.cos(s+A),M=l*Math.sin(s+A),x=l*Math.cos(f-A),b=l*Math.sin(f-A);var C=Math.abs(f-s-2*A)<=qa?0:1;if(A&&so(y,M,x,b)===g^C){var z=(s+f)/2;y=l*Math.cos(z),M=l*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-E),w=n*Math.sin(f-E),S=n*Math.cos(s+E),k=n*Math.sin(s+E);var q=Math.abs(s-f+2*E)<=qa?0:1;if(E&&so(_,w,S,k)===1-g^q){var L=(s+f)/2;_=n*Math.cos(L),w=n*Math.sin(L),S=k=null}}else _=w=0;if((p=Math.min(Math.abs(l-n)/2,+u.apply(this,arguments)))>.001){v=l>n^g?0:1;var T=null==S?[_,w]:null==x?[y,M]:Lr([y,M],[S,k],[x,b],[_,w]),R=y-T[0],D=M-T[1],P=x-T[0],U=b-T[1],j=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),F=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(null!=x){var H=Math.min(p,(l-F)/(j+1)),O=fo(null==S?[_,w]:[S,k],[y,M],l,H,g),I=fo([x,b],[_,w],l,H,g);p===H?N.push("M",O[0],"A",H,",",H," 0 0,",v," ",O[1],"A",l,",",l," 0 ",1-g^so(O[1][0],O[1][1],I[1][0],I[1][1]),",",g," ",I[1],"A",H,",",H," 0 0,",v," ",I[0]):N.push("M",O[0],"A",H,",",H," 0 1,",v," ",I[0])}else N.push("M",y,",",M);if(null!=S){var Y=Math.min(p,(n-F)/(j-1)),Z=fo([y,M],[S,k],n,-Y,g),V=fo([_,w],null==x?[y,M]:[x,b],n,-Y,g);p===Y?N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^so(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",Y,",",Y," 0 0,",v," ",Z[0]):N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",Z[0])}else N.push("L",_,",",w)}else N.push("M",y,",",M),null!=x&&N.push("A",l,",",l," 0 ",C,",",g," ",x,",",b),N.push("L",_,",",w),null!=S&&N.push("A",n,",",n," 0 ",q,",",1-g," ",S,",",k);return N.push("Z"),N.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=io,r=oo,u=uo,i=kl,o=ao,a=co,c=lo;return n.innerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Et(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=Et(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==kl?kl:Et(t),n):i},n.startAngle=function(t){return arguments.length?(o=Et(t),n):o},n.endAngle=function(t){return arguments.length?(a=Et(t),n):a},n.padAngle=function(t){return arguments.length?(c=Et(t),n):c},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Ra;return[Math.cos(t)*n,Math.sin(t)*n]},n};var kl="auto";ta.svg.line=function(){return ho(y)};var El=ta.map({linear:go,"linear-closed":po,step:vo,"step-before":mo,"step-after":yo,basis:So,"basis-open":ko,"basis-closed":Eo,bundle:Ao,cardinal:bo,"cardinal-open":Mo,"cardinal-closed":xo,monotone:To});El.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Al=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],Cl=[0,1/6,2/3,1/6];ta.svg.line.radial=function(){var n=ho(Ro);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},mo.reverse=yo,yo.reverse=mo,ta.svg.area=function(){return Do(y)},ta.svg.area.radial=function(){var n=Do(Ro);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ta.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)-Ra,s=l.call(n,u,r)-Ra;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>qa)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Po,c=ao,l=co;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(l=Et(t),n):l},n},ta.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=Uo;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ta.svg.diagonal.radial=function(){var n=ta.svg.diagonal(),t=Uo,e=n.projection;return n.projection=function(n){return arguments.length?e(jo(t=n)):t},n},ta.svg.symbol=function(){function n(n,r){return(zl.get(t.call(this,n,r))||Oo)(e.call(this,n,r))}var t=Ho,e=Fo;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var zl=ta.map({circle:Oo,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ta.svg.symbolTypes=zl.keys();var ql=Math.sqrt(3),Ll=Math.tan(30*Da);_a.transition=function(n){for(var t,e,r=Tl||++Ul,u=Xo(n),i=[],o=Rl||{time:Date.now(),ease:Su,delay:0,duration:250},a=-1,c=this.length;++a<c;){i.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(e=l[s])&&$o(e,s,u,r,o),t.push(e)}return Yo(i,u,r)},_a.interrupt=function(n){return this.each(null==n?Dl:Io(Xo(n)))};var Tl,Rl,Dl=Io(Xo()),Pl=[],Ul=0;Pl.call=_a.call,Pl.empty=_a.empty,Pl.node=_a.node,Pl.size=_a.size,ta.transition=function(n,t){return n&&n.transition?Tl?n.transition(t):n:ta.selection().transition(n)},ta.transition.prototype=Pl,Pl.select=function(n){var t,e,r,u=this.id,i=this.namespace,o=[];n=N(n);for(var a=-1,c=this.length;++a<c;){o.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(r=l[s])&&(e=n.call(r,r.__data__,s,a))?("__data__"in r&&(e.__data__=r.__data__),$o(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Yo(o,i,u)},Pl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=this.namespace,c=[];n=C(n);for(var l=-1,s=this.length;++l<s;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[a][o],e=n.call(r,r.__data__,h,l),c.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&$o(u,p,a,o,i),t.push(u)}return Yo(c,a,o)},Pl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Yo(u,this.namespace,this.id)},Pl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Pl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Hu:mu,a=ta.ns.qualify(n);return Zo(this,"attr."+n,t,a.local?i:u)},Pl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=ta.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Pl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=mu(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Zo(this,"style."+n,e,i)},Pl.styleTween=function(n,e,r){function u(u,i){var o=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Pl.text=function(n){return Zo(this,"text",n,Vo)},Pl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Pl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ta.ease.apply(ta,arguments)),Y(this,function(r){r[e][t].ease=n}))},Pl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Pl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Pl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Rl,i=Tl;try{Tl=e,Y(this,function(t,u,i){Rl=t[r][e],n.call(t,t.__data__,u,i)})}finally{Rl=u,Tl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=ta.dispatch("start","end","interrupt"))).on(n,t)});return this},Pl.transition=function(){for(var n,t,e,r,u=this.id,i=++Ul,o=this.namespace,a=[],c=0,l=this.length;l>c;c++){a.push(n=[]);for(var t=this[c],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[o][u],$o(e,s,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Yo(a,o,i)},ta.svg.axis=function(){function n(n){n.each(function(){var n,l=ta.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):y:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ca),d=ta.transition(p.exit()).style("opacity",Ca).remove(),m=ta.transition(p.order()).style("opacity",1),M=Math.max(u,0)+o,x=Ui(f),b=l.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ta.transition(b));v.append("line"),v.append("text");var w,S,k,E,A=v.select("line"),N=m.select("line"),C=p.select("text").text(g),z=v.select("text"),q=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Bo,w="x",k="y",S="x2",E="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Wo,w="y",k="x",S="y2",E="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),A.attr(E,L*u),z.attr(k,L*M),N.attr(S,0).attr(E,L*u),q.attr(w,0).attr(k,L*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=ta.scale.linear(),r=jl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Fl?t+"":jl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var jl="bottom",Fl={top:1,right:1,bottom:1,left:1};ta.svg.brush=function(){function n(t){t.each(function(){var t=ta.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,y);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Hl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var c,f=ta.transition(t),h=ta.transition(o);l&&(c=Ui(l),h.attr("x",c[0]).attr("width",c[1]-c[0]),r(f)),s&&(c=Ui(s),h.attr("y",c[0]).attr("height",c[1]-c[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==ta.event.keyCode&&(C||(M=null,q[0]-=f[1],q[1]-=h[1],C=2),S())}function v(){32==ta.event.keyCode&&2==C&&(q[0]+=f[1],q[1]+=h[1],C=0,S())}function d(){var n=ta.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ta.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),q[0]=f[+(n[0]<M[0])],q[1]=h[+(n[1]<M[1])]):M=null),A&&m(n,l,0)&&(r(k),t=!0),N&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Ui(t),c=i[0],l=i[1],s=q[e],v=e?h:f,d=v[1]-v[0];return C&&(c-=s,l-=d+s),r=(e?p:g)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(c,Math.min(l,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?a=null:o=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ta.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ta.select(ta.event.target),w=c.of(b,arguments),k=ta.select(b),E=_.datum(),A=!/^(n|s)$/.test(E)&&l,N=!/^(e|w)$/.test(E)&&s,C=_.classed("extent"),z=W(b),q=ta.mouse(b),L=ta.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(ta.event.changedTouches?L.on("touchmove.brush",d).on("touchend.brush",y):L.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)q[0]=f[0]-q[0],q[1]=h[0]-q[1];else if(E){var T=+/w$/.test(E),R=+/^n/.test(E);x=[f[1-T]-q[0],h[1-R]-q[1]],q[0]=f[T],q[1]=h[R]}else ta.event.altKey&&(M=q.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ta.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,c=E(n,"brushstart","brush","brushend"),l=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Ol[0];return n.event=function(n){n.each(function(){var n=c.of(this,arguments),t={x:f,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Tl?ta.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=yu(f,t.x),r=yu(h,t.y);return o=a=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(l=t,v=Ol[!l<<1|!s],n):l},n.y=function(t){return arguments.length?(s=t,v=Ol[!l<<1|!s],n):s},n.clamp=function(t){return arguments.length?(l&&s?(g=!!t[0],p=!!t[1]):l?g=!!t:s&&(p=!!t),n):l&&s?[g,p]:l?g:s?p:null},n.extent=function(t){var e,r,u,i,c;return arguments.length?(l&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),o=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(c=e,e=r,r=c),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],l&&(u=u[1],i=i[1]),a=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(c=u,u=i,i=c),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(l&&(o?(e=o[0],r=o[1]):(e=f[0],r=f[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(c=e,e=r,r=c))),s&&(a?(u=a[0],i=a[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(c=u,u=i,i=c))),l&&s?[[e,u],[r,i]]:l?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!l&&f[0]==f[1]||!!s&&h[0]==h[1]},ta.rebind(n,c,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Il=ac.format=gc.timeFormat,Yl=Il.utc,Zl=Yl("%Y-%m-%dT%H:%M:%S.%LZ");Il.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Zl,Jo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Jo.toString=Zl.toString,ac.second=Ft(function(n){return new cc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ac.seconds=ac.second.range,ac.seconds.utc=ac.second.utc.range,ac.minute=Ft(function(n){return new cc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ac.minutes=ac.minute.range,ac.minutes.utc=ac.minute.utc.range,ac.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new cc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ac.hours=ac.hour.range,ac.hours.utc=ac.hour.utc.range,ac.month=Ft(function(n){return n=ac.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ac.months=ac.month.range,ac.months.utc=ac.month.utc.range;var Vl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xl=[[ac.second,1],[ac.second,5],[ac.second,15],[ac.second,30],[ac.minute,1],[ac.minute,5],[ac.minute,15],[ac.minute,30],[ac.hour,1],[ac.hour,3],[ac.hour,6],[ac.hour,12],[ac.day,1],[ac.day,2],[ac.week,1],[ac.month,1],[ac.month,3],[ac.year,1]],$l=Il.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ne]]),Bl={range:function(n,t,e){return ta.range(Math.ceil(n/e)*e,+t,e).map(Ko)},floor:y,ceil:y};Xl.year=ac.year,ac.scale=function(){return Go(ta.scale.linear(),Xl,$l)};var Wl=Xl.map(function(n){return[n[0].utc,n[1]]}),Jl=Yl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ne]]);Wl.year=ac.year.utc,ac.scale.utc=function(){return Go(ta.scale.linear(),Wl,Jl)},ta.text=At(function(n){return n.responseText}),ta.json=function(n,t){return Nt(n,"application/json",Qo,t)},ta.html=function(n,t){return Nt(n,"text/html",na,t)},ta.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(ta):"object"==typeof module&&module.exports&&(module.exports=ta),this.d3=ta}();
!function(a){"use strict";function b(a){this.owner=a}function c(a,b){if(Object.create)b.prototype=Object.create(a.prototype);else{var c=function(){};c.prototype=a.prototype,b.prototype=new c}return b.prototype.constructor=b,b}function d(a){var b=this.internal=new e(this);b.loadConfig(a),b.beforeInit(a),b.init(),b.afterInit(a),function c(a,b,d){Object.keys(a).forEach(function(e){b[e]=a[e].bind(d),Object.keys(a[e]).length>0&&c(a[e],b[e],d)})}(h,this,this)}function e(b){var c=this;c.d3=a.d3?a.d3:"undefined"!=typeof require?require("d3"):void 0,c.api=b,c.config=c.getDefaultConfig(),c.data={},c.cache={},c.axes={}}function f(a){b.call(this,a)}function g(a,b){function c(a,b){a.attr("transform",function(a){return"translate("+Math.ceil(b(a)+u)+", 0)"})}function d(a,b){a.attr("transform",function(a){return"translate(0,"+Math.ceil(b(a))+")"})}function e(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function f(a){var b,c,d=[];if(a.ticks)return a.ticks.apply(a,n);for(c=a.domain(),b=Math.ceil(c[0]);b<c[1];b++)d.push(b);return d.length>0&&d[0]>0&&d.unshift(d[0]-(d[1]-d[0])),d}function g(){var a,c=p.copy();return b.isCategory&&(a=p.domain(),c.domain([a[0],a[1]-1])),c}function h(a){var b=m?m(a):a;return"undefined"!=typeof b?b:""}function i(a){if(z)return z;var b={h:11.5,w:5.5};return a.select("text").text(h).each(function(a){var c=this.getBoundingClientRect(),d=h(a),e=c.height,f=d?c.width/d.length:void 0;e&&f&&(b.h=e,b.w=f)}).text(""),z=b,b}function j(c){return b.withoutTransition?c:a.transition(c)}function k(m){m.each(function(){function m(a,c){function d(a,b){f=void 0;for(var h=1;h<b.length;h++)if(" "===b.charAt(h)&&(f=h),e=b.substr(0,h+1),g=U.w*e.length,g>c)return d(a.concat(b.substr(0,f?f:h)),b.slice(f?f+1:h));return a.concat(b)}var e,f,g,i=h(a),j=[];return"[object Array]"===Object.prototype.toString.call(i)?i:((!c||0>=c)&&(c=X?95:b.isCategory?Math.ceil(F(G[1])-F(G[0]))-12:110),d(j,i+""))}function n(a,b){var c=U.h;return 0===b&&(c="left"===q||"right"===q?-((V[a.index]-1)*(U.h/2)-3):".71em"),c}function v(a){var b=p(a)+(o?0:u);return L[0]<b&&b<L[1]?r:0}function w(a){return a?a>0?"start":"end":"middle"}function x(a){return a?"rotate("+a+")":""}function y(a){return a?8*Math.sin(Math.PI*(a/180)):0}function z(a){return a?11.5-2.5*(a/15)*(a>0?1:-1):W}var A,B,C,D=k.g=a.select(this),E=this.__chart__||p,F=this.__chart__=g(),G=t?t:f(F),H=D.selectAll(".tick").data(G,F),I=H.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=H.exit().remove(),K=j(H).style("opacity",1),L=p.rangeExtent?p.rangeExtent():e(p.range()),M=D.selectAll(".domain").data([0]),N=(M.enter().append("path").attr("class","domain"),j(M));I.append("line"),I.append("text");var O=I.select("line"),P=K.select("line"),Q=I.select("text"),R=K.select("text");b.isCategory?(u=Math.ceil((F(1)-F(0))/2),B=o?0:u,C=o?u:0):u=B=0;var S,T,U=i(D.select(".tick")),V=[],W=Math.max(r,0)+s,X="left"===q||"right"===q;S=H.select("text"),T=S.selectAll("tspan").data(function(a,c){var d=b.tickMultiline?m(a,b.tickWidth):[].concat(h(a));return V[c]=d.length,d.map(function(a){return{index:c,splitted:a}})}),T.enter().append("tspan"),T.exit().remove(),T.text(function(a){return a.splitted});var Y=b.tickTextRotate;switch(q){case"bottom":A=c,O.attr("y2",r),Q.attr("y",W),P.attr("x1",B).attr("x2",B).attr("y2",v),R.attr("x",0).attr("y",z(Y)).style("text-anchor",w(Y)).attr("transform",x(Y)),T.attr("x",0).attr("dy",n).attr("dx",y(Y)),N.attr("d","M"+L[0]+","+l+"V0H"+L[1]+"V"+l);break;case"top":A=c,O.attr("y2",-r),Q.attr("y",-W),P.attr("x2",0).attr("y2",-r),R.attr("x",0).attr("y",-W),S.style("text-anchor","middle"),T.attr("x",0).attr("dy","0em"),N.attr("d","M"+L[0]+","+-l+"V0H"+L[1]+"V"+-l);break;case"left":A=d,O.attr("x2",-r),Q.attr("x",-W),P.attr("x2",-r).attr("y1",C).attr("y2",C),R.attr("x",-W).attr("y",u),S.style("text-anchor","end"),T.attr("x",-W).attr("dy",n),N.attr("d","M"+-l+","+L[0]+"H0V"+L[1]+"H"+-l);break;case"right":A=d,O.attr("x2",r),Q.attr("x",W),P.attr("x2",r).attr("y2",0),R.attr("x",W).attr("y",0),S.style("text-anchor","start"),T.attr("x",W).attr("dy",n),N.attr("d","M"+l+","+L[0]+"H0V"+L[1]+"H"+l)}if(F.rangeBand){var Z=F,$=Z.rangeBand()/2;E=F=function(a){return Z(a)+$}}else E.rangeBand?E=F:J.call(A,F);I.call(A,E),K.call(A,F)})}var l,m,n,o,p=a.scale.linear(),q="bottom",r=6,s=3,t=null,u=0,v=!0;return b=b||{},l=b.withOuterTick?6:0,k.scale=function(a){return arguments.length?(p=a,k):p},k.orient=function(a){return arguments.length?(q=a in{top:1,right:1,bottom:1,left:1}?a+"":"bottom",k):q},k.tickFormat=function(a){return arguments.length?(m=a,k):m},k.tickCentered=function(a){return arguments.length?(o=a,k):o},k.tickOffset=function(){return u},k.tickInterval=function(){var a,c;return b.isCategory?a=2*u:(c=k.g.select("path.domain").node().getTotalLength()-2*l,a=c/k.g.selectAll("line").size()),a===1/0?0:a},k.ticks=function(){return arguments.length?(n=arguments,k):n},k.tickCulling=function(a){return arguments.length?(v=a,k):v},k.tickValues=function(a){if("function"==typeof a)t=function(){return a(p.domain())};else{if(!arguments.length)return t;t=a}return k},k}var h,i,j,k={version:"0.4.11-rc4"};k.generate=function(a){return new d(a)},k.chart={fn:d.prototype,internal:{fn:e.prototype,axis:{fn:f.prototype}}},h=k.chart.fn,i=k.chart.internal.fn,j=k.chart.internal.axis.fn,i.beforeInit=function(){},i.afterInit=function(){},i.init=function(){var a=this,b=a.config;if(a.initParams(),b.data_url)a.convertUrlToData(b.data_url,b.data_mimeType,b.data_keys,a.initWithData);else if(b.data_json)a.initWithData(a.convertJsonToData(b.data_json,b.data_keys));else if(b.data_rows)a.initWithData(a.convertRowsToData(b.data_rows));else{if(!b.data_columns)throw Error("url or json or rows or columns is required.");a.initWithData(a.convertColumnsToData(b.data_columns))}},i.initParams=function(){var a=this,b=a.d3,c=a.config;a.clipId="c3-"+ +new Date+"-clip",a.clipIdForXAxis=a.clipId+"-xaxis",a.clipIdForYAxis=a.clipId+"-yaxis",a.clipIdForGrid=a.clipId+"-grid",a.clipIdForSubchart=a.clipId+"-subchart",a.clipPath=a.getClipPath(a.clipId),a.clipPathForXAxis=a.getClipPath(a.clipIdForXAxis),a.clipPathForYAxis=a.getClipPath(a.clipIdForYAxis),a.clipPathForGrid=a.getClipPath(a.clipIdForGrid),a.clipPathForSubchart=a.getClipPath(a.clipIdForSubchart),a.dragStart=null,a.dragging=!1,a.flowing=!1,a.cancelClick=!1,a.mouseover=!1,a.transiting=!1,a.color=a.generateColor(),a.levelColor=a.generateLevelColor(),a.dataTimeFormat=c.data_xLocaltime?b.time.format:b.time.format.utc,a.axisTimeFormat=c.axis_x_localtime?b.time.format:b.time.format.utc,a.defaultAxisTimeFormat=a.axisTimeFormat.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%-m/%-d",function(a){return a.getDay()&&1!==a.getDate()}],["%-m/%-d",function(a){return 1!==a.getDate()}],["%-m/%-d",function(a){return a.getMonth()}],["%Y/%-m/%-d",function(){return!0}]]),a.hiddenTargetIds=[],a.hiddenLegendIds=[],a.focusedTargetIds=[],a.defocusedTargetIds=[],a.xOrient=c.axis_rotated?"left":"bottom",a.yOrient=c.axis_rotated?c.axis_y_inner?"top":"bottom":c.axis_y_inner?"right":"left",a.y2Orient=c.axis_rotated?c.axis_y2_inner?"bottom":"top":c.axis_y2_inner?"left":"right",a.subXOrient=c.axis_rotated?"left":"bottom",a.isLegendRight="right"===c.legend_position,a.isLegendInset="inset"===c.legend_position,a.isLegendTop="top-left"===c.legend_inset_anchor||"top-right"===c.legend_inset_anchor,a.isLegendLeft="top-left"===c.legend_inset_anchor||"bottom-left"===c.legend_inset_anchor,a.legendStep=0,a.legendItemWidth=0,a.legendItemHeight=0,a.currentMaxTickWidths={x:0,y:0,y2:0},a.rotated_padding_left=30,a.rotated_padding_right=c.axis_rotated&&!c.axis_x_show?0:30,a.rotated_padding_top=5,a.withoutFadeIn={},a.intervalForObserveInserted=void 0,a.axes.subx=b.selectAll([])},i.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},i.initWithData=function(a){var b,c,d=this,e=d.d3,g=d.config,h=!0;d.axis=new f(d),d.initPie&&d.initPie(),d.initBrush&&d.initBrush(),d.initZoom&&d.initZoom(),g.bindto?"function"==typeof g.bindto.node?d.selectChart=g.bindto:d.selectChart=e.select(g.bindto):d.selectChart=e.selectAll([]),d.selectChart.empty()&&(d.selectChart=e.select(document.createElement("div")).style("opacity",0),d.observeInserted(d.selectChart),h=!1),d.selectChart.html("").classed("c3",!0),d.data.xs={},d.data.targets=d.convertDataToTargets(a),g.data_filter&&(d.data.targets=d.data.targets.filter(g.data_filter)),g.data_hide&&d.addHiddenTargetIds(g.data_hide===!0?d.mapToIds(d.data.targets):g.data_hide),g.legend_hide&&d.addHiddenLegendIds(g.legend_hide===!0?d.mapToIds(d.data.targets):g.legend_hide),d.hasType("gauge")&&(g.legend_show=!1),d.updateSizes(),d.updateScales(),d.x.domain(e.extent(d.getXDomain(d.data.targets))),d.y.domain(d.getYDomain(d.data.targets,"y")),d.y2.domain(d.getYDomain(d.data.targets,"y2")),d.subX.domain(d.x.domain()),d.subY.domain(d.y.domain()),d.subY2.domain(d.y2.domain()),d.orgXDomain=d.x.domain(),d.brush&&d.brush.scale(d.subX),g.zoom_enabled&&d.zoom.scale(d.x),d.svg=d.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return g.onmouseover.call(d)}).on("mouseleave",function(){return g.onmouseout.call(d)}),d.config.svg_classname&&d.svg.attr("class",d.config.svg_classname),b=d.svg.append("defs"),d.clipChart=d.appendClip(b,d.clipId),d.clipXAxis=d.appendClip(b,d.clipIdForXAxis),d.clipYAxis=d.appendClip(b,d.clipIdForYAxis),d.clipGrid=d.appendClip(b,d.clipIdForGrid),d.clipSubchart=d.appendClip(b,d.clipIdForSubchart),d.updateSvgSize(),c=d.main=d.svg.append("g").attr("transform",d.getTranslate("main")),d.initSubchart&&d.initSubchart(),d.initTooltip&&d.initTooltip(),d.initLegend&&d.initLegend(),d.initTitle&&d.initTitle(),c.append("text").attr("class",l.text+" "+l.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),d.initRegion(),d.initGrid(),c.append("g").attr("clip-path",d.clipPath).attr("class",l.chart),g.grid_lines_front&&d.initGridLines(),d.initEventRect(),d.initChartElements(),c.insert("rect",g.zoom_privileged?null:"g."+l.regions).attr("class",l.zoomRect).attr("width",d.width).attr("height",d.height).style("opacity",0).on("dblclick.zoom",null),g.axis_x_extent&&d.brush.extent(d.getDefaultExtent()),d.axis.init(),d.updateTargets(d.data.targets),h&&(d.updateDimension(),d.config.oninit.call(d),d.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),d.bindResize(),d.api.element=d.selectChart.node()},i.smoothLines=function(a,b){var c=this;"grid"===b&&a.each(function(){var a=c.d3.select(this),b=a.attr("x1"),d=a.attr("x2"),e=a.attr("y1"),f=a.attr("y2");a.attr({x1:Math.ceil(b),x2:Math.ceil(d),y1:Math.ceil(e),y2:Math.ceil(f)})})},i.updateSizes=function(){var a=this,b=a.config,c=a.legend?a.getLegendHeight():0,d=a.legend?a.getLegendWidth():0,e=a.isLegendRight||a.isLegendInset?0:c,f=a.hasArcType(),g=b.axis_rotated||f?0:a.getHorizontalAxisHeight("x"),h=b.subchart_show&&!f?b.subchart_size_height+g:0;a.currentWidth=a.getCurrentWidth(),a.currentHeight=a.getCurrentHeight(),a.margin=b.axis_rotated?{top:a.getHorizontalAxisHeight("y2")+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:a.getHorizontalAxisHeight("y")+e+a.getCurrentPaddingBottom(),left:h+(f?0:a.getCurrentPaddingLeft())}:{top:4+a.getCurrentPaddingTop(),right:f?0:a.getCurrentPaddingRight(),bottom:g+h+e+a.getCurrentPaddingBottom(),left:f?0:a.getCurrentPaddingLeft()},a.margin2=b.axis_rotated?{top:a.margin.top,right:NaN,bottom:20+e,left:a.rotated_padding_left}:{top:a.currentHeight-h-e,right:NaN,bottom:g+e,left:a.margin.left},a.margin3={top:0,right:NaN,bottom:0,left:0},a.updateSizeForLegend&&a.updateSizeForLegend(c,d),a.width=a.currentWidth-a.margin.left-a.margin.right,a.height=a.currentHeight-a.margin.top-a.margin.bottom,a.width<0&&(a.width=0),a.height<0&&(a.height=0),a.width2=b.axis_rotated?a.margin.left-a.rotated_padding_left-a.rotated_padding_right:a.width,a.height2=b.axis_rotated?a.height:a.currentHeight-a.margin2.top-a.margin2.bottom,a.width2<0&&(a.width2=0),a.height2<0&&(a.height2=0),a.arcWidth=a.width-(a.isLegendRight?d+10:0),a.arcHeight=a.height-(a.isLegendRight?0:10),a.hasType("gauge")&&(a.arcHeight+=a.height-a.getGaugeLabelHeight()),a.updateRadius&&a.updateRadius(),a.isLegendRight&&f&&(a.margin3.left=a.arcWidth/2+1.1*a.radiusExpanded)},i.updateTargets=function(a){var b=this;b.updateTargetsForText(a),b.updateTargetsForBar(a),b.updateTargetsForLine(a),b.hasArcType()&&b.updateTargetsForArc&&b.updateTargetsForArc(a),b.updateTargetsForSubchart&&b.updateTargetsForSubchart(a),b.showTargets()},i.showTargets=function(){var a=this;a.svg.selectAll("."+l.target).filter(function(b){return a.isTargetToShow(b.id)}).transition().duration(a.config.transition_duration).style("opacity",1)},i.redraw=function(a,b){var c,d,e,f,g,h,i,j,k,m,n,o,p,q,r,s,t,u,v,x,y,z,A,B,C,D,E,F,G,H=this,I=H.main,J=H.d3,K=H.config,L=H.getShapeIndices(H.isAreaType),M=H.getShapeIndices(H.isBarType),N=H.getShapeIndices(H.isLineType),O=H.hasArcType(),P=H.filterTargetsToShow(H.data.targets),Q=H.xv.bind(H);if(a=a||{},c=w(a,"withY",!0),d=w(a,"withSubchart",!0),e=w(a,"withTransition",!0),h=w(a,"withTransform",!1),i=w(a,"withUpdateXDomain",!1),j=w(a,"withUpdateOrgXDomain",!1),k=w(a,"withTrimXDomain",!0),p=w(a,"withUpdateXAxis",i),m=w(a,"withLegend",!1),n=w(a,"withEventRect",!0),o=w(a,"withDimension",!0),f=w(a,"withTransitionForExit",e),g=w(a,"withTransitionForAxis",e),v=e?K.transition_duration:0,x=f?v:0,y=g?v:0,b=b||H.axis.generateTransitions(y),m&&K.legend_show?H.updateLegend(H.mapToIds(H.data.targets),a,b):o&&H.updateDimension(!0),H.isCategorized()&&0===P.length&&H.x.domain([0,H.axes.x.selectAll(".tick").size()]),P.length?(H.updateXDomain(P,i,j,k),K.axis_x_tick_values||(B=H.axis.updateXAxisTickValues(P))):(H.xAxis.tickValues([]),H.subXAxis.tickValues([])),K.zoom_rescale&&!a.flow&&(E=H.x.orgDomain()),H.y.domain(H.getYDomain(P,"y",E)),H.y2.domain(H.getYDomain(P,"y2",E)),!K.axis_y_tick_values&&K.axis_y_tick_count&&H.yAxis.tickValues(H.axis.generateTickValues(H.y.domain(),K.axis_y_tick_count)),!K.axis_y2_tick_values&&K.axis_y2_tick_count&&H.y2Axis.tickValues(H.axis.generateTickValues(H.y2.domain(),K.axis_y2_tick_count)),H.axis.redraw(b,O),H.axis.updateLabels(e),(i||p)&&P.length)if(K.axis_x_tick_culling&&B){for(C=1;C<B.length;C++)if(B.length/C<K.axis_x_tick_culling_max){D=C;break}H.svg.selectAll("."+l.axisX+" .tick text").each(function(a){var b=B.indexOf(a);b>=0&&J.select(this).style("display",b%D?"none":"block")})}else H.svg.selectAll("."+l.axisX+" .tick text").style("display","block");q=H.generateDrawArea?H.generateDrawArea(L,!1):void 0,r=H.generateDrawBar?H.generateDrawBar(M):void 0,s=H.generateDrawLine?H.generateDrawLine(N,!1):void 0,t=H.generateXYForText(L,M,N,!0),u=H.generateXYForText(L,M,N,!1),c&&(H.subY.domain(H.getYDomain(P,"y")),H.subY2.domain(H.getYDomain(P,"y2"))),H.updateXgridFocus(),I.select("text."+l.text+"."+l.empty).attr("x",H.width/2).attr("y",H.height/2).text(K.data_empty_label_text).transition().style("opacity",P.length?0:1),H.updateGrid(v),H.updateRegion(v),H.updateBar(x),H.updateLine(x),H.updateArea(x),H.updateCircle(),H.hasDataLabel()&&H.updateText(x),H.redrawTitle&&H.redrawTitle(),H.redrawArc&&H.redrawArc(v,x,h),H.redrawSubchart&&H.redrawSubchart(d,b,v,x,L,M,N),I.selectAll("."+l.selectedCircles).filter(H.isBarType.bind(H)).selectAll("circle").remove(),K.interaction_enabled&&!a.flow&&n&&(H.redrawEventRect(),H.updateZoom&&H.updateZoom()),H.updateCircleY(),F=(H.config.axis_rotated?H.circleY:H.circleX).bind(H),G=(H.config.axis_rotated?H.circleX:H.circleY).bind(H),a.flow&&(A=H.generateFlow({targets:P,flow:a.flow,duration:a.flow.duration,drawBar:r,drawLine:s,drawArea:q,cx:F,cy:G,xv:Q,xForText:t,yForText:u})),(v||A)&&H.isTabVisible()?J.transition().duration(v).each(function(){var b=[];[H.redrawBar(r,!0),H.redrawLine(s,!0),H.redrawArea(q,!0),H.redrawCircle(F,G,!0),H.redrawText(t,u,a.flow,!0),H.redrawRegion(!0),H.redrawGrid(!0)].forEach(function(a){a.forEach(function(a){b.push(a)})}),z=H.generateWait(),b.forEach(function(a){z.add(a)})}).call(z,function(){A&&A(),K.onrendered&&K.onrendered.call(H)}):(H.redrawBar(r),H.redrawLine(s),H.redrawArea(q),H.redrawCircle(F,G),H.redrawText(t,u,a.flow),H.redrawRegion(),H.redrawGrid(),K.onrendered&&K.onrendered.call(H)),H.mapToIds(H.data.targets).forEach(function(a){H.withoutFadeIn[a]=!0})},i.updateAndRedraw=function(a){var b,c=this,d=c.config;a=a||{},a.withTransition=w(a,"withTransition",!0),a.withTransform=w(a,"withTransform",!1),a.withLegend=w(a,"withLegend",!1),a.withUpdateXDomain=!0,a.withUpdateOrgXDomain=!0,a.withTransitionForExit=!1,a.withTransitionForTransform=w(a,"withTransitionForTransform",a.withTransition),c.updateSizes(),a.withLegend&&d.legend_show||(b=c.axis.generateTransitions(a.withTransitionForAxis?d.transition_duration:0),c.updateScales(),c.updateSvgSize(),c.transformAll(a.withTransitionForTransform,b)),c.redraw(a,b)},i.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},i.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},i.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},i.isCustomX=function(){var a=this,b=a.config;return!a.isTimeSeries()&&(b.data_x||v(b.data_xs))},i.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},i.getTranslate=function(a){var b,c,d=this,e=d.config;return"main"===a?(b=s(d.margin.left),c=s(d.margin.top)):"context"===a?(b=s(d.margin2.left),c=s(d.margin2.top)):"legend"===a?(b=d.margin3.left,c=d.margin3.top):"x"===a?(b=0,c=e.axis_rotated?0:d.height):"y"===a?(b=0,c=e.axis_rotated?d.height:0):"y2"===a?(b=e.axis_rotated?0:d.width,c=e.axis_rotated?1:0):"subx"===a?(b=0,c=e.axis_rotated?0:d.height2):"arc"===a&&(b=d.arcWidth/2,c=d.arcHeight/2),"translate("+b+","+c+")"},i.initialOpacity=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?1:0},i.initialOpacityForCircle=function(a){return null!==a.value&&this.withoutFadeIn[a.id]?this.opacityForCircle(a):0},i.opacityForCircle=function(a){var b=this.config.point_show?1:0;return m(a.value)?this.isScatterType(a)?.5:b:0},i.opacityForText=function(){return this.hasDataLabel()?1:0},i.xx=function(a){return a?this.x(a.x):null},i.xv=function(a){var b=this,c=a.value;return b.isTimeSeries()?c=b.parseDate(a.value):b.isCategorized()&&"string"==typeof a.value&&(c=b.config.axis_x_categories.indexOf(a.value)),Math.ceil(b.x(c))},i.yv=function(a){var b=this,c=a.axis&&"y2"===a.axis?b.y2:b.y;return Math.ceil(c(a.value))},i.subxx=function(a){return a?this.subX(a.x):null},i.transformMain=function(a,b){var c,d,e,f=this;b&&b.axisX?c=b.axisX:(c=f.main.select("."+l.axisX),a&&(c=c.transition())),b&&b.axisY?d=b.axisY:(d=f.main.select("."+l.axisY),a&&(d=d.transition())),b&&b.axisY2?e=b.axisY2:(e=f.main.select("."+l.axisY2),a&&(e=e.transition())),(a?f.main.transition():f.main).attr("transform",f.getTranslate("main")),c.attr("transform",f.getTranslate("x")),d.attr("transform",f.getTranslate("y")),e.attr("transform",f.getTranslate("y2")),f.main.select("."+l.chartArcs).attr("transform",f.getTranslate("arc"))},i.transformAll=function(a,b){var c=this;c.transformMain(a,b),c.config.subchart_show&&c.transformContext(a,b),c.legend&&c.transformLegend(a)},i.updateSvgSize=function(){var a=this,b=a.svg.select(".c3-brush .background");a.svg.attr("width",a.currentWidth).attr("height",a.currentHeight),a.svg.selectAll(["#"+a.clipId,"#"+a.clipIdForGrid]).select("rect").attr("width",a.width).attr("height",a.height),a.svg.select("#"+a.clipIdForXAxis).select("rect").attr("x",a.getXAxisClipX.bind(a)).attr("y",a.getXAxisClipY.bind(a)).attr("width",a.getXAxisClipWidth.bind(a)).attr("height",a.getXAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForYAxis).select("rect").attr("x",a.getYAxisClipX.bind(a)).attr("y",a.getYAxisClipY.bind(a)).attr("width",a.getYAxisClipWidth.bind(a)).attr("height",a.getYAxisClipHeight.bind(a)),a.svg.select("#"+a.clipIdForSubchart).select("rect").attr("width",a.width).attr("height",b.size()?b.attr("height"):0),a.svg.select("."+l.zoomRect).attr("width",a.width).attr("height",a.height),a.selectChart.style("max-height",a.currentHeight+"px")},i.updateDimension=function(a){var b=this;a||(b.config.axis_rotated?(b.axes.x.call(b.xAxis),b.axes.subx.call(b.subXAxis)):(b.axes.y.call(b.yAxis),b.axes.y2.call(b.y2Axis))),b.updateSizes(),b.updateScales(),b.updateSvgSize(),b.transformAll(!1)},i.observeInserted=function(b){var c,d=this;return"undefined"==typeof MutationObserver?void a.console.error("MutationObserver not defined."):(c=new MutationObserver(function(e){e.forEach(function(e){"childList"===e.type&&e.previousSibling&&(c.disconnect(),d.intervalForObserveInserted=a.setInterval(function(){b.node().parentNode&&(a.clearInterval(d.intervalForObserveInserted),d.updateDimension(),d.brush&&d.brush.update(),d.config.oninit.call(d),d.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),b.transition().style("opacity",1))},10))})}),void c.observe(b.node(),{attributes:!0,childList:!0,characterData:!0}))},i.bindResize=function(){var b=this,c=b.config;if(b.resizeFunction=b.generateResize(),b.resizeFunction.add(function(){c.onresize.call(b)}),c.resize_auto&&b.resizeFunction.add(function(){void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),b.resizeTimeout=a.setTimeout(function(){delete b.resizeTimeout,b.api.flush()},100)}),b.resizeFunction.add(function(){c.onresized.call(b)}),a.attachEvent)a.attachEvent("onresize",b.resizeFunction);else if(a.addEventListener)a.addEventListener("resize",b.resizeFunction,!1);else{var d=a.onresize;d?d.add&&d.remove||(d=b.generateResize(),d.add(a.onresize)):d=b.generateResize(),d.add(b.resizeFunction),a.onresize=d}},i.generateResize=function(){function a(){b.forEach(function(a){a()})}var b=[];return a.add=function(a){b.push(a)},a.remove=function(a){for(var c=0;c<b.length;c++)if(b[c]===a){b.splice(c,1);break}},a},i.endall=function(a,b){var c=0;a.each(function(){++c}).each("end",function(){--c||b.apply(this,arguments)})},i.generateWait=function(){var a=[],b=function(b,c){var d=setInterval(function(){var b=0;a.forEach(function(a){if(a.empty())return void(b+=1);try{a.transition()}catch(c){b+=1}}),b===a.length&&(clearInterval(d),c&&c())},10)};return b.add=function(b){a.push(b)},b},i.parseDate=function(b){var c,d=this;return b instanceof Date?c=b:"string"==typeof b?c=d.dataTimeFormat(d.config.data_xFormat).parse(b):"number"!=typeof b||isNaN(b)||(c=new Date(+b)),(!c||isNaN(+c))&&a.console.error("Failed to parse x '"+b+"' to Date object"),c},i.isTabVisible=function(){var a;return"undefined"!=typeof document.hidden?a="hidden":"undefined"!=typeof document.mozHidden?a="mozHidden":"undefined"!=typeof document.msHidden?a="msHidden":"undefined"!=typeof document.webkitHidden&&(a="webkitHidden"),document[a]?!1:!0},i.getDefaultConfig=function(){var a={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(a){return a},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(a,b,c,d){return this.getTooltipContent?this.getTooltipContent(a,b,c,d):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(b){a[b]=this.additionalConfig[b]},this),a},i.additionalConfig={},i.loadConfig=function(a){function b(){var a=d.shift();return a&&c&&"object"==typeof c&&a in c?(c=c[a],b()):a?void 0:c}var c,d,e,f=this.config;Object.keys(f).forEach(function(g){c=a,d=g.split("_"),e=b(),q(e)&&(f[g]=e)})},i.getScale=function(a,b,c){return(c?this.d3.time.scale():this.d3.scale.linear()).range([a,b])},i.getX=function(a,b,c,d){var e,f=this,g=f.getScale(a,b,f.isTimeSeries()),h=c?g.domain(c):g;f.isCategorized()?(d=d||function(){return 0},g=function(a,b){var c=h(a)+d(a);return b?c:Math.ceil(c)}):g=function(a,b){var c=h(a);return b?c:Math.ceil(c)};for(e in h)g[e]=h[e];return g.orgDomain=function(){return h.domain()},f.isCategorized()&&(g.domain=function(a){return arguments.length?(h.domain(a),g):(a=this.orgDomain(),[a[0],a[1]+1])}),g},i.getY=function(a,b,c){var d=this.getScale(a,b,this.isTimeSeriesY());return c&&d.domain(c),d},i.getYScale=function(a){return"y2"===this.axis.getId(a)?this.y2:this.y},i.getSubYScale=function(a){return"y2"===this.axis.getId(a)?this.subY2:this.subY},i.updateScales=function(){var a=this,b=a.config,c=!a.x;a.xMin=b.axis_rotated?1:0,a.xMax=b.axis_rotated?a.height:a.width,a.yMin=b.axis_rotated?0:a.height,a.yMax=b.axis_rotated?a.width:1,a.subXMin=a.xMin,a.subXMax=a.xMax,a.subYMin=b.axis_rotated?0:a.height2,a.subYMax=b.axis_rotated?a.width2:1,a.x=a.getX(a.xMin,a.xMax,c?void 0:a.x.orgDomain(),function(){return a.xAxis.tickOffset()}),a.y=a.getY(a.yMin,a.yMax,c?b.axis_y_default:a.y.domain()),a.y2=a.getY(a.yMin,a.yMax,c?b.axis_y2_default:a.y2.domain()),a.subX=a.getX(a.xMin,a.xMax,a.orgXDomain,function(b){return b%1?0:a.subXAxis.tickOffset()}),a.subY=a.getY(a.subYMin,a.subYMax,c?b.axis_y_default:a.subY.domain()),a.subY2=a.getY(a.subYMin,a.subYMax,c?b.axis_y2_default:a.subY2.domain()),a.xAxisTickFormat=a.axis.getXAxisTickFormat(),a.xAxisTickValues=a.axis.getXAxisTickValues(),a.yAxisTickValues=a.axis.getYAxisTickValues(),a.y2AxisTickValues=a.axis.getY2AxisTickValues(),a.xAxis=a.axis.getXAxis(a.x,a.xOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.subXAxis=a.axis.getXAxis(a.subX,a.subXOrient,a.xAxisTickFormat,a.xAxisTickValues,b.axis_x_tick_outer),a.yAxis=a.axis.getYAxis(a.y,a.yOrient,b.axis_y_tick_format,a.yAxisTickValues,b.axis_y_tick_outer),a.y2Axis=a.axis.getYAxis(a.y2,a.y2Orient,b.axis_y2_tick_format,a.y2AxisTickValues,b.axis_y2_tick_outer),c||(a.brush&&a.brush.scale(a.subX),b.zoom_enabled&&a.zoom.scale(a.x)),a.updateArc&&a.updateArc()},i.getYDomainMin=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasNegativeValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=0>a?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&+a>0||(k[d][b]+=+a)});return h.d3.min(Object.keys(k).map(function(a){return h.d3.min(k[a])}))},i.getYDomainMax=function(a){var b,c,d,e,f,g,h=this,i=h.config,j=h.mapToIds(a),k=h.getValuesAsIdKeyed(a);if(i.data_groups.length>0)for(g=h.hasPositiveValueInTargets(a),b=0;b<i.data_groups.length;b++)if(e=i.data_groups[b].filter(function(a){return j.indexOf(a)>=0}),0!==e.length)for(d=e[0],g&&k[d]&&k[d].forEach(function(a,b){k[d][b]=a>0?a:0}),c=1;c<e.length;c++)f=e[c],k[f]&&k[f].forEach(function(a,b){h.axis.getId(f)!==h.axis.getId(d)||!k[d]||g&&0>+a||(k[d][b]+=+a)});return h.d3.max(Object.keys(k).map(function(a){return h.d3.max(k[a])}))},i.getYDomain=function(a,b,c){var d,e,f,g,h,i,j,k,l,n,o,p=this,q=p.config,r=a.filter(function(a){return p.axis.getId(a.id)===b}),s=c?p.filterByXDomain(r,c):r,u="y2"===b?q.axis_y2_min:q.axis_y_min,w="y2"===b?q.axis_y2_max:q.axis_y_max,x=p.getYDomainMin(s),y=p.getYDomainMax(s),z="y2"===b?q.axis_y2_center:q.axis_y_center,A=p.hasType("bar",s)&&q.bar_zerobased||p.hasType("area",s)&&q.area_zerobased,B="y2"===b?q.axis_y2_inverted:q.axis_y_inverted,C=p.hasDataLabel()&&q.axis_rotated,D=p.hasDataLabel()&&!q.axis_rotated;return x=m(u)?u:m(w)?w>x?x:w-10:x,y=m(w)?w:m(u)?y>u?y:u+10:y,0===s.length?"y2"===b?p.y2.domain():p.y.domain():(isNaN(x)&&(x=0),isNaN(y)&&(y=x),x===y&&(0>x?y=0:x=0),n=x>=0&&y>=0,o=0>=x&&0>=y,(m(u)&&n||m(w)&&o)&&(A=!1),A&&(n&&(x=0),o&&(y=0)),e=Math.abs(y-x),f=g=h=.1*e,"undefined"!=typeof z&&(i=Math.max(Math.abs(x),Math.abs(y)),y=z+i,x=z-i),C?(j=p.getDataLabelLength(x,y,"width"),k=t(p.y.range()),l=[j[0]/k,j[1]/k],g+=e*(l[1]/(1-l[0]-l[1])),h+=e*(l[0]/(1-l[0]-l[1]))):D&&(j=p.getDataLabelLength(x,y,"height"),g+=p.axis.convertPixelsToAxisPadding(j[1],e),h+=p.axis.convertPixelsToAxisPadding(j[0],e)),"y"===b&&v(q.axis_y_padding)&&(g=p.axis.getPadding(q.axis_y_padding,"top",g,e),
h=p.axis.getPadding(q.axis_y_padding,"bottom",h,e)),"y2"===b&&v(q.axis_y2_padding)&&(g=p.axis.getPadding(q.axis_y2_padding,"top",g,e),h=p.axis.getPadding(q.axis_y2_padding,"bottom",h,e)),A&&(n&&(h=x),o&&(g=-y)),d=[x-h,y+g],B?d.reverse():d)},i.getXDomainMin=function(a){var b=this,c=b.config;return q(c.axis_x_min)?b.isTimeSeries()?this.parseDate(c.axis_x_min):c.axis_x_min:b.d3.min(a,function(a){return b.d3.min(a.values,function(a){return a.x})})},i.getXDomainMax=function(a){var b=this,c=b.config;return q(c.axis_x_max)?b.isTimeSeries()?this.parseDate(c.axis_x_max):c.axis_x_max:b.d3.max(a,function(a){return b.d3.max(a.values,function(a){return a.x})})},i.getXDomainPadding=function(a){var b,c,d,e,f=this,g=f.config,h=a[1]-a[0];return f.isCategorized()?c=0:f.hasType("bar")?(b=f.getMaxDataCount(),c=b>1?h/(b-1)/2:.5):c=.01*h,"object"==typeof g.axis_x_padding&&v(g.axis_x_padding)?(d=m(g.axis_x_padding.left)?g.axis_x_padding.left:c,e=m(g.axis_x_padding.right)?g.axis_x_padding.right:c):d=e="number"==typeof g.axis_x_padding?g.axis_x_padding:c,{left:d,right:e}},i.getXDomain=function(a){var b=this,c=[b.getXDomainMin(a),b.getXDomainMax(a)],d=c[0],e=c[1],f=b.getXDomainPadding(c),g=0,h=0;return d-e!==0||b.isCategorized()||(b.isTimeSeries()?(d=new Date(.5*d.getTime()),e=new Date(1.5*e.getTime())):(d=0===d?1:.5*d,e=0===e?-1:1.5*e)),(d||0===d)&&(g=b.isTimeSeries()?new Date(d.getTime()-f.left):d-f.left),(e||0===e)&&(h=b.isTimeSeries()?new Date(e.getTime()+f.right):e+f.right),[g,h]},i.updateXDomain=function(a,b,c,d,e){var f=this,g=f.config;return c&&(f.x.domain(e?e:f.d3.extent(f.getXDomain(a))),f.orgXDomain=f.x.domain(),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent(),f.subX.domain(f.x.domain()),f.brush&&f.brush.scale(f.subX)),b&&(f.x.domain(e?e:!f.brush||f.brush.empty()?f.orgXDomain:f.brush.extent()),g.zoom_enabled&&f.zoom.scale(f.x).updateScaleExtent()),d&&f.x.domain(f.trimXDomain(f.x.orgDomain())),f.x.domain()},i.trimXDomain=function(a){var b=this.getZoomDomain(),c=b[0],d=b[1];return a[0]<=c&&(a[1]=+a[1]+(c-a[0]),a[0]=c),d<=a[1]&&(a[0]=+a[0]-(a[1]-d),a[1]=d),a},i.isX=function(a){var b=this,c=b.config;return c.data_x&&a===c.data_x||v(c.data_xs)&&x(c.data_xs,a)},i.isNotX=function(a){return!this.isX(a)},i.getXKey=function(a){var b=this,c=b.config;return c.data_x?c.data_x:v(c.data_xs)?c.data_xs[a]:null},i.getXValuesOfXKey=function(a,b){var c,d=this,e=b&&v(b)?d.mapToIds(b):[];return e.forEach(function(b){d.getXKey(b)===a&&(c=d.data.xs[b])}),c},i.getIndexByX=function(a){var b=this,c=b.filterByX(b.data.targets,a);return c.length?c[0].index:null},i.getXValue=function(a,b){var c=this;return a in c.data.xs&&c.data.xs[a]&&m(c.data.xs[a][b])?c.data.xs[a][b]:b},i.getOtherTargetXs=function(){var a=this,b=Object.keys(a.data.xs);return b.length?a.data.xs[b[0]]:null},i.getOtherTargetX=function(a){var b=this.getOtherTargetXs();return b&&a<b.length?b[a]:null},i.addXs=function(a){var b=this;Object.keys(a).forEach(function(c){b.config.data_xs[c]=a[c]})},i.hasMultipleX=function(a){return this.d3.set(Object.keys(a).map(function(b){return a[b]})).size()>1},i.isMultipleX=function(){return v(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},i.addName=function(a){var b,c=this;return a&&(b=c.config.data_names[a.id],a.name=void 0!==b?b:a.id),a},i.getValueOnIndex=function(a,b){var c=a.filter(function(a){return a.index===b});return c.length?c[0]:null},i.updateTargetX=function(a,b){var c=this;a.forEach(function(a){a.values.forEach(function(d,e){d.x=c.generateTargetX(b[e],a.id,e)}),c.data.xs[a.id]=b})},i.updateTargetXs=function(a,b){var c=this;a.forEach(function(a){b[a.id]&&c.updateTargetX([a],b[a.id])})},i.generateTargetX=function(a,b,c){var d,e=this;return d=e.isTimeSeries()?a?e.parseDate(a):e.parseDate(e.getXValue(b,c)):e.isCustomX()&&!e.isCategorized()?m(a)?+a:e.getXValue(b,c):c},i.cloneTarget=function(a){return{id:a.id,id_org:a.id_org,values:a.values.map(function(a){return{x:a.x,value:a.value,id:a.id}})}},i.updateXs=function(){var a=this;a.data.targets.length&&(a.xs=[],a.data.targets[0].values.forEach(function(b){a.xs[b.index]=b.x}))},i.getPrevX=function(a){var b=this.xs[a-1];return"undefined"!=typeof b?b:null},i.getNextX=function(a){var b=this.xs[a+1];return"undefined"!=typeof b?b:null},i.getMaxDataCount=function(){var a=this;return a.d3.max(a.data.targets,function(a){return a.values.length})},i.getMaxDataCountTarget=function(a){var b,c=a.length,d=0;return c>1?a.forEach(function(a){a.values.length>d&&(b=a,d=a.values.length)}):b=c?a[0]:null,b},i.getEdgeX=function(a){var b=this;return a.length?[b.d3.min(a,function(a){return a.values[0].x}),b.d3.max(a,function(a){return a.values[a.values.length-1].x})]:[0,0]},i.mapToIds=function(a){return a.map(function(a){return a.id})},i.mapToTargetIds=function(a){var b=this;return a?[].concat(a):b.mapToIds(b.data.targets)},i.hasTarget=function(a,b){var c,d=this.mapToIds(a);for(c=0;c<d.length;c++)if(d[c]===b)return!0;return!1},i.isTargetToShow=function(a){return this.hiddenTargetIds.indexOf(a)<0},i.isLegendToShow=function(a){return this.hiddenLegendIds.indexOf(a)<0},i.filterTargetsToShow=function(a){var b=this;return a.filter(function(a){return b.isTargetToShow(a.id)})},i.mapTargetsToUniqueXs=function(a){var b=this,c=b.d3.set(b.d3.merge(a.map(function(a){return a.values.map(function(a){return+a.x})}))).values();return c=b.isTimeSeries()?c.map(function(a){return new Date(+a)}):c.map(function(a){return+a}),c.sort(function(a,b){return b>a?-1:a>b?1:a>=b?0:NaN})},i.addHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.concat(a)},i.removeHiddenTargetIds=function(a){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(b){return a.indexOf(b)<0})},i.addHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.concat(a)},i.removeHiddenLegendIds=function(a){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(b){return a.indexOf(b)<0})},i.getValuesAsIdKeyed=function(a){var b={};return a.forEach(function(a){b[a.id]=[],a.values.forEach(function(c){b[a.id].push(c.value)})}),b},i.checkValueInTargets=function(a,b){var c,d,e,f=Object.keys(a);for(c=0;c<f.length;c++)for(e=a[f[c]].values,d=0;d<e.length;d++)if(b(e[d].value))return!0;return!1},i.hasNegativeValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return 0>a})},i.hasPositiveValueInTargets=function(a){return this.checkValueInTargets(a,function(a){return a>0})},i.isOrderDesc=function(){var a=this.config;return"string"==typeof a.data_order&&"desc"===a.data_order.toLowerCase()},i.isOrderAsc=function(){var a=this.config;return"string"==typeof a.data_order&&"asc"===a.data_order.toLowerCase()},i.orderTargets=function(a){var b=this,c=b.config,d=b.isOrderAsc(),e=b.isOrderDesc();return d||e?a.sort(function(a,b){var c=function(a,b){return a+Math.abs(b.value)},e=a.values.reduce(c,0),f=b.values.reduce(c,0);return d?f-e:e-f}):n(c.data_order)&&a.sort(c.data_order),a},i.filterByX=function(a,b){return this.d3.merge(a.map(function(a){return a.values})).filter(function(a){return a.x-b===0})},i.filterRemoveNull=function(a){return a.filter(function(a){return m(a.value)})},i.filterByXDomain=function(a,b){return a.map(function(a){return{id:a.id,id_org:a.id_org,values:a.values.filter(function(a){return b[0]<=a.x&&a.x<=b[1]})}})},i.hasDataLabel=function(){var a=this.config;return"boolean"==typeof a.data_labels&&a.data_labels?!0:"object"==typeof a.data_labels&&v(a.data_labels)?!0:!1},i.getDataLabelLength=function(a,b,c){var d=this,e=[0,0],f=1.3;return d.selectChart.select("svg").selectAll(".dummy").data([a,b]).enter().append("text").text(function(a){return d.dataLabelFormat(a.id)(a)}).each(function(a,b){e[b]=this.getBoundingClientRect()[c]*f}).remove(),e},i.isNoneArc=function(a){return this.hasTarget(this.data.targets,a.id)},i.isArc=function(a){return"data"in a&&this.hasTarget(this.data.targets,a.data.id)},i.findSameXOfValues=function(a,b){var c,d=a[b].x,e=[];for(c=b-1;c>=0&&d===a[c].x;c--)e.push(a[c]);for(c=b;c<a.length&&d===a[c].x;c++)e.push(a[c]);return e},i.findClosestFromTargets=function(a,b){var c,d=this;return c=a.map(function(a){return d.findClosest(a.values,b)}),d.findClosest(c,b)},i.findClosest=function(a,b){var c,d=this,e=d.config.point_sensitivity;return a.filter(function(a){return a&&d.isBarType(a.id)}).forEach(function(a){var b=d.main.select("."+l.bars+d.getTargetSelectorSuffix(a.id)+" ."+l.bar+"-"+a.index).node();!c&&d.isWithinBar(b)&&(c=a)}),a.filter(function(a){return a&&!d.isBarType(a.id)}).forEach(function(a){var f=d.dist(a,b);e>f&&(e=f,c=a)}),c},i.dist=function(a,b){var c=this,d=c.config,e=d.axis_rotated?1:0,f=d.axis_rotated?0:1,g=c.circleY(a,a.index),h=c.x(a.x);return Math.sqrt(Math.pow(h-b[e],2)+Math.pow(g-b[f],2))},i.convertValuesToStep=function(a){var b,c=[].concat(a);if(!this.isCategorized())return a;for(b=a.length+1;b>0;b--)c[b]=c[b-1];return c[0]={x:c[0].x-1,value:c[0].value,id:c[0].id},c[a.length+1]={x:c[a.length].x+1,value:c[a.length].value,id:c[a.length].id},c},i.updateDataAttributes=function(a,b){var c=this,d=c.config,e=d["data_"+a];return"undefined"==typeof b?e:(Object.keys(b).forEach(function(a){e[a]=b[a]}),c.redraw({withLegend:!0}),e)},i.convertUrlToData=function(a,b,c,d){var e=this,f=b?b:"csv";e.d3.xhr(a,function(a,b){var g;if(!b)throw new Error(a.responseURL+" "+a.status+" ("+a.statusText+")");g="json"===f?e.convertJsonToData(JSON.parse(b.response),c):"tsv"===f?e.convertTsvToData(b.response):e.convertCsvToData(b.response),d.call(e,g)})},i.convertXsvToData=function(a,b){var c,d=b.parseRows(a);return 1===d.length?(c=[{}],d[0].forEach(function(a){c[0][a]=null})):c=b.parse(a),c},i.convertCsvToData=function(a){return this.convertXsvToData(a,this.d3.csv)},i.convertTsvToData=function(a){return this.convertXsvToData(a,this.d3.tsv)},i.convertJsonToData=function(a,b){var c,d,e=this,f=[];return b?(b.x?(c=b.value.concat(b.x),e.config.data_x=b.x):c=b.value,f.push(c),a.forEach(function(a){var b=[];c.forEach(function(c){var d=p(a[c])?null:a[c];b.push(d)}),f.push(b)}),d=e.convertRowsToData(f)):(Object.keys(a).forEach(function(b){f.push([b].concat(a[b]))}),d=e.convertColumnsToData(f)),d},i.convertRowsToData=function(a){var b,c,d=a[0],e={},f=[];for(b=1;b<a.length;b++){for(e={},c=0;c<a[b].length;c++){if(p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[d[c]]=a[b][c]}f.push(e)}return f},i.convertColumnsToData=function(a){var b,c,d,e=[];for(b=0;b<a.length;b++)for(d=a[b][0],c=1;c<a[b].length;c++){if(p(e[c-1])&&(e[c-1]={}),p(a[b][c]))throw new Error("Source data is missing a component at ("+b+","+c+")!");e[c-1][d]=a[b][c]}return e},i.convertDataToTargets=function(a,b){var c,d=this,e=d.config,f=d.d3.keys(a[0]).filter(d.isNotX,d),g=d.d3.keys(a[0]).filter(d.isX,d);return f.forEach(function(c){var f=d.getXKey(c);d.isCustomX()||d.isTimeSeries()?g.indexOf(f)>=0?d.data.xs[c]=(b&&d.data.xs[c]?d.data.xs[c]:[]).concat(a.map(function(a){return a[f]}).filter(m).map(function(a,b){return d.generateTargetX(a,c,b)})):e.data_x?d.data.xs[c]=d.getOtherTargetXs():v(e.data_xs)&&(d.data.xs[c]=d.getXValuesOfXKey(f,d.data.targets)):d.data.xs[c]=a.map(function(a,b){return b})}),f.forEach(function(a){if(!d.data.xs[a])throw new Error('x is not defined for id = "'+a+'".')}),c=f.map(function(b,c){var f=e.data_idConverter(b);return{id:f,id_org:b,values:a.map(function(a,g){var h=d.getXKey(b),i=a[h],j=d.generateTargetX(i,b,g),k=null===a[b]||isNaN(a[b])?null:+a[b];return d.isCustomX()&&d.isCategorized()&&0===c&&i&&(0===g&&(e.axis_x_categories=[]),e.axis_x_categories.push(i)),(p(a[b])||d.data.xs[b].length<=g)&&(j=void 0),{x:j,value:k,id:f}}).filter(function(a){return q(a.x)})}}),c.forEach(function(a){var b;e.data_xSort&&(a.values=a.values.sort(function(a,b){var c=a.x||0===a.x?a.x:1/0,d=b.x||0===b.x?b.x:1/0;return c-d})),b=0,a.values.forEach(function(a){a.index=b++}),d.data.xs[a.id].sort(function(a,b){return a-b})}),d.hasNegativeValue=d.hasNegativeValueInTargets(c),d.hasPositiveValue=d.hasPositiveValueInTargets(c),e.data_type&&d.setTargetType(d.mapToIds(c).filter(function(a){return!(a in e.data_types)}),e.data_type),c.forEach(function(a){d.addCache(a.id_org,a)}),c},i.load=function(a,b){var c=this;a&&(b.filter&&(a=a.filter(b.filter)),(b.type||b.types)&&a.forEach(function(a){var d=b.types&&b.types[a.id]?b.types[a.id]:b.type;c.setTargetType(a.id,d)}),c.data.targets.forEach(function(b){for(var c=0;c<a.length;c++)if(b.id===a[c].id){b.values=a[c].values,a.splice(c,1);break}}),c.data.targets=c.data.targets.concat(a)),c.updateTargets(c.data.targets),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),b.done&&b.done()},i.loadFromArgs=function(a){var b=this;a.data?b.load(b.convertDataToTargets(a.data),a):a.url?b.convertUrlToData(a.url,a.mimeType,a.keys,function(c){b.load(b.convertDataToTargets(c),a)}):a.json?b.load(b.convertDataToTargets(b.convertJsonToData(a.json,a.keys)),a):a.rows?b.load(b.convertDataToTargets(b.convertRowsToData(a.rows)),a):a.columns?b.load(b.convertDataToTargets(b.convertColumnsToData(a.columns)),a):b.load(null,a)},i.unload=function(a,b){var c=this;return b||(b=function(){}),a=a.filter(function(a){return c.hasTarget(c.data.targets,a)}),a&&0!==a.length?(c.svg.selectAll(a.map(function(a){return c.selectorTarget(a)})).transition().style("opacity",0).remove().call(c.endall,b),void a.forEach(function(a){c.withoutFadeIn[a]=!1,c.legend&&c.legend.selectAll("."+l.legendItem+c.getTargetSelectorSuffix(a)).remove(),c.data.targets=c.data.targets.filter(function(b){return b.id!==a})})):void b()},i.categoryName=function(a){var b=this.config;return a<b.axis_x_categories.length?b.axis_x_categories[a]:a},i.initEventRect=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.eventRects).style("fill-opacity",0)},i.redrawEventRect=function(){var a,b,c=this,d=c.config,e=c.isMultipleX(),f=c.main.select("."+l.eventRects).style("cursor",d.zoom_enabled?d.axis_rotated?"ns-resize":"ew-resize":null).classed(l.eventRectsMultiple,e).classed(l.eventRectsSingle,!e);f.selectAll("."+l.eventRect).remove(),c.eventRect=f.selectAll("."+l.eventRect),e?(a=c.eventRect.data([0]),c.generateEventRectsForMultipleXs(a.enter()),c.updateEventRect(a)):(b=c.getMaxDataCountTarget(c.data.targets),f.datum(b?b.values:[]),c.eventRect=f.selectAll("."+l.eventRect),a=c.eventRect.data(function(a){return a}),c.generateEventRectsForSingleX(a.enter()),c.updateEventRect(a),a.exit().remove())},i.updateEventRect=function(a){var b,c,d,e,f,g,h=this,i=h.config;a=a||h.eventRect.data(function(a){return a}),h.isMultipleX()?(b=0,c=0,d=h.width,e=h.height):(!h.isCustomX()&&!h.isTimeSeries()||h.isCategorized()?(f=h.getEventRectWidth(),g=function(a){return h.x(a.x)-f/2}):(h.updateXs(),f=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index);return null===b&&null===c?i.axis_rotated?h.height:h.width:(null===b&&(b=h.x.domain()[0]),null===c&&(c=h.x.domain()[1]),Math.max(0,(h.x(c)-h.x(b))/2))},g=function(a){var b=h.getPrevX(a.index),c=h.getNextX(a.index),d=h.data.xs[a.id][a.index];return null===b&&null===c?0:(null===b&&(b=h.x.domain()[0]),(h.x(d)+h.x(b))/2)}),b=i.axis_rotated?0:g,c=i.axis_rotated?g:0,d=i.axis_rotated?h.width:f,e=i.axis_rotated?f:h.height),a.attr("class",h.classEvent.bind(h)).attr("x",b).attr("y",c).attr("width",d).attr("height",e)},i.generateEventRectsForSingleX=function(a){var b=this,c=b.d3,d=b.config;a.append("rect").attr("class",b.classEvent.bind(b)).style("cursor",d.data_selection_enabled&&d.data_selection_grouped?"pointer":null).on("mouseover",function(a){var c=a.index;b.dragging||b.flowing||b.hasArcType()||(d.point_focus_expand_enabled&&b.expandCircles(c,null,!0),b.expandBars(c,null,!0),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseover.call(b.api,a)}))}).on("mouseout",function(a){var c=a.index;b.config&&(b.hasArcType()||(b.hideXGridFocus(),b.hideTooltip(),b.unexpandCircles(),b.unexpandBars(),b.main.selectAll("."+l.shape+"-"+c).each(function(a){d.data_onmouseout.call(b.api,a)})))}).on("mousemove",function(a){var e,f=a.index,g=b.svg.select("."+l.eventRect+"-"+f);b.dragging||b.flowing||b.hasArcType()||(b.isStepType(a)&&"step-after"===b.config.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,f))&&(f-=1),e=b.filterTargetsToShow(b.data.targets).map(function(a){return b.addName(b.getValueOnIndex(a.values,f))}),d.tooltip_grouped&&(b.showTooltip(e,this),b.showXGridFocus(e)),(!d.tooltip_grouped||d.data_selection_enabled&&!d.data_selection_grouped)&&b.main.selectAll("."+l.shape+"-"+f).each(function(){c.select(this).classed(l.EXPANDED,!0),d.data_selection_enabled&&g.style("cursor",d.data_selection_grouped?"pointer":null),d.tooltip_grouped||(b.hideXGridFocus(),b.hideTooltip(),d.data_selection_grouped||(b.unexpandCircles(f),b.unexpandBars(f)))}).filter(function(a){return b.isWithinShape(this,a)}).each(function(a){d.data_selection_enabled&&(d.data_selection_grouped||d.data_selection_isselectable(a))&&g.style("cursor","pointer"),d.tooltip_grouped||(b.showTooltip([a],this),b.showXGridFocus([a]),d.point_focus_expand_enabled&&b.expandCircles(f,a.id,!0),b.expandBars(f,a.id,!0))}))}).on("click",function(a){var e=a.index;if(!b.hasArcType()&&b.toggleShape){if(b.cancelClick)return void(b.cancelClick=!1);b.isStepType(a)&&"step-after"===d.line_step_type&&c.mouse(this)[0]<b.x(b.getXValue(a.id,e))&&(e-=1),b.main.selectAll("."+l.shape+"-"+e).each(function(a){(d.data_selection_grouped||b.isWithinShape(this,a))&&(b.toggleShape(this,a,e),b.config.data_onclick.call(b.api,a,this))})}}).call(d.data_selection_draggable&&b.drag?c.behavior.drag().origin(Object).on("drag",function(){b.drag(c.mouse(this))}).on("dragstart",function(){b.dragstart(c.mouse(this))}).on("dragend",function(){b.dragend()}):function(){})},i.generateEventRectsForMultipleXs=function(a){function b(){c.svg.select("."+l.eventRect).style("cursor",null),c.hideXGridFocus(),c.hideTooltip(),c.unexpandCircles(),c.unexpandBars()}var c=this,d=c.d3,e=c.config;a.append("rect").attr("x",0).attr("y",0).attr("width",c.width).attr("height",c.height).attr("class",l.eventRect).on("mouseout",function(){c.config&&(c.hasArcType()||b())}).on("mousemove",function(){var a,f,g,h,i=c.filterTargetsToShow(c.data.targets);if(!c.dragging&&!c.hasArcType(i)){if(a=d.mouse(this),f=c.findClosestFromTargets(i,a),!c.mouseover||f&&f.id===c.mouseover.id||(e.data_onmouseout.call(c.api,c.mouseover),c.mouseover=void 0),!f)return void b();g=c.isScatterType(f)||!e.tooltip_grouped?[f]:c.filterByX(i,f.x),h=g.map(function(a){return c.addName(a)}),c.showTooltip(h,this),e.point_focus_expand_enabled&&c.expandCircles(f.index,f.id,!0),c.expandBars(f.index,f.id,!0),c.showXGridFocus(h),(c.isBarType(f.id)||c.dist(f,a)<e.point_sensitivity)&&(c.svg.select("."+l.eventRect).style("cursor","pointer"),c.mouseover||(e.data_onmouseover.call(c.api,f),c.mouseover=f))}}).on("click",function(){var a,b,f=c.filterTargetsToShow(c.data.targets);c.hasArcType(f)||(a=d.mouse(this),b=c.findClosestFromTargets(f,a),b&&(c.isBarType(b.id)||c.dist(b,a)<e.point_sensitivity)&&c.main.selectAll("."+l.shapes+c.getTargetSelectorSuffix(b.id)).selectAll("."+l.shape+"-"+b.index).each(function(){(e.data_selection_grouped||c.isWithinShape(this,b))&&(c.toggleShape(this,b,b.index),c.config.data_onclick.call(c.api,b,this))}))}).call(e.data_selection_draggable&&c.drag?d.behavior.drag().origin(Object).on("drag",function(){c.drag(d.mouse(this))}).on("dragstart",function(){c.dragstart(d.mouse(this))}).on("dragend",function(){c.dragend()}):function(){})},i.dispatchEvent=function(b,c,d){var e=this,f="."+l.eventRect+(e.isMultipleX()?"":"-"+c),g=e.main.select(f).node(),h=g.getBoundingClientRect(),i=h.left+(d?d[0]:0),j=h.top+(d?d[1]:0),k=document.createEvent("MouseEvents");k.initMouseEvent(b,!0,!0,a,0,i,j,i,j,!1,!1,!1,!1,0,null),g.dispatchEvent(k)},i.getCurrentWidth=function(){var a=this,b=a.config;return b.size_width?b.size_width:a.getParentWidth()},i.getCurrentHeight=function(){var a=this,b=a.config,c=b.size_height?b.size_height:a.getParentHeight();return c>0?c:320/(a.hasType("gauge")?2:1)},i.getCurrentPaddingTop=function(){var a=this,b=a.config,c=m(b.padding_top)?b.padding_top:0;return a.title&&a.title.node()&&(c+=a.getTitlePadding()),c},i.getCurrentPaddingBottom=function(){var a=this.config;return m(a.padding_bottom)?a.padding_bottom:0},i.getCurrentPaddingLeft=function(a){var b=this,c=b.config;return m(c.padding_left)?c.padding_left:c.axis_rotated?c.axis_x_show?Math.max(r(b.getAxisWidthByAxisId("x",a)),40):1:!c.axis_y_show||c.axis_y_inner?b.axis.getYAxisLabelPosition().isOuter?30:1:r(b.getAxisWidthByAxisId("y",a))},i.getCurrentPaddingRight=function(){var a=this,b=a.config,c=10,d=a.isLegendRight?a.getLegendWidth()+20:0;return m(b.padding_right)?b.padding_right+1:b.axis_rotated?c+d:!b.axis_y2_show||b.axis_y2_inner?2+d+(a.axis.getY2AxisLabelPosition().isOuter?20:0):r(a.getAxisWidthByAxisId("y2"))+d},i.getParentRectValue=function(a){for(var b,c=this.selectChart.node();c&&"BODY"!==c.tagName;){try{b=c.getBoundingClientRect()[a]}catch(d){"width"===a&&(b=c.offsetWidth)}if(b)break;c=c.parentNode}return b},i.getParentWidth=function(){return this.getParentRectValue("width")},i.getParentHeight=function(){var a=this.selectChart.style("height");return a.indexOf("px")>0?+a.replace("px",""):0},i.getSvgLeft=function(a){var b=this,c=b.config,d=c.axis_rotated||!c.axis_rotated&&!c.axis_y_inner,e=c.axis_rotated?l.axisX:l.axisY,f=b.main.select("."+e).node(),g=f&&d?f.getBoundingClientRect():{right:0},h=b.selectChart.node().getBoundingClientRect(),i=b.hasArcType(),j=g.right-h.left-(i?0:b.getCurrentPaddingLeft(a));return j>0?j:0},i.getAxisWidthByAxisId=function(a,b){var c=this,d=c.axis.getLabelPositionById(a);return c.axis.getMaxTickWidth(a,b)+(d.isInner?20:40)},i.getHorizontalAxisHeight=function(a){var b=this,c=b.config,d=30;return"x"!==a||c.axis_x_show?"x"===a&&c.axis_x_height?c.axis_x_height:"y"!==a||c.axis_y_show?"y2"!==a||c.axis_y2_show?("x"===a&&!c.axis_rotated&&c.axis_x_tick_rotate&&(d=30+b.axis.getMaxTickWidth(a)*Math.cos(Math.PI*(90-c.axis_x_tick_rotate)/180)),d+(b.axis.getLabelPositionById(a).isInner?0:10)+("y2"===a?-10:0)):b.rotated_padding_top:!c.legend_show||b.isLegendRight||b.isLegendInset?1:10:8},i.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},i.getShapeIndices=function(a){var b,c,d=this,e=d.config,f={},g=0;return d.filterTargetsToShow(d.data.targets.filter(a,d)).forEach(function(a){for(b=0;b<e.data_groups.length;b++)if(!(e.data_groups[b].indexOf(a.id)<0))for(c=0;c<e.data_groups[b].length;c++)if(e.data_groups[b][c]in f){f[a.id]=f[e.data_groups[b][c]];break}p(f[a.id])&&(f[a.id]=g++)}),f.__max__=g-1,f},i.getShapeX=function(a,b,c,d){var e=this,f=d?e.subX:e.x;return function(d){var e=d.id in c?c[d.id]:0;return d.x||0===d.x?f(d.x)-a*(b/2-e):0}},i.getShapeY=function(a){var b=this;return function(c){var d=a?b.getSubYScale(c.id):b.getYScale(c.id);return d(c.value)}},i.getShapeOffset=function(a,b,c){var d=this,e=d.orderTargets(d.filterTargetsToShow(d.data.targets.filter(a,d))),f=e.map(function(a){return a.id});return function(a,g){var h=c?d.getSubYScale(a.id):d.getYScale(a.id),i=h(0),j=i;return e.forEach(function(c){var e=d.isStepType(a)?d.convertValuesToStep(c.values):c.values;c.id!==a.id&&b[c.id]===b[a.id]&&f.indexOf(c.id)<f.indexOf(a.id)&&(("undefined"==typeof e[g]||+e[g].x!==+a.x)&&(g=-1,e.forEach(function(b,c){b.x===a.x&&(g=c)})),g in e&&e[g].value*a.value>=0&&(j+=h(e[g].value)-i))}),j}},i.isWithinShape=function(a,b){var c,d=this,e=d.d3.select(a);return d.isTargetToShow(b.id)?"circle"===a.nodeName?c=d.isStepType(b)?d.isWithinStep(a,d.getYScale(b.id)(b.value)):d.isWithinCircle(a,1.5*d.pointSelectR(b)):"path"===a.nodeName&&(c=e.classed(l.bar)?d.isWithinBar(a):!0):c=!1,c},i.getInterpolate=function(a){var b=this,c=b.isInterpolationType(b.config.spline_interpolation_type)?b.config.spline_interpolation_type:"cardinal";return b.isSplineType(a)?c:b.isStepType(a)?b.config.line_step_type:"linear"},i.initLine=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartLines)},i.updateTargetsForLine=function(a){var b,c,d=this,e=d.config,f=d.classChartLine.bind(d),g=d.classLines.bind(d),h=d.classAreas.bind(d),i=d.classCircles.bind(d),j=d.classFocus.bind(d);b=d.main.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",function(a){return f(a)+j(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g),c.append("g").attr("class",h),c.append("g").attr("class",function(a){return d.generateClass(l.selectedCircles,a.id)}),c.append("g").attr("class",i).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null}),a.forEach(function(a){d.main.selectAll("."+l.selectedCircles+d.getTargetSelectorSuffix(a.id)).selectAll("."+l.selectedCircle).each(function(b){b.value=a.values[b.index].value})})},i.updateLine=function(a){var b=this;b.mainLine=b.main.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.mainLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.mainLine.style("opacity",b.initialOpacity.bind(b)).style("shape-rendering",function(a){return b.isStepType(a)?"crispEdges":""}).attr("transform",null),b.mainLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLine=function(a,b){return[(b?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",a).style("stroke",this.color).style("opacity",1)]},i.generateDrawLine=function(a,b){var c=this,d=c.config,e=c.d3.svg.line(),f=c.generateGetLinePoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x(i).y(h):e.x(h).y(i),d.line_connectNull||(e=e.defined(function(a){return null!=a.value})),function(a){var f,h=d.line_connectNull?c.filterRemoveNull(a.values):a.values,i=b?c.x:c.subX,j=g.call(c,a.id),k=0,l=0;return c.isLineType(a)?d.data_regions[a.id]?f=c.lineWithRegions(h,i,j,d.data_regions[a.id]):(c.isStepType(a)&&(h=c.convertValuesToStep(h)),f=e.interpolate(c.getInterpolate(a))(h)):(h[0]&&(k=i(h[0].x),l=j(h[0].value)),f=d.axis_rotated?"M "+l+" "+k:"M "+k+" "+l),f?f:"M 0 0"}},i.generateGetLinePoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isLineType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)],[k,l-(e-j)]]}},i.lineWithRegions=function(a,b,c,d){function e(a,b){var c;for(c=0;c<b.length;c++)if(b[c].start<a&&a<=b[c].end)return!0;return!1}function f(a){return"M"+a[0][0]+" "+a[0][1]+" "+a[1][0]+" "+a[1][1]}var g,h,i,j,k,l,m,n,o,r,s,t,u=this,v=u.config,w=-1,x="M",y=u.isCategorized()?.5:0,z=[];if(q(d))for(g=0;g<d.length;g++)z[g]={},p(d[g].start)?z[g].start=a[0].x:z[g].start=u.isTimeSeries()?u.parseDate(d[g].start):d[g].start,p(d[g].end)?z[g].end=a[a.length-1].x:z[g].end=u.isTimeSeries()?u.parseDate(d[g].end):d[g].end;for(s=v.axis_rotated?function(a){return c(a.value)}:function(a){return b(a.x)},t=v.axis_rotated?function(a){return b(a.x)}:function(a){return c(a.value)},i=u.isTimeSeries()?function(a,d,e,g){var h,i=a.x.getTime(),j=d.x-a.x,l=new Date(i+j*e),m=new Date(i+j*(e+g));return h=v.axis_rotated?[[c(k(e)),b(l)],[c(k(e+g)),b(m)]]:[[b(l),c(k(e))],[b(m),c(k(e+g))]],f(h)}:function(a,d,e,g){var h;return h=v.axis_rotated?[[c(k(e),!0),b(j(e))],[c(k(e+g),!0),b(j(e+g))]]:[[b(j(e),!0),c(k(e))],[b(j(e+g),!0),c(k(e+g))]],f(h)},g=0;g<a.length;g++){if(p(z)||!e(a[g].x,z))x+=" "+s(a[g])+" "+t(a[g]);else for(j=u.getScale(a[g-1].x+y,a[g].x+y,u.isTimeSeries()),k=u.getScale(a[g-1].value,a[g].value),l=b(a[g].x)-b(a[g-1].x),m=c(a[g].value)-c(a[g-1].value),n=Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),o=2/n,r=2*o,h=o;1>=h;h+=r)x+=i(a[g-1],a[g],h,o);w=a[g].x}return x},i.updateArea=function(a){var b=this,c=b.d3;b.mainArea=b.main.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.mainArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.mainArea.style("opacity",b.orgAreaOpacity),b.mainArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawArea=function(a,b){return[(b?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},i.generateDrawArea=function(a,b){var c=this,d=c.config,e=c.d3.svg.area(),f=c.generateGetAreaPoints(a,b),g=b?c.getSubYScale:c.getYScale,h=function(a){return(b?c.subxx:c.xx).call(c,a)},i=function(a,b){return d.data_groups.length>0?f(a,b)[0][1]:g.call(c,a.id)(c.getAreaBaseValue(a.id))},j=function(a,b){return d.data_groups.length>0?f(a,b)[1][1]:g.call(c,a.id)(a.value)};return e=d.axis_rotated?e.x0(i).x1(j).y(h):e.x(h).y0(i).y1(j),d.line_connectNull||(e=e.defined(function(a){return null!==a.value})),function(a){var b,f=d.line_connectNull?c.filterRemoveNull(a.values):a.values,g=0,h=0;return c.isAreaType(a)?(c.isStepType(a)&&(f=c.convertValuesToStep(f)),b=e.interpolate(c.getInterpolate(a))(f)):(f[0]&&(g=c.x(f[0].x),h=c.getYScale(a.id)(f[0].value)),b=d.axis_rotated?"M "+h+" "+g:"M "+g+" "+h),b?b:"M 0 0"}},i.getAreaBaseValue=function(){return 0},i.generateGetAreaPoints=function(a,b){var c=this,d=c.config,e=a.__max__+1,f=c.getShapeX(0,e,a,!!b),g=c.getShapeY(!!b),h=c.getShapeOffset(c.isAreaType,a,!!b),i=b?c.getSubYScale:c.getYScale;return function(a,b){var e=i.call(c,a.id)(0),j=h(a,b)||e,k=f(a),l=g(a);return d.axis_rotated&&(0<a.value&&e>l||a.value<0&&l>e)&&(l=e),[[k,j],[k,l-(e-j)],[k,l-(e-j)],[k,j]]}},i.updateCircle=function(){var a=this;a.mainCircle=a.main.selectAll("."+l.circles).selectAll("."+l.circle).data(a.lineOrScatterData.bind(a)),a.mainCircle.enter().append("circle").attr("class",a.classCircle.bind(a)).attr("r",a.pointR.bind(a)).style("fill",a.color),a.mainCircle.style("opacity",a.initialOpacityForCircle.bind(a)),a.mainCircle.exit().remove()},i.redrawCircle=function(a,b,c){var d=this.main.selectAll("."+l.selectedCircle);return[(c?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",a).attr("cy",b),(c?d.transition(Math.random().toString()):d).attr("cx",a).attr("cy",b)]},i.circleX=function(a){return a.x||0===a.x?this.x(a.x):null},i.updateCircleY=function(){var a,b,c=this;c.config.data_groups.length>0?(a=c.getShapeIndices(c.isLineType),b=c.generateGetLinePoints(a),c.circleY=function(a,c){return b(a,c)[0][1]}):c.circleY=function(a){return c.getYScale(a.id)(a.value)}},i.getCircles=function(a,b){var c=this;return(b?c.main.selectAll("."+l.circles+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.circle+(m(a)?"-"+a:""))},i.expandCircles=function(a,b,c){var d=this,e=d.pointExpandedR.bind(d);c&&d.unexpandCircles(),d.getCircles(a,b).classed(l.EXPANDED,!0).attr("r",e)},i.unexpandCircles=function(a){var b=this,c=b.pointR.bind(b);b.getCircles(a).filter(function(){return b.d3.select(this).classed(l.EXPANDED)}).classed(l.EXPANDED,!1).attr("r",c)},i.pointR=function(a){var b=this,c=b.config;return b.isStepType(a)?0:n(c.point_r)?c.point_r(a):c.point_r},i.pointExpandedR=function(a){var b=this,c=b.config;return c.point_focus_expand_enabled?c.point_focus_expand_r?c.point_focus_expand_r:1.75*b.pointR(a):b.pointR(a)},i.pointSelectR=function(a){var b=this,c=b.config;return c.point_select_r?c.point_select_r:4*b.pointR(a)},i.isWithinCircle=function(a,b){var c=this.d3,d=c.mouse(a),e=c.select(a),f=+e.attr("cx"),g=+e.attr("cy");return Math.sqrt(Math.pow(f-d[0],2)+Math.pow(g-d[1],2))<b},i.isWithinStep=function(a,b){return Math.abs(b-this.d3.mouse(a)[1])<30},i.initBar=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartBars)},i.updateTargetsForBar=function(a){var b,c,d=this,e=d.config,f=d.classChartBar.bind(d),g=d.classBars.bind(d),h=d.classFocus.bind(d);b=d.main.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",function(a){
return f(a)+h(a)}),c=b.enter().append("g").attr("class",f).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",g).style("cursor",function(a){return e.data_selection_isselectable(a)?"pointer":null})},i.updateBar=function(a){var b=this,c=b.barData.bind(b),d=b.classBar.bind(b),e=b.initialOpacity.bind(b),f=function(a){return b.color(a.id)};b.mainBar=b.main.selectAll("."+l.bars).selectAll("."+l.bar).data(c),b.mainBar.enter().append("path").attr("class",d).style("stroke",f).style("fill",f),b.mainBar.style("opacity",e),b.mainBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBar=function(a,b){return[(b?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",a).style("fill",this.color).style("opacity",1)]},i.getBarW=function(a,b){var c=this,d=c.config,e="number"==typeof d.bar_width?d.bar_width:b?a.tickInterval()*d.bar_width_ratio/b:0;return d.bar_width_max&&e>d.bar_width_max?d.bar_width_max:e},i.getBars=function(a,b){var c=this;return(b?c.main.selectAll("."+l.bars+c.getTargetSelectorSuffix(b)):c.main).selectAll("."+l.bar+(m(a)?"-"+a:""))},i.expandBars=function(a,b,c){var d=this;c&&d.unexpandBars(),d.getBars(a,b).classed(l.EXPANDED,!0)},i.unexpandBars=function(a){var b=this;b.getBars(a).classed(l.EXPANDED,!1)},i.generateDrawBar=function(a,b){var c=this,d=c.config,e=c.generateGetBarPoints(a,b);return function(a,b){var c=e(a,b),f=d.axis_rotated?1:0,g=d.axis_rotated?0:1,h="M "+c[0][f]+","+c[0][g]+" L"+c[1][f]+","+c[1][g]+" L"+c[2][f]+","+c[2][g]+" L"+c[3][f]+","+c[3][g]+" z";return h}},i.generateGetBarPoints=function(a,b){var c=this,d=b?c.subXAxis:c.xAxis,e=a.__max__+1,f=c.getBarW(d,e),g=c.getShapeX(f,e,a,!!b),h=c.getShapeY(!!b),i=c.getShapeOffset(c.isBarType,a,!!b),j=b?c.getSubYScale:c.getYScale;return function(a,b){var d=j.call(c,a.id)(0),e=i(a,b)||d,k=g(a),l=h(a);return c.config.axis_rotated&&(0<a.value&&d>l||a.value<0&&l>d)&&(l=d),[[k,e],[k,l-(d-e)],[k+f,l-(d-e)],[k+f,e]]}},i.isWithinBar=function(a){var b=this.d3.mouse(a),c=a.getBoundingClientRect(),d=a.pathSegList.getItem(0),e=a.pathSegList.getItem(1),f=Math.min(d.x,e.x),g=Math.min(d.y,e.y),h=c.width,i=c.height,j=2,k=f-j,l=f+h+j,m=g+i+j,n=g-j;return k<b[0]&&b[0]<l&&n<b[1]&&b[1]<m},i.initText=function(){var a=this;a.main.select("."+l.chart).append("g").attr("class",l.chartTexts),a.mainText=a.d3.selectAll([])},i.updateTargetsForText=function(a){var b,c,d=this,e=d.classChartText.bind(d),f=d.classTexts.bind(d),g=d.classFocus.bind(d);b=d.main.select("."+l.chartTexts).selectAll("."+l.chartText).data(a).attr("class",function(a){return e(a)+g(a)}),c=b.enter().append("g").attr("class",e).style("opacity",0).style("pointer-events","none"),c.append("g").attr("class",f)},i.updateText=function(a){var b=this,c=b.config,d=b.barOrLineData.bind(b),e=b.classText.bind(b);b.mainText=b.main.selectAll("."+l.texts).selectAll("."+l.text).data(d),b.mainText.enter().append("text").attr("class",e).attr("text-anchor",function(a){return c.axis_rotated?a.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(a){return b.color(a)}).style("fill-opacity",0),b.mainText.text(function(a,c,d){return b.dataLabelFormat(a.id)(a.value,a.id,c,d)}),b.mainText.exit().transition().duration(a).style("fill-opacity",0).remove()},i.redrawText=function(a,b,c,d){return[(d?this.mainText.transition():this.mainText).attr("x",a).attr("y",b).style("fill",this.color).style("fill-opacity",c?0:this.opacityForText.bind(this))]},i.getTextRect=function(a,b,c){var d,e=this.d3.select("body").append("div").classed("c3",!0),f=e.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g=this.d3.select(c).style("font");return f.selectAll(".dummy").data([a]).enter().append("text").classed(b?b:"",!0).style("font",g).text(a).each(function(){d=this.getBoundingClientRect()}),e.remove(),d},i.generateXYForText=function(a,b,c,d){var e=this,f=e.generateGetAreaPoints(a,!1),g=e.generateGetBarPoints(b,!1),h=e.generateGetLinePoints(c,!1),i=d?e.getXForText:e.getYForText;return function(a,b){var c=e.isAreaType(a)?f:e.isBarType(a)?g:h;return i.call(e,c(a,b),a,this)}},i.getXForText=function(a,b,c){var d,e,f=this,g=c.getBoundingClientRect();return f.config.axis_rotated?(e=f.isBarType(b)?4:6,d=a[2][1]+e*(b.value<0?-1:1)):d=f.hasType("bar")?(a[2][0]+a[0][0])/2:a[0][0],null===b.value&&(d>f.width?d=f.width-g.width:0>d&&(d=4)),d},i.getYForText=function(a,b,c){var d,e=this,f=c.getBoundingClientRect();return e.config.axis_rotated?d=(a[0][0]+a[2][0]+.6*f.height)/2:(d=a[2][1],b.value<0||0===b.value&&!e.hasPositiveValue?(d+=f.height,e.isBarType(b)&&e.isSafari()?d-=3:!e.isBarType(b)&&e.isChrome()&&(d+=3)):d+=e.isBarType(b)?-3:-6),null!==b.value||e.config.axis_rotated||(d<f.height?d=f.height:d>this.height&&(d=this.height-4)),d},i.setTargetType=function(a,b){var c=this,d=c.config;c.mapToTargetIds(a).forEach(function(a){c.withoutFadeIn[a]=b===d.data_types[a],d.data_types[a]=b}),a||(d.data_type=b)},i.hasType=function(a,b){var c=this,d=c.config.data_types,e=!1;return b=b||c.data.targets,b&&b.length?b.forEach(function(b){var c=d[b.id];(c&&c.indexOf(a)>=0||!c&&"line"===a)&&(e=!0)}):Object.keys(d).length?Object.keys(d).forEach(function(b){d[b]===a&&(e=!0)}):e=c.config.data_type===a,e},i.hasArcType=function(a){return this.hasType("pie",a)||this.hasType("donut",a)||this.hasType("gauge",a)},i.isLineType=function(a){var b=this.config,c=o(a)?a:a.id;return!b.data_types[c]||["line","spline","area","area-spline","step","area-step"].indexOf(b.data_types[c])>=0},i.isStepType=function(a){var b=o(a)?a:a.id;return["step","area-step"].indexOf(this.config.data_types[b])>=0},i.isSplineType=function(a){var b=o(a)?a:a.id;return["spline","area-spline"].indexOf(this.config.data_types[b])>=0},i.isAreaType=function(a){var b=o(a)?a:a.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[b])>=0},i.isBarType=function(a){var b=o(a)?a:a.id;return"bar"===this.config.data_types[b]},i.isScatterType=function(a){var b=o(a)?a:a.id;return"scatter"===this.config.data_types[b]},i.isPieType=function(a){var b=o(a)?a:a.id;return"pie"===this.config.data_types[b]},i.isGaugeType=function(a){var b=o(a)?a:a.id;return"gauge"===this.config.data_types[b]},i.isDonutType=function(a){var b=o(a)?a:a.id;return"donut"===this.config.data_types[b]},i.isArcType=function(a){return this.isPieType(a)||this.isDonutType(a)||this.isGaugeType(a)},i.lineData=function(a){return this.isLineType(a)?[a]:[]},i.arcData=function(a){return this.isArcType(a.data)?[a]:[]},i.barData=function(a){return this.isBarType(a)?a.values:[]},i.lineOrScatterData=function(a){return this.isLineType(a)||this.isScatterType(a)?a.values:[]},i.barOrLineData=function(a){return this.isBarType(a)||this.isLineType(a)?a.values:[]},i.isInterpolationType=function(a){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(a)>=0},i.initGrid=function(){var a=this,b=a.config,c=a.d3;a.grid=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid),b.grid_x_show&&a.grid.append("g").attr("class",l.xgrids),b.grid_y_show&&a.grid.append("g").attr("class",l.ygrids),b.grid_focus_show&&a.grid.append("g").attr("class",l.xgridFocus).append("line").attr("class",l.xgridFocus),a.xgrid=c.selectAll([]),b.grid_lines_front||a.initGridLines()},i.initGridLines=function(){var a=this,b=a.d3;a.gridLines=a.main.append("g").attr("clip-path",a.clipPathForGrid).attr("class",l.grid+" "+l.gridLines),a.gridLines.append("g").attr("class",l.xgridLines),a.gridLines.append("g").attr("class",l.ygridLines),a.xgridLines=b.selectAll([])},i.updateXGrid=function(a){var b=this,c=b.config,d=b.d3,e=b.generateGridData(c.grid_x_type,b.x),f=b.isCategorized()?b.xAxis.tickOffset():0;b.xgridAttr=c.axis_rotated?{x1:0,x2:b.width,y1:function(a){return b.x(a)-f},y2:function(a){return b.x(a)-f}}:{x1:function(a){return b.x(a)+f},x2:function(a){return b.x(a)+f},y1:0,y2:b.height},b.xgrid=b.main.select("."+l.xgrids).selectAll("."+l.xgrid).data(e),b.xgrid.enter().append("line").attr("class",l.xgrid),a||b.xgrid.attr(b.xgridAttr).style("opacity",function(){return+d.select(this).attr(c.axis_rotated?"y1":"x1")===(c.axis_rotated?b.height:0)?0:1}),b.xgrid.exit().remove()},i.updateYGrid=function(){var a=this,b=a.config,c=a.yAxis.tickValues()||a.y.ticks(b.grid_y_ticks);a.ygrid=a.main.select("."+l.ygrids).selectAll("."+l.ygrid).data(c),a.ygrid.enter().append("line").attr("class",l.ygrid),a.ygrid.attr("x1",b.axis_rotated?a.y:0).attr("x2",b.axis_rotated?a.y:a.width).attr("y1",b.axis_rotated?0:a.y).attr("y2",b.axis_rotated?a.height:a.y),a.ygrid.exit().remove(),a.smoothLines(a.ygrid,"grid")},i.gridTextAnchor=function(a){return a.position?a.position:"end"},i.gridTextDx=function(a){return"start"===a.position?4:"middle"===a.position?0:-4},i.xGridTextX=function(a){return"start"===a.position?-this.height:"middle"===a.position?-this.height/2:0},i.yGridTextX=function(a){return"start"===a.position?0:"middle"===a.position?this.width/2:this.width},i.updateGrid=function(a){var b,c,d,e=this,f=e.main,g=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),f.select("line."+l.xgridFocus).style("visibility","hidden"),g.grid_x_show&&e.updateXGrid(),e.xgridLines=f.select("."+l.xgridLines).selectAll("."+l.xgridLine).data(g.grid_x_lines),b=e.xgridLines.enter().append("g").attr("class",function(a){return l.xgridLine+(a["class"]?" "+a["class"]:"")}),b.append("line").style("opacity",0),b.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),e.xgridLines.exit().transition().duration(a).style("opacity",0).remove(),g.grid_y_show&&e.updateYGrid(),e.ygridLines=f.select("."+l.ygridLines).selectAll("."+l.ygridLine).data(g.grid_y_lines),c=e.ygridLines.enter().append("g").attr("class",function(a){return l.ygridLine+(a["class"]?" "+a["class"]:"")}),c.append("line").style("opacity",0),c.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",g.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity",0),d=e.yv.bind(e),e.ygridLines.select("line").transition().duration(a).attr("x1",g.axis_rotated?d:0).attr("x2",g.axis_rotated?d:e.width).attr("y1",g.axis_rotated?0:d).attr("y2",g.axis_rotated?e.height:d).style("opacity",1),e.ygridLines.select("text").transition().duration(a).attr("x",g.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",d).text(function(a){return a.text}).style("opacity",1),e.ygridLines.exit().transition().duration(a).style("opacity",0).remove()},i.redrawGrid=function(a){var b=this,c=b.config,d=b.xv.bind(b),e=b.xgridLines.select("line"),f=b.xgridLines.select("text");return[(a?e.transition():e).attr("x1",c.axis_rotated?0:d).attr("x2",c.axis_rotated?b.width:d).attr("y1",c.axis_rotated?d:0).attr("y2",c.axis_rotated?d:b.height).style("opacity",1),(a?f.transition():f).attr("x",c.axis_rotated?b.yGridTextX.bind(b):b.xGridTextX.bind(b)).attr("y",d).text(function(a){return a.text}).style("opacity",1)]},i.showXGridFocus=function(a){var b=this,c=b.config,d=a.filter(function(a){return a&&m(a.value)}),e=b.main.selectAll("line."+l.xgridFocus),f=b.xx.bind(b);c.tooltip_show&&(b.hasType("scatter")||b.hasArcType()||(e.style("visibility","visible").data([d[0]]).attr(c.axis_rotated?"y1":"x1",f).attr(c.axis_rotated?"y2":"x2",f),b.smoothLines(e,"grid")))},i.hideXGridFocus=function(){this.main.select("line."+l.xgridFocus).style("visibility","hidden")},i.updateXgridFocus=function(){var a=this,b=a.config;a.main.select("line."+l.xgridFocus).attr("x1",b.axis_rotated?0:-10).attr("x2",b.axis_rotated?a.width:-10).attr("y1",b.axis_rotated?-10:0).attr("y2",b.axis_rotated?-10:a.height)},i.generateGridData=function(a,b){var c,d,e,f,g=this,h=[],i=g.main.select("."+l.axisX).selectAll(".tick").size();if("year"===a)for(c=g.getXDomain(),d=c[0].getFullYear(),e=c[1].getFullYear(),f=d;e>=f;f++)h.push(new Date(f+"-01-01 00:00:00"));else h=b.ticks(10),h.length>i&&(h=h.filter(function(a){return(""+a).indexOf(".")<0}));return h},i.getGridFilterToRemove=function(a){return a?function(b){var c=!1;return[].concat(a).forEach(function(a){("value"in a&&b.value===a.value||"class"in a&&b["class"]===a["class"])&&(c=!0)}),c}:function(){return!0}},i.removeGridLines=function(a,b){var c=this,d=c.config,e=c.getGridFilterToRemove(a),f=function(a){return!e(a)},g=b?l.xgridLines:l.ygridLines,h=b?l.xgridLine:l.ygridLine;c.main.select("."+g).selectAll("."+h).filter(e).transition().duration(d.transition_duration).style("opacity",0).remove(),b?d.grid_x_lines=d.grid_x_lines.filter(f):d.grid_y_lines=d.grid_y_lines.filter(f)},i.initTooltip=function(){var a,b=this,c=b.config;if(b.tooltip=b.selectChart.style("position","relative").append("div").attr("class",l.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),c.tooltip_init_show){if(b.isTimeSeries()&&o(c.tooltip_init_x)){for(c.tooltip_init_x=b.parseDate(c.tooltip_init_x),a=0;a<b.data.targets[0].values.length&&b.data.targets[0].values[a].x-c.tooltip_init_x!==0;a++);c.tooltip_init_x=a}b.tooltip.html(c.tooltip_contents.call(b,b.data.targets.map(function(a){return b.addName(a.values[c.tooltip_init_x])}),b.axis.getXAxisTickFormat(),b.getYFormat(b.hasArcType()),b.color)),b.tooltip.style("top",c.tooltip_init_position.top).style("left",c.tooltip_init_position.left).style("display","block")}},i.getTooltipContent=function(a,b,c,d){var e,f,g,h,i,j,k=this,l=k.config,m=l.tooltip_format_title||b,n=l.tooltip_format_name||function(a){return a},o=l.tooltip_format_value||c,p=k.isOrderAsc();if(0===l.data_groups.length)a.sort(function(a,b){return p?a.value-b.value:b.value-a.value});else{var q=k.orderTargets(k.data.targets).map(function(a){return a.id});a.sort(function(a,b){return a.value>0&&b.value>0?p?q.indexOf(a.id)-q.indexOf(b.id):q.indexOf(b.id)-q.indexOf(a.id):p?a.value-b.value:b.value-a.value})}for(f=0;f<a.length;f++)if(a[f]&&(a[f].value||0===a[f].value)&&(e||(g=m?m(a[f].x):a[f].x,e="<table class='"+k.CLASS.tooltip+"'>"+(g||0===g?"<tr><th colspan='2'>"+g+"</th></tr>":"")),h=o(a[f].value,a[f].ratio,a[f].id,a[f].index),void 0!==h)){if(null===a[f].name)continue;i=n(a[f].name,a[f].ratio,a[f].id,a[f].index),j=k.levelColor?k.levelColor(a[f].value):d(a[f].id),e+="<tr class='"+k.CLASS.tooltipName+"-"+k.getTargetSelectorSuffix(a[f].id)+"'>",e+="<td class='name'><span style='background-color:"+j+"'></span>"+i+"</td>",e+="<td class='value'>"+h+"</td>",e+="</tr>"}return e+"</table>"},i.tooltipPosition=function(a,b,c,d){var e,f,g,h,i,j=this,k=j.config,l=j.d3,m=j.hasArcType(),n=l.mouse(d);return m?(f=(j.width-(j.isLegendRight?j.getLegendWidth():0))/2+n[0],h=j.height/2+n[1]+20):(e=j.getSvgLeft(!0),k.axis_rotated?(f=e+n[0]+100,g=f+b,i=j.currentWidth-j.getCurrentPaddingRight(),h=j.x(a[0].x)+20):(f=e+j.getCurrentPaddingLeft(!0)+j.x(a[0].x)+20,g=f+b,i=e+j.currentWidth-j.getCurrentPaddingRight(),h=n[1]+15),g>i&&(f-=g-i+20),h+c>j.currentHeight&&(h-=c+30)),0>h&&(h=0),{top:h,left:f}},i.showTooltip=function(a,b){var c,d,e,f=this,g=f.config,h=f.hasArcType(),j=a.filter(function(a){return a&&m(a.value)}),k=g.tooltip_position||i.tooltipPosition;0!==j.length&&g.tooltip_show&&(f.tooltip.html(g.tooltip_contents.call(f,a,f.axis.getXAxisTickFormat(),f.getYFormat(h),f.color)).style("display","block"),c=f.tooltip.property("offsetWidth"),d=f.tooltip.property("offsetHeight"),e=k.call(this,j,c,d,b),f.tooltip.style("top",e.top+"px").style("left",e.left+"px"))},i.hideTooltip=function(){this.tooltip.style("display","none")},i.initLegend=function(){var a=this;return a.legendItemTextBox={},a.legendHasRendered=!1,a.legend=a.svg.append("g").attr("transform",a.getTranslate("legend")),a.config.legend_show?void a.updateLegendWithDefaults():(a.legend.style("visibility","hidden"),void(a.hiddenLegendIds=a.mapToIds(a.data.targets)))},i.updateLegendWithDefaults=function(){var a=this;a.updateLegend(a.mapToIds(a.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},i.updateSizeForLegend=function(a,b){var c=this,d=c.config,e={top:c.isLegendTop?c.getCurrentPaddingTop()+d.legend_inset_y+5.5:c.currentHeight-a-c.getCurrentPaddingBottom()-d.legend_inset_y,left:c.isLegendLeft?c.getCurrentPaddingLeft()+d.legend_inset_x+.5:c.currentWidth-b-c.getCurrentPaddingRight()-d.legend_inset_x+.5};c.margin3={top:c.isLegendRight?0:c.isLegendInset?e.top:c.currentHeight-a,right:NaN,bottom:0,left:c.isLegendRight?c.currentWidth-b:c.isLegendInset?e.left:0}},i.transformLegend=function(a){var b=this;(a?b.legend.transition():b.legend).attr("transform",b.getTranslate("legend"))},i.updateLegendStep=function(a){this.legendStep=a},i.updateLegendItemWidth=function(a){this.legendItemWidth=a},i.updateLegendItemHeight=function(a){this.legendItemHeight=a},i.getLegendWidth=function(){var a=this;return a.config.legend_show?a.isLegendRight||a.isLegendInset?a.legendItemWidth*(a.legendStep+1):a.currentWidth:0},i.getLegendHeight=function(){var a=this,b=0;return a.config.legend_show&&(b=a.isLegendRight?a.currentHeight:Math.max(20,a.legendItemHeight)*(a.legendStep+1)),b},i.opacityForLegend=function(a){return a.classed(l.legendItemHidden)?null:1},i.opacityForUnfocusedLegend=function(a){return a.classed(l.legendItemHidden)?null:.3},i.toggleFocusLegend=function(a,b){var c=this;a=c.mapToTargetIds(a),c.legend.selectAll("."+l.legendItem).filter(function(b){return a.indexOf(b)>=0}).classed(l.legendItemFocused,b).transition().duration(100).style("opacity",function(){var a=b?c.opacityForLegend:c.opacityForUnfocusedLegend;return a.call(c,c.d3.select(this))})},i.revertLegend=function(){var a=this,b=a.d3;a.legend.selectAll("."+l.legendItem).classed(l.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return a.opacityForLegend(b.select(this))})},i.showLegend=function(a){var b=this,c=b.config;c.legend_show||(c.legend_show=!0,b.legend.style("visibility","visible"),b.legendHasRendered||b.updateLegendWithDefaults()),b.removeHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("visibility","visible").transition().style("opacity",function(){return b.opacityForLegend(b.d3.select(this))})},i.hideLegend=function(a){var b=this,c=b.config;c.legend_show&&u(a)&&(c.legend_show=!1,b.legend.style("visibility","hidden")),b.addHiddenLegendIds(a),b.legend.selectAll(b.selectorLegends(a)).style("opacity",0).style("visibility","hidden")},i.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},i.updateLegend=function(a,b,c){function d(a,b){return y.legendItemTextBox[b]||(y.legendItemTextBox[b]=y.getTextRect(a.textContent,l.legendItem,a)),y.legendItemTextBox[b]}function e(b,c,e){function f(a,b){b||(g=(o-G-n)/2,E>g&&(g=(o-n)/2,G=0,M++)),L[a]=M,K[M]=y.isLegendInset?10:g,H[a]=G,G+=n}var g,h,i=0===e,j=e===a.length-1,k=d(b,c),l=k.width+F+(!j||y.isLegendRight||y.isLegendInset?B:0)+z.legend_padding,m=k.height+A,n=y.isLegendRight||y.isLegendInset?m:l,o=y.isLegendRight||y.isLegendInset?y.getLegendHeight():y.getLegendWidth();return i&&(G=0,M=0,C=0,D=0),z.legend_show&&!y.isLegendToShow(c)?void(I[c]=J[c]=L[c]=H[c]=0):(I[c]=l,J[c]=m,(!C||l>=C)&&(C=l),(!D||m>=D)&&(D=m),h=y.isLegendRight||y.isLegendInset?D:C,void(z.legend_equally?(Object.keys(I).forEach(function(a){I[a]=C}),Object.keys(J).forEach(function(a){J[a]=D}),g=(o-h*a.length)/2,E>g?(G=0,M=0,a.forEach(function(a){f(a)})):f(c,!0)):f(c)))}var f,g,h,i,j,k,m,n,o,p,r,s,t,u,v,x,y=this,z=y.config,A=4,B=10,C=0,D=0,E=10,F=z.legend_item_tile_width+5,G=0,H={},I={},J={},K=[0],L={},M=0;a=a.filter(function(a){return!q(z.data_names[a])||null!==z.data_names[a]}),b=b||{},r=w(b,"withTransition",!0),s=w(b,"withTransitionForTransform",!0),y.isLegendInset&&(M=z.legend_inset_step?z.legend_inset_step:a.length,y.updateLegendStep(M)),y.isLegendRight?(f=function(a){return C*L[a]},i=function(a){return K[L[a]]+H[a]}):y.isLegendInset?(f=function(a){return C*L[a]+10},i=function(a){return K[L[a]]+H[a]}):(f=function(a){return K[L[a]]+H[a]},i=function(a){return D*L[a]}),g=function(a,b){return f(a,b)+4+z.legend_item_tile_width},j=function(a,b){return i(a,b)+9},h=function(a,b){return f(a,b)},k=function(a,b){return i(a,b)-5},m=function(a,b){return f(a,b)-2},n=function(a,b){return f(a,b)-2+z.legend_item_tile_width},o=function(a,b){return i(a,b)+4},p=y.legend.selectAll("."+l.legendItem).data(a).enter().append("g").attr("class",function(a){return y.generateClass(l.legendItem,a)}).style("visibility",function(a){return y.isLegendToShow(a)?"visible":"hidden"}).style("cursor","pointer").on("click",function(a){z.legend_item_onclick?z.legend_item_onclick.call(y,a):y.d3.event.altKey?(y.api.hide(),y.api.show(a)):(y.api.toggle(a),y.isTargetToShow(a)?y.api.focus(a):y.api.revert())}).on("mouseover",function(a){z.legend_item_onmouseover?z.legend_item_onmouseover.call(y,a):(y.d3.select(this).classed(l.legendItemFocused,!0),!y.transiting&&y.isTargetToShow(a)&&y.api.focus(a))}).on("mouseout",function(a){z.legend_item_onmouseout?z.legend_item_onmouseout.call(y,a):(y.d3.select(this).classed(l.legendItemFocused,!1),y.api.revert())}),p.append("text").text(function(a){return q(z.data_names[a])?z.data_names[a]:a}).each(function(a,b){e(this,a,b)}).style("pointer-events","none").attr("x",y.isLegendRight||y.isLegendInset?g:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:j),p.append("rect").attr("class",l.legendItemEvent).style("fill-opacity",0).attr("x",y.isLegendRight||y.isLegendInset?h:-200).attr("y",y.isLegendRight||y.isLegendInset?-200:k),p.append("line").attr("class",l.legendItemTile).style("stroke",y.color).style("pointer-events","none").attr("x1",y.isLegendRight||y.isLegendInset?m:-200).attr("y1",y.isLegendRight||y.isLegendInset?-200:o).attr("x2",y.isLegendRight||y.isLegendInset?n:-200).attr("y2",y.isLegendRight||y.isLegendInset?-200:o).attr("stroke-width",z.legend_item_tile_height),x=y.legend.select("."+l.legendBackground+" rect"),y.isLegendInset&&C>0&&0===x.size()&&(x=y.legend.insert("g","."+l.legendItem).attr("class",l.legendBackground).append("rect")),t=y.legend.selectAll("text").data(a).text(function(a){return q(z.data_names[a])?z.data_names[a]:a}).each(function(a,b){e(this,a,b)}),(r?t.transition():t).attr("x",g).attr("y",j),u=y.legend.selectAll("rect."+l.legendItemEvent).data(a),(r?u.transition():u).attr("width",function(a){return I[a]}).attr("height",function(a){return J[a]}).attr("x",h).attr("y",k),v=y.legend.selectAll("line."+l.legendItemTile).data(a),(r?v.transition():v).style("stroke",y.color).attr("x1",m).attr("y1",o).attr("x2",n).attr("y2",o),x&&(r?x.transition():x).attr("height",y.getLegendHeight()-12).attr("width",C*(M+1)+10),y.legend.selectAll("."+l.legendItem).classed(l.legendItemHidden,function(a){return!y.isTargetToShow(a)}),y.updateLegendItemWidth(C),y.updateLegendItemHeight(D),y.updateLegendStep(M),y.updateSizes(),y.updateScales(),y.updateSvgSize(),y.transformAll(s,c),y.legendHasRendered=!0},i.initTitle=function(){var a=this;a.title=a.svg.append("text").text(a.config.title_text).attr("class",a.CLASS.title)},i.redrawTitle=function(){var a=this;a.title.attr("x",a.xForTitle.bind(a)).attr("y",a.yForTitle.bind(a))},i.xForTitle=function(){var a,b=this,c=b.config,d=c.title_position||"left";return a=d.indexOf("right")>=0?b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width-c.title_padding.right:d.indexOf("center")>=0?(b.currentWidth-b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).width)/2:c.title_padding.left},i.yForTitle=function(){var a=this;return a.config.title_padding.top+a.getTextRect(a.title.node().textContent,a.CLASS.title,a.title.node()).height},i.getTitlePadding=function(){var a=this;return a.yForTitle()+a.config.title_padding.bottom},c(b,f),f.prototype.init=function(){var a=this.owner,b=a.config,c=a.main;a.axes.x=c.append("g").attr("class",l.axis+" "+l.axisX).attr("clip-path",a.clipPathForXAxis).attr("transform",a.getTranslate("x")).style("visibility",b.axis_x_show?"visible":"hidden"),a.axes.x.append("text").attr("class",l.axisXLabel).attr("transform",b.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),a.axes.y=c.append("g").attr("class",l.axis+" "+l.axisY).attr("clip-path",b.axis_y_inner?"":a.clipPathForYAxis).attr("transform",a.getTranslate("y")).style("visibility",b.axis_y_show?"visible":"hidden"),a.axes.y.append("text").attr("class",l.axisYLabel).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),a.axes.y2=c.append("g").attr("class",l.axis+" "+l.axisY2).attr("transform",a.getTranslate("y2")).style("visibility",b.axis_y2_show?"visible":"hidden"),a.axes.y2.append("text").attr("class",l.axisY2Label).attr("transform",b.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},f.prototype.getXAxis=function(a,b,c,d,e,f,h){var i=this.owner,j=i.config,k={isCategory:i.isCategorized(),withOuterTick:e,tickMultiline:j.axis_x_tick_multiline,tickWidth:j.axis_x_tick_width,tickTextRotate:h?0:j.axis_x_tick_rotate,withoutTransition:f},l=g(i.d3,k).scale(a).orient(b);return i.isTimeSeries()&&d&&"function"!=typeof d&&(d=d.map(function(a){return i.parseDate(a)})),l.tickFormat(c).tickValues(d),i.isCategorized()&&(l.tickCentered(j.axis_x_tick_centered),u(j.axis_x_tick_culling)&&(j.axis_x_tick_culling=!1)),l},f.prototype.updateXAxisTickValues=function(a,b){var c,d=this.owner,e=d.config;return(e.axis_x_tick_fit||e.axis_x_tick_count)&&(c=this.generateTickValues(d.mapTargetsToUniqueXs(a),e.axis_x_tick_count,d.isTimeSeries())),b?b.tickValues(c):(d.xAxis.tickValues(c),d.subXAxis.tickValues(c)),c},f.prototype.getYAxis=function(a,b,c,d,e,f){var h={withOuterTick:e,withoutTransition:f},i=this.owner,j=i.d3,k=i.config,l=g(j,h).scale(a).orient(b).tickFormat(c);return i.isTimeSeriesY()?l.ticks(j.time[k.axis_y_tick_time_value],k.axis_y_tick_time_interval):l.tickValues(d),l},f.prototype.getId=function(a){var b=this.owner.config;return a in b.data_axes?b.data_axes[a]:"y"},f.prototype.getXAxisTickFormat=function(){var a=this.owner,b=a.config,c=a.isTimeSeries()?a.defaultAxisTimeFormat:a.isCategorized()?a.categoryName:function(a){return 0>a?a.toFixed(0):a};return b.axis_x_tick_format&&(n(b.axis_x_tick_format)?c=b.axis_x_tick_format:a.isTimeSeries()&&(c=function(c){return c?a.axisTimeFormat(b.axis_x_tick_format)(c):""})),n(c)?function(b){return c.call(a,b)}:c},f.prototype.getTickValues=function(a,b){return a?a:b?b.tickValues():void 0},f.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},f.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},f.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},f.prototype.getLabelOptionByAxisId=function(a){var b,c=this.owner,d=c.config;return"y"===a?b=d.axis_y_label:"y2"===a?b=d.axis_y2_label:"x"===a&&(b=d.axis_x_label),b},f.prototype.getLabelText=function(a){var b=this.getLabelOptionByAxisId(a);return o(b)?b:b?b.text:null},f.prototype.setLabelText=function(a,b){var c=this.owner,d=c.config,e=this.getLabelOptionByAxisId(a);o(e)?"y"===a?d.axis_y_label=b:"y2"===a?d.axis_y2_label=b:"x"===a&&(d.axis_x_label=b):e&&(e.text=b)},f.prototype.getLabelPosition=function(a,b){var c=this.getLabelOptionByAxisId(a),d=c&&"object"==typeof c&&c.position?c.position:b;return{isInner:d.indexOf("inner")>=0,isOuter:d.indexOf("outer")>=0,isLeft:d.indexOf("left")>=0,isCenter:d.indexOf("center")>=0,isRight:d.indexOf("right")>=0,isTop:d.indexOf("top")>=0,isMiddle:d.indexOf("middle")>=0,isBottom:d.indexOf("bottom")>=0}},f.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},f.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},f.prototype.getLabelPositionById=function(a){return"y2"===a?this.getY2AxisLabelPosition():"y"===a?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},f.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},f.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},f.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},f.prototype.xForAxisLabel=function(a,b){var c=this.owner;return a?b.isLeft?0:b.isCenter?c.width/2:c.width:b.isBottom?-c.height:b.isMiddle?-c.height/2:0},f.prototype.dxForAxisLabel=function(a,b){return a?b.isLeft?"0.5em":b.isRight?"-0.5em":"0":b.isTop?"-0.5em":b.isBottom?"0.5em":"0"},f.prototype.textAnchorForAxisLabel=function(a,b){return a?b.isLeft?"start":b.isCenter?"middle":"end":b.isBottom?"start":b.isMiddle?"middle":"end"},f.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.dyForXAxisLabel=function(){var a=this.owner,b=a.config,c=this.getXAxisLabelPosition();return b.axis_rotated?c.isInner?"1.2em":-25-this.getMaxTickWidth("x"):c.isInner?"-0.5em":b.axis_x_height?b.axis_x_height-10:"3em"},f.prototype.dyForYAxisLabel=function(){var a=this.owner,b=this.getYAxisLabelPosition();return a.config.axis_rotated?b.isInner?"-0.5em":"3em":b.isInner?"1.2em":-10-(a.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},f.prototype.dyForY2AxisLabel=function(){var a=this.owner,b=this.getY2AxisLabelPosition();return a.config.axis_rotated?b.isInner?"1.2em":"-2.2em":b.isInner?"-0.5em":15+(a.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},f.prototype.textAnchorForXAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(!a.config.axis_rotated,this.getXAxisLabelPosition())},f.prototype.textAnchorForYAxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getYAxisLabelPosition())},f.prototype.textAnchorForY2AxisLabel=function(){var a=this.owner;return this.textAnchorForAxisLabel(a.config.axis_rotated,this.getY2AxisLabelPosition())},f.prototype.getMaxTickWidth=function(a,b){var c,d,e,f,g,h=this.owner,i=h.config,j=0;return b&&h.currentMaxTickWidths[a]?h.currentMaxTickWidths[a]:(h.svg&&(c=h.filterTargetsToShow(h.data.targets),"y"===a?(d=h.y.copy().domain(h.getYDomain(c,"y")),e=this.getYAxis(d,h.yOrient,i.axis_y_tick_format,h.yAxisTickValues,!1,!0)):"y2"===a?(d=h.y2.copy().domain(h.getYDomain(c,"y2")),e=this.getYAxis(d,h.y2Orient,i.axis_y2_tick_format,h.y2AxisTickValues,!1,!0)):(d=h.x.copy().domain(h.getXDomain(c)),e=this.getXAxis(d,h.xOrient,h.xAxisTickFormat,h.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(c,e)),f=h.d3.select("body").append("div").classed("c3",!0),g=f.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),g.append("g").call(e).each(function(){h.d3.select(this).selectAll("text").each(function(){var a=this.getBoundingClientRect();j<a.width&&(j=a.width)}),f.remove()})),h.currentMaxTickWidths[a]=0>=j?h.currentMaxTickWidths[a]:j,h.currentMaxTickWidths[a])},f.prototype.updateLabels=function(a){var b=this.owner,c=b.main.select("."+l.axisX+" ."+l.axisXLabel),d=b.main.select("."+l.axisY+" ."+l.axisYLabel),e=b.main.select("."+l.axisY2+" ."+l.axisY2Label);(a?c.transition():c).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),
(a?d.transition():d).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(a?e.transition():e).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},f.prototype.getPadding=function(a,b,c,d){var e="number"==typeof a?a:a[b];return m(e)?"ratio"===a.unit?a[b]*d:this.convertPixelsToAxisPadding(e,d):c},f.prototype.convertPixelsToAxisPadding=function(a,b){var c=this.owner,d=c.config.axis_rotated?c.width:c.height;return b*(a/d)},f.prototype.generateTickValues=function(a,b,c){var d,e,f,g,h,i,j,k=a;if(b)if(d=n(b)?b():b,1===d)k=[a[0]];else if(2===d)k=[a[0],a[a.length-1]];else if(d>2){for(g=d-2,e=a[0],f=a[a.length-1],h=(f-e)/(g+1),k=[e],i=0;g>i;i++)j=+e+h*(i+1),k.push(c?new Date(j):j);k.push(f)}return c||(k=k.sort(function(a,b){return a-b})),k},f.prototype.generateTransitions=function(a){var b=this.owner,c=b.axes;return{axisX:a?c.x.transition().duration(a):c.x,axisY:a?c.y.transition().duration(a):c.y,axisY2:a?c.y2.transition().duration(a):c.y2,axisSubX:a?c.subx.transition().duration(a):c.subx}},f.prototype.redraw=function(a,b){var c=this.owner;c.axes.x.style("opacity",b?0:1),c.axes.y.style("opacity",b?0:1),c.axes.y2.style("opacity",b?0:1),c.axes.subx.style("opacity",b?0:1),a.axisX.call(c.xAxis),a.axisY.call(c.yAxis),a.axisY2.call(c.y2Axis),a.axisSubX.call(c.subXAxis)},i.getClipPath=function(b){var c=a.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(c?"":document.URL.split("#")[0])+"#"+b+")"},i.appendClip=function(a,b){return a.append("clipPath").attr("id",b).append("rect")},i.getAxisClipX=function(a){var b=Math.max(30,this.margin.left);return a?-(1+b):-(b-1)},i.getAxisClipY=function(a){return a?-20:-this.margin.top},i.getXAxisClipX=function(){var a=this;return a.getAxisClipX(!a.config.axis_rotated)},i.getXAxisClipY=function(){var a=this;return a.getAxisClipY(!a.config.axis_rotated)},i.getYAxisClipX=function(){var a=this;return a.config.axis_y_inner?-1:a.getAxisClipX(a.config.axis_rotated)},i.getYAxisClipY=function(){var a=this;return a.getAxisClipY(a.config.axis_rotated)},i.getAxisClipWidth=function(a){var b=this,c=Math.max(30,b.margin.left),d=Math.max(30,b.margin.right);return a?b.width+2+c+d:b.margin.left+20},i.getAxisClipHeight=function(a){return(a?this.margin.bottom:this.margin.top+this.height)+20},i.getXAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(!a.config.axis_rotated)},i.getXAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(!a.config.axis_rotated)},i.getYAxisClipWidth=function(){var a=this;return a.getAxisClipWidth(a.config.axis_rotated)+(a.config.axis_y_inner?20:0)},i.getYAxisClipHeight=function(){var a=this;return a.getAxisClipHeight(a.config.axis_rotated)},i.initPie=function(){var a=this,b=a.d3,c=a.config;a.pie=b.layout.pie().value(function(a){return a.values.reduce(function(a,b){return a+b.value},0)}),c.data_order||a.pie.sort(null)},i.updateRadius=function(){var a=this,b=a.config,c=b.gauge_width||b.donut_width;a.radiusExpanded=Math.min(a.arcWidth,a.arcHeight)/2,a.radius=.95*a.radiusExpanded,a.innerRadiusRatio=c?(a.radius-c)/a.radius:.6,a.innerRadius=a.hasType("donut")||a.hasType("gauge")?a.radius*a.innerRadiusRatio:0},i.updateArc=function(){var a=this;a.svgArc=a.getSvgArc(),a.svgArcExpanded=a.getSvgArcExpanded(),a.svgArcExpandedSub=a.getSvgArcExpanded(.98)},i.updateAngle=function(a){var b,c,d,e,f=this,g=f.config,h=!1,i=0;return g?(f.pie(f.filterTargetsToShow(f.data.targets)).forEach(function(b){h||b.data.id!==a.data.id||(h=!0,a=b,a.index=i),i++}),isNaN(a.startAngle)&&(a.startAngle=0),isNaN(a.endAngle)&&(a.endAngle=a.startAngle),f.isGaugeType(a.data)&&(b=g.gauge_min,c=g.gauge_max,d=Math.PI/(c-b),e=a.value<b?0:a.value<c?a.value-b:c-b,a.startAngle=-1*(Math.PI/2),a.endAngle=a.startAngle+d*e),h?a:null):null},i.getSvgArc=function(){var a=this,b=a.d3.svg.arc().outerRadius(a.radius).innerRadius(a.innerRadius),c=function(c,d){var e;return d?b(c):(e=a.updateAngle(c),e?b(e):"M 0 0")};return c.centroid=b.centroid,c},i.getSvgArcExpanded=function(a){var b=this,c=b.d3.svg.arc().outerRadius(b.radiusExpanded*(a?a:1)).innerRadius(b.innerRadius);return function(a){var d=b.updateAngle(a);return d?c(d):"M 0 0"}},i.getArc=function(a,b,c){return c||this.isArcType(a.data)?this.svgArc(a,b):"M 0 0"},i.transformForArcLabel=function(a){var b,c,d,e,f,g=this,h=g.updateAngle(a),i="";return h&&!g.hasType("gauge")&&(b=this.svgArc.centroid(h),c=isNaN(b[0])?0:b[0],d=isNaN(b[1])?0:b[1],e=Math.sqrt(c*c+d*d),f=g.radius&&e?(36/g.radius>.375?1.175-36/g.radius:.8)*g.radius/e:0,i="translate("+c*f+","+d*f+")"),i},i.getArcRatio=function(a){var b=this,c=b.hasType("gauge")?Math.PI:2*Math.PI;return a?(a.endAngle-a.startAngle)/c:null},i.convertToArcData=function(a){return this.addName({id:a.data.id,value:a.value,ratio:this.getArcRatio(a),index:a.index})},i.textForArcLabel=function(a){var b,c,d,e,f,g=this;return g.shouldShowArcLabel()?(b=g.updateAngle(a),c=b?b.value:null,d=g.getArcRatio(b),e=a.data.id,g.hasType("gauge")||g.meetsArcLabelThreshold(d)?(f=g.getArcLabelFormat(),f?f(c,d,e):g.defaultArcValueFormat(c,d)):""):""},i.expandArc=function(b){var c,d=this;return d.transiting?void(c=a.setInterval(function(){d.transiting||(a.clearInterval(c),d.legend.selectAll(".c3-legend-item-focused").size()>0&&d.expandArc(b))},10)):(b=d.mapToTargetIds(b),void d.svg.selectAll(d.selectorTargets(b,"."+l.chartArc)).each(function(a){d.shouldExpand(a.data.id)&&d.d3.select(this).selectAll("path").transition().duration(d.expandDuration(a.data.id)).attr("d",d.svgArcExpanded).transition().duration(2*d.expandDuration(a.data.id)).attr("d",d.svgArcExpandedSub).each(function(a){d.isDonutType(a.data)})}))},i.unexpandArc=function(a){var b=this;b.transiting||(a=b.mapToTargetIds(a),b.svg.selectAll(b.selectorTargets(a,"."+l.chartArc)).selectAll("path").transition().duration(function(a){return b.expandDuration(a.data.id)}).attr("d",b.svgArc),b.svg.selectAll("."+l.arc).style("opacity",1))},i.expandDuration=function(a){var b=this,c=b.config;return b.isDonutType(a)?c.donut_expand_duration:b.isGaugeType(a)?c.gauge_expand_duration:b.isPieType(a)?c.pie_expand_duration:50},i.shouldExpand=function(a){var b=this,c=b.config;return b.isDonutType(a)&&c.donut_expand||b.isGaugeType(a)&&c.gauge_expand||b.isPieType(a)&&c.pie_expand},i.shouldShowArcLabel=function(){var a=this,b=a.config,c=!0;return a.hasType("donut")?c=b.donut_label_show:a.hasType("pie")&&(c=b.pie_label_show),c},i.meetsArcLabelThreshold=function(a){var b=this,c=b.config,d=b.hasType("donut")?c.donut_label_threshold:c.pie_label_threshold;return a>=d},i.getArcLabelFormat=function(){var a=this,b=a.config,c=b.pie_label_format;return a.hasType("gauge")?c=b.gauge_label_format:a.hasType("donut")&&(c=b.donut_label_format),c},i.getArcTitle=function(){var a=this;return a.hasType("donut")?a.config.donut_title:""},i.updateTargetsForArc=function(a){var b,c,d=this,e=d.main,f=d.classChartArc.bind(d),g=d.classArcs.bind(d),h=d.classFocus.bind(d);b=e.select("."+l.chartArcs).selectAll("."+l.chartArc).data(d.pie(a)).attr("class",function(a){return f(a)+h(a.data)}),c=b.enter().append("g").attr("class",f),c.append("g").attr("class",g),c.append("text").attr("dy",d.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},i.initArc=function(){var a=this;a.arcs=a.main.select("."+l.chart).append("g").attr("class",l.chartArcs).attr("transform",a.getTranslate("arc")),a.arcs.append("text").attr("class",l.chartArcsTitle).style("text-anchor","middle").text(a.getArcTitle())},i.redrawArc=function(a,b,c){var d,e=this,f=e.d3,g=e.config,h=e.main;d=h.selectAll("."+l.arcs).selectAll("."+l.arc).data(e.arcData.bind(e)),d.enter().append("path").attr("class",e.classArc.bind(e)).style("fill",function(a){return e.color(a.data)}).style("cursor",function(a){return g.interaction_enabled&&g.data_selection_isselectable(a)?"pointer":null}).style("opacity",0).each(function(a){e.isGaugeType(a.data)&&(a.startAngle=a.endAngle=-1*(Math.PI/2)),this._current=a}),d.attr("transform",function(a){return!e.isGaugeType(a.data)&&c?"scale(0)":""}).style("opacity",function(a){return a===this._current?0:1}).on("mouseover",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.expandArc(b.data.id),e.api.focus(b.data.id),e.toggleFocusLegend(b.data.id,!0),e.config.data_onmouseover(c,this)))}:null).on("mousemove",g.interaction_enabled?function(a){var b,c,d=e.updateAngle(a);d&&(b=e.convertToArcData(d),c=[b],e.showTooltip(c,this))}:null).on("mouseout",g.interaction_enabled?function(a){var b,c;e.transiting||(b=e.updateAngle(a),b&&(c=e.convertToArcData(b),e.unexpandArc(b.data.id),e.api.revert(),e.revertLegend(),e.hideTooltip(),e.config.data_onmouseout(c,this)))}:null).on("click",g.interaction_enabled?function(a,b){var c,d=e.updateAngle(a);d&&(c=e.convertToArcData(d),e.toggleShape&&e.toggleShape(this,c,b),e.config.data_onclick.call(e.api,c,this))}:null).each(function(){e.transiting=!0}).transition().duration(a).attrTween("d",function(a){var b,c=e.updateAngle(a);return c?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),b=f.interpolate(this._current,c),this._current=b(0),function(c){var d=b(c);return d.data=a.data,e.getArc(d,!0)}):function(){return"M 0 0"}}).attr("transform",c?"scale(1)":"").style("fill",function(a){return e.levelColor?e.levelColor(a.data.values[0].value):e.color(a.data.id)}).style("opacity",1).call(e.endall,function(){e.transiting=!1}),d.exit().transition().duration(b).style("opacity",0).remove(),h.selectAll("."+l.chartArc).select("text").style("opacity",0).attr("class",function(a){return e.isGaugeType(a.data)?l.gaugeValue:""}).text(e.textForArcLabel.bind(e)).attr("transform",e.transformForArcLabel.bind(e)).style("font-size",function(a){return e.isGaugeType(a.data)?Math.round(e.radius/5)+"px":""}).transition().duration(a).style("opacity",function(a){return e.isTargetToShow(a.data.id)&&e.isArcType(a.data)?1:0}),h.select("."+l.chartArcsTitle).style("opacity",e.hasType("donut")||e.hasType("gauge")?1:0),e.hasType("gauge")&&(e.arcs.select("."+l.chartArcsBackground).attr("d",function(){var a={data:[{value:g.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return e.getArc(a,!0,!0)}),e.arcs.select("."+l.chartArcsGaugeUnit).attr("dy",".75em").text(g.gauge_label_show?g.gauge_units:""),e.arcs.select("."+l.chartArcsGaugeMin).attr("dx",-1*(e.innerRadius+(e.radius-e.innerRadius)/2)+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_min:""),e.arcs.select("."+l.chartArcsGaugeMax).attr("dx",e.innerRadius+(e.radius-e.innerRadius)/2+"px").attr("dy","1.2em").text(g.gauge_label_show?g.gauge_max:""))},i.initGauge=function(){var a=this.arcs;this.hasType("gauge")&&(a.append("path").attr("class",l.chartArcsBackground),a.append("text").attr("class",l.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),a.append("text").attr("class",l.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},i.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},i.initRegion=function(){var a=this;a.region=a.main.append("g").attr("clip-path",a.clipPath).attr("class",l.regions)},i.updateRegion=function(a){var b=this,c=b.config;b.region.style("visibility",b.hasArcType()?"hidden":"visible"),b.mainRegion=b.main.select("."+l.regions).selectAll("."+l.region).data(c.regions),b.mainRegion.enter().append("g").attr("class",b.classRegion.bind(b)).append("rect").style("fill-opacity",0),b.mainRegion.exit().transition().duration(a).style("opacity",0).remove()},i.redrawRegion=function(a){var b=this,c=b.mainRegion.selectAll("rect"),d=b.regionX.bind(b),e=b.regionY.bind(b),f=b.regionWidth.bind(b),g=b.regionHeight.bind(b);return[(a?c.transition():c).attr("x",d).attr("y",e).attr("width",f).attr("height",g).style("fill-opacity",function(a){return m(a.opacity)?a.opacity:.1})]},i.regionX=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"start"in a?e(a.start):0:d.axis_rotated?0:"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionY=function(a){var b,c=this,d=c.config,e="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?0:"end"in a?e(a.end):0:d.axis_rotated&&"start"in a?c.x(c.isTimeSeries()?c.parseDate(a.start):a.start):0},i.regionWidth=function(a){var b,c=this,d=c.config,e=c.regionX(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated&&"end"in a?f(a.end):c.width:d.axis_rotated?c.width:"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.width,e>b?0:b-e},i.regionHeight=function(a){var b,c=this,d=c.config,e=this.regionY(a),f="y"===a.axis?c.y:c.y2;return b="y"===a.axis||"y2"===a.axis?d.axis_rotated?c.height:"start"in a?f(a.start):c.height:d.axis_rotated&&"end"in a?c.x(c.isTimeSeries()?c.parseDate(a.end):a.end):c.height,e>b?0:b-e},i.isRegionOnX=function(a){return!a.axis||"x"===a.axis},i.drag=function(a){var b,c,d,e,f,g,h,i,j=this,k=j.config,m=j.main,n=j.d3;j.hasArcType()||k.data_selection_enabled&&(!k.zoom_enabled||j.zoom.altDomain)&&k.data_selection_multiple&&(b=j.dragStart[0],c=j.dragStart[1],d=a[0],e=a[1],f=Math.min(b,d),g=Math.max(b,d),h=k.data_selection_grouped?j.margin.top:Math.min(c,e),i=k.data_selection_grouped?j.height:Math.max(c,e),m.select("."+l.dragarea).attr("x",f).attr("y",h).attr("width",g-f).attr("height",i-h),m.selectAll("."+l.shapes).selectAll("."+l.shape).filter(function(a){return k.data_selection_isselectable(a)}).each(function(a,b){var c,d,e,k,m,o,p=n.select(this),q=p.classed(l.SELECTED),r=p.classed(l.INCLUDED),s=!1;if(p.classed(l.circle))c=1*p.attr("cx"),d=1*p.attr("cy"),m=j.togglePoint,s=c>f&&g>c&&d>h&&i>d;else{if(!p.classed(l.bar))return;o=y(this),c=o.x,d=o.y,e=o.width,k=o.height,m=j.togglePath,s=!(c>g||f>c+e||d>i||h>d+k)}s^r&&(p.classed(l.INCLUDED,!r),p.classed(l.SELECTED,!q),m.call(j,!q,p,a,b))}))},i.dragstart=function(a){var b=this,c=b.config;b.hasArcType()||c.data_selection_enabled&&(b.dragStart=a,b.main.select("."+l.chart).append("rect").attr("class",l.dragarea).style("opacity",.1),b.dragging=!0)},i.dragend=function(){var a=this,b=a.config;a.hasArcType()||b.data_selection_enabled&&(a.main.select("."+l.dragarea).transition().duration(100).style("opacity",0).remove(),a.main.selectAll("."+l.shape).classed(l.INCLUDED,!1),a.dragging=!1)},i.selectPoint=function(a,b,c){var d=this,e=d.config,f=(e.axis_rotated?d.circleY:d.circleX).bind(d),g=(e.axis_rotated?d.circleX:d.circleY).bind(d),h=d.pointSelectR.bind(d);e.data_onselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).data([b]).enter().append("circle").attr("class",function(){return d.generateClass(l.selectedCircle,c)}).attr("cx",f).attr("cy",g).attr("stroke",function(){return d.color(b)}).attr("r",function(a){return 1.4*d.pointSelectR(a)}).transition().duration(100).attr("r",h)},i.unselectPoint=function(a,b,c){var d=this;d.config.data_onunselected.call(d.api,b,a.node()),d.main.select("."+l.selectedCircles+d.getTargetSelectorSuffix(b.id)).selectAll("."+l.selectedCircle+"-"+c).transition().duration(100).attr("r",0).remove()},i.togglePoint=function(a,b,c,d){a?this.selectPoint(b,c,d):this.unselectPoint(b,c,d)},i.selectPath=function(a,b){var c=this;c.config.data_onselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.d3.rgb(c.color(b)).brighter(.75)})},i.unselectPath=function(a,b){var c=this;c.config.data_onunselected.call(c,b,a.node()),a.transition().duration(100).style("fill",function(){return c.color(b)})},i.togglePath=function(a,b,c,d){a?this.selectPath(b,c,d):this.unselectPath(b,c,d)},i.getToggle=function(a,b){var c,d=this;return"circle"===a.nodeName?c=d.isStepType(b)?function(){}:d.togglePoint:"path"===a.nodeName&&(c=d.togglePath),c},i.toggleShape=function(a,b,c){var d=this,e=d.d3,f=d.config,g=e.select(a),h=g.classed(l.SELECTED),i=d.getToggle(a,b).bind(d);f.data_selection_enabled&&f.data_selection_isselectable(b)&&(f.data_selection_multiple||d.main.selectAll("."+l.shapes+(f.data_selection_grouped?d.getTargetSelectorSuffix(b.id):"")).selectAll("."+l.shape).each(function(a,b){var c=e.select(this);c.classed(l.SELECTED)&&i(!1,c.classed(l.SELECTED,!1),a,b)}),g.classed(l.SELECTED,!h),i(!h,g,b,c))},i.initBrush=function(){var a=this,b=a.d3;a.brush=b.svg.brush().on("brush",function(){a.redrawForBrush()}),a.brush.update=function(){return a.context&&a.context.select("."+l.brush).call(this),this},a.brush.scale=function(b){return a.config.axis_rotated?this.y(b):this.x(b)}},i.initSubchart=function(){var a=this,b=a.config,c=a.context=a.svg.append("g").attr("transform",a.getTranslate("context")),d=b.subchart_show?"visible":"hidden";c.style("visibility",d),c.append("g").attr("clip-path",a.clipPathForSubchart).attr("class",l.chart),c.select("."+l.chart).append("g").attr("class",l.chartBars),c.select("."+l.chart).append("g").attr("class",l.chartLines),c.append("g").attr("clip-path",a.clipPath).attr("class",l.brush).call(a.brush),a.axes.subx=c.append("g").attr("class",l.axisX).attr("transform",a.getTranslate("subx")).attr("clip-path",b.axis_rotated?"":a.clipPathForXAxis).style("visibility",b.subchart_axis_x_show?d:"hidden")},i.updateTargetsForSubchart=function(a){var b,c,d,e,f=this,g=f.context,h=f.config,i=f.classChartBar.bind(f),j=f.classBars.bind(f),k=f.classChartLine.bind(f),m=f.classLines.bind(f),n=f.classAreas.bind(f);h.subchart_show&&(e=g.select("."+l.chartBars).selectAll("."+l.chartBar).data(a).attr("class",i),d=e.enter().append("g").style("opacity",0).attr("class",i),d.append("g").attr("class",j),c=g.select("."+l.chartLines).selectAll("."+l.chartLine).data(a).attr("class",k),b=c.enter().append("g").style("opacity",0).attr("class",k),b.append("g").attr("class",m),b.append("g").attr("class",n),g.selectAll("."+l.brush+" rect").attr(h.axis_rotated?"width":"height",h.axis_rotated?f.width2:f.height2))},i.updateBarForSubchart=function(a){var b=this;b.contextBar=b.context.selectAll("."+l.bars).selectAll("."+l.bar).data(b.barData.bind(b)),b.contextBar.enter().append("path").attr("class",b.classBar.bind(b)).style("stroke","none").style("fill",b.color),b.contextBar.style("opacity",b.initialOpacity.bind(b)),b.contextBar.exit().transition().duration(a).style("opacity",0).remove()},i.redrawBarForSubchart=function(a,b,c){(b?this.contextBar.transition(Math.random().toString()).duration(c):this.contextBar).attr("d",a).style("opacity",1)},i.updateLineForSubchart=function(a){var b=this;b.contextLine=b.context.selectAll("."+l.lines).selectAll("."+l.line).data(b.lineData.bind(b)),b.contextLine.enter().append("path").attr("class",b.classLine.bind(b)).style("stroke",b.color),b.contextLine.style("opacity",b.initialOpacity.bind(b)),b.contextLine.exit().transition().duration(a).style("opacity",0).remove()},i.redrawLineForSubchart=function(a,b,c){(b?this.contextLine.transition(Math.random().toString()).duration(c):this.contextLine).attr("d",a).style("opacity",1)},i.updateAreaForSubchart=function(a){var b=this,c=b.d3;b.contextArea=b.context.selectAll("."+l.areas).selectAll("."+l.area).data(b.lineData.bind(b)),b.contextArea.enter().append("path").attr("class",b.classArea.bind(b)).style("fill",b.color).style("opacity",function(){return b.orgAreaOpacity=+c.select(this).style("opacity"),0}),b.contextArea.style("opacity",0),b.contextArea.exit().transition().duration(a).style("opacity",0).remove()},i.redrawAreaForSubchart=function(a,b,c){(b?this.contextArea.transition(Math.random().toString()).duration(c):this.contextArea).attr("d",a).style("fill",this.color).style("opacity",this.orgAreaOpacity)},i.redrawSubchart=function(a,b,c,d,e,f,g){var h,i,j,k=this,l=k.d3,m=k.config;k.context.style("visibility",m.subchart_show?"visible":"hidden"),m.subchart_show&&(l.event&&"zoom"===l.event.type&&k.brush.extent(k.x.orgDomain()).update(),a&&(k.brush.empty()||k.brush.extent(k.x.orgDomain()).update(),h=k.generateDrawArea(e,!0),i=k.generateDrawBar(f,!0),j=k.generateDrawLine(g,!0),k.updateBarForSubchart(c),k.updateLineForSubchart(c),k.updateAreaForSubchart(c),k.redrawBarForSubchart(i,c,c),k.redrawLineForSubchart(j,c,c),k.redrawAreaForSubchart(h,c,c)))},i.redrawForBrush=function(){var a=this,b=a.x;a.redraw({withTransition:!1,withY:a.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),a.config.subchart_onbrush.call(a.api,b.orgDomain())},i.transformContext=function(a,b){var c,d=this;b&&b.axisSubX?c=b.axisSubX:(c=d.context.select("."+l.axisX),a&&(c=c.transition())),d.context.attr("transform",d.getTranslate("context")),c.attr("transform",d.getTranslate("subx"))},i.getDefaultExtent=function(){var a=this,b=a.config,c=n(b.axis_x_extent)?b.axis_x_extent(a.getXDomain(a.data.targets)):b.axis_x_extent;return a.isTimeSeries()&&(c=[a.parseDate(c[0]),a.parseDate(c[1])]),c},i.initZoom=function(){var a,b=this,c=b.d3,d=b.config;b.zoom=c.behavior.zoom().on("zoomstart",function(){a=c.event.sourceEvent,b.zoom.altDomain=c.event.sourceEvent.altKey?b.x.orgDomain():null,d.zoom_onzoomstart.call(b.api,c.event.sourceEvent)}).on("zoom",function(){b.redrawForZoom.call(b)}).on("zoomend",function(){var e=c.event.sourceEvent;e&&a.clientX===e.clientX&&a.clientY===e.clientY||(b.redrawEventRect(),b.updateZoom(),d.zoom_onzoomend.call(b.api,b.x.orgDomain()))}),b.zoom.scale=function(a){return d.axis_rotated?this.y(a):this.x(a)},b.zoom.orgScaleExtent=function(){var a=d.zoom_extent?d.zoom_extent:[1,10];return[a[0],Math.max(b.getMaxDataCount()/a[1],a[1])]},b.zoom.updateScaleExtent=function(){var a=t(b.x.orgDomain())/t(b.getZoomDomain()),c=this.orgScaleExtent();return this.scaleExtent([c[0]*a,c[1]*a]),this}},i.getZoomDomain=function(){var a=this,b=a.config,c=a.d3,d=c.min([a.orgXDomain[0],b.zoom_x_min]),e=c.max([a.orgXDomain[1],b.zoom_x_max]);return[d,e]},i.updateZoom=function(){var a=this,b=a.config.zoom_enabled?a.zoom:function(){};a.main.select("."+l.zoomRect).call(b).on("dblclick.zoom",null),a.main.selectAll("."+l.eventRect).call(b).on("dblclick.zoom",null)},i.redrawForZoom=function(){var a=this,b=a.d3,c=a.config,d=a.zoom,e=a.x;if(c.zoom_enabled&&0!==a.filterTargetsToShow(a.data.targets).length){if("mousemove"===b.event.sourceEvent.type&&d.altDomain)return e.domain(d.altDomain),void d.scale(e).updateScaleExtent();a.isCategorized()&&e.orgDomain()[0]===a.orgXDomain[0]&&e.domain([a.orgXDomain[0]-1e-10,e.orgDomain()[1]]),a.redraw({withTransition:!1,withY:c.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===b.event.sourceEvent.type&&(a.cancelClick=!0),c.zoom_onzoom.call(a.api,e.orgDomain())}},i.generateColor=function(){var a=this,b=a.config,c=a.d3,d=b.data_colors,e=v(b.color_pattern)?b.color_pattern:c.scale.category10().range(),f=b.data_color,g=[];return function(a){var b,c=a.id||a.data&&a.data.id||a;return d[c]instanceof Function?b=d[c](a):d[c]?b=d[c]:(g.indexOf(c)<0&&g.push(c),b=e[g.indexOf(c)%e.length],d[c]=b),f instanceof Function?f(b,a):b}},i.generateLevelColor=function(){var a=this,b=a.config,c=b.color_pattern,d=b.color_threshold,e="value"===d.unit,f=d.values&&d.values.length?d.values:[],g=d.max||100;return v(b.color_threshold)?function(a){var b,d,h=c[c.length-1];for(b=0;b<f.length;b++)if(d=e?a:100*a/g,d<f[b]){h=c[b];break}return h}:null},i.getYFormat=function(a){var b=this,c=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.yFormat,d=a&&!b.hasType("gauge")?b.defaultArcValueFormat:b.y2Format;return function(a,e,f){var g="y2"===b.axis.getId(f)?d:c;return g.call(b,a,e)}},i.yFormat=function(a){var b=this,c=b.config,d=c.axis_y_tick_format?c.axis_y_tick_format:b.defaultValueFormat;return d(a)},i.y2Format=function(a){var b=this,c=b.config,d=c.axis_y2_tick_format?c.axis_y2_tick_format:b.defaultValueFormat;return d(a)},i.defaultValueFormat=function(a){return m(a)?+a:""},i.defaultArcValueFormat=function(a,b){return(100*b).toFixed(1)+"%"},i.dataLabelFormat=function(a){var b,c=this,d=c.config.data_labels,e=function(a){return m(a)?+a:""};return b="function"==typeof d.format?d.format:"object"==typeof d.format?d.format[a]?d.format[a]===!0?e:d.format[a]:function(){return""}:e},i.hasCaches=function(a){for(var b=0;b<a.length;b++)if(!(a[b]in this.cache))return!1;return!0},i.addCache=function(a,b){this.cache[a]=this.cloneTarget(b)},i.getCaches=function(a){var b,c=[];for(b=0;b<a.length;b++)a[b]in this.cache&&c.push(this.cloneTarget(this.cache[a[b]]));return c};var l=i.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};i.generateClass=function(a,b){return" "+a+" "+a+this.getTargetSelectorSuffix(b)},i.classText=function(a){return this.generateClass(l.text,a.index)},i.classTexts=function(a){return this.generateClass(l.texts,a.id)},i.classShape=function(a){return this.generateClass(l.shape,a.index)},i.classShapes=function(a){return this.generateClass(l.shapes,a.id)},i.classLine=function(a){return this.classShape(a)+this.generateClass(l.line,a.id)},i.classLines=function(a){return this.classShapes(a)+this.generateClass(l.lines,a.id)},i.classCircle=function(a){return this.classShape(a)+this.generateClass(l.circle,a.index)},i.classCircles=function(a){return this.classShapes(a)+this.generateClass(l.circles,a.id)},i.classBar=function(a){return this.classShape(a)+this.generateClass(l.bar,a.index)},i.classBars=function(a){return this.classShapes(a)+this.generateClass(l.bars,a.id)},i.classArc=function(a){return this.classShape(a.data)+this.generateClass(l.arc,a.data.id)},i.classArcs=function(a){return this.classShapes(a.data)+this.generateClass(l.arcs,a.data.id)},i.classArea=function(a){return this.classShape(a)+this.generateClass(l.area,a.id)},i.classAreas=function(a){return this.classShapes(a)+this.generateClass(l.areas,a.id)},i.classRegion=function(a,b){return this.generateClass(l.region,b)+" "+("class"in a?a["class"]:"")},i.classEvent=function(a){return this.generateClass(l.eventRect,a.index)},i.classTarget=function(a){var b=this,c=b.config.data_classes[a],d="";return c&&(d=" "+l.target+"-"+c),b.generateClass(l.target,a)+d},i.classFocus=function(a){return this.classFocused(a)+this.classDefocused(a)},i.classFocused=function(a){return" "+(this.focusedTargetIds.indexOf(a.id)>=0?l.focused:"")},i.classDefocused=function(a){return" "+(this.defocusedTargetIds.indexOf(a.id)>=0?l.defocused:"")},i.classChartText=function(a){return l.chartText+this.classTarget(a.id)},i.classChartLine=function(a){return l.chartLine+this.classTarget(a.id)},i.classChartBar=function(a){return l.chartBar+this.classTarget(a.id)},i.classChartArc=function(a){return l.chartArc+this.classTarget(a.data.id)},i.getTargetSelectorSuffix=function(a){return a||0===a?("-"+a).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},i.selectorTarget=function(a,b){return(b||"")+"."+l.target+this.getTargetSelectorSuffix(a)},i.selectorTargets=function(a,b){var c=this;return a=a||[],a.length?a.map(function(a){return c.selectorTarget(a,b)}):null},i.selectorLegend=function(a){return"."+l.legendItem+this.getTargetSelectorSuffix(a)},i.selectorLegends=function(a){var b=this;return a&&a.length?a.map(function(a){return b.selectorLegend(a)}):null};var m=i.isValue=function(a){return a||0===a},n=i.isFunction=function(a){return"function"==typeof a},o=i.isString=function(a){return"string"==typeof a},p=i.isUndefined=function(a){return"undefined"==typeof a},q=i.isDefined=function(a){return"undefined"!=typeof a},r=i.ceil10=function(a){return 10*Math.ceil(a/10)},s=i.asHalfPixel=function(a){return Math.ceil(a)+.5},t=i.diffDomain=function(a){return a[1]-a[0]},u=i.isEmpty=function(a){return"undefined"==typeof a||null===a||o(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length},v=i.notEmpty=function(a){return!i.isEmpty(a)},w=i.getOption=function(a,b,c){return q(a[b])?a[b]:c},x=i.hasValue=function(a,b){var c=!1;return Object.keys(a).forEach(function(d){a[d]===b&&(c=!0)}),c},y=i.getPathBox=function(a){var b=a.getBoundingClientRect(),c=[a.pathSegList.getItem(0),a.pathSegList.getItem(1)],d=c[0].x,e=Math.min(c[0].y,c[1].y);return{x:d,y:e,width:b.width,height:b.height}};h.focus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),this.revert(),this.defocus(),b.classed(l.focused,!0).classed(l.defocused,!1),c.hasArcType()&&c.expandArc(a),c.toggleFocusLegend(a,!0),c.focusedTargetIds=a,c.defocusedTargetIds=c.defocusedTargetIds.filter(function(b){return a.indexOf(b)<0})},h.defocus=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a.filter(c.isTargetToShow,c))),b.classed(l.focused,!1).classed(l.defocused,!0),c.hasArcType()&&c.unexpandArc(a),c.toggleFocusLegend(a,!1),c.focusedTargetIds=c.focusedTargetIds.filter(function(b){return a.indexOf(b)<0}),c.defocusedTargetIds=a},h.revert=function(a){var b,c=this.internal;a=c.mapToTargetIds(a),b=c.svg.selectAll(c.selectorTargets(a)),b.classed(l.focused,!1).classed(l.defocused,!1),c.hasArcType()&&c.unexpandArc(a),c.config.legend_show&&(c.showLegend(a.filter(c.isLegendToShow.bind(c))),c.legend.selectAll(c.selectorLegends(a)).filter(function(){return c.d3.select(this).classed(l.legendItemFocused)}).classed(l.legendItemFocused,!1)),c.focusedTargetIds=[],c.defocusedTargetIds=[]},h.show=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.removeHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",1,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",1)}),b.withLegend&&d.showLegend(a),d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.hide=function(a,b){var c,d=this.internal;a=d.mapToTargetIds(a),b=b||{},d.addHiddenTargetIds(a),c=d.svg.selectAll(d.selectorTargets(a)),c.transition().style("opacity",0,"important").call(d.endall,function(){c.style("opacity",null).style("opacity",0)}),b.withLegend&&d.hideLegend(a),d.redraw({
withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},h.toggle=function(a,b){var c=this,d=this.internal;d.mapToTargetIds(a).forEach(function(a){d.isTargetToShow(a)?c.hide(a,b):c.show(a,b)})},h.zoom=function(a){var b=this.internal;return a&&(b.isTimeSeries()&&(a=a.map(function(a){return b.parseDate(a)})),b.brush.extent(a),b.redraw({withUpdateXDomain:!0,withY:b.config.zoom_rescale}),b.config.zoom_onzoom.call(this,b.x.orgDomain())),b.brush.extent()},h.zoom.enable=function(a){var b=this.internal;b.config.zoom_enabled=a,b.updateAndRedraw()},h.unzoom=function(){var a=this.internal;a.brush.clear().update(),a.redraw({withUpdateXDomain:!0})},h.zoom.max=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_max=d.max([b.orgXDomain[1],a])):c.zoom_x_max},h.zoom.min=function(a){var b=this.internal,c=b.config,d=b.d3;return 0===a||a?void(c.zoom_x_min=d.min([b.orgXDomain[0],a])):c.zoom_x_min},h.zoom.range=function(a){return arguments.length?(q(a.max)&&this.domain.max(a.max),void(q(a.min)&&this.domain.min(a.min))):{max:this.domain.max(),min:this.domain.min()}},h.load=function(a){var b=this.internal,c=b.config;return a.xs&&b.addXs(a.xs),"classes"in a&&Object.keys(a.classes).forEach(function(b){c.data_classes[b]=a.classes[b]}),"categories"in a&&b.isCategorized()&&(c.axis_x_categories=a.categories),"axes"in a&&Object.keys(a.axes).forEach(function(b){c.data_axes[b]=a.axes[b]}),"colors"in a&&Object.keys(a.colors).forEach(function(b){c.data_colors[b]=a.colors[b]}),"cacheIds"in a&&b.hasCaches(a.cacheIds)?void b.load(b.getCaches(a.cacheIds),a.done):void("unload"in a?b.unload(b.mapToTargetIds("boolean"==typeof a.unload&&a.unload?null:a.unload),function(){b.loadFromArgs(a)}):b.loadFromArgs(a))},h.unload=function(a){var b=this.internal;a=a||{},a instanceof Array?a={ids:a}:"string"==typeof a&&(a={ids:[a]}),b.unload(b.mapToTargetIds(a.ids),function(){b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),a.done&&a.done()})},h.flow=function(a){var b,c,d,e,f,g,h,i,j=this.internal,k=[],l=j.getMaxDataCount(),n=0,o=0;if(a.json)c=j.convertJsonToData(a.json,a.keys);else if(a.rows)c=j.convertRowsToData(a.rows);else{if(!a.columns)return;c=j.convertColumnsToData(a.columns)}b=j.convertDataToTargets(c,!0),j.data.targets.forEach(function(a){var c,d,e=!1;for(c=0;c<b.length;c++)if(a.id===b[c].id){for(e=!0,a.values[a.values.length-1]&&(o=a.values[a.values.length-1].index+1),n=b[c].values.length,d=0;n>d;d++)b[c].values[d].index=o+d,j.isTimeSeries()||(b[c].values[d].x=o+d);a.values=a.values.concat(b[c].values),b.splice(c,1);break}e||k.push(a.id)}),j.data.targets.forEach(function(a){var b,c;for(b=0;b<k.length;b++)if(a.id===k[b])for(o=a.values[a.values.length-1].index+1,c=0;n>c;c++)a.values.push({id:a.id,index:o+c,x:j.isTimeSeries()?j.getOtherTargetX(o+c):o+c,value:null})}),j.data.targets.length&&b.forEach(function(a){var b,c=[];for(b=j.data.targets[0].values[0].index;o>b;b++)c.push({id:a.id,index:b,x:j.isTimeSeries()?j.getOtherTargetX(b):b,value:null});a.values.forEach(function(a){a.index+=o,j.isTimeSeries()||(a.x+=o)}),a.values=c.concat(a.values)}),j.data.targets=j.data.targets.concat(b),d=j.getMaxDataCount(),f=j.data.targets[0],g=f.values[0],q(a.to)?(n=0,i=j.isTimeSeries()?j.parseDate(a.to):a.to,f.values.forEach(function(a){a.x<i&&n++})):q(a.length)&&(n=a.length),l?1===l&&j.isTimeSeries()&&(h=(f.values[f.values.length-1].x-g.x)/2,e=[new Date(+g.x-h),new Date(+g.x+h)],j.updateXDomain(null,!0,!0,!1,e)):(h=j.isTimeSeries()?f.values.length>1?f.values[f.values.length-1].x-g.x:g.x-j.getXDomain(j.data.targets)[0]:1,e=[g.x-h,g.x],j.updateXDomain(null,!0,!0,!1,e)),j.updateTargets(j.data.targets),j.redraw({flow:{index:g.index,length:n,duration:m(a.duration)?a.duration:j.config.transition_duration,done:a.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})},i.generateFlow=function(a){var b=this,c=b.config,d=b.d3;return function(){var e,f,g,h=a.targets,i=a.flow,j=a.drawBar,k=a.drawLine,m=a.drawArea,n=a.cx,o=a.cy,p=a.xv,q=a.xForText,r=a.yForText,s=a.duration,u=1,v=i.index,w=i.length,x=b.getValueOnIndex(b.data.targets[0].values,v),y=b.getValueOnIndex(b.data.targets[0].values,v+w),z=b.x.domain(),A=i.duration||s,B=i.done||function(){},C=b.generateWait(),D=b.xgrid||d.selectAll([]),E=b.xgridLines||d.selectAll([]),F=b.mainRegion||d.selectAll([]),G=b.mainText||d.selectAll([]),H=b.mainBar||d.selectAll([]),I=b.mainLine||d.selectAll([]),J=b.mainArea||d.selectAll([]),K=b.mainCircle||d.selectAll([]);b.flowing=!0,b.data.targets.forEach(function(a){a.values.splice(0,w)}),g=b.updateXDomain(h,!0,!0),b.updateXGrid&&b.updateXGrid(!0),i.orgDataCount?e=1===i.orgDataCount||x.x===y.x?b.x(z[0])-b.x(g[0]):b.isTimeSeries()?b.x(z[0])-b.x(g[0]):b.x(x.x)-b.x(y.x):1!==b.data.targets[0].values.length?e=b.x(z[0])-b.x(g[0]):b.isTimeSeries()?(x=b.getValueOnIndex(b.data.targets[0].values,0),y=b.getValueOnIndex(b.data.targets[0].values,b.data.targets[0].values.length-1),e=b.x(x.x)-b.x(y.x)):e=t(g)/2,u=t(z)/t(g),f="translate("+e+",0) scale("+u+",1)",b.hideXGridFocus(),d.transition().ease("linear").duration(A).each(function(){C.add(b.axes.x.transition().call(b.xAxis)),C.add(H.transition().attr("transform",f)),C.add(I.transition().attr("transform",f)),C.add(J.transition().attr("transform",f)),C.add(K.transition().attr("transform",f)),C.add(G.transition().attr("transform",f)),C.add(F.filter(b.isRegionOnX).transition().attr("transform",f)),C.add(D.transition().attr("transform",f)),C.add(E.transition().attr("transform",f))}).call(C,function(){var a,d=[],e=[],f=[];if(w){for(a=0;w>a;a++)d.push("."+l.shape+"-"+(v+a)),e.push("."+l.text+"-"+(v+a)),f.push("."+l.eventRect+"-"+(v+a));b.svg.selectAll("."+l.shapes).selectAll(d).remove(),b.svg.selectAll("."+l.texts).selectAll(e).remove(),b.svg.selectAll("."+l.eventRects).selectAll(f).remove(),b.svg.select("."+l.xgrid).remove()}D.attr("transform",null).attr(b.xgridAttr),E.attr("transform",null),E.select("line").attr("x1",c.axis_rotated?0:p).attr("x2",c.axis_rotated?b.width:p),E.select("text").attr("x",c.axis_rotated?b.width:0).attr("y",p),H.attr("transform",null).attr("d",j),I.attr("transform",null).attr("d",k),J.attr("transform",null).attr("d",m),K.attr("transform",null).attr("cx",n).attr("cy",o),G.attr("transform",null).attr("x",q).attr("y",r).style("fill-opacity",b.opacityForText.bind(b)),F.attr("transform",null),F.select("rect").filter(b.isRegionOnX).attr("x",b.regionX.bind(b)).attr("width",b.regionWidth.bind(b)),c.interaction_enabled&&b.redrawEventRect(),B(),b.flowing=!1})}},h.selected=function(a){var b=this.internal,c=b.d3;return c.merge(b.main.selectAll("."+l.shapes+b.getTargetSelectorSuffix(a)).selectAll("."+l.shape).filter(function(){return c.select(this).classed(l.SELECTED)}).map(function(a){return a.map(function(a){var b=a.__data__;return b.data?b.data:b})}))},h.select=function(a,b,c){var d=this.internal,e=d.d3,f=d.config;f.data_selection_enabled&&d.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(g,h){var i=e.select(this),j=g.data?g.data.id:g.id,k=d.getToggle(this,g).bind(d),m=f.data_selection_grouped||!a||a.indexOf(j)>=0,n=!b||b.indexOf(h)>=0,o=i.classed(l.SELECTED);i.classed(l.line)||i.classed(l.area)||(m&&n?f.data_selection_isselectable(g)&&!o&&k(!0,i.classed(l.SELECTED,!0),g,h):q(c)&&c&&o&&k(!1,i.classed(l.SELECTED,!1),g,h))})},h.unselect=function(a,b){var c=this.internal,d=c.d3,e=c.config;e.data_selection_enabled&&c.main.selectAll("."+l.shapes).selectAll("."+l.shape).each(function(f,g){var h=d.select(this),i=f.data?f.data.id:f.id,j=c.getToggle(this,f).bind(c),k=e.data_selection_grouped||!a||a.indexOf(i)>=0,m=!b||b.indexOf(g)>=0,n=h.classed(l.SELECTED);h.classed(l.line)||h.classed(l.area)||k&&m&&e.data_selection_isselectable(f)&&n&&j(!1,h.classed(l.SELECTED,!1),f,g)})},h.transform=function(a,b){var c=this.internal,d=["pie","donut"].indexOf(a)>=0?{withTransform:!0}:null;c.transformTo(b,a,d)},i.transformTo=function(a,b,c){var d=this,e=!d.hasArcType(),f=c||{withTransitionForAxis:e};f.withTransitionForTransform=!1,d.transiting=!1,d.setTargetType(a,b),d.updateTargets(d.data.targets),d.updateAndRedraw(f)},h.groups=function(a){var b=this.internal,c=b.config;return p(a)?c.data_groups:(c.data_groups=a,b.redraw(),c.data_groups)},h.xgrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_x_lines=a,b.redrawWithoutRescale(),c.grid_x_lines):c.grid_x_lines},h.xgrids.add=function(a){var b=this.internal;return this.xgrids(b.config.grid_x_lines.concat(a?a:[]))},h.xgrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!0)},h.ygrids=function(a){var b=this.internal,c=b.config;return a?(c.grid_y_lines=a,b.redrawWithoutRescale(),c.grid_y_lines):c.grid_y_lines},h.ygrids.add=function(a){var b=this.internal;return this.ygrids(b.config.grid_y_lines.concat(a?a:[]))},h.ygrids.remove=function(a){var b=this.internal;b.removeGridLines(a,!1)},h.regions=function(a){var b=this.internal,c=b.config;return a?(c.regions=a,b.redrawWithoutRescale(),c.regions):c.regions},h.regions.add=function(a){var b=this.internal,c=b.config;return a?(c.regions=c.regions.concat(a),b.redrawWithoutRescale(),c.regions):c.regions},h.regions.remove=function(a){var b,c,d,e=this.internal,f=e.config;return a=a||{},b=e.getOption(a,"duration",f.transition_duration),c=e.getOption(a,"classes",[l.region]),d=e.main.select("."+l.regions).selectAll(c.map(function(a){return"."+a})),(b?d.transition().duration(b):d).style("opacity",0).remove(),f.regions=f.regions.filter(function(a){var b=!1;return a["class"]?(a["class"].split(" ").forEach(function(a){c.indexOf(a)>=0&&(b=!0)}),!b):!0}),f.regions},h.data=function(a){var b=this.internal.data.targets;return"undefined"==typeof a?b:b.filter(function(b){return[].concat(a).indexOf(b.id)>=0})},h.data.shown=function(a){return this.internal.filterTargetsToShow(this.data(a))},h.data.values=function(a){var b,c=null;return a&&(b=this.data(a),c=b[0]?b[0].values.map(function(a){return a.value}):null),c},h.data.names=function(a){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",a)},h.data.colors=function(a){return this.internal.updateDataAttributes("colors",a)},h.data.axes=function(a){return this.internal.updateDataAttributes("axes",a)},h.category=function(a,b){var c=this.internal,d=c.config;return arguments.length>1&&(d.axis_x_categories[a]=b,c.redraw()),d.axis_x_categories[a]},h.categories=function(a){var b=this.internal,c=b.config;return arguments.length?(c.axis_x_categories=a,b.redraw(),c.axis_x_categories):c.axis_x_categories},h.color=function(a){var b=this.internal;return b.color(a)},h.x=function(a){var b=this.internal;return arguments.length&&(b.updateTargetX(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.xs=function(a){var b=this.internal;return arguments.length&&(b.updateTargetXs(b.data.targets,a),b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),b.data.xs},h.axis=function(){},h.axis.labels=function(a){var b=this.internal;arguments.length&&(Object.keys(a).forEach(function(c){b.axis.setLabelText(c,a[c])}),b.axis.updateLabels())},h.axis.max=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_max=a.x),m(a.y)&&(c.axis_y_max=a.y),m(a.y2)&&(c.axis_y2_max=a.y2)):c.axis_y_max=c.axis_y2_max=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_max,y:c.axis_y_max,y2:c.axis_y2_max}},h.axis.min=function(a){var b=this.internal,c=b.config;return arguments.length?("object"==typeof a?(m(a.x)&&(c.axis_x_min=a.x),m(a.y)&&(c.axis_y_min=a.y),m(a.y2)&&(c.axis_y2_min=a.y2)):c.axis_y_min=c.axis_y2_min=a,void b.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:c.axis_x_min,y:c.axis_y_min,y2:c.axis_y2_min}},h.axis.range=function(a){return arguments.length?(q(a.max)&&this.axis.max(a.max),void(q(a.min)&&this.axis.min(a.min))):{max:this.axis.max(),min:this.axis.min()}},h.legend=function(){},h.legend.show=function(a){var b=this.internal;b.showLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.legend.hide=function(a){var b=this.internal;b.hideLegend(b.mapToTargetIds(a)),b.updateAndRedraw({withLegend:!0})},h.resize=function(a){var b=this.internal,c=b.config;c.size_width=a?a.width:null,c.size_height=a?a.height:null,this.flush()},h.flush=function(){var a=this.internal;a.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},h.destroy=function(){var b=this.internal;if(a.clearInterval(b.intervalForObserveInserted),void 0!==b.resizeTimeout&&a.clearTimeout(b.resizeTimeout),a.detachEvent)a.detachEvent("onresize",b.resizeFunction);else if(a.removeEventListener)a.removeEventListener("resize",b.resizeFunction);else{var c=a.onresize;c&&c.add&&c.remove&&c.remove(b.resizeFunction)}return b.selectChart.classed("c3",!1).html(""),Object.keys(b).forEach(function(a){b[a]=null}),null},h.tooltip=function(){},h.tooltip.show=function(a){var b,c,d=this.internal;a.mouse&&(c=a.mouse),a.data?d.isMultipleX()?(c=[d.x(a.data.x),d.getYScale(a.data.id)(a.data.value)],b=null):b=m(a.data.index)?a.data.index:d.getIndexByX(a.data.x):"undefined"!=typeof a.x?b=d.getIndexByX(a.x):"undefined"!=typeof a.index&&(b=a.index),d.dispatchEvent("mouseover",b,c),d.dispatchEvent("mousemove",b,c),d.config.tooltip_onshow.call(d,a.data)},h.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var z;i.isSafari=function(){var b=a.navigator.userAgent;return b.indexOf("Safari")>=0&&b.indexOf("Chrome")<0},i.isChrome=function(){var b=a.navigator.userAgent;return b.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return k}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=k:a.c3=k}(window);
(function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,d=e.filter,g=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,_=Object.keys,j=i.bind,w=function(n){return n instanceof w?n:this instanceof w?(this._wrapped=n,void 0):new w(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=w),exports._=w):n._=w,w.VERSION="1.4.4";var A=w.each=w.forEach=function(n,t,e){if(null!=n)if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a in n)if(w.has(n,a)&&t.call(e,n[a],a,n)===r)return};w.map=w.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),e)};var O="Reduce of empty array with no initial value";w.reduce=w.foldl=w.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=w.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},w.reduceRight=w.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=w.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=w.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},w.find=w.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},w.filter=w.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},w.reject=function(n,t,r){return w.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},w.every=w.all=function(n,t,e){t||(t=w.identity);var u=!0;return null==n?u:g&&n.every===g?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var E=w.some=w.any=function(n,t,e){t||(t=w.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};w.contains=w.include=function(n,t){return null==n?!1:y&&n.indexOf===y?n.indexOf(t)!=-1:E(n,function(n){return n===t})},w.invoke=function(n,t){var r=o.call(arguments,2),e=w.isFunction(t);return w.map(n,function(n){return(e?t:n[t]).apply(n,r)})},w.pluck=function(n,t){return w.map(n,function(n){return n[t]})},w.where=function(n,t,r){return w.isEmpty(t)?r?null:[]:w[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},w.findWhere=function(n,t){return w.where(n,t,!0)},w.max=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.max.apply(Math,n);if(!t&&w.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},w.min=function(n,t,r){if(!t&&w.isArray(n)&&n[0]===+n[0]&&65535>n.length)return Math.min.apply(Math,n);if(!t&&w.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return A(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;e.computed>a&&(e={value:n,computed:a})}),e.value},w.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=w.random(r++),e[r-1]=e[t],e[t]=n}),e};var k=function(n){return w.isFunction(n)?n:function(t){return t[n]}};w.sortBy=function(n,t,r){var e=k(t);return w.pluck(w.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index<t.index?-1:1}),"value")};var F=function(n,t,r,e){var u={},i=k(t||w.identity);return A(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};w.groupBy=function(n,t,r){return F(n,t,r,function(n,t,r){(w.has(n,t)?n[t]:n[t]=[]).push(r)})},w.countBy=function(n,t,r){return F(n,t,r,function(n,t){w.has(n,t)||(n[t]=0),n[t]++})},w.sortedIndex=function(n,t,r,e){r=null==r?w.identity:k(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;u>r.call(e,n[o])?i=o+1:a=o}return i},w.toArray=function(n){return n?w.isArray(n)?o.call(n):n.length===+n.length?w.map(n,w.identity):w.values(n):[]},w.size=function(n){return null==n?0:n.length===+n.length?n.length:w.keys(n).length},w.first=w.head=w.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:o.call(n,0,t)},w.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},w.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},w.rest=w.tail=w.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},w.compact=function(n){return w.filter(n,w.identity)};var R=function(n,t,r){return A(n,function(n){w.isArray(n)?t?a.apply(r,n):R(n,t,r):r.push(n)}),r};w.flatten=function(n,t){return R(n,t,[])},w.without=function(n){return w.difference(n,o.call(arguments,1))},w.uniq=w.unique=function(n,t,r,e){w.isFunction(t)&&(e=r,r=t,t=!1);var u=r?w.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:w.contains(a,r))||(a.push(r),i.push(n[e]))}),i},w.union=function(){return w.uniq(c.apply(e,arguments))},w.intersection=function(n){var t=o.call(arguments,1);return w.filter(w.uniq(n),function(n){return w.every(t,function(t){return w.indexOf(t,n)>=0})})},w.difference=function(n){var t=c.apply(e,o.call(arguments,1));return w.filter(n,function(n){return!w.contains(t,n)})},w.zip=function(){for(var n=o.call(arguments),t=w.max(w.pluck(n,"length")),r=Array(t),e=0;t>e;e++)r[e]=w.pluck(n,""+e);return r},w.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},w.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=w.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},w.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},w.range=function(n,t,r){1>=arguments.length&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=Array(e);e>u;)i[u++]=n,n+=r;return i},w.bind=function(n,t){if(n.bind===j&&j)return j.apply(n,o.call(arguments,1));var r=o.call(arguments,2);return function(){return n.apply(t,r.concat(o.call(arguments)))}},w.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},w.bindAll=function(n){var t=o.call(arguments,1);return 0===t.length&&(t=w.functions(n)),A(t,function(t){n[t]=w.bind(n[t],n)}),n},w.memoize=function(n,t){var r={};return t||(t=w.identity),function(){var e=t.apply(this,arguments);return w.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},w.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},w.defer=function(n){return w.delay.apply(w,[n,1].concat(o.call(arguments,1)))},w.throttle=function(n,t){var r,e,u,i,a=0,o=function(){a=new Date,u=null,i=n.apply(r,e)};return function(){var c=new Date,l=t-(c-a);return r=this,e=arguments,0>=l?(clearTimeout(u),u=null,a=c,i=n.apply(r,e)):u||(u=setTimeout(o,l)),i}},w.debounce=function(n,t,r){var e,u;return function(){var i=this,a=arguments,o=function(){e=null,r||(u=n.apply(i,a))},c=r&&!e;return clearTimeout(e),e=setTimeout(o,t),c&&(u=n.apply(i,a)),u}},w.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},w.wrap=function(n,t){return function(){var r=[n];return a.apply(r,arguments),t.apply(this,r)}},w.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},w.after=function(n,t){return 0>=n?t():function(){return 1>--n?t.apply(this,arguments):void 0}},w.keys=_||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)w.has(n,r)&&(t[t.length]=r);return t},w.values=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push(n[r]);return t},w.pairs=function(n){var t=[];for(var r in n)w.has(n,r)&&t.push([r,n[r]]);return t},w.invert=function(n){var t={};for(var r in n)w.has(n,r)&&(t[n[r]]=r);return t},w.functions=w.methods=function(n){var t=[];for(var r in n)w.isFunction(n[r])&&t.push(r);return t.sort()},w.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},w.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},w.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)w.contains(r,u)||(t[u]=n[u]);return t},w.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)null==n[r]&&(n[r]=t[r])}),n},w.clone=function(n){return w.isObject(n)?w.isArray(n)?n.slice():w.extend({},n):n},w.tap=function(n,t){return t(n),n};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof w&&(n=n._wrapped),t instanceof w&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==t+"";case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;r.push(n),e.push(t);var a=0,o=!0;if("[object Array]"==u){if(a=n.length,o=a==t.length)for(;a--&&(o=I(n[a],t[a],r,e)););}else{var c=n.constructor,f=t.constructor;if(c!==f&&!(w.isFunction(c)&&c instanceof c&&w.isFunction(f)&&f instanceof f))return!1;for(var s in n)if(w.has(n,s)&&(a++,!(o=w.has(t,s)&&I(n[s],t[s],r,e))))break;if(o){for(s in t)if(w.has(t,s)&&!a--)break;o=!a}}return r.pop(),e.pop(),o};w.isEqual=function(n,t){return I(n,t,[],[])},w.isEmpty=function(n){if(null==n)return!0;if(w.isArray(n)||w.isString(n))return 0===n.length;for(var t in n)if(w.has(n,t))return!1;return!0},w.isElement=function(n){return!(!n||1!==n.nodeType)},w.isArray=x||function(n){return"[object Array]"==l.call(n)},w.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){w["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),w.isArguments(arguments)||(w.isArguments=function(n){return!(!n||!w.has(n,"callee"))}),"function"!=typeof/./&&(w.isFunction=function(n){return"function"==typeof n}),w.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},w.isNaN=function(n){return w.isNumber(n)&&n!=+n},w.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},w.isNull=function(n){return null===n},w.isUndefined=function(n){return n===void 0},w.has=function(n,t){return f.call(n,t)},w.noConflict=function(){return n._=t,this},w.identity=function(n){return n},w.times=function(n,t,r){for(var e=Array(n),u=0;n>u;u++)e[u]=t.call(r,u);return e},w.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=w.invert(M.escape);var S={escape:RegExp("["+w.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+w.keys(M.unescape).join("|")+")","g")};w.each(["escape","unescape"],function(n){w[n]=function(t){return null==t?"":(""+t).replace(S[n],function(t){return M[n][t]})}}),w.result=function(n,t){if(null==n)return null;var r=n[t];return w.isFunction(r)?r.call(n):r},w.mixin=function(n){A(w.functions(n),function(t){var r=w[t]=n[t];w.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),D.call(this,r.apply(w,n))}})};var N=0;w.uniqueId=function(n){var t=++N+"";return n?n+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;w.template=function(n,t,r){var e;r=w.defaults({},r,w.templateSettings);var u=RegExp([(r.escape||T).source,(r.interpolate||T).source,(r.evaluate||T).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(B,function(n){return"\\"+q[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,w);var c=function(n){return e.call(this,n,w)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},w.chain=function(n){return w(n).chain()};var D=function(n){return this._chain?w(n).chain():n};w.mixin(w),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];w.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],D.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];w.prototype[n]=function(){return D.call(this,t.apply(this._wrapped,arguments))}}),w.extend(w.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.dex = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 *
 * The main dexjs module.
 *
 * @module dex
 * @requires d3
 * @requires jquery
 * @requires jquery-ui
 * @requires underscore
 *
 */
var dex = {};

//require("d3");
//$ = require("jquery");
//require("jquery-ui");
//_ = require("underscore");

/**
 *
 * The version of dexjs.
 *
 * @name version
 * @type {string}
 *
 */
dex.version = "0.7";

/**
 * This routine will return an array [ start, ..., start + len ] using an increment of 1.
 *
 * @param {number} start - The starting index.
 * @param {number} len - The number of integers to generate.
 * @example {@lang javascript}
 * // returns [ 0, 1, 2 ]
 * range(0, 3)
 *
 * @returns {Array} An array consisting of elements [ start, ..., start + len ].
 *
 */
dex.range = function (start, len) {
  return _.range(start, start + len);
};

/**
 *
 * This routine is simply a convenience function as it
 * simply wraps underscore's implementation of a shallow
 * copy.  This method will create a shallow-copied clone
 * of the provided plain object. Any nested objects or
 * arrays will be copied by reference, not duplicated.
 *
 * @param obj
 * @returns {*}
 */
dex.copy = function(obj) {
  return _.copy(obj);
};

/**
 *
 * A module for dealing with arrays.
 *
 * @name array
 * @type {module:array}
 *
 */
dex.array = require('./array/array');

/**
 *
 * A module for configuring things.
 *
 * @name config
 * @type {module:config}
 *
 */
dex.config = require("./config/config");

/**
 *
 * The pub/sub bus used by dex in order to publish and subscribe to events.
 *
 * @name bus
 * @type {PubSub}
 * @see https://github.com/federico-lox/pubsub.js
 *
 */
dex.bus = require("../lib/pubsub");

/**
 *
 * A module for logging to the console.
 *
 * @name console
 * @type {module:console}
 *
 */
dex.console = require("./console/console");

/**
 * A module for dealing with colors.
 *
 * @name color
 * @type {module:color}
 *
 */
dex.color = require("./color/color");

/**
 *
 * A charting module.
 *
 * @name charts
 * @type {module:charts}
 *
 */
dex.charts = {'d3' : {'map' : {}},
  'c3'   : {},
  'dygraphs' : {},
  'd3plus'   : {},
  'google' : {},
  'handlebars' : {},
  'threejs' : {}};

/**
 *
 * A charting module.
 *
 * @name charts
 * @type {module:charts}
 *
 */
dex.ui = {'jqueryui' : {}};

/**
 *
 * A module for handling CSV data structures.
 *
 * @name csv
 * @type {module:csv}
 *
 */
dex.csv = require("./csv/csv");

/**
 *
 * A module providing utilities for data generation.
 *
 * @name datagen
 * @type {module:datagen}
 *
 */
dex.datagen = require("./datagen/datagen");

/**
 *
 * A module for dealing with JSON data.
 *
 * @name json
 * @type {module:json}
 *
 */
dex.json = require("./json/json");

/**
 * A module for dealing with matrices.
 *
 * @name matrix
 * @type {module:matrix}
 *
 */
dex.matrix = require("./matrix/matrix");

/**
 * A module for dealing with javascript objects.
 *
 * @name object
 * @type {module:object}
 *
 */
dex.object = require("./object/object");

/**
 *
 * A module for dealing dex components.
 *
 * @name component
 * @type {module:component}
 *
 */
dex.component = require("./component/component");

module.exports = dex;
},{"../lib/pubsub":2,"./array/array":3,"./color/color":4,"./component/component":5,"./config/config":6,"./console/console":7,"./csv/csv":8,"./datagen/datagen":9,"./json/json":10,"./matrix/matrix":11,"./object/object":12}],2:[function(require,module,exports){
/**
 * pubsub.js
 *
 * A tiny, optimized, tested, standalone and robust
 * pubsub implementation supporting different javascript environments
 *
 * @author Federico "Lox" Lucignano <http://plus.ly/federico.lox>
 *
 * @see https://github.com/federico-lox/pubsub.js
 */

/*global define, module*/
(function (context) {
  'use strict';

  /**
   * @private
   */
  function init() {
    //the channel subscription hash
    var channels = {},
    //help minification
      funcType = Function;

    return {
      /*
       * @public
       *
       * Publish some data on a channel
       *
       * @param String channel The channel to publish on
       * @param Mixed argument The data to publish, the function supports
       * as many data parameters as needed
       *
       * @example Publish stuff on '/some/channel'.
       * Anything subscribed will be called with a function
       * signature like: function(a,b,c){ ... }
       *
       * PubSub.publish(
       *		"/some/channel", "a", "b",
       *		{total: 10, min: 1, max: 3}
       * );
       */
      publish: function () {
        //help minification
        var args = arguments,
        // args[0] is the channel
          subs = channels[args[0]],
          len,
          params,
          x;

        if (subs) {
          len = subs.length;
          params = (args.length > 1) ?
            Array.prototype.splice.call(args, 1) : [];

          //run the callbacks asynchronously,
          //do not block the main execution process
          setTimeout(
            function () {
              //executes callbacks in the order
              //in which they were registered
              for (x = 0; x < len; x += 1) {
                subs[x].apply(context, params);
              }

              //clear references to allow garbage collection
              subs = context = params = null;
            },
            0
          );
        }
      },

      /*
       * @public
       *
       * Register a callback on a channel
       *
       * @param String channel The channel to subscribe to
       * @param Function callback The event handler, any time something is
       * published on a subscribed channel, the callback will be called
       * with the published array as ordered arguments
       *
       * @return Array A handle which can be used to unsubscribe this
       * particular subscription
       *
       * @example PubSub.subscribe(
       *				"/some/channel",
       *				function(a, b, c){ ... }
       *			);
       */
      subscribe: function (channel, callback) {
        if (typeof channel !== 'string') {
          throw "invalid or missing channel";
        }

        if (!(callback instanceof funcType)) {
          throw "invalid or missing callback";
        }

        if (!channels[channel]) {
          channels[channel] = [];
        }

        channels[channel].push(callback);

        return {channel: channel, callback: callback};
      },

      /*
       * @public
       *
       * Disconnect a subscribed function f.
       *
       * @param Mixed handle The return value from a subscribe call or the
       * name of a channel as a String
       * @param Function callback [OPTIONAL] The event handler originaally
       * registered, not needed if handle contains the return value
       * of subscribe
       *
       * @example
       * var handle = PubSub.subscribe("/some/channel", function(){});
       * PubSub.unsubscribe(handle);
       *
       * or
       *
       * PubSub.unsubscribe("/some/channel", callback);
       */
      unsubscribe: function (handle, callback) {
        if (handle.channel && handle.callback) {
          callback = handle.callback;
          handle = handle.channel;
        }

        if (typeof handle !== 'string') {
          throw "invalid or missing channel";
        }

        if (!(callback instanceof funcType)) {
          throw "invalid or missing callback";
        }

        var subs = channels[handle],
          x,
          y = (subs instanceof Array) ? subs.length : 0;

        for (x = 0; x < y; x += 1) {
          if (subs[x] === callback) {
            subs.splice(x, 1);
            break;
          }
        }
      }
    };
  }

  //UMD
  if (typeof define === 'function' && define.amd) {
    //AMD module
    define('pubsub', init);
  } else if (typeof module === 'object' && module.exports) {
    //CommonJS module
    module.exports = init();
  } else {
    //traditional namespace
    context.PubSub = init();
  }
}(this));
},{}],3:[function(require,module,exports){
/**
 *
 * This module provides routines for dealing with arrays.
 *
 * @module array
 *
 */

var array = {};
module.exports = array;

/**
 *
 * Take a slice of an array without modifying the original array.
 *
 * dex.array.slice(array) - Return a copy of the array.
 * dex.array.slice(array, rowRange) - Copy the array, then return a slice
 * within the specified range.
 * dex.array.slice(array, rowRange, maxRows) - Copy the array, then return a slice
 * within the specified range up to, but not exceeding, maxRows rows.
 *
 * @param (array) array - The array to slice.
 * @param (array|number) rowRange - If supplied an array, the range defined by the of rows to slice.
 * @param {number} maxRows - The maximum number of rows to return.
 *
 * @example {@lang javascript}
 * var myArray = [ 1, 2, 3, 4, 5 ];
 *
 * // Returns: [ 3, 4, 5]
 * slice(myArray, 2);
 *
 * // Returns: [ 1, 3, 5 ]
 * slice(myArray, [0, 2, 4]);
 *
 * // I am not sure why you would do this, but in the interest of supporting
 * // the Principle of Least Surprise, this returns the array unchanged.
 * // Returns: [ 1, 2, 3, 4, 5 ]
 * slice(myArray)
 *
 */
module.exports.slice = function (array, rowRange, maxRows) {
    var arraySlice = [];
    var range;
    var i;

    var arrayCopy = dex.array.copy(array);

    // Numeric.
    // Array.
    // Object.  Numeric with start and end.
    if (arguments.length < 2) {
        return arrayCopy;
    }
    else if (arguments.length == 2) {
        if (Array.isArray(rowRange)) {
            range = rowRange;
        }
        else {
            range = dex.range(rowRange, arrayCopy.length - rowRange);
        }
    }
    else if (arguments.length > 2) {
        if (Array.isArray(rowRange)) {
            range = rowRange;
        }
        else {
            range = dex.range(rowRange, maxRows);
        }
    }

    //dex.console.log("BEFORE: array.slice(range=" + range + "): arraySlice=" + arraySlice);
    for (i = 0; i < range.length; i++) {
        arraySlice.push(arrayCopy[range[i]]);
    }
    //dex.console.log("AFTER: array.slice(range=" + range + "): arraySlice=" + arraySlice);
    return arraySlice;
};

/**
 *
 * This method locates the array element whose id tag matches the supplied
 * id.  It returns the index of the first matching array element, or -1 if
 * none was found.
 *
 * @param array The array to search.
 * @param id The id to search on.
 *
 * @returns {number} The index of the first matching array element, or -1
 * if not found.
 *
 */
/*
 module.exports.indexOfById = function (array, id) {
 return _.findIndex(array, { id: id })
 };
 */

/**
 *
 * Is this routine actually used anymore?  Can I deprecate it?  It's long and
 * I don't remember exactly what its doing.
 *
 * @param data
 * @param numValues
 * @returns {*}
 *
 */
/*
 module.exports.indexBands = function (data, numValues) {
 dex.console.log("BANDS");
 var interval, residual, tickIndices, last, i;

 if (numValues <= 0) {
 tickIndices = [];
 }
 else if (numValues == 1) {
 tickIndices = [Math.floor(numValues / 2)];
 }
 else if (numValues == 2) {
 tickIndices = [0, data.length - 1];
 }
 else {
 // We have at least 2 ticks to display.
 // Calculate the rough interval between ticks.
 interval = Math.max(1, Math.floor(data.length / (numValues - 1)));

 // If it's not perfect, record it in the residual.
 residual = Math.floor(data.length % (numValues - 1));

 // Always label our first data point.
 tickIndices = [0];

 // Set stop point on the interior ticks.
 last = data.length - interval;

 dex.console.log("TEST", data, numValues, interval, residual, last);

 // Figure out the interior ticks, gently drift to accommodate
 // the residual.
 for (i = interval; i <= last; i += interval) {
 if (residual > 0) {
 i += 1;
 residual -= 1;
 }
 tickIndices.push(i);
 }
 // Always graph the last tick.
 tickIndices.push(data.length - 1);
 }
 dex.console.log("BANDS");
 return tickIndices;
 };
 */

/**
 * Return an array consisting of unique elements within the first.
 *
 * @param array The array to extract unique values from.
 *
 * @returns {Array} An array which consists of unique elements within
 * the user supplied array.
 *
 */
//module.exports.unique = function (array) {
//  return _.uniq(array);
//};

/**
 *
 * Returns an array of the mathematically smallest and largest
 * elements within the array.
 *
 * @param matrix The array to evaluate.
 * @param indices The array indices to be considered in the evaluation.
 *
 * @returns {Array} - An array consisting of [ min, max ] of the array.
 *
 */
module.exports.extent = function (matrix, indices) {
    if (!matrix || matrix.length <= 0 || !indices || indices.length <= 0) {
        return [0, 0];
    }

    var min = matrix[0][indices[0]];
    var max = min;

    indices.forEach(function (ci) {
        matrix.forEach(function (row) {
            if (min > row[ci]) {
                min = row[ci];
            }
            if (max < row[ci]) {
                max = row[ci];
            }
        })
    });
    return [min, max];
};

/**
 *
 * Return a distinct copy of an array.
 *
 * @param {Array} array The array to copy.
 * @returns {Array} The copy of the array.
 *
 */
module.exports.copy = function (array) {
    // Shallow copy
    return _.clone(array);
    // Deep copy:
    //return $.extend(true, {}, array);
};
},{}],4:[function(require,module,exports){
/**
 *
 * This module provides routines for dealing with colors.
 *
 * @module color
 *
 */

/**
 *
 * This routine converts a rgb(red, green, blue) color to it's
 * equivalent #ffffff hexadecimal form.
 *
 * @param color The color we wish to convert to hex.
 * @returns {*}
 */
exports.toHex = function (color) {
  if (color.substr(0, 1) === '#') {
    return color;
  }
  //console.log("COLOR: " + color)
  var digits = /rgb\((\d+),(\d+),(\d+)\)/.exec(color);
  //console.log("DIGITS: " + digits);
  var red = parseInt(digits[1]);
  var green = parseInt(digits[2]);
  var blue = parseInt(digits[3]);

  var rgb = blue | (green << 8) | (red << 16);
  return '#' + rgb.toString(16);
};

/**
 *
 * This routine returns the requested named color scheme with
 * the requested number of colors.
 *
 * @param colorScheme The named color schemes: cat10, cat20, cat20b, cat20c, HiContrast or
 * any of the named colors from colorbrewer.
 * @param numColors The number of colors being requested.
 *
 * @returns {*} The array of colors.
 */
exports.colorScheme = function (colorScheme, numColors) {
  if (colorScheme === "cat10" || colorScheme == "1") {
    return d3.scale.category10();
  }
  else if (colorScheme === "cat20" || colorScheme == "2") {
    return d3.scale.category20();
  }
  else if (colorScheme === "cat20b" || colorScheme == "3") {
    return d3.scale.category20b();
  }
  else if (colorScheme === "cat20c" || colorScheme == "4") {
    return d3.scale.category20c();
  }
  else if (colorScheme == "HiContrast") {
    return d3.scale.ordinal().range(colorbrewer[colorScheme][9]);
  }
  else if (colorScheme in colorbrewer) {
    //console.log("LENGTH: " + len);
    var c;
    var effColors = Math.pow(2, Math.ceil(Math.log(numColors) / Math.log(2)));
    //console.log("EFF LENGTH: " + len);

    // Find the best cmap:
    if (effColors > 128) {
      effColors = 256;
    }

    for (c = effColors; c >= 2; c--) {
      if (colorbrewer[colorScheme][c]) {
        return d3.scale.ordinal().range(colorbrewer[colorScheme][c]);
      }
    }
    for (c = effColors; c <= 256; c++) {
      if (colorbrewer[colorScheme][c]) {
        return d3.scale.ordinal().range(colorbrewer[colorScheme][c]);
      }
    }
    return d3.scale.category20();
  }
  else {
    return d3.scale.category20();
  }
};

/**
 *
 * Given a color, lighten or darken it by the requested percent.
 *
 * @param color The color to modify.
 * @param percent A floating point number in the range of [-1.0, 1.0].  Negative
 * values will lighten the color, positive values will darken it.
 *
 * @returns {string} The lightened or darkened color in the form of #ffffff.
 *
 */
exports.shadeColor = function (color, percent) {
  var f = parseInt(color.slice(1), 16), t = percent < 0 ? 0 : 255,
    p = percent < 0 ? percent * -1 : percent,
    R = f >> 16, G = f >> 8 & 0x00FF, B = f & 0x0000FF;
  return "#" + (0x1000000 + (Math.round((t - R) * p) + R) * 0x10000 + (Math.round((t - G) * p) + G) *
    0x100 + (Math.round((t - B) * p) + B)).toString(16).slice(1);
};

/**
 *
 * Given two colors, blend them together.
 *
 * @param color1
 * @param color2
 * @param percent
 * @returns {string}
 *
 */
exports.blendColors = function(color1, color2, percent) {
  var f = parseInt(color1.slice(1), 16), t = parseInt(color2.slice(1), 16),
    R1 = f >> 16, G1 = f >> 8 & 0x00FF,
    B1 = f & 0x0000FF, R2 = t >> 16,
    G2 = t >> 8 & 0x00FF, B2 = t & 0x0000FF;

  return "#" + (0x1000000 + (Math.round((R2 - R1) * percent) + R1) * 0x10000 +
    (Math.round((G2 - G1) * percent) + G1) * 0x100 +
    (Math.round((B2 - B1) * percent) + B1)).toString(16).slice(1);
};

/**
 *
 * @param color
 * @param percent
 * @returns {string}
 */
exports.shadeRGBColor = function (color, percent) {
  var f = color.split(","), t = percent < 0 ? 0 : 255,
    p = percent < 0 ? percent * -1 : percent, R = parseInt(f[0].slice(4)),
    G = parseInt(f[1]), B = parseInt(f[2]);
  return "rgb(" + (Math.round((t - R) * p) + R) + "," +
    (Math.round((t - G) * p) + G) + "," +
    (Math.round((t - B) * p) + B) + ")";
};

/**
 *
 * @param color1
 * @param color2
 * @param percent
 * @returns {string}
 */
exports.blendRGBColors = function(color1, color2, percent) {
  var f = color1.split(","), t = color2.split(","), R = parseInt(f[0].slice(4)),
    G = parseInt(f[1]), B = parseInt(f[2]);
  return "rgb(" + (Math.round((parseInt(t[0].slice(4)) - R) * p) + R) + "," +
    (Math.round((parseInt(t[1]) - G) * percent) + G) + "," +
    (Math.round((parseInt(t[2]) - B) * percent) + B) + ")";
};

/**
 *
 * @param color
 * @param percent
 * @returns {*}
 */
exports.shade = function(color, percent) {
  if (color.length > 7) return shadeRGBColor(color, percent);
  else return shadeColor2(color, percent);
};

/**
 *
 * @param color1
 * @param color2
 * @param percent
 */
exports.blend = function (color1, color2, percent) {
  if (color1.length > 7) return blendRGBColors(color1, color2, percent);
  else return blendColors(color1, color2, percent);
};

/**
 *
 * Given a color and a percent to lighten or darken it.
 *
 * @param color The base color.
 * @param percent The pecentage to lighten (negative) or darken (positive) the color.
 *
 * @returns {string} The computed color.
 *
 */
/*
 exports.shadeColor = function (color, percent) {
 var R = parseInt(color.substring(1, 3), 16)
 var G = parseInt(color.substring(3, 5), 16)
 var B = parseInt(color.substring(5, 7), 16);

 R = parseInt(R * (100 + percent) / 100);
 G = parseInt(G * (100 + percent) / 100);
 B = parseInt(B * (100 + percent) / 100);

 R = (R < 255) ? R : 255;
 G = (G < 255) ? G : 255;
 B = (B < 255) ? B : 255;

 var RR = ((R.toString(16).length == 1) ? "0" + R.toString(16) : R.toString(16));
 var GG = ((G.toString(16).length == 1) ? "0" + G.toString(16) : G.toString(16));
 var BB = ((B.toString(16).length == 1) ? "0" + B.toString(16) : B.toString(16));

 return "#" + RR + GG + BB;
 };
 */

exports.gradient = function (baseColor) {
  if (baseColor.charAt(0) == 'r') {
    baseColor = colorToHex(baseColor);
  }
  var gradientId;
  gradientId = "gradient" + baseColor.substring(1)
  console.log("GradientId: " + gradientId);
  console.log("BaseColor : " + baseColor);

  //var lightColor = shadeColor(baseColor, -10)
  var darkColor = shadeColor(baseColor, -20)

  var grad = d3.select("#gradients").selectAll("#" + gradientId)
    .data([gradientId])
    .enter()
    .append("radialGradient")
    .attr("class", "colorGradient")
    .attr("id", gradientId)
    .attr("gradientUnits", "objectBoundingBox")
    .attr("fx", "30%")
    .attr("fy", "30%")

  grad.append("stop")
    .attr("offset", "0%")
    .attr("style", "stop-color:#FFFFFF")

  // Middle
  grad.append("stop")
    .attr("offset", "40%")
    .attr("style", "stop-color:" + baseColor)

  // Outer Edges
  grad.append("stop")
    .attr("offset", "100%")
    .attr("style", "stop-color:" + darkColor)

  return "url(#" + gradientId + ")";
};

},{}],5:[function(require,module,exports){
/**
 *
 * This module provides base capabilities which are available to all dex components.
 *
 * @interface
 *
 */

/**
 *
 * A matrix is a two dimensional array of values.  It's a data structure
 * which is a key component of a csv which is used extensively
 * throughout DexJs.  The data portion of a csv is simply a matrix.
 * A csv is the standard form of data input expected by dex components.
 *
 * @typedef {Array.<Array.<Object>>} matrix
 * @example {@lang javascript}
 * // A 2x2 matrix of numbers.
 * var matrix1 = [[1, 2], [3, 4]];
 *
 * // A 2x2 matrix of strings.
 * var matrix2 = [['Pat', 'Martin'], ['Mike', 'Parton']];
 */

/**
 * A CSV data structure.
 *
 * @typedef {Object} csv
 *
 * @property {Array} header - An array containing the headings for this csv.
 * @property {matrix} data - A matrix containing the data for this csv.
 * @example {@lang javascript}
 * var myCsv = { header : [ "FirstName", "LastName" ],
 *               data   : [[ "Bob", "Jones" ], [ "Ricky", "Bobby" ]] };
 *
 */

/**
 * A D3 axis specification.
 * @typedef {Object} d3axis_spec
 *
 * @property {d3scale} [scale=dex.config.scale({type:'linear'})] - The scale to be used for this axis.
 * @property {String} [orient=bottom] - The orientation of the axis. (left|right|top|bottom)
 * @property {String} [ticks] - The number of ticks to generate for this axis.
 * @property {Array} [tickValues] - Supply specific places to draw the ticks.
 * @property {String} [tickSize=[6,6]] - Sets the length of both the inner and outer ticks.
 * @property {String} [innerTickSize=d] - Sets the length of inner ticks.
 * @property {String} [outerTickSize=6] - Sets the length of outer ticks.
 * @property {String} [tickPadding=3] - Sets the tick padding in pixels.
 * @property {String} [tickFormat] - Sets the format of tick labels. ex: d3.format(",.0f")
 *
 */

/**
 *
 * A D3 scale specification.
 *
 * @typedef {Object} d3scale_spec
 *
 * @property {string} [type=linear] - The type of scale to create.  Valid types are
 * (linear|sqrt|pow|time|log|ordinal|quantile|quantize|identity)
 * @property {Array} [domain=[0, 100]] - The domain for this scale.
 * @property {Array} [range=[0, 800]] - The range for this scale.
 * @property {Array} [rangeRound] - Sets the scale's output range to the specified array of values, while also
 * setting the scale's interpolator to d3.interpolateRound.
 * @property {String} [interpolate] - When supplied, sets the scale's output
 * interpolator using the specified factory.
 * @property {String} [clamp] - Set to true in order to enable clamping, false to disable
 * it.  Ensures interpolation/extrapolation does not generate values outside of this
 * scale's range.
 * @property {String} [nice] - If true, will extend the scale's domain to begin and
 * end on nice round integer values.
 * @property {string} [tickFormat] - Only applies to time scales.  Set's the tick
 * format.
 *
 */

/**
 *
 * A D3 font specification.  More information can be found in the {@link http://www.w3.org/TR/SVG/text.html|W3C SVG 1.1 Text Specification}.
 *
 * @typedef {Object} d3font_spec
 *
 * @property {string} [decoration=none] - This property describes decorations that are added to the text of an element.
 * Valid values: ( none | underline | overline | line-through | blink | inherit )
 * @property {string} [family=sans-serif] - This property indicates which font family is to be used to render the text.
 * @property {string} [letterSpacing=normal] -
 * @property {integer} [size=14] - The size of the font.
 * @property {string} [style=normal] - This property specifies whether the text is to be rendered using a normal,
 * italic or oblique face. Valid values are: ( normal | italic | oblique | inherit ).
 * @property {string} [weight=normal] - This property indicates whether the text is to be rendered using the normal glyphs
 * for lowercase characters or using small-caps glyphs for lowercase characters.  Valid values for this field are:
 * ( normal | bold | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit)
 * @property {string|integer} [wordSpacing=normal] - Specifies the amount of space that is to be added between text characters.
 * Valid values: ( auto | <integer-length> | inherit )
 * @property {string} [variant=normal] - his property indicates whether the text is to be rendered using
 * the normal glyphs for lowercase characters or using small-caps glyphs for lowercase characters.
 * Valid values: ( normal | small-caps | inherit )
 *
 */

/**
 *
 * A D3 stroke specification.
 *
 * @typedef {Object} d3stroke_spec
 *
 * @property {float} [width=1] - The width (in pixels) of this stroke.
 * @property {string} [color=black] - The color of this stroke.
 * @property {float} [opacity=1] - The opacity of this stroke in the range of
 * where 0 is invisible and 1 represents 100% opaque stroke. [0, 1]
 * @property {string} [dasharray] - Used to draw dashed lines.  Ex: "1 1" will draw
 * a dashed line which consists of single pixel dashes separated by 1 empty pixel.
 * @property {string} [transform] - A transform to be applied to the stroke.
 *
 */

/**
 *
 * A D3 text specification.
 *
 * @typedef {Object} d3text_spec
 *
 * @property {d3font_spec} [font] - The d3 font specification for this stroke.
 * @property {integer} [x=0] - The x coordinate for the first character of this text.
 * @property {integer} [y=0] - The y coordinate for the first character of this text.
 * @property {integer} [textLength] - The author's estimation of the length of this text.
 * The system will use this as a preference and attempt to size the text to this length.
 * @property {integer} [lengthAdjust] - Indicates the type of adjustments which the user
 * agent shall make to make the rendered length of the text match the value specified on
 * the textLength attribute.  Valid values: ( spacing | spacingAndGlyphs )
 * @property {string} [transform] - Any extra transformations to be applied to this
 * text.
 * @property {string} [glyphOrientationVertical] - Allows the user to control the
 * orientation of text.  Valid values: ( auto | <angle> | inherit ).  Angle may be expressed
 * in degrees, radians, or as a gradient.
 * @property {string} [text] - The text we are representing.
 * @property {integer} [dx=0] - An x-axis offset to be applied to this text.
 * @property {integer} [dy=0] - A y-axis offset to be applied to this text.
 * @property {string} [writingMode] - Specifies whether text flows left to right,
 * right to left, top to bottom or bottom to top.  Valid values: ( lr-tb, rl-tb, tb-rl,
 * lr, rl, tb, inherit )
 * @property {string} [anchor=start] - Specifies where this text should be anchored to.
 * Valid values: ( start | middle | end )
 * @property {d3fill_spec} [fill] - The fill to be applied to this text.
 * @property {string} [format] - A d3 format to be applied to the text.
 *
 */

/**
 *
 * A D3 rectangle specification.
 *
 * @typedef {Object} d3rect_spec
 *
 * @property {number} [width=50] - The width of this rectangle.
 * @property {number} [height=50] - The height of this rectangle.
 * @property {number} [x=0] - The x coordinate of the top left corner of this rectangle.
 * @property {number} [y=0] - The y coordinate of the top left corner of this rectangle.
 * @property {number} [rx=0] - For rounded rectangles, the x-axis radius of the ellipse
 * used to round off the corners of the rectangle.
 * @property {number} [ry=0] - For rounded rectangles, the y-axis radius of the ellipse
 * used to round off the corners of the rectangle.
 * @property {d3stroke_spec} [stroke] - The stroke which will be used to draw the rectangle.
 * @property {number} [opacity=1] - The opacity for this rectangle expressed as a floating
 * point number in the range of [ 0.0, 1.0 ] where 0 is transparent, 1 is opaque, and all
 * others are somewhere in between fully transparent and fully opaque.
 * @property {d3colorscale} [color=d3.scale.category20()] - The color scale which we will
 * to color this rectangle.
 * @property {string} [transform] - A transform, if any, to be applied to this rectangle.
 * @property {events_spec} [events] - Any events which we wish to respond to.
 *
 */

/**
 *
 * An events specification.  Many events are supported, the ones listed here are a subset
 * of all of the possible events.  For a complete list, refer to Mozilla's developer documentation
 * concerning {@link https://developer.mozilla.org/en-US/docs/Web/Events#Standard_events|standard events}.
 *
 * @typedef {Object} dexevents_spec
 *
 * @property {string} [mousedown] - Handles events generated when a pointing device button (usually a mouse)
 * is pressed on an element.
 * @property {string} [mouseenter] - Handles mouseover events generated when a pointing device is moved onto
 * the element that has the listener attached.
 * @property {string} [mouseleave] - Handles mouseover events generated when a pointing device is moved off
 * the element that has the listener attached.
 * @property {string} [mousemove] - Handles mouseover events generated when a pointing device is moved over
 * an element.
 * @property {string} [mouseout] - Handles mouseover events generated when a pointing device is moved off
 * the element that has the listener attached or off one of its children.
 * @property {string} [mouseover] - Handles mouseover events generated when a pointing device is moved
 * onto the element that has the listener attached or onto one of its children.
 * @property {string} [mouseup] - Handles mouseover events generated when a pointing device button is
 * released over an element.
 * @property {string} [dblclick] - Handles mouseover events generated when a pointing device is quickly
 * clicked twice on an element.
 * @property {string} [wheel] - The mouse wheel of a pointing device has been rotated in any direction.
 * @property {string} [keydown] - Handles mouseover events generated when a key is pressed down.
 * @property {string} [keypress] - Handles mouseover events generated when a key is pressed down
 * and that key normally produces a character value.
 * @property {string} [keyup] - Handles mouseover events generated when a key is released.
 * @property {string} [message] - A message is received from something.  ie: WebSocket, Web Worker,
 * iframe, parent window or other event source.
 * @property {string} [drag] - Handles mouseover events generated when an element or text selection
 * is being dragged (every 350ms).
 * @property {string} [dragend] - Handles mouseover events generated when a drag operation is being
 * ended (by releasing a mouse button or hitting the escape key).
 * @property {string} [dragenter] - Handles mouseover events generated when a dragged element or
 * text selection enters a valid drop target.
 * @property {string} [dragleave] - Handles mouseover events generated when a dragged element or
 * text selection leaves a valid drop target.
 * @property {string} [dragover] - Handles mouseover events generated when an n element or text
 * selection is being dragged over a valid drop target (every 350ms).
 * @property {string} [dragstart] - Handles mouseover events generated when the user starts
 * dragging an element or text selection.
 * @property {string} [drop] - Handles mouseover events generated when an element is dropped
 * on a valid drop target.
 *
 * @property {string} [touchcancel] - Handles mouseover events generated when a touch point
 * has been disrupted in an implementation-specific manners (too many touch points for example).
 * @property {string} [touchend] - Handles mouseover events generated when a touch point is
 * removed from the touch surface.
 * @property {string} [touchenter] - Handles mouseover events generated when a touch point
 * is moved onto the interactive area of an element.
 * @property {string} [touchleave] - Handles mouseover events generated when a touch point
 * is moved off the interactive area of an element.
 * @property {string} [touchmove] - Handles mouseover events generated when a touch point
 * is moved along the touch surface.
 * @property {string} [touchstart] - Handles mouseover events generated when a touch point
 * is placed on the touch surface.
 *
 */


/**
 *
 * A D3 line specification.
 *
 * @typedef {Object} d3line_spec
 *
 * @property {d3point_spec} [start] - The starting point for this line.
 * @property {d3_point_spec} [end] - The ending point for this line.
 * @property {d3stroke_spec} [strokc] - The stroke to be used when drawing this line.
 *
 */

/**
 *
 * A D3 point specification.
 *
 * @typedef {Object} d3point_spec
 *
 * @property {number} [x] - The starting point for this line.
 * @property {number} [y] - The ending point for this line.
 *
 */

/**
 *
 * A D3 circle specification.
 *
 * @typedef {Object} d3point_spec
 *
 * @property {number} [cx] - The x-coordinate of the center point of this circle.
 * @property {number} [cy] - The y-coordinate of the center point of this circle.
 * @property {number} [r] - The radius of the circle.
 * @property {d3fill_spec} [fill] - The circle's fill.
 * @property {d3stroke_spec} [stroke] - The circle's stroke.
 * @property {string} [transform] - A transform, if any, to be applied to this circle.
 * @property {string} [title] - The title of the circle.
 * @property {d3events_spec} [events] - Any events to be associated with this circle.
 *
 */

/**
 *
 * A D3 tick specification.
 *
 * @typedef {Object} d3tick_spec
 *
 * @property {number} [count] - The number of ticks to dra.
 * @property {object} [size] - The size of the tick.
 * @property {number} [size.major] - The length of the major ticks.
 * @property {number} [size.minor] - The length of the minor ticks.
 * @property {number} [size.end] - The length of the ticks at the ends of the axis.
 * @property {number} [padding] - The padding for ticks.
 * @property {string} [format] - The format to be applied to each tick label.
 * @property {d3text_spec} [label] - The specification for the appearance of tick
 * labels.
 *
 */

/**
 *
 * A D3 path specification.
 *
 * @typedef {Object} d3path_spec
 *
 * @property {d3fill_spec} [fill] - The fill to apply when drawing this path.
 * @property {d3stroke_spec} [stroke] - The stroke to use when drawing this path.
 *
 */

/**
 *
 * A D3 fill specification.
 * @typedef {Object} d3fill_spec
 *
 * @property {string} [fillColor=grey] - The color of this fill.
 * @property {float} [opacity=1] - The opacity of this fill in the range of
 * where 0 is invisible and 1 represents 100% opaque fill. [0, 1]
 *
 */

/**
 *
 * A D3 link specification.
 * @typedef {Object} d3link_spec
 *
 * @property {d3fill} [fill] - The fill to be used for this link.
 * @property {d3stroke} [stroke] - The stroke to be used for this link.
 * @property {string} [transform] - The transform to apply to this link.
 * @property {object} d - The data to associate with this link.
 * @property {d3events} [events] - The events to associate with this link.
 *
 */

/**
 *
 * This is the base constructor for all dex components.  It provides some of the common
 * functionality such as attribute getters/setters, ability to publish and subscribe
 * events as well as the ability for the user to provide customized settings for any
 * component configuration value.
 *
 * @constructor
 * @classdesc This interface provides a contract for dex components to implement.
 *
 * @name dex.component
 *
 * @param userConfig A map containing the various options the user wishes to override.
 * @param defaultConfig A map containing the default configuration for this component.
 *
 */
module.exports = function (userConfig, defaultConfig) {
  userConfig = userConfig || {};
  defaultConfig = defaultConfig || {};

  this.debug = false;

  // Allows component construction from other components.
  if (userConfig.hasOwnProperty('config')) {
    this.config = dex.config.expandAndOverlay(userConfig.config, defaultConfig);
  }
  // Else, we have a configuration.
  else {
    this.config = dex.config.expandAndOverlay(userConfig, defaultConfig);
  }

  dex.console.log("dex.component Configuration", this.config);

  if (!this.config.channel) {
    this.config.channel = (this.config.parent || "#parent") + "/" +
    (this.config.id || "unknown-id");
  }

  /**
   * This method provides getter/setter access for the configuration of a
   * DexComponent.
   *
   * Names can express hierarchy.  An attribute named 'a' may have a
   * child attribute named 'b'.  In this case, the name of attribute
   * 'a' is simply 'a'.  The name of attribute 'b' would be 'a.b'.
   *
   * attr(name) Retrieve retrieve the current value of the attribute with
   * matching name.
   *
   * attr(name, value) Set the attribute with the matching name to the
   * specified value.
   *
   * @method dex.component.attr
   *
   * @param name The name of the attribute.
   * @param value The value of the attribute.
   *
   * @example {@lang javascript}
   * // Set an attribute named "foo" to "bar"
   * myComponent.attr("foo", "bar");
   *
   * // Returns "bar"
   * myComponent.attr("foo");
   *
   * // Set an attribute named "foo" which belongs to an object named
   * // nested which in turn belongs to myComponent.
   * myComponent.attr("nested.foo", "bar");
   *
   * // Returns "bar"
   * myComponent.attr("nested.foo");
   *
   * // Does nothing, returns myComponent
   * myComponent.attr();
   *
   * @returns {string|component} If only name is provided, attr will return the value of
   * the requested attribute.  If both name and value are provided, then
   * the attribute corresponding to the name will be set to the supplied
   * value and the component itself will be returned.
   */
  this.attr = function (name, value) {
    if (arguments.length == 0) {
      return this.config;
    }
    else if (arguments.length == 1) {
      // REM: Need to getHierarchical
      return this.config[name];
    }
    else if (arguments.length == 2) {
      //console.log("Setting Hieararchical: " + name + "=" + value);
      //console.dir(this.config);

      // This will handle the setting of a single attribute
      dex.object.setHierarchical(this.config, name, value, '.');
    }
    return this;
  };

  /**
   * Subscribe this component to the events of type eventTYpe
   * generated by the source this.  When events are received,
   * invoke the callback.
   *
   * @method dex.this.subscribe
   *
   * @param {component} source - The source component
   * @param {string} eventType - The name of the event we are subscribing to.
   * @param callback - The function to be invoked when this event is
   * received.
   *
   * @returns {handle|false} False if function is called incorrectly.
   * Otherwise, the function returns a handle which can later be used
   * to unsubscribe to the events.
   *
   */
  this.subscribe = function (source, eventType, callback) {
    if (arguments.length == 3) {
      var channel = source.config.channel + '/' + eventType;

      dex.console.log("subscribe to " + channel);
      if (arguments.length < 3) {
        dex.console.log("failed");
        return false;
      }
      return dex.bus.subscribe(channel, callback);
    }
    else {
      return false;
    }
  };

  /**
   *
   * Unsubscribe this component.
   *
   * @method dex.component.unsubscribe
   *
   * @param handle - The handle attained via subscribe.
   *
   */
  this.unsubscribe = function (handle) {
    dex.bus.unsubscribe(handle);
  };

  /**
   *
   * Publish an event to the component's subscribers.
   *
   * @method dex.component.publish
   *
   * @param event - The event to publish.  An event can be any object, however,
   * it must define a property named "type".
   * @param event.type - The type of the event we are publishing.
   *
   */
  this.publish = function (event) {
    var channel;

    if (!event || !event.type) {
      dex.console.warn("publish of event to " + this.channel + " failed.");
      dex.bus.publish("error", {
        type          : "error",
        "description" : "Error publishing event: '" + event + "' to '" + this.channel + "'"
      });
    }
    else {
      channel = this.config.channel + '/' + event.type;
      dex.console.log("publish to " + channel);
      dex.bus.publish(channel, event);
    }
  };

  /**
   *
   * A default no-op implementation of render.  Subclasses should
   * override this method with one which provides an initial rendering
   * of their specific component.  This is a great place to put
   * one-time only initialization logic.
   *
   * @method dex.component.render
   *
   */
  this.render = function () {
    console.log("Unimplemented routine: render()");
  };

  /**
   *
   * A default no-op implementation of update.  This will update the
   * current component relative to any new setting or data changes.
   *
   * @method dex.component.update
   *
   */
  this.update = function () {
    console.log("Unimplemented routine: update()");
  };
};
},{}],6:[function(require,module,exports){
/**
 *
 * Config module.
 * @module config
 *
 */

/**
 *
 * This routine supports a shorthand notation allowing the
 * user to specify deeply nested configuration options without
 * having to deal with nested json structures.
 *
 * Options like:
 *
 * {
 *   'cell' : {
 *     'rect' : {
 *       'width' : 10,
 *       'height' : 20,
 *       'events' : {
 *         'mouseover' : function(d) { console.log("MouseOver: " + d); }
 *       }
 *     }
 *   }
 * }
 *
 * Can now be described more succinctly and more readably as:
 *
 * {
 *   'cell.rect.width'            : 10,
 *   'cell.rect.height'           : 20,
 *   'cell.rect.events.mouseover' : function(d) { console.log("Mouseover: " + d); }
 * }
 *
 * Or a hybrid strategy can be used:
 *
 * {
 *   'cell.rect' : {
 *     'width' : 10,
 *     'height' : 20,
 *     'events.mouseover' : function(d) { console.log("Mouseover: " + d); }
 *   }
 * }
 *
 * @param {object} config The configuration to expand.
 * @returns {*} The expanded configuration.  The original configuration
 *   is left untouched.
 *
 */
exports.expand = function expand(config) {
  var name, ci;
  var expanded = {};

  // We have nothing, return nothing.
  if (!config) {
    return config;
  }

  //dex.console.log("dex.config.expand(config=", config);

  for (var name in config) {
    if (config.hasOwnProperty(name)) {
      // Name contains hierarchy:
      if (name && name.indexOf('.') > -1) {
        expanded[name] = config[name];
        dex.object.setHierarchical(expanded, name,
          dex.object.clone(expanded[name]), '.');
        delete expanded[name];
      }
      // Simple name
      else {
        // If the target is an object with no children, clone it.
        if (dex.object.isEmpty(config[name])) {
          //dex.console.log("SET PRIMITIVE: " + name + "=" + config[name]);
          expanded[name] = dex.object.clone(config[name]);
          //expanded[name] = config[name];
        }
        else {
          //dex.console.log("SET OBJECT: " + name + " to the expansion of", config[name]);
          expanded[name] = dex.config.expand(config[name]);
        }
      }
    }
  }

  //dex.console.log("CONFIG", config, "EXPANDED", expanded);
  return expanded;
};

/**
 *
 * This routine will expand hiearchically delimited names such as
 * foo.bar into a structure { foo : { bar : value}}.  It will delete
 * the hierarchical name and overwrite the value into the proper
 * location leaving any previous object properties undisturbed.
 *
 * @param {Object} config The configuration which we will expand.
 *
 */

/*
 exports.expand_deprecate = function expand(config) {
 var name,
 ci,
 expanded;

 // We have nothing, return nothing.
 if (!config) {
 return config;
 }

 //dex.console.log("dex.config.expand(config=", config);

 // Make a clone of the previous configuration.
 expanded = dex.object.clone(config);

 // Iterate over the property names.
 for (name in config) {
 // If this is our property the process it, otherwise ignore.
 if (config.hasOwnProperty(name)) {
 // The property name is non-null.
 if (name) {
 // Determine character index.
 ci = name.indexOf('.');
 }
 else {
 // Default to -1
 ci = -1;
 }

 // if Character index is > -1, we have a hierarchical name.
 // Otherwise do nothing, copying was already handled in the
 // cloning activity.
 if (ci > -1) {
 // Set it...
 dex.object.setHierarchical(expanded, name,
 dex.object.clone(expanded[name]), '.');
 // Delete the old name.
 delete expanded[name];
 }
 }
 }

 //dex.console.log("CONFIG", config, "EXPANDED", expanded);
 return expanded;
 };
 */

/**
 *
 * This routine will take two hierarchies, top and bottom, and expand dot ('.')
 * delimited names such as: 'foo.bar.biz.baz' into a structure:
 * { 'foo' : { 'bar' : { 'biz' : 'baz' }}}
 * It will then overlay the top hierarchy onto the bottom one.  This is useful
 * for configuring objects based upon a default configuration while allowing
 * the client to conveniently override these defaults as needed.
 *
 * @param {object} top - The top object hierarchy.
 * @param {object} bottom - The bottom, base object hierarchy.
 * @returns {object} - A new object representing the expanded top object
 * hierarchy overlaid on top of the expanded bottom object hierarchy.
 *
 */
exports.expandAndOverlay = function expandAndOverlay(top, bottom) {
  //dex.console.log(
  //dex.config.getCallerString(arguments.callee.caller),
  //"TOP", top,
  //"BOTTOM", bottom,
  //"EXPANDED TOP", dex.config.expand(top),
  //"EXPANDED BOTTOM", dex.config.expand(bottom));
  return dex.object.overlay(dex.config.expand(top),
    dex.config.expand(bottom));
};

/**
 *
 * Return the configuration for a font after the user's customizations
 * have been applied.
 *
 * @param {d3font_spec} custom - The user customizations.
 * @returns {d3font_spec} - An object containing the font's specifications
 * after the user's customizations have been applied.
 *
 */
exports.font = function font(custom) {
  var defaults =
  {
    'decoration'    : 'none',
    'family'        : 'sans-serif',
    'letterSpacing' : 'normal',
    'size'          : 14,
    'style'         : 'normal',
    'weight'        : 'normal',
    'wordSpacing'   : 'normal',
    'variant'       : 'normal'
  };

  var fontSpec = dex.config.expandAndOverlay(custom, defaults);
  return fontSpec;
};

/**
 *
 * Configure the given font with the supplied font specification.
 *
 * @param {object} node - The node to be configured.
 * @param {d3font_spec} fontSpec - The font specification to be applied.
 *
 * @returns {*} The node after having the font specification applied.
 *
 */
exports.configureFont = function configureFont(node, fontSpec, i) {
  //dex.console.log("CONFIG-FONT: " + i);
  if (fontSpec) {
    dex.config.setAttr(node, 'font-family', fontSpec.family, i);
    dex.config.setAttr(node, 'font-size', fontSpec.size, i);
    dex.config.setAttr(node, 'font-weight', fontSpec.weight, i);
    dex.config.setAttr(node, 'font-style', fontSpec.style, i);
    dex.config.setAttr(node, 'text-decoration', fontSpec.decoration, i);

    dex.config.setAttr(node, 'word-spacing', fontSpec.wordSpacing, i);
    dex.config.setAttr(node, 'letter-spacing', fontSpec.letterSpacing, i);
    dex.config.setAttr(node, 'variant', fontSpec.variant, i);
  }
  return node;
};

/**
 *
 * Construct a text speficiation.
 *
 * @param {d3text_spec} custom - The user's adjustments to the default text
 * specification.
 *
 * @returns {d3text_spec} A revised text specification after having applied
 * the user's modfiications.
 *
 */
exports.text = function text(custom) {
  var defaults =
  {
    'font'                     : dex.config.font(),
    'x'                        : 0,
    'y'                        : 0,
    'textLength'               : undefined,
    'lengthAdjust'             : undefined,
    'transform'                : '',
    'glyphOrientationVertical' : undefined,
    'text'                     : undefined,
    'dx'                       : 0,
    'dy'                       : 0,
    'writingMode'              : undefined,
    'anchor'                   : 'start',
    'fill'                     : dex.config.fill(),
    'format'                   : undefined,
    'events'                   : dex.config.events()
  };

  var textSpec = dex.config.expandAndOverlay(custom, defaults);
  return textSpec;
};

/**
 *
 * This routine will dynamically configure an SVG text entity based upon the
 * supplied configuration.
 *
 * @param {object} node The SVG text node to be configured.
 * @param {d3text_spec} textSpec The text specification for this node.
 *
 * @returns {*} The node after having applied the text specification.
 *
 */
exports.configureText = function configureText(node, textSpec, i) {
  //dex.console.log("CONFIG-TEXT: " + i);
  if (textSpec) {
    dex.config.setAttr(node, "x", textSpec.x, i);
    dex.config.setAttr(node, "y", textSpec.y, i);
    dex.config.setAttr(node, "dx", textSpec.dx, i);
    dex.config.setAttr(node, "dy", textSpec.dy, i);
    dex.config.setStyle(node, "text-anchor", textSpec.anchor, i);
    dex.config.configureFont(node, textSpec.font, i);
    dex.config.setAttr(node, 'textLength', textSpec.textLength, i);
    dex.config.setAttr(node, 'lengthAdjust', textSpec.lengthAdjust, i);
    dex.config.setAttr(node, 'transform', textSpec.transform, i);
    dex.config.setAttr(node, 'glyph-orientation-vertical',
      textSpec.glyphOrientationVertical, i);
    dex.config.setAttr(node, 'writing-mode', textSpec.writingMode, i);
    dex.config.callIfDefined(node, 'text', textSpec.text, i);
    dex.config.configureFill(node, textSpec.fill, i);
    dex.config.configureEvents(node, textSpec.events, i);
  }
  return node;
};

/**
 *
 * Construct a stroke specification.
 *
 * @param {d3text_spec} strokeSpec - The user's customizations to the specification.
 *
 * @returns {d3text_spec} The stroke specification after having applied the user's
 * configuration.
 *
 */
exports.stroke = function stroke(strokeSpec) {
  var defaults =
  {
    'width'     : 1,
    'color'     : "black",
    'opacity'   : 1,
    'dasharray' : '',
    'transform' : ''
  };

  var config = dex.config.expandAndOverlay(strokeSpec, defaults);
  return config;
};

/**
 *
 * Apply a stroke specification to a node.
 *
 * @param {object} node - The node to be configured.
 * @param {d3stroke_spec} strokeSpec - The stroke specification to be applied.
 * @returns The newly configured node.
 */
exports.configureStroke = function configureStroke(node, strokeSpec, i) {
  if (strokeSpec) {
    dex.config.setAttr(node, "stroke", strokeSpec.color, i);
    dex.config.setStyle(node, 'stroke-width', strokeSpec.width, i);
    dex.config.setStyle(node, 'stroke-opacity', strokeSpec.opacity, i);
    dex.config.setStyle(node, 'stroke-dasharray', strokeSpec.dasharray, i);
    dex.config.setAttr(node, 'transform', strokeSpec.transform, i);
  }
  return node;
};
/**
 *
 * Construct a fill specification which allow the user to override any
 * its settings.
 *
 * @param {d3fill_spec} custom - The user's customizations.
 * @returns {d3fill_spec} A fill specification which has applied the user's
 * customizations.
 *
 */
exports.fill = function fill(custom) {
  var defaults =
  {
    'fillColor'   : "grey",
    'fillOpacity' : 1
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

/**
 *
 * Apply a fill specification to a node.
 *
 * @param {object} node - The node to be configured.
 * @param {d3fill_spec} config - The fill specification.
 *
 * @returns {object} The node after having applied the fill specification.
 *
 */
exports.configureFill = function configureFill(node, config, i) {
  if (config) {
    dex.config.setStyle(node, 'fill', config.fillColor, i);
    dex.config.setStyle(node, 'fill-opacity', config.fillOpacity, i);
  }
  return node;
};

/**
 *
 * Construct a link specification which allows the user to override any
 * of the settings.
 *
 * @param {d3link_spec} custom - The users customizations.
 *
 * @returns {d3link_spec} A link specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.link = function link(custom) {
  var defaults =
  {
    'fill'      : dex.config.fill(),
    'stroke'    : dex.config.stroke(),
    'transform' : '',
    'd'         : undefined,
    'events'    : dex.config.events()
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

/**
 *
 * Apply a link specification to a node.
 *
 * @param {object} node - The node to apply the specification to.
 * @param {d3link_spec} config - The link specification.
 *
 * @returns {object} The node after having applied the specification.
 *
 */
exports.configureLink = function configureLink(node, config, i) {
  if (config) {
    dex.config.configureStroke(node, config.stroke, i);
    dex.config.configureFill(node, config.fill, i);
    dex.config.setAttr(node, 'transform', config.transform, i);
    dex.config.setAttr(node, 'd', config.d, i);
    dex.config.configureEvents(node, config.events, i);
  }
  return node;
}

/**
 *
 * Construct a rectangle specification which allows the user to override any
 * of the settings.
 *
 * @param {d3rect_spec} custom - The users customizations.
 *
 * @returns {d3rect_spec} A rectangle specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.rectangle = function rectangle(custom) {
  var config =
  {
    'width'     : 50,
    'height'    : 50,
    'x'         : 0,
    'y'         : 0,
    'rx'        : 0,
    'ry'        : 0,
    'stroke'    : dex.config.stroke(),
    'opacity'   : 1,
    'color'     : d3.scale.category20(),
    'transform' : undefined,
    'events'    : dex.config.events()
  };
  if (custom) {
    config = dex.object.overlay(custom, config);
  }
  return config;
};

exports.configureRectangle = function configureRectangle(node, config, i) {
  if (config) {
    dex.config.setAttr(node, 'width', config.width, i);
    dex.config.setAttr(node, 'height', config.height, i);
    dex.config.setAttr(node, 'x', config.x, i);
    dex.config.setAttr(node, 'y', config.y, i);
    dex.config.setAttr(node, 'rx', config.rx, i);
    dex.config.setAttr(node, 'ry', config.ry, i);
    dex.config.setAttr(node, 'opacity', config.opacity, i);
    dex.config.setAttr(node, 'fill', config.color, i);
    dex.config.setAttr(node, 'transform', config.transform, i);
    dex.config.configureStroke(node, config.stroke, i);
    dex.config.configureEvents(node, config.events, i);
  }
  return node;
};

/**
 *
 * Construct an events specification which allows the user to override any
 * of the settings.
 *
 * @param {d3events_spec} custom - The users customizations.
 *
 * @returns {d3events_spec} An events specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.events = function events(custom) {
  var defaults =
  {
    'mouseover' : function (d) {
      //console.log("Default mouseover");
    }
  };
  var config = defaults;

  if (custom) {
    config = dex.object.overlay(custom, defaults);
  }
  return config;
};

exports.configureEvents = function configureEvents(node, config, i) {
  //dex.console.log("Configure Events", config, i);
  if (config) {
    for (var key in config) {
      //dex.console.log("KEY", key, "VALUE", config[key]);
      dex.config.setEventHandler(node, key, config[key], i);
    }
  }

  return node;
};

/**
 *
 * Construct an line specification which allows the user to override any
 * of the settings.
 *
 * @param {d3line_spec} custom - The users customizations.
 *
 * @returns {d3line_spec} A line specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.line = function line(custom) {
  var defaults =
  {
    'start'       : dex.config.point(),
    'end'         : dex.config.point(),
    'stroke'      : dex.config.stroke(),
    'fill'        : dex.config.fill(),
    'interpolate' : undefined
  };
  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.configureLine = function configureLine(node, config, i) {
  if (config) {
    dex.config.setAttr(node, 'x1', config.start.x, i);
    dex.config.setAttr(node, 'y1', config.start.y, i);
    dex.config.setAttr(node, 'x2', config.end.x, i);
    dex.config.setAttr(node, 'y2', config.end.y, i);
    dex.config.configureStroke(node, config.stroke, i);
    dex.config.configureFill(node, config.fill, i);
    if (config.interpolate) {
      //dex.console.log("interpolate", node, config, i);
      node.interpolate(config.interpolate);
      // I think this is closer to correct....but breaks the motion line chart
      //node.interpolate(dex.config.optionValue(config.interpolate, i));
    }
  }
  return node;
};

/**
 *
 * Construct an path specification which allows the user to override any
 * of the settings.
 *
 * @param {d3path_spec} custom - The users customizations.
 *
 * @returns {d3path_spec} A path specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.path = function path(custom) {
  var defaults =
  {
    'fill'   : dex.config.fill(),
    'stroke' : dex.config.stroke()
  };
  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.configurePath = function configurePath(node, config, i) {
  if (config) {
    dex.config.configureFill(node, config.fill, i);
    dex.config.configureStroke(node, config.stroke, i);
  }
  return node;
};

exports.getCallers = function getCallers(caller) {
  var callers = [];
  var currentCaller = caller;
  for (; currentCaller; currentCaller = currentCaller.caller) {
    if (currentCaller.name) {
      callers.push(currentCaller.name);
    }
  }

  return callers.reverse();
}

exports.getCallerString = function getCallerString(caller) {
  return dex.config.getCallers(caller).join("->");
}

exports.setEventHandler = function setEventHandler(node, eventType, eventHandler, i) {
  var callerStr = dex.config.getCallerString(arguments.callee.caller);

  //dex.console.debug(callerStr + ": setEventHandler(node=" + node + ", eventType=" + eventType + ", eventHandler=" + eventHandler);
  if (!node) {
    dex.console.warn(callerStr + ": dex.config.setEventHandler(eventType='" + eventType + "eventHandler=" + eventHandler + ") : node is null.");
    return node;
  }
  if (!dex.object.isFunction(node.on)) {
    dex.console.warn(callerStr + ": dex.config.setEventHandler(eventType='" + eventType + "', eventHandler='" + eventHandler +
    "') : target node is missing function: node.on(eventType,eventHandler).  Node dump:", node);
    return node;
  }
  if (typeof eventHandler != 'undefined') {
    dex.console.debug(callerStr + ": Set Event Handler: '" + eventType + "'='" + eventHandler + "'");
    node.on(eventType, eventHandler);
  }
  else {
    dex.console.debug(callerStr += ": Undefined Event Handler: '" + eventType + "'='" + eventHandler + "'");
  }
  return node;
};

exports.setAttr = function setAttr(node, name, value, i) {
  var callerStr = dex.config.getCallerString(arguments.callee.caller);
  if (!node) {
    dex.console.warn(callerStr + ": dex.config.setAttr(name='" + name + "value=" + value + ") : node is null.");
    return node;
  }
  if (!dex.object.isFunction(node.attr)) {
    dex.console.warn(callerStr + ": dex.config.setAttr(name='" + name + "', value='" + value +
    "') : target node is missing function: node.attr.  Node dump:", node);
    return node;
  }
  if (typeof value != 'undefined') {
    dex.console.debug(callerStr + ": Set Attr: '" + name + "'='" + value + "'");
    node.attr(name, dex.config.optionValue(value, i));
  }
  else {
    dex.console.debug(callerStr += ": Undefined Attr: '" + name + "'='" + value + "'");
  }
  return node;
};

exports.setStyle = function setStyle(node, name, value, i) {
  var callerStr = dex.config.getCallerString(arguments.callee.caller);
  if (!node) {
    dex.console.warn(callerStr + ": dex.config.setAttr(name='" + name + "value=" + value + ") : node is null.");
    return node;
  }
  if (!dex.object.isFunction(node.style)) {
    dex.console.warn(callerStr + ": dex.config.setStyle(name='" + name + "', value='" + value +
    "') : target node is missing function: node.style.  Node Dump:", node);
    return node;
  }
  if (typeof value !== 'undefined' && node && dex.object.isFunction(node.style)) {
    dex.console.debug(callerStr + ": Set Style: name='" + name + "', Value Dump:",
      dex.config.optionValue(value, i));
    node.style(name, dex.config.optionValue(value, i));
  }
  else {
    dex.console.debug(callerStr + ": Undefined Style: name='" + name + "', Value Dump:", value);
  }
  return node;
};

exports.optionValue = function optionValue(option, i) {
  //dex.console.log("OPTION-I: " + i);

  // Curry value i:
  if (typeof i !== 'undefined') {
    return function (d) {
      //dex.console.log("OPTION", option, "D", d, "I", i);
      if (dex.object.isFunction(option)) {
        return option(d, i);
      }
      else {
        return option;
      }
    };
  }
  else {
    return function (d, i) {
      //dex.console.log("OPTION", option, "D", d, "I", i);
      if (dex.object.isFunction(option)) {
        return option(d, i);
      }
      else {
        return option;
      }
    };
  }
};

/**
 *
 * Is this correct?  It looks suspect to me.
 *
 * @param node
 * @param fn
 * @param value
 * @param i
 * @returns {*}
 */
exports.callIfDefined = function callIfDefined(node, fn, value, i) {
  //dex.console.log("CALL-IF-DEFINED: fn=" + fn + ", value=" + value + ", I=" + i);
  if (typeof value === 'undefined') {
    //dex.console.log("Skipping: " + fn + "()");
  }
  else {
    //dex.console.log("Calling: '" + fn + "(" + value + ")");
    return node[fn](dex.config.optionValue(value, i));
  }

  return node;
};

/**
 *
 * Construct an point specification which allows the user to override any
 * of the settings.
 *
 * @param {d3point_spec} custom - The users customizations.
 *
 * @returns {d3point_spec} A point specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.point = function point(custom) {
  var config =
  {
    'x' : undefined,
    'y' : undefined
  };
  if (custom) {
    config = dex.object.overlay(custom, config);
  }
  return config;
};

exports.configurePoint = function configurePoint(node, config, i) {
  if (config) {
    node
      .attr('x', dex.config.optionValue(config.center.cx, i))
      .attr('y', dex.config.optionValue(config.center.cy, i));
  }
  return node;
};

// Configures: opacity, color, stroke.
exports.configureShapeStyle = function configureShapeStyle(node, config, i) {
  if (config) {
    node
      .call(dex.config.configureStroke, config.stroke, i)
      .attr('opacity', config.opacity)
      .style('fill', config.color);
  }
  return node;
};

/**
 *
 * Construct an circle specification which allows the user to override any
 * of the settings.
 *
 * @param {d3circle_spec} custom - The users customizations.
 *
 * @returns {d3circle_spec} A circle specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.circle = function circle(custom) {
  var config =
  {
    'cx'        : 0,
    'cy'        : 0,
    'r'         : 10,
    'fill'      : dex.config.fill(),
    'stroke'    : dex.config.stroke(),
    'transform' : '',
    'title'     : '',
    'events'    : dex.config.events()
  };
  if (custom) {
    config = dex.object.overlay(custom, config);
  }
  return config;
};

exports.configureCircle = function configureCircle(node, config, i) {
  if (config) {
    dex.config.setAttr(node, "r", config.r, i);
    dex.config.setAttr(node, "cx", config.cx, i);
    dex.config.setAttr(node, "cy", config.cy, i);
    dex.config.setAttr(node, "transform", config.transform, i);
    dex.config.setAttr(node, "title", config.title, i);
    dex.config.configureStroke(node, config.stroke, i);
    dex.config.configureFill(node, config.fill, i);
    dex.config.configureEvents(node, config.events, i);
  }
  return node;
};

/*
 exports.configureAxis_deprecated = function configureAxis_deprecated(config) {
 var axis;

 if (config) {
 var axis = d3.svg.axis()
 .ticks(config.tick.count)
 .tickSubdivide(config.tick.subdivide)
 .tickSize(config.tick.size.major, config.tick.size.minor,
 config.tick.size.end)
 .tickPadding(config.tick.padding);

 // REM: Horrible way of doing this.  Need a function which
 // is more generic and smarter to short circuit stuff like
 // this.  But...for now it does what I want.
 if (!dex.object.isFunction(config.tick.format)) {
 axis.tickFormat(config.tick.format);
 }

 axis
 .orient(config.orient)
 .scale(config.scale);
 }
 else {
 axis = d3.svg.axis();
 }
 //axis.scale = config.scale;
 return axis;
 };
 */

/**
 *
 * Construct an tick specification which allows the user to override any
 * of the settings.
 *
 * @param {d3tick_spec} custom - The users customizations.
 *
 * @returns {d3tick_spec} A tick specification generated by combining the
 * default with the user's customizations.
 *
 */
exports.tick = function tick(custom) {
  var config =
  {
    'count'     : 5,
    //'tickValues'  : undefined,
    'subdivide' : 3,
    'size'      : {
      'major' : 5,
      'minor' : 3,
      'end'   : 5
    },
    'padding'   : 5,
    'format'    : d3.format(",d"),
    'label'     : dex.config.text()
  };
  if (custom) {
    config = dex.object.overlay(custom, config);
  }
  return config;
};

/*
 exports.xaxis_deprecate = function (custom) {
 var config =
 {
 'scale'  : d3.scale.linear(),
 'orient' : "bottom",
 'tick'   : this.tick(),
 'label'  : dex.config.text()
 };
 if (custom) {
 config = dex.object.overlay(custom, config);
 }
 return config;
 };

 exports.yaxis_deprecate = function (custom) {
 var config =
 {
 'scale'  : d3.scale.linear(),
 'orient' : 'left',
 'tick'   : this.tick(),
 'label'  : dex.config.text({'transform' : 'rotate(-90)'})
 };
 if (custom) {
 config = dex.object.overlay(custom, config);
 }
 return config;
 };
 */

exports.callConditionally = function callConditionally(fn, value, i) {
  //dex.console.log("- FN:" + fn);
  //dex.console.log("- VALUE:" + value);
  if (value !== undefined) {
    //dex.console.log("- CALLING: " + fn + " of " + value);
    if (i !== undefined) {
      fn(value, i);
    }
    else {
      fn(value);
    }
  }
  else {
  }
};

/**
 *
 * Configure the input parameters for configuring an axis.
 * Certain defaults are imposed should the "custom" variable
 * not specify that parameter.
 *
 * @param custom The user supplied axis configuration.
 *
 * @returns {d3axis_spec} The axis specification with
 * user supplied overrides applied.
 *
 */
exports.axis = function axis(custom) {
  var defaults =
  {
    'scale'         : dex.config.scale({'type' : 'linear'}),
    'orient'        : 'bottom',
    'ticks'         : undefined,
    'tickValues'    : undefined,
    'tickSize'      : undefined,
    'innerTickSize' : undefined,
    'outerTickSize' : undefined,
    'tickPadding'   : undefined,
    'tickFormat'    : undefined
    //'label'         : dex.config.text()
  };

  var axisSpec = dex.config.expandAndOverlay(custom, defaults);
  return axisSpec;
};

/**
 *
 * Create an axis with the specified configuration.
 *
 * @param axis The axis to configure.
 * @param config The user specified axis configuration.
 *
 * @returns {*} The newly configured axis.
 */
exports.configureAxis = function configureAxis(axis, config, i) {
  //dex.console.log("CONFAXIS: " + i);
  if (config) {
    [
      'scale',
      'orient',
      'ticks',
      'tickValues',
      'tickSize',
      'innerTickSize',
      'outerTickSize',
      'tickPadding',
      'tickFormat'
    ].forEach(function (fn) {
        //dex.console.log("Calling: " + fn);
        dex.config.callConditionally(axis[fn], config[fn], i);
      });
  }
  return axis;
};

exports.createAxis = function createAxis(userConfig, i) {
  var config = dex.config.axis(userConfig);
  return dex.config.configureAxis(d3.svg.axis(), config, i);
};

/**
 *
 * Construct a {d3axis_spec} based on reasonable defaults with
 * user customizations applied on top.
 *
 * @param custom The user customizations.
 *
 * @returns {d3scale_spec} The scale specification with
 * user supplied overrides applied.
 *
 */
exports.scale = function scale(custom) {
  var fmap =
  {
    'linear'   : dex.config.linearScale,
    'sqrt'     : dex.config.sqrtScale,
    'pow'      : dex.config.powScale,
    'time'     : dex.config.timeScale,
    'log'      : dex.config.logScale,
    'ordinal'  : dex.config.ordinalScale,
    'quantile' : dex.config.quantileScale,
    'quantize' : dex.config.quantizeScale,
    'identity' : dex.config.identityScale
  };

  var defaults =
  {
    'type' : 'linear'
  };

  var config = dex.config.expandAndOverlay(custom, defaults);

  return fmap[config.type](config);
}

/**
 *
 * Given a scale specification, create, configure, and return a
 * scale which meets that specification.
 *
 * @param {d3scale_spec} scaleSpec
 * @returns {Object} Returns a d3.scale with the supplied specification.
 *
 */
exports.createScale = function createScale(scaleSpec) {
  var scale;

  var fmap =
  {
    'linear'   : d3.scale.linear,
    'sqrt'     : d3.scale.sqrt,
    'pow'      : d3.scale.pow,
    'time'     : d3.time.scale,
    'log'      : d3.scale.log,
    'ordinal'  : d3.scale.ordinal,
    'quantile' : d3.scale.quantile,
    'quantize' : d3.scale.quantize,
    'identity' : d3.scale.identity
  };

  if (scaleSpec) {
    scale = fmap[scaleSpec.type]();

    // Since we create a non-parameterized scale, here we parameterize it based upon
    // the supplied specification
    dex.config.configureScale(scale, scaleSpec);
  }
  else {
    scale = d3.scale.linear();
  }

  return scale;
}

/**
 *
 * Construct a linear {d3scale_spec} based on reasonable
 * defaults with user customizations applied on top.
 *
 * @param custom The user customizations.
 *
 * @returns {d3scale_spec} The linear scale specification with
 * user supplied overrides applied.
 *
 */
exports.linearScale = function linearScale(custom) {
  var defaults =
  {
    'type'        : 'linear',
    'domain'      : [0, 100],
    'range'       : [0, 800],
    'rangeRound'  : undefined,
    'interpolate' : undefined,
    'clamp'       : undefined,
    'nice'        : undefined
  };

  var linearScaleSpec = dex.config.expandAndOverlay(custom, defaults);
  return linearScaleSpec;
};

/**
 *
 * Construct a power {d3scale_spec} based on reasonable
 * defaults with user customizations applied on top.
 *
 * @param custom The user customizations.
 *
 * @returns {d3scale_spec} The power scale specification with
 * user supplied overrides applied.
 *
 */
exports.powScale = function powScale(custom) {
  var defaults =
  {
    'type'        : 'pow',
    'domain'      : [0, 100],
    'range'       : [0, 800],
    'rangeRound'  : undefined,
    'interpolate' : undefined,
    'clamp'       : undefined,
    'nice'        : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

/**
 *
 * Construct a sqrt {d3scale_spec} based on reasonable
 * defaults with user customizations applied on top.
 *
 * @param custom The user customizations.
 *
 * @returns {d3scale_spec} The sqrt scale specification with
 * user supplied overrides applied.
 *
 */
exports.sqrtScale = function sqrtScale(custom) {
  var defaults =
  {
    'type'        : 'sqrt',
    'domain'      : [0, 100],
    'range'       : [0, 800],
    'rangeRound'  : undefined,
    'interpolate' : undefined,
    'clamp'       : undefined,
    'nice'        : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

/**
 *
 * Construct a log {d3scale_spec} based on reasonable
 * defaults with user customizations applied on top.
 *
 * @param custom The user customizations.
 *
 * @returns {d3scale_spec} The log scale specification with
 * user supplied overrides applied.
 *
 */
exports.logScale = function logScale(custom) {
  var defaults =
  {
    'type'        : 'log',
    'domain'      : [0, 100],
    'range'       : [0, 800],
    'rangeRound'  : undefined,
    'interpolate' : undefined,
    'clamp'       : undefined,
    'nice'        : undefined
  };

  var logSpec = dex.config.expandAndOverlay(custom, defaults);
  return logSpec;
};

/**
 *
 * Construct a ordinal {d3scale_spec} based on reasonable
 * defaults with user customizations applied on top.
 *
 * @param custom - The user customizations.
 * @param {object} [custom.rangeRoundBands] -
 * @param {object} [custom.rangeBands] -
 * @param {object} [custom.rangePoints] - rangePoints(interval [, padding]) : Sets the output range from the specified continuous
 * interval. The array interval contains two elements representing the minimum and maximum
 * numeric value. This interval is subdivided into n evenly-spaced points, where n is the
 * number of (unique) values in the input domain. The first and last point may be offset
 * from the edge of the interval according to the specified padding, which defaults to zero.
 * The padding is expressed as a multiple of the spacing between points. A reasonable value
 * is 1.0, such that the first and last point will be offset from the minimum and maximum
 * value by half the distance between points.
 * @param {object} [custom.rangeBands] -
 *
 * @returns {d3scale_spec} The ordinal scale specification with
 * user supplied overrides applied.
 *
 */
exports.ordinalScale = function ordinalScale(custom) {
  var defaults =
  {
    'type'            : 'ordinal',
    'domain'          : undefined,
    'range'           : undefined,
    'rangeRoundBands' : undefined,
    'rangePoints'     : undefined,
    'rangeBands'      : undefined
  };

  var ordinalSpec = dex.config.expandAndOverlay(custom, defaults);
  return ordinalSpec;
};

exports.timeScale = function timeScale(custom) {
  var defaults =
  {
    'type'        : 'time',
    'domain'      : undefined,
    'range'       : undefined,
    'rangeRound'  : undefined,
    'interpolate' : undefined,
    'clamp'       : undefined,
    'ticks'       : undefined,
    'tickFormat'  : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.quantileScale = function quantileScale(custom) {
  var defaults =
  {
    'type'   : 'quantile',
    'domain' : undefined,
    'range'  : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.quantizeScale = function quantizeScale(custom) {
  var defaults =
  {
    'type'   : 'quantize',
    'domain' : undefined,
    'range'  : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.identityScale = function identityScale(custom) {
  var defaults =
  {
    'type'   : 'identity',
    'domain' : undefined,
    'range'  : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.thresholdScale = function thresholdScale(custom) {
  var defaults =
  {
    'type'   : 'threshold',
    'domain' : undefined,
    'range'  : undefined
  };

  var config = dex.config.expandAndOverlay(custom, defaults);
  return config;
};

exports.configureScale = function configureScale(scale, config) {
  if (config) {
    for (var property in config) {
      dex.console.trace("ConfigureScale Property: '" + property + "'");
      if (config.hasOwnProperty(property) && property !== 'type' && config[property] !== undefined) {
        dex.console.trace("Property: '" + property + "'");
        dex.config.callConditionally(scale[property], config[property]);
      }
      else {
        dex.console.debug("Missing Property: '" + property + "'");
      }
    }
  }

  return scale;
};

//module.exports = config;
},{}],7:[function(require,module,exports){
/**
 *
 * This module provides console logging capabilities.
 *
 * @module console
 *
 */

/**
 *
 * @type {{TRACE: number, DEBUG: number, NORMAL: number, WARN: number, FATAL: number, NONE: number}}
 */
var logLevels = {
  'TRACE'  : 5,
  'DEBUG'  : 4,
  'NORMAL' : 3,
  'WARN'   : 2,
  'FATAL'  : 1,
  'NONE'   : 0
};

exports.logLevels = logLevels;

var logLevel = logLevels.NORMAL;

exports.logLevel = logLevel;

////
//
// dex.console : This module provides routines assisting with console output.
//
////

/**
 * Log this message if the current log level is greater than or equal
 * to dex.console.logLevel.
 *
 * @param msgLevel The log level for this message.
 * @param msg One or more messages to be logged.  Strings will simply
 * use console.log while objects will use console.dir.
 *
 * @returns {dex.console}
 */
exports.logWithLevel = function (msgLevel, msg) {
//  console.log(dex.console.logLevel());
//  console.log(msgLevel);
//  console.dir(msg);

  if (dex.console.logLevel() >= msgLevel) {
    for (i = 0; i < msg.length; i++) {
      if (typeof msg[i] == 'object') {
        console.dir(msg[i]);
      }
      else {
        console.log(msg[i]);
      }
    }
  }
  return this;
}

/**
 * Write one or more TRACE level messages.
 *
 * @param msg One or more TRACE messages to log.
 *
 * @returns {dex.console|*}
 */
exports.trace = function () {
  return dex.console.logWithLevel(logLevels.TRACE, arguments)
};

/**
 * Write one or more DEBUG level messages.
 *
 * @param msg One or more DEBUG messages to log.
 *
 * @returns {dex.console|*}
 */
exports.debug = function () {
  return dex.console.logWithLevel(logLevels.DEBUG, arguments)
};

/**
 * Write one or more NORMAL level messages.
 *
 * @param msg One or more NORMAL messages to log.
 *
 * @returns {dex.console|*}
 *
 */
exports.log = function () {
  //console.log("caller is " + arguments.callee.caller.toString());
  return dex.console.logWithLevel(logLevels.NORMAL, arguments)
};

/**
 * Write one or more WARN level messages.
 *
 * @param msg One or more WARN messages to log.
 *
 * @returns {dex.console|*}
 *
 */
exports.warn = function () {
  return dex.console.logWithLevel(logLevels.WARN, arguments)
};

/**
 * Write one or more FATAL level messages.
 *
 * @param msg One or more FATAL messages to log.
 *
 * @returns {dex.console|*}
 */
exports.fatal = function () {
  return dex.console.logWithLevel(logLevels.FATAL, arguments)
};

/**
 * This function returns the current log level.
 *
 * @returns The current log level.
 *
 */
exports.logLevel = function (_) {
  if (!arguments.length) return logLevel;
  logLevel = logLevels[_];
  return logLevel;
};

exports.logLevels = function () {
  return logLevels;
};

},{}],8:[function(require,module,exports){
/**
 *
 * This module provides support for dealing with csv structures.  This
 * is the core datatype on which dexjs components operate.
 *
 * @module csv
 *
 */

/**
 *
 * @param header
 * @param data
 * @returns {{header: *, data: *}}
 */
exports.csv = function (header, data) {
  var csv =
  {
    "header": header,
    "data": data
  };

  return csv;
};

/**
 *
 * @param csv
 * @returns {{header: *, data: {header, data}}}
 */
exports.transpose = function (csv) {
  return {
    "header": csv.header,
    "data": dex.matrix.transpose(csv.data)
  };
};

/**
 * Given a CSV, create a connection matrix suitable for feeding into a chord
 * diagram.  Ex, given CSV:
 *
 * @param csv
 * @returns {{header: Array, connections: Array}|*}
 *
 */
exports.getConnectionMatrix = function (csv) {
  var matrix = [];
  var ri, ci;
  var row;
  var cid;
  var header = [];
  var nameToIndex = {};
  var connectionMatrix;
  var uniques;
  var nameIndices = [];
  var src, dest;

  // Create a list of unique values to relate to one another.
  uniques = dex.matrix.uniques(csv.data);
  // Flatten them into our header.
  header = dex.matrix.flatten(uniques);

  // Create a map of names to header index for each column.
  nameToIndex = new Array(uniques.length);
  for (ri = 0, cid = 0; ri < uniques.length; ri++) {
    nameToIndex[ri] =
    {};
    for (ci = 0; ci < uniques[ri].length; ci++) {
      nameToIndex[ri][header[cid]] = cid;
      cid += 1;
    }
  }

  // Create a N x N matrix of zero values.
  matrix = new Array(header.length);
  for (ri = 0; ri < header.length; ri++) {
    row = new Array(header.length);
    for (ci = 0; ci < header.length; ci++) {
      row[ci] = 0;
    }
    matrix[ri] = row;
  }
  //dex.console.log("nameToIndex", nameToIndex, "matrix", matrix);

  for (ri = 0; ri < csv.data.length; ri++) {
    for (ci = 1; ci < csv.header.length; ci++) {
      src = nameToIndex[ci - 1][csv.data[ri][ci - 1]];
      dest = nameToIndex[ci][csv.data[ri][ci]];

      //dex.console.log(csv.data[ri][ci-1] + "<->" + csv.data[ri][ci], src + "<->" + dest);
      matrix[src][dest] = 1;
      matrix[dest][src] = 1;
    }
  }

  connectionMatrix = {"header": header, "connections": matrix};
  //dex.console.log("Connection Matrix", connectionMatrix);
  return connectionMatrix;
};

/**
 *
 * @param csv
 * @param keyIndex
 * @returns {{}}
 */
exports.createMap = function (csv, keyIndex) {
  var ri, ci, rowMap, map =
  {};

  for (ri = 0; ri < csv.data.length; ri += 1) {
    if (csv.data[ri].length === csv.header.length) {
      rowMap =
      {};

      for (ci = 0; ci < csv.header.length; ci += 1) {
        rowMap[csv.header[ci]] = csv.data[ri][ci];
      }
      map[csv.data[ri][keyIndex]] = rowMap;
    }
  }
  return map;
};

/**
 *
 * @param csv
 * @param rowIndex
 * @param columnIndex
 * @returns {*}
 */
exports.toJson = function (csv, rowIndex, columnIndex) {
  var jsonData = [];
  var ri, ci, jsonRow;

  if (arguments.length >= 3) {
    jsonRow = {};
    jsonRow[csv.header[columnIndex]] = csv.data[rowIndex][columnIndex];
    return jsonRow;
  }
  else if (arguments.length === 2) {
    var jsonRow =
    {};
    for (ci = 0; ci < csv.header.length; ci += 1) {
      jsonRow[csv.header[ci]] = csv.data[rowIndex][ci];
    }
    return jsonRow;
  }
  else if (arguments.length === 1) {
    for (ri = 0; ri < csv.data.length; ri++) {
      var jsonRow =
      {};
      for (ci = 0; ci < csv.header.length; ci++) {
        jsonRow[csv.header[ci]] = csv.data[ri][ci];
        //dex.console.log(csv.header[ci] + "=" + csv.data[ri][ci], jsonRow);
      }
      jsonData.push(jsonRow);
    }
  }
  return jsonData;
};

/**
 *
 * @param csv
 * @returns {{}}
 */
exports.toColumnArrayJson = function (csv) {
  var json = {};
  var ri, ci, jsonRow;

  if (arguments.length === 1) {
    for (ci = 0; ci < csv.header.length; ci++) {
      json[csv.header[ci]] = [];
    }

    for (ri = 0; ri < csv.data.length; ri++) {
      for (ci = 0; ci < csv.header.length; ci++) {
        json[csv.header[ci]].push(csv.data[ri][ci]);
      }
    }
  }

  return json;
};

/**
 *
 * @param csv
 * @returns {{header: *, data: *}}
 *
 */
exports.copy = function (csv) {
  var copy = {
    'header': dex.array.copy(csv.header),
    'data': dex.matrix.copy(csv.data)
  };
  return copy;
};

/**
 *
 * A utility transform for dealing with some of D3's more finiky formats.
 *
 * csv =
 * {
 * 	 header : {C1,C2,C3},
 *   data   : [
 *     [A,B,C],
 *     [A,B,D]
 *   ]
 * }
 * into:
 * json =
 * {
 * 	"name"     : rootName,
 *  "category" : category,
 *  "children" :
 *  [
 *    "children" :
 *     [
 *       {
 *         "name"     : "A",
 *         "category" : "C1",
 *         "children" :
 *         [
 *           {
 * 	           "name" : "B",
 *             "category" : "C2",
 *             "children" :
 *             [
 *               {
 *                 "name"     : "C",
 *                 "category" : "C3",
 *                 "size"     : 1
 *               }
 *               {
 *                 "name"     : "D",
 *                 "category" : "C3",
 *                 "size"     : 1
 *               }
 *             ]
 *           }
 *         ]
 *       }
 *     ]
 *  ]
 * }
 *
 * @param {Object} csv
 */
exports.toHierarchicalJson = function (csv) {
  var connections = dex.csv.connections(csv);
  return getChildren(connections, 0);

  function getChildren(connections, depth) {
    //dex.console.log("connections:", connections, "depth="+depth);
    var kids = [], cname;

    if (typeof connections === 'undefined') {
      return kids;
    }

    for (cname in connections) {
      //dex.console.log("CNAME", cname);
      if (connections.hasOwnProperty(cname)) {
        kids.push(createChild(cname, csv.header[depth],
          getChildren(connections[cname], depth + 1)));
      }
    }

    return kids;
  }

  function createChild(name, category, children) {
    var child =
    {
      "name": name,
      "category": category,
      "children": children
    };
    return child;
  }
};

/**
 *
 * Transforms:
 * csv =
 * {
 * 	 header : {C1,C2,C3},
 *   data   : [
 *     [A,B,C],
 *     [A,B,D]
 *   ]
 * }
 * into:
 * connections =
 * { A:{B:{C:{},D:{}}}}
 *
 * @param {Object} csv
 *
 */
exports.connections = function (csv) {
  var connections =
  {};
  var ri;

  for (ri = 0; ri < csv.data.length; ri++) {
    dex.object.connect(connections, csv.data[ri]);
  }

  //dex.console.log("connections:", connections);
  return connections;
};

/**
 *
 * @param csv
 * @param keyIndex
 * @returns {{}}
 *
 */
exports.createRowMap = function (csv, keyIndex) {
  var map =
  {};
  var ri;

  for (ri = 0; ri < csv.data.length; ri++) {
    if (csv.data[ri].length == csv.header.length) {
      map[csv.data[ri][keyIndex]] = csv.data[ri];
    }
  }
  return map;
};

/**
 *
 * @param csv
 * @param columns
 * @returns {{}}
 */
exports.columnSlice = function (csv, columns) {
  var slice = {};
  slice.header = dex.array.slice(csv.header, columns);
  slice.data = dex.matrix.slice(csv.data, columns);

  return slice;
};

/**
 *
 * @param csv
 * @returns {Array}
 */
exports.getNumericColumnNames = function (csv) {
  var possibleNumeric =
  {};
  var i, j, ri, ci;
  var numericColumns = [];

  for (i = 0; i < csv.header.length; i++) {
    possibleNumeric[csv.header[i]] = true;
  }

  // Iterate thru the data, skip the header.
  for (ri = 0; ri < csv.data.length; ri++) {
    for (ci = 0; ci < csv.data[ri].length && ci < csv.header.length; ci++) {
      if (possibleNumeric[csv.header[ci]] && !dex.object.isNumeric(csv.data[ri][ci])) {
        possibleNumeric[csv.header[ci]] = false;
      }
    }
  }

  for (ci = 0; ci < csv.header.length; ci++) {
    if (possibleNumeric[csv.header[ci]]) {
      numericColumns.push(csv.header[ci]);
    }
  }

  return numericColumns;
};

/**
 *
 * @param csv
 * @returns {Array}
 */
exports.guessTypes = function (csv) {
  var i = 0;
  var testResults = [];
  csv.header.forEach(function (hdr) {
    testResults.push({})
  });
  var numCols = csv.header.length;

  csv.data.forEach(function (row) {
    for (i = 0; i < numCols; i++) {

      if (!testResults[i]["notDate"]) {
        var date = new Date(row[i]);
        if (isNaN(date.getTime())) {
          dex.console.log("not date" + i);
          testResults[i]["notDate"] = true;
        }
      }

      if (!testResults[i]["notNumber"]) {
        if (isNaN(row[i])) {
          testResults[i]["notNumber"] = true;
        }
      }
    }
  });

  var types = [];

  for (i = 0; i < numCols; i++) {
    var results = testResults[i];
    if (!results.notDate && results.notNumber) {
      types.push('date');
    }
    else if (!results.notNumber) {
      types.push('number');
    }
    else {
      types.push('string');
    }
  }

  return types;
}

/**
 *
 * @param csv
 * @returns {*}
 */
exports.strictTypes = function strictTypes(csv) {
  var types = dex.csv.guessTypes(csv);

  for (var i = 0; i < types.length; i++) {
    if (types[i] == 'date') {
      csv.data.forEach(function (row, ri) {
        dex.console.log("row[" + ri + "]=" + row[ri]);
        csv.data[ri][i] = new Date(csv.data[ri][i]);
      })
    }
    else {
      if (types[i] == 'number') {
        csv.data.forEach(function (row, ri) {
          dex.console.log("row[" + ri + "]=" + row[ri]);
          csv.data[ri][i] = new Double(csv.data[ri][i]);
        })
      }
    }
  }

  return csv;
};

/**
 *
 * @param csv
 * @returns {Array}
 */
exports.getNumericIndices = function (csv) {
  var possibleNumeric =
  {};
  var i, j;
  var numericIndices = [];

  for (i = 0; i < csv.header.length; i++) {
    possibleNumeric[csv.header[i]] = true;
  }

  // Iterate thru the data, skip the header.
  for (i = 1; i < csv.data.length; i++) {
    for (j = 0; j < csv.data[i].length && j < csv.header.length; j++) {
      if (possibleNumeric[csv.header[j]] && !dex.object.isNumeric(csv.data[i][j])) {
        console.log("csv.header[" + j + "]=" + csv.header[j] + " is not numeric due to csv.data[" + i + "]["
          + j + "]=" + csv.data[i][j]);
        possibleNumeric[csv.header[j]] = false;
      }
    }
  }

  for (i = 0; i < csv.header.length; i++) {
    if (possibleNumeric[csv.header[i]]) {
      numericIndices.push(i);
    }
  }

  return numericIndices;
};

exports.getCategoricalIndices = function (csv) {
  var possibleNumeric =
  {};
  var i, j;
  var categoricalIndices = [];

  for (i = 0; i < csv.header.length; i++) {
    possibleNumeric[csv.header[i]] = true;
  }

  // Iterate thru the data, skip the header.
  for (i = 1; i < csv.data.length; i++) {
    for (j = 0; j < csv.data[i].length && j < csv.header.length; j++) {
      if (possibleNumeric[csv.header[j]] && !dex.object.isNumeric(csv.data[i][j])) {
        console.log("csv.header[" + j + "]=" + csv.header[j] + " is not numeric due to csv.data[" + i + "]["
          + j + "]=" + csv.data[i][j]);
        possibleNumeric[csv.header[j]] = false;
      }
    }
  }

  for (i = 0; i < csv.header.length; i++) {
    if (!possibleNumeric[csv.header[i]]) {
      categoricalIndices.push(i);
    }
  }

  return categoricalIndices;
};

/**
 *
 * @param csv
 * @param columnNum
 * @returns {boolean}
 */
exports.isColumnNumeric = function (csv, columnNum) {
  var i;

  for (i = 0; i < csv.data.length; i++) {
    if (!dex.object.isNumeric(csv.data[i][columnNum])) {
      return false;
    }
  }
  return true;
};

/**
 *
 * @param csv
 * @param columns
 * @returns {*}
 */
exports.group = function (csv, columns) {
  var ri, ci;
  var groups = {};
  var returnGroups = [];
  var values;
  var key;
  var otherColumns;
  var otherHeaders;
  var groupName;

  if (arguments < 2) {
    return csv;
  }

  function compare(a, b) {
    var si, h;

    for (si = 0; si < columns.length; si++) {
      h = csv.header[columns[si]]
      if (a[h] < b[h]) {
        return -1;
      }
      else if (a[h] > b[h]) {
        return 1
      }
    }

    return 0;
  }

  //otherColumns = dex.array.difference(dex.range(0, csv.header.length), columns);
  //otherHeaders = dex.array.slice(csv.header, otherColumns);

  for (ri = 0; ri < csv.data.length; ri += 1) {
    values = dex.array.slice(csv.data[ri], columns);
    key = values.join(':::');

    if (groups[key]) {
      group = groups[key];
    }
    else {
      //group = { 'csv' : dex.csv.csv(otherHeaders, []) };
      group =
      {
        'key': key,
        'values': [],
        'csv': dex.csv.csv(csv.header, [])
      };
      for (ci = 0; ci < values.length; ci++) {
        group.values.push({'name': csv.header[columns[ci]], 'value': values[ci]});
      }
      groups[key] = group;
    }
    //group.csv.data.push(dex.array.slice(csv.data[ri], otherColumns));
    group.csv.data.push(csv.data[ri]);
    //groups[key] = group;
  }

  for (groupName in groups) {
    if (groups.hasOwnProperty(groupName)) {
      returnGroups.push(groups[groupName]);
    }
  }

  return returnGroups.sort(compare);
};

/**
 *
 * @param csv
 * @param func
 */
exports.visitCells = function (csv, func) {
  var ci, ri;

  for (ri = 0; ri < csv.data.length; ri++) {
    for (ci = 0; ci < csv.header.length; ci++) {
      func(ci, ri, csv.data[ri][ci]);
    }
  }
};

/**
 *
 * @param csv
 * @returns {number}
 */
exports.longestWord = function (csv) {
  var longest = 0;
  for (var row = 0; row < csv.data.length; row++) {
    for (var col = 0; col < csv.data[row].length; col++) {
      if (longest < csv.data[row][col].length) {
        longest = csv.data[row][col].length;
      }
    }
  }
  return longest;
};

/**
 *
 * @param csv
 * @returns {{}|*}
 */
exports.numericSubset = function (csv) {
  return dex.csv.columnSlice(csv, dex.csv.getNumericIndices(csv));
};

exports.categoricalSubset = function (csv) {
  return dex.csv.columnSlice(csv, dex.csv.getCategoricalIndices(csv));
};

/*
 var data =

 */
exports.toJsonHierarchy = function (csv, ci) {
  // If 1 argument, then setup and call with 2.
  if (arguments.length == 1) {
    var result = {'name': 'root', children: dex.csv.toJsonHierarchy(csv, 0)};
    dex.console.log("RESULT", result);
    return result;
  }
  else if (arguments.length == 2) {
    var valueMap = {};

    for (var ri = 0; ri < csv.data.length; ri++) {
      if (valueMap.hasOwnProperty(csv.data[ri][ci])) {
        valueMap[csv.data[ri][ci]]++;
      }
      else {
        valueMap[csv.data[ri][ci]] = 1;
      }
    }

    if (ci >= csv.header.length - 1) {
      return _.keys(valueMap).map(function (key) {
        return {'name': key, 'size': valueMap[key]};
      });
    }
    else {
      return _.keys(valueMap).map(function (key) {
        return {'name': key, 'size': valueMap[key]};
      });
    }
  }
};

exports.getGraph = function (csv) {

  var nodes = [];
  var links = [];
  var nodeNum = 0;
  var indexMap = [];

  // Record uniques across the data, treating each column as it's own namespace.
  csv.header.map(function (col, ci) {
    indexMap.push({});
    csv.data.map(function (row, ri) {
      if (_.isUndefined(indexMap[ci][row[ci]]))
      {
        indexMap[ci][row[ci]]= nodeNum;
        nodes.push({'name' : row[ci]});
        nodeNum++;
      }
    });
  });

  for (var ci=1; ci<csv.header.length; ci++)
  {
    csv.data.map(function (row, ri) {
      links.push({ 'source' : indexMap[ci-1][row[ci-1]], 'target' : indexMap[ci][row[ci]], 'value' : 1});
    });
  }

  //dex.console.log("NODES", nodes, links, indexMap);
  return { 'nodes' : nodes, 'links' : links };
};

exports.toNestedJson = function (csv) {
  dex.console.log("CMAP", dex.csv.getConnectionMap(csv));
  var result = {'name': csv.header[0], 'children': dex.csv.toNestedJsonChildren(dex.csv.getConnectionMap(csv))};
  dex.console.log("RESULT", result);
  return result;
};

exports.toNestedJsonChildren = function (cmap) {
  //dex.console.log("CMAP", cmap);
  var children = [];

  _.keys(cmap).map(function (key) {
    var childMap = cmap[key];
    if (_.keys(childMap).length <= 0) {
      children.push({'name': key, 'size': 1000});
    }
    else {
      if (_.keys(childMap).length == 1) {
        //var grandChildMap = childMap[_.keys(childMap)[0]];

        //dex.console.log("GCMAP", grandChildMap);
        //if (_.keys(grandChildMap).length <= 0) {
        //  children.push({'name': key, 'size': 100});
        //}
        //else {
        children.push({'name': key, 'children': dex.csv.toNestedJsonChildren(cmap[key])});
        //}
      }
      else {
        children.push({'name': key, 'children': dex.csv.toNestedJsonChildren(cmap[key])});
      }
    }
  })
  return children;
};

exports.getConnectionMap = function (csv) {
  var rootMap = {};
  var curMap = {}

  for (var row = 0; row < csv.data.length; row++) {
    curMap = rootMap;

    for (var col = 0; col < csv.header.length; col++) {
      if (!_.has(curMap, csv.data[row][col])) {
        curMap[csv.data[row][col]] = {};
      }
      curMap = curMap[csv.data[row][col]];
    }
  }

  return rootMap;
};
},{}],9:[function(require,module,exports){
/**
 *
 * This module provides support for creating various datasets.
 *
 * @module datagen
 *
 */

/**
 * Creates a matrix of random integers within the specified range.
 *
 * @param spec The matrix specification.  Ex: \{rows:10, columns: 4, min: 0, max:100\}
 *
 * @returns {Array} An array containing spec.rows number of rows.  Each row consisting of
 * an array containing spec.columns elements.  Each element is a randomly generated integer
 * within the range [spec.min, spec.max]
 *
 */
exports.randomMatrix = function (spec) {
  var ri, ci;

  //{rows:10, columns: 4, min, 0, max:100})
  var matrix = [];
  var range = spec.max - spec.min;
  for (ri = 0; ri < spec.rows; ri++) {
    var row = [];

    for (ci = 0; ci < spec.columns; ci++) {
      row.push(Math.random() * range + spec.min);
    }
    matrix.push(row);
  }
  return matrix;
};

exports.randomIndexedMatrix = function (spec) {
  var ri, ci;

  //{rows:10, columns: 4, min, 0, max:100})
  var matrix = [];
  var range = spec.max - spec.min;
  for (ri = 0; ri < spec.rows; ri++) {
    var row = [];

    row.push(ri+1);
    for (ci = 0; ci < spec.columns - 1; ci++) {
      row.push(Math.random() * range + spec.min);
    }
    matrix.push(row);
  }
  return matrix;
};

exports.randomIntegerMatrix = function (spec) {
  var ri, ci;

  //{rows:10, columns: 4, min, 0, max:100})
  var matrix = [];
  var range = spec.max - spec.min;
  for (ri = 0; ri < spec.rows; ri++) {
    var row = [];

    for (ci = 0; ci < spec.columns; ci++) {
      row.push(Math.round(Math.random() * range + spec.min));
    }
    matrix.push(row);
  }
  return matrix;
};

/**
 * Creates a matrix of random integers within the specified range.
 *
 * @param spec The matrix specification.  Ex: \{rows:10, columns:4 \}
 *
 * @returns {Array} An array containing spec.rows number of rows.  Each row consisting of
 * an array containing spec.columns elements.  Each element is a randomly generated integer
 * within the range [spec.min, spec.max]
 *
 */
exports.identityCsv = function (spec) {
  var ri, ci;
  var csv = {};
  csv.header = dex.datagen.identityHeader(spec);
  csv.data = dex.datagen.identityMatrix(spec);
  return csv;
};

/**
 * This method will return an identity function meeting the supplied
 * specification.
 *
 * @param {object} spec - The identityMatrix specification.
 * @param {number} spec.rows - The number of rows to generate.
 * @param {number} spec.columns - The number of columns to generate.
 * @example {@lang javascript}
 * // Returns: [['R1C1', 'R1C2' ], ['R2C1', 'R2C2'], ['R3C1', 'R3C2']]
 * identityMatrix({rows: 3, columns: 2});
 * @returns {matrix}
 *
 */
exports.identityMatrix = function (spec) {
  var ri, ci;

  // { rows:10, columns:4 })
  var matrix = [];
  for (ri = 0; ri < spec.rows; ri++) {
    var row = [];

    for (ci = 0; ci < spec.columns; ci++) {
      row.push("R" + (ri + 1) + "C" + (ci + 1));
    }
    matrix.push(row);
  }
  return matrix;
};

/**
 * Returns an identity header array.
 *
 * @param spec - The specification for the header array.
 * @param spec.columns - The number of columns to generate.
 * @example
 * // Returns: [ 'C1', 'C2', 'C3' ]
 * identityHeader({ columns: 3 });
 * @returns {Array} Returns an array of the specified columns.
 *
 */
exports.identityHeader = function (spec) {
  return dex.range(1, spec.columns).map(function (i) {
    return "C" + i;
  });
};

},{}],10:[function(require,module,exports){
/**
 *
 * This module provides routines dealing with json data.
 *
 * @module json
 *
 */

/**
 * Converts JSON and a header to a CSV file.  It is used for parallel coordinate brush
 * events where the selected brush must be published to events as a csv.
 *
 * For example, given:
 *
 * json   = [ { A: 1, B: 3, C: 5, D: 7 },
 *            { A: 2, B: 4, C: 6, D: 8 } ];
 * header = [ 'A', 'B', 'C', 'D' ];
 *
 * This will return a csv where:
 *
 * csv = { header: [ 'A', 'B', 'C', 'D' ],
 *         data    [[ 1, 4, 5, 7 ], [ 2, 4, 6, 8 ]];
 *
 * @param json
 * @param header
 * @returns {*}
 */
exports.toCsv = function (json, header) {
  var csv;
  var ri, ci;
  var data = [];

  // Keys are provided.
  if (arguments.length == 2) {
    if (Array.isArray(json)) {
      for (ri = 0; ri < json.length; ri++) {
        var row = [];
        for (ci = 0; ci < header.length; ci++) {
          row.push(json[ri][header[ci]]);
        }
        data.push(row);
      }
    }
    else {
      var row = [];
      for (ci = 0; ci < header.length; ci++) {
        row.push(json[ri][header[ci]]);
      }
      data.push(row);
    }
    return dex.csv.csv(header, data);
  }
  else {
    return dex.json.toCsv(json, dex.json.keys(json));
  }
};

/**
 * Returns all keys found in a json structure or array of json structures.
 *
 * @param json  The json structure or array of json structures.
 * @returns {Array} A list of keys found within json.
 *
 */
exports.keys = function (json) {
  var keyMap = {};
  var keys = [];
  var ri, key;

  if (Array.isArray(json)) {
    for (ri = 0; ri < json.length; ri++) {
      for (key in json[ri]) {
        keyMap[key] = true;
      }
    }
  }
  else {
    for (key in json) {
      keyMap[key] = true;
    }
  }

  for (key in keyMap) {
    keys.push(key);
  }

  return keys;
};

},{}],11:[function(require,module,exports){
/**
 *
 * This module provides routines dealing with matrices.
 *
 * @module matrix
 *
 */

/**
 *
 * Return the specified slice of the matrix.  The original matrix is
 * not altered.
 *
 * @param {matrix} matrix The matrix to be sliced.
 * @param {Array.<number>} columns - An array of column indices to include within the slice.
 * @param {number} [rows] If supplied, the slice will consist only of the specified
 * number of rows.
 *
 * @returns {matrix}
 */
exports.slice = function (matrix, columns, rows) {
  var matrixSlice = new Array(0);
  //dex.console.log("PRE-SLICE (matrixSlize):" + matrixSlice);
  var ri;

  if (arguments.length === 3) {
    for (ri = 0; ri < rows.length; ri++) {
      matrixSlice.push(dex.array.slice(matrix[rows[ri]]));
    }
  }
  else {
    for (ri = 0; ri < matrix.length; ri++) {
      //dex.console.log("MATRIX-SLICE-BEFORE[" + ri + "]:" + matrixSlice);
      matrixSlice.push(dex.array.slice(matrix[ri], columns));
      //dex.console.log("MATRIX-SLICE-AFTER[" + ri + "]" + matrixSlice);
    }
  }
  return matrixSlice;
};

/**
 *
 * Returns a matrix consisting of unique values relative to each
 * column.
 *
 * @param {matrix} matrix The matrix to evaluate.
 *
 * @returns {Array.<Array.<Object>>} The unique values relative to each column. In the form
 * of [[ column 1 unique values], [column 2 unique values], ...]]
 *
 */
exports.uniques = function (matrix) {
  var ci;
  var uniques = [];
  var tmatrix = dex.matrix.transpose(matrix);
  var ncol = tmatrix.length;

  for (ci = 0; ci < ncol; ci += 1) {
    uniques.push(_.uniq(tmatrix[ci]));
  }
  return uniques;
};

/**
 *
 * Returns a transposed matrix where the rows of the new matrix are transposed
 * with it's columns.
 *
 * @param {matrix} matrix - The matrix to transpose.
 *
 * @returns {matrix} The transposed matrix, leaving the original matrix untouched.
 *
 * @example {@lang javascript}
 * // Returns [['R1C1', 'R2C1', 'R3C1'], ['R1C2', 'R2C2', 'R3C2' ]]
 * transpose([['R1C1', 'R1C2'], ['R2C1', 'R2C2], ['R3C1', 'R3C2']]);
 *
 */
exports.transpose = function (matrix) {
  var ci;
  var ncols;
  var transposedMatrix = [];
  //dex.console.log("Transposing:", matrix);

  if (!matrix || matrix.length <= 0 || !matrix[0] || matrix[0].length <= 0) {
    return [];
  }

  ncols = matrix[0].length;

  for (ci = 0; ci < ncols; ci++) {
    transposedMatrix.push(matrix.map(function (row) {
      return row[ci];
    }));
  }

  return transposedMatrix;
};

/**
 *
 * Return a slice of this matrix based upon the supplied columns.
 * The original matrix will be left untouched.
 *
 * @param {matrix} matrix - The matrix to slice.
 * @param {Array.<number>} columns - An array of column indexes to be included in the slice.
 *
 * @returns {*}
 *
 */
/*
 exports.columnSlice = function (matrix, columns) {
 // TODO: Determine, is this destructive?
 var slice = [];
 var ri;
 var transposeMatrix;

 if (arguments.length != 2) {
 return matrix;
 }

 transposeMatrix = dex.matrix.transpose(matrix);
 //dex.console.log("transposing", matrix, "transpose", transposedMatrix);

 // Specific columns targetted:
 if (Array.isArray(columns)) {
 for (ri = 0; ri < columns.length; ri += 1) {
 slice.push(transposeMatrix[columns[ri]]);
 }
 }
 // Single column.
 else {
 slice.push(transposeMatrix[columns]);
 }

 // Back to row/column format.
 return dex.matrix.transpose(slice);
 };
 */

/**
 *
 * Return a flattened version of the matrix.
 *
 * @param {matrix} matrix - The matrix to flatten.
 *
 * @returns {Array.<Object>} A flattened version of the matrix.
 *
 * @example {@lang javascript}
 * // Define a simple matrix.
 * var matrix = [['r1c1', 'r1c2'], ['r2c1', 'r2c2']]
 *
 * // Returns: ['r1c1', 'r1c2', 'r2c1', 'r2c2']
 * flatten(matrix);
 *
 */
exports.flatten = function (matrix) {
  return _.flatten(matrix);
};

/**
 *
 * Returns an array of the minimum and maximum value in the form of: [min,max]
 * from the specified subset of the matrix.
 *
 * @param {matrix} matrix - The matrix to scan.
 * @param {Array.<number>|number] [indices] - When supplied, will contrain the extent
 * search to just those columns specified by this list of indices.
 *
 * @returns {Array.<number>} An array of two elements: [ min, max ]
 *
 */
exports.extent = function (matrix, indices) {
  var values = matrix;
  if (arguments.length === 2) {
    values = dex.matrix.flatten(dex.matrix.slice(matrix, indices));
    var max = Math.max.apply(null, values);
    var min = Math.min.apply(null, values);
    return [min, max];
  }
};

/**
 *
 * Combine each column in matrix1 with each column in matrix2.
 *
 * @param {matrix} matrix1 The first matrix to combine.
 * @param {matrix} matrix2 The second matrix to combine.
 *
 * @returns {matrix} The combined matrix.
 *
 * @example {@lang javascript}
 * var matrix1 = [['m1r1c1', 'm1r1c2'], ['m1r2c1', 'm1r2c2']]
 * var matrix2 = [['m2r1c1', 'm2r1c2'], ['m2r2c1', 'm2r2c2']]
 *
 * // Returns: [['m1r1c1', 'm1r1c2', 'm2r1c1', 'm2r1c2'], ['m1r2c1', 'm1r2c2', 'm2r2c1', 'm2r2c2']]
 * var result = combine(matrix1, matrix2);
 *
 */
exports.combine = function (matrix1, matrix2) {
  var result = _.clone(matrix1);

  var ri;

  for (ri = 0; ri < matrix2.length; ri++) {
    result[ri] = result[ri].concat(matrix2[ri]);
  }

  return result;
};

/**
 *
 * Return a copy of the supplied matrix.
 *
 * @param {matrix} matrix The matrix to copy.
 *
 * @returns {Array} A copy of the original matrix.
 *
 */
exports.copy = function (matrix) {
  return matrix.map(function (row) {
    return _.clone(row);
  });
};

/**
 *
 * Insert a new column at position 0 within this matrix which will contain
 * integer values starting at 1, 2, 3, ...  This is useful if your dataset
 * lacks an existing unique index.
 *
 * @param {matrix} matrix - The matrix to index.
 * @returns {matrix} A copy of the original matrix with the index inserted.
 *
 */
exports.addIndex = function (matrix) {
  var indexMatrix = dex.matrix.copy(matrix);

  for (var ri = 0; ri < matrix.length; ri++) {
    indexMatrix[ri].unshift(ri + 1);
  }

  return indexMatrix;
};

/**
 *
 * Determine whether the supplied columnNum within the supplied matrix is
 * numeric or not.
 *
 * @param {matrix} matrix - The matrix to evaluate.
 * @param {number} columnNum - The column within the matrix to evaluate.
 *
 * @returns {boolean} True if the column is numeric, false otherwise.
 *
 */
exports.isColumnNumeric = function (matrix, columnNum) {
  for (var i = 0; i < matrix.length; i++) {
    if (!_.isNumber(matrix[i][columnNum])) {
      return false;
    }
  }
  return true;
};

/**
 *
 * Return the maximum value of the specified columnNum within the
 * supplied matrix.
 *
 * @param matrix The matrix to evaluate.
 * @param columnNum The column number within the matrix to evaluate.
 * @returns {*} The maximum value of the specified column within the
 * supplied matrix.
 *
 */
exports.max = function (matrix, columnNum) {
  var maxValue = matrix[0][columnNum];
  var i;

  if (dex.matrix.isColumnNumeric(matrix, columnNum)) {
    maxValue = parseFloat(matrix[0][columnNum]);
    for (i = 1; i < matrix.length; i++) {
      if (maxValue < parseFloat(matrix[i][columnNum])) {
        maxValue = parseFloat(matrix[i][columnNum]);
      }
    }
  }
  else {
    for (i = 1; i < matrix.length; i++) {
      if (maxValue < matrix[i][columnNum]) {
        maxValue = matrix[i][columnNum];
      }
    }
  }

  return maxValue;
};

/**
 *
 * Return the minimum value of the specified columnNum within the
 * supplied matrix.
 *
 * @param {matrix} matrix - The matrix to evaluate.
 * @param {number} columnNum - The column number within the matrix to evaluate.
 * @returns {number} The minimum value of the specified column within the
 * supplied matrix.
 *
 */
exports.min = function (matrix, columnNum) {
  var minValue = matrix[0][columnNum];
  var i;

  if (dex.matrix.isColumnNumeric(matrix, columnNum)) {
    minValue = parseFloat(matrix[0][columnNum]);
    for (i = 1; i < matrix.length; i++) {
      if (minValue > parseFloat(matrix[i][columnNum])) {
        minValue = parseFloat(matrix[i][columnNum]);
      }
    }
  }
  else {
    for (i = 1; i < matrix.length; i++) {
      if (minValue > matrix[i][columnNum]) {
        minValue = matrix[i][columnNum];
      }
    }
  }

  return minValue;
};

},{}],12:[function(require,module,exports){
/**
 *
 * This module provides routines dealing with javascript objects.
 *
 * @module object
 *
 */

/**
 *
 * Return the lccal keys of this object without the inherited ones.
 *
 * @param obj The object whose local keys we are interested in.
 *
 * @returns {Array} An array of 0 or more lccal keys.
 */
exports.keys = function keys(obj) {
  var keys = [];

  for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
      keys.push(key);
    }
  }

  return keys;
};

/**
 *
 * A pretty good, but imperfect mechanism for performing a deep
 * clone of an object.
 *
 * @param obj The object to clone.
 * @returns {*} The cloned object.
 *
 */
exports.clone = function clone(obj) {
  var i, attr, len;

  // Handle the 3 simple types, and null or undefined
  if (null == obj || "object" != typeof obj)
    return obj;

  // Handle Date
  if (obj instanceof Date) {
    var copy = new Date();
    copy.setTime(obj.getTime());
    return copy;
  }

  // Handle Array
  if (obj instanceof Array) {
    var copy = [];
    for (i = 0, len = obj.length; i < len; i++) {
      copy[i] = dex.object.clone(obj[i]);
    }
    return copy;
  }

  // DOM Nodes are nothing but trouble.
  if (dex.object.isElement(obj) ||
    dex.object.isNode(obj)) {
    return obj;
  }

  // Handle Object
  if (obj instanceof Object) {
    var copy = {};
    //jQuery.extend(copy, obj);
    for (attr in obj) {
      if (obj.hasOwnProperty(attr)) {
        copy[attr] = dex.object.clone(obj[attr]);
        //copy[attr] = obj[attr];
      }
    }
    return copy;
  }

  throw new Error("Unable to copy obj! Its type isn't supported.");
};

/*
  This version causes expand to continue forever.

exports.isEmpty = function isEmpty(obj) {
  return _.isEmpty(obj);
};
*/

/**
 *
 * Kind of misleading.  This really signals when expand should quit
 * expanding.  I need to clean this up.
 *
 * @param obj
 * @returns {boolean}
 */
exports.isEmpty = function isEmpty(obj) {
  //dex.console.log("isEmpty(" + obj + ") typeof=" + (typeof obj));
  if (!obj || obj instanceof Array) {
    return true;
  }
  if ("object" == typeof obj) {
    for (var key in obj) {
      if (obj.hasOwnProperty(key)) {
        //dex.console.log("OBJ: ", obj, " contains key '" + key + "'");
        return false;
      }
    }
  }

  return true;
}

/**
 *
 * Overlay the top object on top of the bottom.  This method will first clone
 * the bottom object.  Then it will drop the values within the top object
 * into the clone.
 *
 * @param {Object} top - The object who's properties will be on top.
 * @param {Object} bottom - The object who's properties will be on bottom.
 * @return {Object} The overlaid object where the properties in top override
 *                  properties in bottom.  The return object is a clone or
 *                  copy.
 *
 */
exports.overlay = function overlay(top, bottom) {
  // Make a clone of the bottom object.
  var overlay = dex.object.clone(bottom);
  var prop;

  // If we have parameters in the top object, overlay them on top
  // of the bottom object.
  if (top !== 'undefined') {
    // Iterate over the props in top.
    for (prop in top) {
      // Arrays are special cases. [A] on top of [A,B] should give [A], not [A,B]
      if (typeof top[prop] == 'object' && overlay[prop] != null && !(top[prop] instanceof Array)) {
        //console.log("PROP: " + prop + ", top=" + top + ", overlay=" + overlay);
        overlay[prop] = dex.object.overlay(top[prop], overlay[prop]);
      }
      // Simply overwrite for simple cases and arrays.
      else {
        overlay[prop] = top[prop];
      }
    }
  }

  //console.dir(config);
  return overlay;
};

/**
 *
 * This method returns whether or not the supplied object is a Node.
 *
 * @param {Object} obj - The object to test.
 *
 * @returns {boolean} True if obj is a Node, false otherwise.
 *
 */
exports.isNode = function isNode(obj) {
  return (
    typeof Node === "object" ? obj instanceof Node :
    obj && typeof obj === "object" && typeof obj.nodeType === "number" && typeof obj.nodeName === "string"
  );
};

/**
 *
 * This method returns whether or not the supplied object is a
 * DOM node.
 *
 * @param {Object} obj - The object to test.
 *
 * @returns {boolean} - True if obj is a DOM node, false otherwise.
 *
 */
exports.isElement = function isElement(obj) {
  return (
    typeof HTMLElement === "object" ? obj instanceof HTMLElement : //DOM2
    obj && typeof obj === "object" && obj.nodeType === 1 && typeof obj.nodeName === "string"
  );
};

/**
 *
 * This method returns a boolean representing whether obj is contained
 * within container.
 *
 * @param {Object} container - The container to test.
 * @param {Object} obj - The object to test.
 *
 * @return True if container contains obj.  False otherwise.
 */
exports.contains = function contains(container, obj) {
  var i = container.length;
  while (i--) {
    if (container[i] === obj) {
      return true;
    }
  }
  return false;
};

/**
 *
 * Return whether or not the supplied object is a function.
 *
 * @param obj The object to check.
 * @returns {boolean} True if obj is a function, false otherwise.
 *
 */
exports.isFunction = function isFunction(obj) {
  //return typeof obj === 'function';
  return _.isFunction(obj);
};

/**
 *
 * Visit each local property within.
 *
 * @param obj
 * @param func
 */
/*
exports.visit = function (obj, func) {
  var prop;
  func(obj);
  for (prop in obj) {
    if (obj.hasOwnProperty(prop)) {
      if (typeof obj[prop] === 'object') {
        dex.object.visit(obj[prop], func);
      }
    }
  }
};
*/

/**
 *
 * @param map
 * @param values
 * @returns {exports}
 */
exports.connect = function connect(map, values) {
  dex.console.log("map:", map, "values:", values);

  if (!values || values.length <= 0) {
    return this;
  }
  if (!map[values[0]]) {
    map[values[0]] = {};
  }
  dex.object.connect(map[values[0]], values.slice(1));

  return this;
};

/**
 *
 * @param obj
 * @returns {boolean}
 */
exports.isNumeric = function (obj) {
  return !isNaN(parseFloat(obj)) && isFinite(obj);
};

/**
 *
 * @param hierarchy
 * @param name
 * @param value
 * @param delimiter
 * @returns {*}
 */
exports.setHierarchical = function (hierarchy, name, value, delimiter) {
  if (hierarchy == null) {
    hierarchy = {};
  }

  if (typeof hierarchy != 'object') {
    return hierarchy;
  }

  // Create an array of names by splitting delimiter, then call
  // this function in the 3 argument (Array of paths) context.
  if (arguments.length == 4) {
    return dex.object.setHierarchical(hierarchy,
      name.split(delimiter), value);
  }

  // Array of paths context.
  else {
    // This is the last variable name, just set the value.
    if (name.length === 1) {
      hierarchy[name[0]] = value;
    }
    // We still have to traverse.
    else {
      // Undefined container object, just create an empty.
      if (!(name[0] in hierarchy)) {
        hierarchy[name[0]] = {};
      }

      // Recursively traverse down the hierarchy.
      dex.object.setHierarchical(hierarchy[name[0]], name.splice(1), value);
    }
  }

  return hierarchy;
};

},{}]},{},[1])(1)
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZGV4LmpzIiwibGliL3B1YnN1Yi5qcyIsInNyYy9hcnJheS9hcnJheS5qcyIsInNyYy9jb2xvci9jb2xvci5qcyIsInNyYy9jb21wb25lbnQvY29tcG9uZW50LmpzIiwic3JjL2NvbmZpZy9jb25maWcuanMiLCJzcmMvY29uc29sZS9jb25zb2xlLmpzIiwic3JjL2Nzdi9jc3YuanMiLCJzcmMvZGF0YWdlbi9kYXRhZ2VuLmpzIiwic3JjL2pzb24vanNvbi5qcyIsInNyYy9tYXRyaXgvbWF0cml4LmpzIiwic3JjL29iamVjdC9vYmplY3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN2dCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzV2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1d0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1VUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qKlxyXG4gKlxyXG4gKiBUaGUgbWFpbiBkZXhqcyBtb2R1bGUuXHJcbiAqXHJcbiAqIEBtb2R1bGUgZGV4XHJcbiAqIEByZXF1aXJlcyBkM1xyXG4gKiBAcmVxdWlyZXMganF1ZXJ5XHJcbiAqIEByZXF1aXJlcyBqcXVlcnktdWlcclxuICogQHJlcXVpcmVzIHVuZGVyc2NvcmVcclxuICpcclxuICovXHJcbnZhciBkZXggPSB7fTtcclxuXHJcbi8vcmVxdWlyZShcImQzXCIpO1xyXG4vLyQgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xyXG4vL3JlcXVpcmUoXCJqcXVlcnktdWlcIik7XHJcbi8vXyA9IHJlcXVpcmUoXCJ1bmRlcnNjb3JlXCIpO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFRoZSB2ZXJzaW9uIG9mIGRleGpzLlxyXG4gKlxyXG4gKiBAbmFtZSB2ZXJzaW9uXHJcbiAqIEB0eXBlIHtzdHJpbmd9XHJcbiAqXHJcbiAqL1xyXG5kZXgudmVyc2lvbiA9IFwiMC43XCI7XHJcblxyXG4vKipcclxuICogVGhpcyByb3V0aW5lIHdpbGwgcmV0dXJuIGFuIGFycmF5IFsgc3RhcnQsIC4uLiwgc3RhcnQgKyBsZW4gXSB1c2luZyBhbiBpbmNyZW1lbnQgb2YgMS5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IC0gVGhlIHN0YXJ0aW5nIGluZGV4LlxyXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuIC0gVGhlIG51bWJlciBvZiBpbnRlZ2VycyB0byBnZW5lcmF0ZS5cclxuICogQGV4YW1wbGUge0BsYW5nIGphdmFzY3JpcHR9XHJcbiAqIC8vIHJldHVybnMgWyAwLCAxLCAyIF1cclxuICogcmFuZ2UoMCwgMylcclxuICpcclxuICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBjb25zaXN0aW5nIG9mIGVsZW1lbnRzIFsgc3RhcnQsIC4uLiwgc3RhcnQgKyBsZW4gXS5cclxuICpcclxuICovXHJcbmRleC5yYW5nZSA9IGZ1bmN0aW9uIChzdGFydCwgbGVuKSB7XHJcbiAgcmV0dXJuIF8ucmFuZ2Uoc3RhcnQsIHN0YXJ0ICsgbGVuKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIHJvdXRpbmUgaXMgc2ltcGx5IGEgY29udmVuaWVuY2UgZnVuY3Rpb24gYXMgaXRcclxuICogc2ltcGx5IHdyYXBzIHVuZGVyc2NvcmUncyBpbXBsZW1lbnRhdGlvbiBvZiBhIHNoYWxsb3dcclxuICogY29weS4gIFRoaXMgbWV0aG9kIHdpbGwgY3JlYXRlIGEgc2hhbGxvdy1jb3BpZWQgY2xvbmVcclxuICogb2YgdGhlIHByb3ZpZGVkIHBsYWluIG9iamVjdC4gQW55IG5lc3RlZCBvYmplY3RzIG9yXHJcbiAqIGFycmF5cyB3aWxsIGJlIGNvcGllZCBieSByZWZlcmVuY2UsIG5vdCBkdXBsaWNhdGVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuZGV4LmNvcHkgPSBmdW5jdGlvbihvYmopIHtcclxuICByZXR1cm4gXy5jb3B5KG9iaik7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQSBtb2R1bGUgZm9yIGRlYWxpbmcgd2l0aCBhcnJheXMuXHJcbiAqXHJcbiAqIEBuYW1lIGFycmF5XHJcbiAqIEB0eXBlIHttb2R1bGU6YXJyYXl9XHJcbiAqXHJcbiAqL1xyXG5kZXguYXJyYXkgPSByZXF1aXJlKCcuL2FycmF5L2FycmF5Jyk7XHJcblxyXG4vKipcclxuICpcclxuICogQSBtb2R1bGUgZm9yIGNvbmZpZ3VyaW5nIHRoaW5ncy5cclxuICpcclxuICogQG5hbWUgY29uZmlnXHJcbiAqIEB0eXBlIHttb2R1bGU6Y29uZmlnfVxyXG4gKlxyXG4gKi9cclxuZGV4LmNvbmZpZyA9IHJlcXVpcmUoXCIuL2NvbmZpZy9jb25maWdcIik7XHJcblxyXG4vKipcclxuICpcclxuICogVGhlIHB1Yi9zdWIgYnVzIHVzZWQgYnkgZGV4IGluIG9yZGVyIHRvIHB1Ymxpc2ggYW5kIHN1YnNjcmliZSB0byBldmVudHMuXHJcbiAqXHJcbiAqIEBuYW1lIGJ1c1xyXG4gKiBAdHlwZSB7UHViU3VifVxyXG4gKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mZWRlcmljby1sb3gvcHVic3ViLmpzXHJcbiAqXHJcbiAqL1xyXG5kZXguYnVzID0gcmVxdWlyZShcIi4uL2xpYi9wdWJzdWJcIik7XHJcblxyXG4vKipcclxuICpcclxuICogQSBtb2R1bGUgZm9yIGxvZ2dpbmcgdG8gdGhlIGNvbnNvbGUuXHJcbiAqXHJcbiAqIEBuYW1lIGNvbnNvbGVcclxuICogQHR5cGUge21vZHVsZTpjb25zb2xlfVxyXG4gKlxyXG4gKi9cclxuZGV4LmNvbnNvbGUgPSByZXF1aXJlKFwiLi9jb25zb2xlL2NvbnNvbGVcIik7XHJcblxyXG4vKipcclxuICogQSBtb2R1bGUgZm9yIGRlYWxpbmcgd2l0aCBjb2xvcnMuXHJcbiAqXHJcbiAqIEBuYW1lIGNvbG9yXHJcbiAqIEB0eXBlIHttb2R1bGU6Y29sb3J9XHJcbiAqXHJcbiAqL1xyXG5kZXguY29sb3IgPSByZXF1aXJlKFwiLi9jb2xvci9jb2xvclwiKTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIGNoYXJ0aW5nIG1vZHVsZS5cclxuICpcclxuICogQG5hbWUgY2hhcnRzXHJcbiAqIEB0eXBlIHttb2R1bGU6Y2hhcnRzfVxyXG4gKlxyXG4gKi9cclxuZGV4LmNoYXJ0cyA9IHsnZDMnIDogeydtYXAnIDoge319LFxyXG4gICdjMycgICA6IHt9LFxyXG4gICdkeWdyYXBocycgOiB7fSxcclxuICAnZDNwbHVzJyAgIDoge30sXHJcbiAgJ2dvb2dsZScgOiB7fSxcclxuICAnaGFuZGxlYmFycycgOiB7fSxcclxuICAndGhyZWVqcycgOiB7fX07XHJcblxyXG4vKipcclxuICpcclxuICogQSBjaGFydGluZyBtb2R1bGUuXHJcbiAqXHJcbiAqIEBuYW1lIGNoYXJ0c1xyXG4gKiBAdHlwZSB7bW9kdWxlOmNoYXJ0c31cclxuICpcclxuICovXHJcbmRleC51aSA9IHsnanF1ZXJ5dWknIDoge319O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgbW9kdWxlIGZvciBoYW5kbGluZyBDU1YgZGF0YSBzdHJ1Y3R1cmVzLlxyXG4gKlxyXG4gKiBAbmFtZSBjc3ZcclxuICogQHR5cGUge21vZHVsZTpjc3Z9XHJcbiAqXHJcbiAqL1xyXG5kZXguY3N2ID0gcmVxdWlyZShcIi4vY3N2L2NzdlwiKTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIG1vZHVsZSBwcm92aWRpbmcgdXRpbGl0aWVzIGZvciBkYXRhIGdlbmVyYXRpb24uXHJcbiAqXHJcbiAqIEBuYW1lIGRhdGFnZW5cclxuICogQHR5cGUge21vZHVsZTpkYXRhZ2VufVxyXG4gKlxyXG4gKi9cclxuZGV4LmRhdGFnZW4gPSByZXF1aXJlKFwiLi9kYXRhZ2VuL2RhdGFnZW5cIik7XHJcblxyXG4vKipcclxuICpcclxuICogQSBtb2R1bGUgZm9yIGRlYWxpbmcgd2l0aCBKU09OIGRhdGEuXHJcbiAqXHJcbiAqIEBuYW1lIGpzb25cclxuICogQHR5cGUge21vZHVsZTpqc29ufVxyXG4gKlxyXG4gKi9cclxuZGV4Lmpzb24gPSByZXF1aXJlKFwiLi9qc29uL2pzb25cIik7XHJcblxyXG4vKipcclxuICogQSBtb2R1bGUgZm9yIGRlYWxpbmcgd2l0aCBtYXRyaWNlcy5cclxuICpcclxuICogQG5hbWUgbWF0cml4XHJcbiAqIEB0eXBlIHttb2R1bGU6bWF0cml4fVxyXG4gKlxyXG4gKi9cclxuZGV4Lm1hdHJpeCA9IHJlcXVpcmUoXCIuL21hdHJpeC9tYXRyaXhcIik7XHJcblxyXG4vKipcclxuICogQSBtb2R1bGUgZm9yIGRlYWxpbmcgd2l0aCBqYXZhc2NyaXB0IG9iamVjdHMuXHJcbiAqXHJcbiAqIEBuYW1lIG9iamVjdFxyXG4gKiBAdHlwZSB7bW9kdWxlOm9iamVjdH1cclxuICpcclxuICovXHJcbmRleC5vYmplY3QgPSByZXF1aXJlKFwiLi9vYmplY3Qvb2JqZWN0XCIpO1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgbW9kdWxlIGZvciBkZWFsaW5nIGRleCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAbmFtZSBjb21wb25lbnRcclxuICogQHR5cGUge21vZHVsZTpjb21wb25lbnR9XHJcbiAqXHJcbiAqL1xyXG5kZXguY29tcG9uZW50ID0gcmVxdWlyZShcIi4vY29tcG9uZW50L2NvbXBvbmVudFwiKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZGV4OyIsIi8qKlxyXG4gKiBwdWJzdWIuanNcclxuICpcclxuICogQSB0aW55LCBvcHRpbWl6ZWQsIHRlc3RlZCwgc3RhbmRhbG9uZSBhbmQgcm9idXN0XHJcbiAqIHB1YnN1YiBpbXBsZW1lbnRhdGlvbiBzdXBwb3J0aW5nIGRpZmZlcmVudCBqYXZhc2NyaXB0IGVudmlyb25tZW50c1xyXG4gKlxyXG4gKiBAYXV0aG9yIEZlZGVyaWNvIFwiTG94XCIgTHVjaWduYW5vIDxodHRwOi8vcGx1cy5seS9mZWRlcmljby5sb3g+XHJcbiAqXHJcbiAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZlZGVyaWNvLWxveC9wdWJzdWIuanNcclxuICovXHJcblxyXG4vKmdsb2JhbCBkZWZpbmUsIG1vZHVsZSovXHJcbihmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgLyoqXHJcbiAgICogQHByaXZhdGVcclxuICAgKi9cclxuICBmdW5jdGlvbiBpbml0KCkge1xyXG4gICAgLy90aGUgY2hhbm5lbCBzdWJzY3JpcHRpb24gaGFzaFxyXG4gICAgdmFyIGNoYW5uZWxzID0ge30sXHJcbiAgICAvL2hlbHAgbWluaWZpY2F0aW9uXHJcbiAgICAgIGZ1bmNUeXBlID0gRnVuY3Rpb247XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLypcclxuICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgKlxyXG4gICAgICAgKiBQdWJsaXNoIHNvbWUgZGF0YSBvbiBhIGNoYW5uZWxcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIFN0cmluZyBjaGFubmVsIFRoZSBjaGFubmVsIHRvIHB1Ymxpc2ggb25cclxuICAgICAgICogQHBhcmFtIE1peGVkIGFyZ3VtZW50IFRoZSBkYXRhIHRvIHB1Ymxpc2gsIHRoZSBmdW5jdGlvbiBzdXBwb3J0c1xyXG4gICAgICAgKiBhcyBtYW55IGRhdGEgcGFyYW1ldGVycyBhcyBuZWVkZWRcclxuICAgICAgICpcclxuICAgICAgICogQGV4YW1wbGUgUHVibGlzaCBzdHVmZiBvbiAnL3NvbWUvY2hhbm5lbCcuXHJcbiAgICAgICAqIEFueXRoaW5nIHN1YnNjcmliZWQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIGZ1bmN0aW9uXHJcbiAgICAgICAqIHNpZ25hdHVyZSBsaWtlOiBmdW5jdGlvbihhLGIsYyl7IC4uLiB9XHJcbiAgICAgICAqXHJcbiAgICAgICAqIFB1YlN1Yi5wdWJsaXNoKFxyXG4gICAgICAgKlx0XHRcIi9zb21lL2NoYW5uZWxcIiwgXCJhXCIsIFwiYlwiLFxyXG4gICAgICAgKlx0XHR7dG90YWw6IDEwLCBtaW46IDEsIG1heDogM31cclxuICAgICAgICogKTtcclxuICAgICAgICovXHJcbiAgICAgIHB1Ymxpc2g6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2hlbHAgbWluaWZpY2F0aW9uXHJcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXHJcbiAgICAgICAgLy8gYXJnc1swXSBpcyB0aGUgY2hhbm5lbFxyXG4gICAgICAgICAgc3VicyA9IGNoYW5uZWxzW2FyZ3NbMF1dLFxyXG4gICAgICAgICAgbGVuLFxyXG4gICAgICAgICAgcGFyYW1zLFxyXG4gICAgICAgICAgeDtcclxuXHJcbiAgICAgICAgaWYgKHN1YnMpIHtcclxuICAgICAgICAgIGxlbiA9IHN1YnMubGVuZ3RoO1xyXG4gICAgICAgICAgcGFyYW1zID0gKGFyZ3MubGVuZ3RoID4gMSkgP1xyXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJncywgMSkgOiBbXTtcclxuXHJcbiAgICAgICAgICAvL3J1biB0aGUgY2FsbGJhY2tzIGFzeW5jaHJvbm91c2x5LFxyXG4gICAgICAgICAgLy9kbyBub3QgYmxvY2sgdGhlIG1haW4gZXhlY3V0aW9uIHByb2Nlc3NcclxuICAgICAgICAgIHNldFRpbWVvdXQoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAvL2V4ZWN1dGVzIGNhbGxiYWNrcyBpbiB0aGUgb3JkZXJcclxuICAgICAgICAgICAgICAvL2luIHdoaWNoIHRoZXkgd2VyZSByZWdpc3RlcmVkXHJcbiAgICAgICAgICAgICAgZm9yICh4ID0gMDsgeCA8IGxlbjsgeCArPSAxKSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzW3hdLmFwcGx5KGNvbnRleHQsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAvL2NsZWFyIHJlZmVyZW5jZXMgdG8gYWxsb3cgZ2FyYmFnZSBjb2xsZWN0aW9uXHJcbiAgICAgICAgICAgICAgc3VicyA9IGNvbnRleHQgPSBwYXJhbXMgPSBudWxsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAwXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIC8qXHJcbiAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICpcclxuICAgICAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayBvbiBhIGNoYW5uZWxcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIFN0cmluZyBjaGFubmVsIFRoZSBjaGFubmVsIHRvIHN1YnNjcmliZSB0b1xyXG4gICAgICAgKiBAcGFyYW0gRnVuY3Rpb24gY2FsbGJhY2sgVGhlIGV2ZW50IGhhbmRsZXIsIGFueSB0aW1lIHNvbWV0aGluZyBpc1xyXG4gICAgICAgKiBwdWJsaXNoZWQgb24gYSBzdWJzY3JpYmVkIGNoYW5uZWwsIHRoZSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZFxyXG4gICAgICAgKiB3aXRoIHRoZSBwdWJsaXNoZWQgYXJyYXkgYXMgb3JkZXJlZCBhcmd1bWVudHNcclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiBBcnJheSBBIGhhbmRsZSB3aGljaCBjYW4gYmUgdXNlZCB0byB1bnN1YnNjcmliZSB0aGlzXHJcbiAgICAgICAqIHBhcnRpY3VsYXIgc3Vic2NyaXB0aW9uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBleGFtcGxlIFB1YlN1Yi5zdWJzY3JpYmUoXHJcbiAgICAgICAqXHRcdFx0XHRcIi9zb21lL2NoYW5uZWxcIixcclxuICAgICAgICpcdFx0XHRcdGZ1bmN0aW9uKGEsIGIsIGMpeyAuLi4gfVxyXG4gICAgICAgKlx0XHRcdCk7XHJcbiAgICAgICAqL1xyXG4gICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChjaGFubmVsLCBjYWxsYmFjaykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgY2hhbm5lbCAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgIHRocm93IFwiaW52YWxpZCBvciBtaXNzaW5nIGNoYW5uZWxcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghKGNhbGxiYWNrIGluc3RhbmNlb2YgZnVuY1R5cGUpKSB7XHJcbiAgICAgICAgICB0aHJvdyBcImludmFsaWQgb3IgbWlzc2luZyBjYWxsYmFja1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjaGFubmVsc1tjaGFubmVsXSkge1xyXG4gICAgICAgICAgY2hhbm5lbHNbY2hhbm5lbF0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNoYW5uZWxzW2NoYW5uZWxdLnB1c2goY2FsbGJhY2spO1xyXG5cclxuICAgICAgICByZXR1cm4ge2NoYW5uZWw6IGNoYW5uZWwsIGNhbGxiYWNrOiBjYWxsYmFja307XHJcbiAgICAgIH0sXHJcblxyXG4gICAgICAvKlxyXG4gICAgICAgKiBAcHVibGljXHJcbiAgICAgICAqXHJcbiAgICAgICAqIERpc2Nvbm5lY3QgYSBzdWJzY3JpYmVkIGZ1bmN0aW9uIGYuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSBNaXhlZCBoYW5kbGUgVGhlIHJldHVybiB2YWx1ZSBmcm9tIGEgc3Vic2NyaWJlIGNhbGwgb3IgdGhlXHJcbiAgICAgICAqIG5hbWUgb2YgYSBjaGFubmVsIGFzIGEgU3RyaW5nXHJcbiAgICAgICAqIEBwYXJhbSBGdW5jdGlvbiBjYWxsYmFjayBbT1BUSU9OQUxdIFRoZSBldmVudCBoYW5kbGVyIG9yaWdpbmFhbGx5XHJcbiAgICAgICAqIHJlZ2lzdGVyZWQsIG5vdCBuZWVkZWQgaWYgaGFuZGxlIGNvbnRhaW5zIHRoZSByZXR1cm4gdmFsdWVcclxuICAgICAgICogb2Ygc3Vic2NyaWJlXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBleGFtcGxlXHJcbiAgICAgICAqIHZhciBoYW5kbGUgPSBQdWJTdWIuc3Vic2NyaWJlKFwiL3NvbWUvY2hhbm5lbFwiLCBmdW5jdGlvbigpe30pO1xyXG4gICAgICAgKiBQdWJTdWIudW5zdWJzY3JpYmUoaGFuZGxlKTtcclxuICAgICAgICpcclxuICAgICAgICogb3JcclxuICAgICAgICpcclxuICAgICAgICogUHViU3ViLnVuc3Vic2NyaWJlKFwiL3NvbWUvY2hhbm5lbFwiLCBjYWxsYmFjayk7XHJcbiAgICAgICAqL1xyXG4gICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gKGhhbmRsZSwgY2FsbGJhY2spIHtcclxuICAgICAgICBpZiAoaGFuZGxlLmNoYW5uZWwgJiYgaGFuZGxlLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICBjYWxsYmFjayA9IGhhbmRsZS5jYWxsYmFjaztcclxuICAgICAgICAgIGhhbmRsZSA9IGhhbmRsZS5jaGFubmVsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBoYW5kbGUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICB0aHJvdyBcImludmFsaWQgb3IgbWlzc2luZyBjaGFubmVsXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIShjYWxsYmFjayBpbnN0YW5jZW9mIGZ1bmNUeXBlKSkge1xyXG4gICAgICAgICAgdGhyb3cgXCJpbnZhbGlkIG9yIG1pc3NpbmcgY2FsbGJhY2tcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzdWJzID0gY2hhbm5lbHNbaGFuZGxlXSxcclxuICAgICAgICAgIHgsXHJcbiAgICAgICAgICB5ID0gKHN1YnMgaW5zdGFuY2VvZiBBcnJheSkgPyBzdWJzLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgIGZvciAoeCA9IDA7IHggPCB5OyB4ICs9IDEpIHtcclxuICAgICAgICAgIGlmIChzdWJzW3hdID09PSBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBzdWJzLnNwbGljZSh4LCAxKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy9VTURcclxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAvL0FNRCBtb2R1bGVcclxuICAgIGRlZmluZSgncHVic3ViJywgaW5pdCk7XHJcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xyXG4gICAgLy9Db21tb25KUyBtb2R1bGVcclxuICAgIG1vZHVsZS5leHBvcnRzID0gaW5pdCgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAvL3RyYWRpdGlvbmFsIG5hbWVzcGFjZVxyXG4gICAgY29udGV4dC5QdWJTdWIgPSBpbml0KCk7XHJcbiAgfVxyXG59KHRoaXMpKTsiLCIvKipcclxuICpcclxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgcm91dGluZXMgZm9yIGRlYWxpbmcgd2l0aCBhcnJheXMuXHJcbiAqXHJcbiAqIEBtb2R1bGUgYXJyYXlcclxuICpcclxuICovXHJcblxyXG52YXIgYXJyYXkgPSB7fTtcclxubW9kdWxlLmV4cG9ydHMgPSBhcnJheTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUYWtlIGEgc2xpY2Ugb2YgYW4gYXJyYXkgd2l0aG91dCBtb2RpZnlpbmcgdGhlIG9yaWdpbmFsIGFycmF5LlxyXG4gKlxyXG4gKiBkZXguYXJyYXkuc2xpY2UoYXJyYXkpIC0gUmV0dXJuIGEgY29weSBvZiB0aGUgYXJyYXkuXHJcbiAqIGRleC5hcnJheS5zbGljZShhcnJheSwgcm93UmFuZ2UpIC0gQ29weSB0aGUgYXJyYXksIHRoZW4gcmV0dXJuIGEgc2xpY2VcclxuICogd2l0aGluIHRoZSBzcGVjaWZpZWQgcmFuZ2UuXHJcbiAqIGRleC5hcnJheS5zbGljZShhcnJheSwgcm93UmFuZ2UsIG1heFJvd3MpIC0gQ29weSB0aGUgYXJyYXksIHRoZW4gcmV0dXJuIGEgc2xpY2VcclxuICogd2l0aGluIHRoZSBzcGVjaWZpZWQgcmFuZ2UgdXAgdG8sIGJ1dCBub3QgZXhjZWVkaW5nLCBtYXhSb3dzIHJvd3MuXHJcbiAqXHJcbiAqIEBwYXJhbSAoYXJyYXkpIGFycmF5IC0gVGhlIGFycmF5IHRvIHNsaWNlLlxyXG4gKiBAcGFyYW0gKGFycmF5fG51bWJlcikgcm93UmFuZ2UgLSBJZiBzdXBwbGllZCBhbiBhcnJheSwgdGhlIHJhbmdlIGRlZmluZWQgYnkgdGhlIG9mIHJvd3MgdG8gc2xpY2UuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBtYXhSb3dzIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHJvd3MgdG8gcmV0dXJuLlxyXG4gKlxyXG4gKiBAZXhhbXBsZSB7QGxhbmcgamF2YXNjcmlwdH1cclxuICogdmFyIG15QXJyYXkgPSBbIDEsIDIsIDMsIDQsIDUgXTtcclxuICpcclxuICogLy8gUmV0dXJuczogWyAzLCA0LCA1XVxyXG4gKiBzbGljZShteUFycmF5LCAyKTtcclxuICpcclxuICogLy8gUmV0dXJuczogWyAxLCAzLCA1IF1cclxuICogc2xpY2UobXlBcnJheSwgWzAsIDIsIDRdKTtcclxuICpcclxuICogLy8gSSBhbSBub3Qgc3VyZSB3aHkgeW91IHdvdWxkIGRvIHRoaXMsIGJ1dCBpbiB0aGUgaW50ZXJlc3Qgb2Ygc3VwcG9ydGluZ1xyXG4gKiAvLyB0aGUgUHJpbmNpcGxlIG9mIExlYXN0IFN1cnByaXNlLCB0aGlzIHJldHVybnMgdGhlIGFycmF5IHVuY2hhbmdlZC5cclxuICogLy8gUmV0dXJuczogWyAxLCAyLCAzLCA0LCA1IF1cclxuICogc2xpY2UobXlBcnJheSlcclxuICpcclxuICovXHJcbm1vZHVsZS5leHBvcnRzLnNsaWNlID0gZnVuY3Rpb24gKGFycmF5LCByb3dSYW5nZSwgbWF4Um93cykge1xyXG4gICAgdmFyIGFycmF5U2xpY2UgPSBbXTtcclxuICAgIHZhciByYW5nZTtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIHZhciBhcnJheUNvcHkgPSBkZXguYXJyYXkuY29weShhcnJheSk7XHJcblxyXG4gICAgLy8gTnVtZXJpYy5cclxuICAgIC8vIEFycmF5LlxyXG4gICAgLy8gT2JqZWN0LiAgTnVtZXJpYyB3aXRoIHN0YXJ0IGFuZCBlbmQuXHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICByZXR1cm4gYXJyYXlDb3B5O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocm93UmFuZ2UpKSB7XHJcbiAgICAgICAgICAgIHJhbmdlID0gcm93UmFuZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByYW5nZSA9IGRleC5yYW5nZShyb3dSYW5nZSwgYXJyYXlDb3B5Lmxlbmd0aCAtIHJvd1JhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJvd1JhbmdlKSkge1xyXG4gICAgICAgICAgICByYW5nZSA9IHJvd1JhbmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmFuZ2UgPSBkZXgucmFuZ2Uocm93UmFuZ2UsIG1heFJvd3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL2RleC5jb25zb2xlLmxvZyhcIkJFRk9SRTogYXJyYXkuc2xpY2UocmFuZ2U9XCIgKyByYW5nZSArIFwiKTogYXJyYXlTbGljZT1cIiArIGFycmF5U2xpY2UpO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHJhbmdlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgYXJyYXlTbGljZS5wdXNoKGFycmF5Q29weVtyYW5nZVtpXV0pO1xyXG4gICAgfVxyXG4gICAgLy9kZXguY29uc29sZS5sb2coXCJBRlRFUjogYXJyYXkuc2xpY2UocmFuZ2U9XCIgKyByYW5nZSArIFwiKTogYXJyYXlTbGljZT1cIiArIGFycmF5U2xpY2UpO1xyXG4gICAgcmV0dXJuIGFycmF5U2xpY2U7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgbG9jYXRlcyB0aGUgYXJyYXkgZWxlbWVudCB3aG9zZSBpZCB0YWcgbWF0Y2hlcyB0aGUgc3VwcGxpZWRcclxuICogaWQuICBJdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgbWF0Y2hpbmcgYXJyYXkgZWxlbWVudCwgb3IgLTEgaWZcclxuICogbm9uZSB3YXMgZm91bmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxyXG4gKiBAcGFyYW0gaWQgVGhlIGlkIHRvIHNlYXJjaCBvbi5cclxuICpcclxuICogQHJldHVybnMge251bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBmaXJzdCBtYXRjaGluZyBhcnJheSBlbGVtZW50LCBvciAtMVxyXG4gKiBpZiBub3QgZm91bmQuXHJcbiAqXHJcbiAqL1xyXG4vKlxyXG4gbW9kdWxlLmV4cG9ydHMuaW5kZXhPZkJ5SWQgPSBmdW5jdGlvbiAoYXJyYXksIGlkKSB7XHJcbiByZXR1cm4gXy5maW5kSW5kZXgoYXJyYXksIHsgaWQ6IGlkIH0pXHJcbiB9O1xyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBJcyB0aGlzIHJvdXRpbmUgYWN0dWFsbHkgdXNlZCBhbnltb3JlPyAgQ2FuIEkgZGVwcmVjYXRlIGl0PyAgSXQncyBsb25nIGFuZFxyXG4gKiBJIGRvbid0IHJlbWVtYmVyIGV4YWN0bHkgd2hhdCBpdHMgZG9pbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBkYXRhXHJcbiAqIEBwYXJhbSBudW1WYWx1ZXNcclxuICogQHJldHVybnMgeyp9XHJcbiAqXHJcbiAqL1xyXG4vKlxyXG4gbW9kdWxlLmV4cG9ydHMuaW5kZXhCYW5kcyA9IGZ1bmN0aW9uIChkYXRhLCBudW1WYWx1ZXMpIHtcclxuIGRleC5jb25zb2xlLmxvZyhcIkJBTkRTXCIpO1xyXG4gdmFyIGludGVydmFsLCByZXNpZHVhbCwgdGlja0luZGljZXMsIGxhc3QsIGk7XHJcblxyXG4gaWYgKG51bVZhbHVlcyA8PSAwKSB7XHJcbiB0aWNrSW5kaWNlcyA9IFtdO1xyXG4gfVxyXG4gZWxzZSBpZiAobnVtVmFsdWVzID09IDEpIHtcclxuIHRpY2tJbmRpY2VzID0gW01hdGguZmxvb3IobnVtVmFsdWVzIC8gMildO1xyXG4gfVxyXG4gZWxzZSBpZiAobnVtVmFsdWVzID09IDIpIHtcclxuIHRpY2tJbmRpY2VzID0gWzAsIGRhdGEubGVuZ3RoIC0gMV07XHJcbiB9XHJcbiBlbHNlIHtcclxuIC8vIFdlIGhhdmUgYXQgbGVhc3QgMiB0aWNrcyB0byBkaXNwbGF5LlxyXG4gLy8gQ2FsY3VsYXRlIHRoZSByb3VnaCBpbnRlcnZhbCBiZXR3ZWVuIHRpY2tzLlxyXG4gaW50ZXJ2YWwgPSBNYXRoLm1heCgxLCBNYXRoLmZsb29yKGRhdGEubGVuZ3RoIC8gKG51bVZhbHVlcyAtIDEpKSk7XHJcblxyXG4gLy8gSWYgaXQncyBub3QgcGVyZmVjdCwgcmVjb3JkIGl0IGluIHRoZSByZXNpZHVhbC5cclxuIHJlc2lkdWFsID0gTWF0aC5mbG9vcihkYXRhLmxlbmd0aCAlIChudW1WYWx1ZXMgLSAxKSk7XHJcblxyXG4gLy8gQWx3YXlzIGxhYmVsIG91ciBmaXJzdCBkYXRhIHBvaW50LlxyXG4gdGlja0luZGljZXMgPSBbMF07XHJcblxyXG4gLy8gU2V0IHN0b3AgcG9pbnQgb24gdGhlIGludGVyaW9yIHRpY2tzLlxyXG4gbGFzdCA9IGRhdGEubGVuZ3RoIC0gaW50ZXJ2YWw7XHJcblxyXG4gZGV4LmNvbnNvbGUubG9nKFwiVEVTVFwiLCBkYXRhLCBudW1WYWx1ZXMsIGludGVydmFsLCByZXNpZHVhbCwgbGFzdCk7XHJcblxyXG4gLy8gRmlndXJlIG91dCB0aGUgaW50ZXJpb3IgdGlja3MsIGdlbnRseSBkcmlmdCB0byBhY2NvbW1vZGF0ZVxyXG4gLy8gdGhlIHJlc2lkdWFsLlxyXG4gZm9yIChpID0gaW50ZXJ2YWw7IGkgPD0gbGFzdDsgaSArPSBpbnRlcnZhbCkge1xyXG4gaWYgKHJlc2lkdWFsID4gMCkge1xyXG4gaSArPSAxO1xyXG4gcmVzaWR1YWwgLT0gMTtcclxuIH1cclxuIHRpY2tJbmRpY2VzLnB1c2goaSk7XHJcbiB9XHJcbiAvLyBBbHdheXMgZ3JhcGggdGhlIGxhc3QgdGljay5cclxuIHRpY2tJbmRpY2VzLnB1c2goZGF0YS5sZW5ndGggLSAxKTtcclxuIH1cclxuIGRleC5jb25zb2xlLmxvZyhcIkJBTkRTXCIpO1xyXG4gcmV0dXJuIHRpY2tJbmRpY2VzO1xyXG4gfTtcclxuICovXHJcblxyXG4vKipcclxuICogUmV0dXJuIGFuIGFycmF5IGNvbnNpc3Rpbmcgb2YgdW5pcXVlIGVsZW1lbnRzIHdpdGhpbiB0aGUgZmlyc3QuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkgdG8gZXh0cmFjdCB1bmlxdWUgdmFsdWVzIGZyb20uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gQW4gYXJyYXkgd2hpY2ggY29uc2lzdHMgb2YgdW5pcXVlIGVsZW1lbnRzIHdpdGhpblxyXG4gKiB0aGUgdXNlciBzdXBwbGllZCBhcnJheS5cclxuICpcclxuICovXHJcbi8vbW9kdWxlLmV4cG9ydHMudW5pcXVlID0gZnVuY3Rpb24gKGFycmF5KSB7XHJcbi8vICByZXR1cm4gXy51bmlxKGFycmF5KTtcclxuLy99O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIG1hdGhlbWF0aWNhbGx5IHNtYWxsZXN0IGFuZCBsYXJnZXN0XHJcbiAqIGVsZW1lbnRzIHdpdGhpbiB0aGUgYXJyYXkuXHJcbiAqXHJcbiAqIEBwYXJhbSBtYXRyaXggVGhlIGFycmF5IHRvIGV2YWx1YXRlLlxyXG4gKiBAcGFyYW0gaW5kaWNlcyBUaGUgYXJyYXkgaW5kaWNlcyB0byBiZSBjb25zaWRlcmVkIGluIHRoZSBldmFsdWF0aW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IC0gQW4gYXJyYXkgY29uc2lzdGluZyBvZiBbIG1pbiwgbWF4IF0gb2YgdGhlIGFycmF5LlxyXG4gKlxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMuZXh0ZW50ID0gZnVuY3Rpb24gKG1hdHJpeCwgaW5kaWNlcykge1xyXG4gICAgaWYgKCFtYXRyaXggfHwgbWF0cml4Lmxlbmd0aCA8PSAwIHx8ICFpbmRpY2VzIHx8IGluZGljZXMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICByZXR1cm4gWzAsIDBdO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBtaW4gPSBtYXRyaXhbMF1baW5kaWNlc1swXV07XHJcbiAgICB2YXIgbWF4ID0gbWluO1xyXG5cclxuICAgIGluZGljZXMuZm9yRWFjaChmdW5jdGlvbiAoY2kpIHtcclxuICAgICAgICBtYXRyaXguZm9yRWFjaChmdW5jdGlvbiAocm93KSB7XHJcbiAgICAgICAgICAgIGlmIChtaW4gPiByb3dbY2ldKSB7XHJcbiAgICAgICAgICAgICAgICBtaW4gPSByb3dbY2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChtYXggPCByb3dbY2ldKSB7XHJcbiAgICAgICAgICAgICAgICBtYXggPSByb3dbY2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFttaW4sIG1heF07XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogUmV0dXJuIGEgZGlzdGluY3QgY29weSBvZiBhbiBhcnJheS5cclxuICpcclxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvcHkuXHJcbiAqIEByZXR1cm5zIHtBcnJheX0gVGhlIGNvcHkgb2YgdGhlIGFycmF5LlxyXG4gKlxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMuY29weSA9IGZ1bmN0aW9uIChhcnJheSkge1xyXG4gICAgLy8gU2hhbGxvdyBjb3B5XHJcbiAgICByZXR1cm4gXy5jbG9uZShhcnJheSk7XHJcbiAgICAvLyBEZWVwIGNvcHk6XHJcbiAgICAvL3JldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgYXJyYXkpO1xyXG59OyIsIi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyByb3V0aW5lcyBmb3IgZGVhbGluZyB3aXRoIGNvbG9ycy5cclxuICpcclxuICogQG1vZHVsZSBjb2xvclxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIHJvdXRpbmUgY29udmVydHMgYSByZ2IocmVkLCBncmVlbiwgYmx1ZSkgY29sb3IgdG8gaXQnc1xyXG4gKiBlcXVpdmFsZW50ICNmZmZmZmYgaGV4YWRlY2ltYWwgZm9ybS5cclxuICpcclxuICogQHBhcmFtIGNvbG9yIFRoZSBjb2xvciB3ZSB3aXNoIHRvIGNvbnZlcnQgdG8gaGV4LlxyXG4gKiBAcmV0dXJucyB7Kn1cclxuICovXHJcbmV4cG9ydHMudG9IZXggPSBmdW5jdGlvbiAoY29sb3IpIHtcclxuICBpZiAoY29sb3Iuc3Vic3RyKDAsIDEpID09PSAnIycpIHtcclxuICAgIHJldHVybiBjb2xvcjtcclxuICB9XHJcbiAgLy9jb25zb2xlLmxvZyhcIkNPTE9SOiBcIiArIGNvbG9yKVxyXG4gIHZhciBkaWdpdHMgPSAvcmdiXFwoKFxcZCspLChcXGQrKSwoXFxkKylcXCkvLmV4ZWMoY29sb3IpO1xyXG4gIC8vY29uc29sZS5sb2coXCJESUdJVFM6IFwiICsgZGlnaXRzKTtcclxuICB2YXIgcmVkID0gcGFyc2VJbnQoZGlnaXRzWzFdKTtcclxuICB2YXIgZ3JlZW4gPSBwYXJzZUludChkaWdpdHNbMl0pO1xyXG4gIHZhciBibHVlID0gcGFyc2VJbnQoZGlnaXRzWzNdKTtcclxuXHJcbiAgdmFyIHJnYiA9IGJsdWUgfCAoZ3JlZW4gPDwgOCkgfCAocmVkIDw8IDE2KTtcclxuICByZXR1cm4gJyMnICsgcmdiLnRvU3RyaW5nKDE2KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIHJvdXRpbmUgcmV0dXJucyB0aGUgcmVxdWVzdGVkIG5hbWVkIGNvbG9yIHNjaGVtZSB3aXRoXHJcbiAqIHRoZSByZXF1ZXN0ZWQgbnVtYmVyIG9mIGNvbG9ycy5cclxuICpcclxuICogQHBhcmFtIGNvbG9yU2NoZW1lIFRoZSBuYW1lZCBjb2xvciBzY2hlbWVzOiBjYXQxMCwgY2F0MjAsIGNhdDIwYiwgY2F0MjBjLCBIaUNvbnRyYXN0IG9yXHJcbiAqIGFueSBvZiB0aGUgbmFtZWQgY29sb3JzIGZyb20gY29sb3JicmV3ZXIuXHJcbiAqIEBwYXJhbSBudW1Db2xvcnMgVGhlIG51bWJlciBvZiBjb2xvcnMgYmVpbmcgcmVxdWVzdGVkLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7Kn0gVGhlIGFycmF5IG9mIGNvbG9ycy5cclxuICovXHJcbmV4cG9ydHMuY29sb3JTY2hlbWUgPSBmdW5jdGlvbiAoY29sb3JTY2hlbWUsIG51bUNvbG9ycykge1xyXG4gIGlmIChjb2xvclNjaGVtZSA9PT0gXCJjYXQxMFwiIHx8IGNvbG9yU2NoZW1lID09IFwiMVwiKSB7XHJcbiAgICByZXR1cm4gZDMuc2NhbGUuY2F0ZWdvcnkxMCgpO1xyXG4gIH1cclxuICBlbHNlIGlmIChjb2xvclNjaGVtZSA9PT0gXCJjYXQyMFwiIHx8IGNvbG9yU2NoZW1lID09IFwiMlwiKSB7XHJcbiAgICByZXR1cm4gZDMuc2NhbGUuY2F0ZWdvcnkyMCgpO1xyXG4gIH1cclxuICBlbHNlIGlmIChjb2xvclNjaGVtZSA9PT0gXCJjYXQyMGJcIiB8fCBjb2xvclNjaGVtZSA9PSBcIjNcIikge1xyXG4gICAgcmV0dXJuIGQzLnNjYWxlLmNhdGVnb3J5MjBiKCk7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKGNvbG9yU2NoZW1lID09PSBcImNhdDIwY1wiIHx8IGNvbG9yU2NoZW1lID09IFwiNFwiKSB7XHJcbiAgICByZXR1cm4gZDMuc2NhbGUuY2F0ZWdvcnkyMGMoKTtcclxuICB9XHJcbiAgZWxzZSBpZiAoY29sb3JTY2hlbWUgPT0gXCJIaUNvbnRyYXN0XCIpIHtcclxuICAgIHJldHVybiBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoY29sb3JicmV3ZXJbY29sb3JTY2hlbWVdWzldKTtcclxuICB9XHJcbiAgZWxzZSBpZiAoY29sb3JTY2hlbWUgaW4gY29sb3JicmV3ZXIpIHtcclxuICAgIC8vY29uc29sZS5sb2coXCJMRU5HVEg6IFwiICsgbGVuKTtcclxuICAgIHZhciBjO1xyXG4gICAgdmFyIGVmZkNvbG9ycyA9IE1hdGgucG93KDIsIE1hdGguY2VpbChNYXRoLmxvZyhudW1Db2xvcnMpIC8gTWF0aC5sb2coMikpKTtcclxuICAgIC8vY29uc29sZS5sb2coXCJFRkYgTEVOR1RIOiBcIiArIGxlbik7XHJcblxyXG4gICAgLy8gRmluZCB0aGUgYmVzdCBjbWFwOlxyXG4gICAgaWYgKGVmZkNvbG9ycyA+IDEyOCkge1xyXG4gICAgICBlZmZDb2xvcnMgPSAyNTY7XHJcbiAgICB9XHJcblxyXG4gICAgZm9yIChjID0gZWZmQ29sb3JzOyBjID49IDI7IGMtLSkge1xyXG4gICAgICBpZiAoY29sb3JicmV3ZXJbY29sb3JTY2hlbWVdW2NdKSB7XHJcbiAgICAgICAgcmV0dXJuIGQzLnNjYWxlLm9yZGluYWwoKS5yYW5nZShjb2xvcmJyZXdlcltjb2xvclNjaGVtZV1bY10pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGMgPSBlZmZDb2xvcnM7IGMgPD0gMjU2OyBjKyspIHtcclxuICAgICAgaWYgKGNvbG9yYnJld2VyW2NvbG9yU2NoZW1lXVtjXSkge1xyXG4gICAgICAgIHJldHVybiBkMy5zY2FsZS5vcmRpbmFsKCkucmFuZ2UoY29sb3JicmV3ZXJbY29sb3JTY2hlbWVdW2NdKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGQzLnNjYWxlLmNhdGVnb3J5MjAoKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXR1cm4gZDMuc2NhbGUuY2F0ZWdvcnkyMCgpO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBHaXZlbiBhIGNvbG9yLCBsaWdodGVuIG9yIGRhcmtlbiBpdCBieSB0aGUgcmVxdWVzdGVkIHBlcmNlbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBjb2xvciBUaGUgY29sb3IgdG8gbW9kaWZ5LlxyXG4gKiBAcGFyYW0gcGVyY2VudCBBIGZsb2F0aW5nIHBvaW50IG51bWJlciBpbiB0aGUgcmFuZ2Ugb2YgWy0xLjAsIDEuMF0uICBOZWdhdGl2ZVxyXG4gKiB2YWx1ZXMgd2lsbCBsaWdodGVuIHRoZSBjb2xvciwgcG9zaXRpdmUgdmFsdWVzIHdpbGwgZGFya2VuIGl0LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgbGlnaHRlbmVkIG9yIGRhcmtlbmVkIGNvbG9yIGluIHRoZSBmb3JtIG9mICNmZmZmZmYuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLnNoYWRlQ29sb3IgPSBmdW5jdGlvbiAoY29sb3IsIHBlcmNlbnQpIHtcclxuICB2YXIgZiA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEpLCAxNiksIHQgPSBwZXJjZW50IDwgMCA/IDAgOiAyNTUsXHJcbiAgICBwID0gcGVyY2VudCA8IDAgPyBwZXJjZW50ICogLTEgOiBwZXJjZW50LFxyXG4gICAgUiA9IGYgPj4gMTYsIEcgPSBmID4+IDggJiAweDAwRkYsIEIgPSBmICYgMHgwMDAwRkY7XHJcbiAgcmV0dXJuIFwiI1wiICsgKDB4MTAwMDAwMCArIChNYXRoLnJvdW5kKCh0IC0gUikgKiBwKSArIFIpICogMHgxMDAwMCArIChNYXRoLnJvdW5kKCh0IC0gRykgKiBwKSArIEcpICpcclxuICAgIDB4MTAwICsgKE1hdGgucm91bmQoKHQgLSBCKSAqIHApICsgQikpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBHaXZlbiB0d28gY29sb3JzLCBibGVuZCB0aGVtIHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBAcGFyYW0gY29sb3IxXHJcbiAqIEBwYXJhbSBjb2xvcjJcclxuICogQHBhcmFtIHBlcmNlbnRcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICpcclxuICovXHJcbmV4cG9ydHMuYmxlbmRDb2xvcnMgPSBmdW5jdGlvbihjb2xvcjEsIGNvbG9yMiwgcGVyY2VudCkge1xyXG4gIHZhciBmID0gcGFyc2VJbnQoY29sb3IxLnNsaWNlKDEpLCAxNiksIHQgPSBwYXJzZUludChjb2xvcjIuc2xpY2UoMSksIDE2KSxcclxuICAgIFIxID0gZiA+PiAxNiwgRzEgPSBmID4+IDggJiAweDAwRkYsXHJcbiAgICBCMSA9IGYgJiAweDAwMDBGRiwgUjIgPSB0ID4+IDE2LFxyXG4gICAgRzIgPSB0ID4+IDggJiAweDAwRkYsIEIyID0gdCAmIDB4MDAwMEZGO1xyXG5cclxuICByZXR1cm4gXCIjXCIgKyAoMHgxMDAwMDAwICsgKE1hdGgucm91bmQoKFIyIC0gUjEpICogcGVyY2VudCkgKyBSMSkgKiAweDEwMDAwICtcclxuICAgIChNYXRoLnJvdW5kKChHMiAtIEcxKSAqIHBlcmNlbnQpICsgRzEpICogMHgxMDAgK1xyXG4gICAgKE1hdGgucm91bmQoKEIyIC0gQjEpICogcGVyY2VudCkgKyBCMSkpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29sb3JcclxuICogQHBhcmFtIHBlcmNlbnRcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbmV4cG9ydHMuc2hhZGVSR0JDb2xvciA9IGZ1bmN0aW9uIChjb2xvciwgcGVyY2VudCkge1xyXG4gIHZhciBmID0gY29sb3Iuc3BsaXQoXCIsXCIpLCB0ID0gcGVyY2VudCA8IDAgPyAwIDogMjU1LFxyXG4gICAgcCA9IHBlcmNlbnQgPCAwID8gcGVyY2VudCAqIC0xIDogcGVyY2VudCwgUiA9IHBhcnNlSW50KGZbMF0uc2xpY2UoNCkpLFxyXG4gICAgRyA9IHBhcnNlSW50KGZbMV0pLCBCID0gcGFyc2VJbnQoZlsyXSk7XHJcbiAgcmV0dXJuIFwicmdiKFwiICsgKE1hdGgucm91bmQoKHQgLSBSKSAqIHApICsgUikgKyBcIixcIiArXHJcbiAgICAoTWF0aC5yb3VuZCgodCAtIEcpICogcCkgKyBHKSArIFwiLFwiICtcclxuICAgIChNYXRoLnJvdW5kKCh0IC0gQikgKiBwKSArIEIpICsgXCIpXCI7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbG9yMVxyXG4gKiBAcGFyYW0gY29sb3IyXHJcbiAqIEBwYXJhbSBwZXJjZW50XHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAqL1xyXG5leHBvcnRzLmJsZW5kUkdCQ29sb3JzID0gZnVuY3Rpb24oY29sb3IxLCBjb2xvcjIsIHBlcmNlbnQpIHtcclxuICB2YXIgZiA9IGNvbG9yMS5zcGxpdChcIixcIiksIHQgPSBjb2xvcjIuc3BsaXQoXCIsXCIpLCBSID0gcGFyc2VJbnQoZlswXS5zbGljZSg0KSksXHJcbiAgICBHID0gcGFyc2VJbnQoZlsxXSksIEIgPSBwYXJzZUludChmWzJdKTtcclxuICByZXR1cm4gXCJyZ2IoXCIgKyAoTWF0aC5yb3VuZCgocGFyc2VJbnQodFswXS5zbGljZSg0KSkgLSBSKSAqIHApICsgUikgKyBcIixcIiArXHJcbiAgICAoTWF0aC5yb3VuZCgocGFyc2VJbnQodFsxXSkgLSBHKSAqIHBlcmNlbnQpICsgRykgKyBcIixcIiArXHJcbiAgICAoTWF0aC5yb3VuZCgocGFyc2VJbnQodFsyXSkgLSBCKSAqIHBlcmNlbnQpICsgQikgKyBcIilcIjtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29sb3JcclxuICogQHBhcmFtIHBlcmNlbnRcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5leHBvcnRzLnNoYWRlID0gZnVuY3Rpb24oY29sb3IsIHBlcmNlbnQpIHtcclxuICBpZiAoY29sb3IubGVuZ3RoID4gNykgcmV0dXJuIHNoYWRlUkdCQ29sb3IoY29sb3IsIHBlcmNlbnQpO1xyXG4gIGVsc2UgcmV0dXJuIHNoYWRlQ29sb3IyKGNvbG9yLCBwZXJjZW50KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29sb3IxXHJcbiAqIEBwYXJhbSBjb2xvcjJcclxuICogQHBhcmFtIHBlcmNlbnRcclxuICovXHJcbmV4cG9ydHMuYmxlbmQgPSBmdW5jdGlvbiAoY29sb3IxLCBjb2xvcjIsIHBlcmNlbnQpIHtcclxuICBpZiAoY29sb3IxLmxlbmd0aCA+IDcpIHJldHVybiBibGVuZFJHQkNvbG9ycyhjb2xvcjEsIGNvbG9yMiwgcGVyY2VudCk7XHJcbiAgZWxzZSByZXR1cm4gYmxlbmRDb2xvcnMoY29sb3IxLCBjb2xvcjIsIHBlcmNlbnQpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEdpdmVuIGEgY29sb3IgYW5kIGEgcGVyY2VudCB0byBsaWdodGVuIG9yIGRhcmtlbiBpdC5cclxuICpcclxuICogQHBhcmFtIGNvbG9yIFRoZSBiYXNlIGNvbG9yLlxyXG4gKiBAcGFyYW0gcGVyY2VudCBUaGUgcGVjZW50YWdlIHRvIGxpZ2h0ZW4gKG5lZ2F0aXZlKSBvciBkYXJrZW4gKHBvc2l0aXZlKSB0aGUgY29sb3IuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21wdXRlZCBjb2xvci5cclxuICpcclxuICovXHJcbi8qXHJcbiBleHBvcnRzLnNoYWRlQ29sb3IgPSBmdW5jdGlvbiAoY29sb3IsIHBlcmNlbnQpIHtcclxuIHZhciBSID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDEsIDMpLCAxNilcclxuIHZhciBHID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDMsIDUpLCAxNilcclxuIHZhciBCID0gcGFyc2VJbnQoY29sb3Iuc3Vic3RyaW5nKDUsIDcpLCAxNik7XHJcblxyXG4gUiA9IHBhcnNlSW50KFIgKiAoMTAwICsgcGVyY2VudCkgLyAxMDApO1xyXG4gRyA9IHBhcnNlSW50KEcgKiAoMTAwICsgcGVyY2VudCkgLyAxMDApO1xyXG4gQiA9IHBhcnNlSW50KEIgKiAoMTAwICsgcGVyY2VudCkgLyAxMDApO1xyXG5cclxuIFIgPSAoUiA8IDI1NSkgPyBSIDogMjU1O1xyXG4gRyA9IChHIDwgMjU1KSA/IEcgOiAyNTU7XHJcbiBCID0gKEIgPCAyNTUpID8gQiA6IDI1NTtcclxuXHJcbiB2YXIgUlIgPSAoKFIudG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxKSA/IFwiMFwiICsgUi50b1N0cmluZygxNikgOiBSLnRvU3RyaW5nKDE2KSk7XHJcbiB2YXIgR0cgPSAoKEcudG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxKSA/IFwiMFwiICsgRy50b1N0cmluZygxNikgOiBHLnRvU3RyaW5nKDE2KSk7XHJcbiB2YXIgQkIgPSAoKEIudG9TdHJpbmcoMTYpLmxlbmd0aCA9PSAxKSA/IFwiMFwiICsgQi50b1N0cmluZygxNikgOiBCLnRvU3RyaW5nKDE2KSk7XHJcblxyXG4gcmV0dXJuIFwiI1wiICsgUlIgKyBHRyArIEJCO1xyXG4gfTtcclxuICovXHJcblxyXG5leHBvcnRzLmdyYWRpZW50ID0gZnVuY3Rpb24gKGJhc2VDb2xvcikge1xyXG4gIGlmIChiYXNlQ29sb3IuY2hhckF0KDApID09ICdyJykge1xyXG4gICAgYmFzZUNvbG9yID0gY29sb3JUb0hleChiYXNlQ29sb3IpO1xyXG4gIH1cclxuICB2YXIgZ3JhZGllbnRJZDtcclxuICBncmFkaWVudElkID0gXCJncmFkaWVudFwiICsgYmFzZUNvbG9yLnN1YnN0cmluZygxKVxyXG4gIGNvbnNvbGUubG9nKFwiR3JhZGllbnRJZDogXCIgKyBncmFkaWVudElkKTtcclxuICBjb25zb2xlLmxvZyhcIkJhc2VDb2xvciA6IFwiICsgYmFzZUNvbG9yKTtcclxuXHJcbiAgLy92YXIgbGlnaHRDb2xvciA9IHNoYWRlQ29sb3IoYmFzZUNvbG9yLCAtMTApXHJcbiAgdmFyIGRhcmtDb2xvciA9IHNoYWRlQ29sb3IoYmFzZUNvbG9yLCAtMjApXHJcblxyXG4gIHZhciBncmFkID0gZDMuc2VsZWN0KFwiI2dyYWRpZW50c1wiKS5zZWxlY3RBbGwoXCIjXCIgKyBncmFkaWVudElkKVxyXG4gICAgLmRhdGEoW2dyYWRpZW50SWRdKVxyXG4gICAgLmVudGVyKClcclxuICAgIC5hcHBlbmQoXCJyYWRpYWxHcmFkaWVudFwiKVxyXG4gICAgLmF0dHIoXCJjbGFzc1wiLCBcImNvbG9yR3JhZGllbnRcIilcclxuICAgIC5hdHRyKFwiaWRcIiwgZ3JhZGllbnRJZClcclxuICAgIC5hdHRyKFwiZ3JhZGllbnRVbml0c1wiLCBcIm9iamVjdEJvdW5kaW5nQm94XCIpXHJcbiAgICAuYXR0cihcImZ4XCIsIFwiMzAlXCIpXHJcbiAgICAuYXR0cihcImZ5XCIsIFwiMzAlXCIpXHJcblxyXG4gIGdyYWQuYXBwZW5kKFwic3RvcFwiKVxyXG4gICAgLmF0dHIoXCJvZmZzZXRcIiwgXCIwJVwiKVxyXG4gICAgLmF0dHIoXCJzdHlsZVwiLCBcInN0b3AtY29sb3I6I0ZGRkZGRlwiKVxyXG5cclxuICAvLyBNaWRkbGVcclxuICBncmFkLmFwcGVuZChcInN0b3BcIilcclxuICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiNDAlXCIpXHJcbiAgICAuYXR0cihcInN0eWxlXCIsIFwic3RvcC1jb2xvcjpcIiArIGJhc2VDb2xvcilcclxuXHJcbiAgLy8gT3V0ZXIgRWRnZXNcclxuICBncmFkLmFwcGVuZChcInN0b3BcIilcclxuICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiMTAwJVwiKVxyXG4gICAgLmF0dHIoXCJzdHlsZVwiLCBcInN0b3AtY29sb3I6XCIgKyBkYXJrQ29sb3IpXHJcblxyXG4gIHJldHVybiBcInVybCgjXCIgKyBncmFkaWVudElkICsgXCIpXCI7XHJcbn07XHJcbiIsIi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBiYXNlIGNhcGFiaWxpdGllcyB3aGljaCBhcmUgYXZhaWxhYmxlIHRvIGFsbCBkZXggY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVyZmFjZVxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIG1hdHJpeCBpcyBhIHR3byBkaW1lbnNpb25hbCBhcnJheSBvZiB2YWx1ZXMuICBJdCdzIGEgZGF0YSBzdHJ1Y3R1cmVcclxuICogd2hpY2ggaXMgYSBrZXkgY29tcG9uZW50IG9mIGEgY3N2IHdoaWNoIGlzIHVzZWQgZXh0ZW5zaXZlbHlcclxuICogdGhyb3VnaG91dCBEZXhKcy4gIFRoZSBkYXRhIHBvcnRpb24gb2YgYSBjc3YgaXMgc2ltcGx5IGEgbWF0cml4LlxyXG4gKiBBIGNzdiBpcyB0aGUgc3RhbmRhcmQgZm9ybSBvZiBkYXRhIGlucHV0IGV4cGVjdGVkIGJ5IGRleCBjb21wb25lbnRzLlxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7QXJyYXkuPEFycmF5LjxPYmplY3Q+Pn0gbWF0cml4XHJcbiAqIEBleGFtcGxlIHtAbGFuZyBqYXZhc2NyaXB0fVxyXG4gKiAvLyBBIDJ4MiBtYXRyaXggb2YgbnVtYmVycy5cclxuICogdmFyIG1hdHJpeDEgPSBbWzEsIDJdLCBbMywgNF1dO1xyXG4gKlxyXG4gKiAvLyBBIDJ4MiBtYXRyaXggb2Ygc3RyaW5ncy5cclxuICogdmFyIG1hdHJpeDIgPSBbWydQYXQnLCAnTWFydGluJ10sIFsnTWlrZScsICdQYXJ0b24nXV07XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEEgQ1NWIGRhdGEgc3RydWN0dXJlLlxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBjc3ZcclxuICpcclxuICogQHByb3BlcnR5IHtBcnJheX0gaGVhZGVyIC0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgaGVhZGluZ3MgZm9yIHRoaXMgY3N2LlxyXG4gKiBAcHJvcGVydHkge21hdHJpeH0gZGF0YSAtIEEgbWF0cml4IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoaXMgY3N2LlxyXG4gKiBAZXhhbXBsZSB7QGxhbmcgamF2YXNjcmlwdH1cclxuICogdmFyIG15Q3N2ID0geyBoZWFkZXIgOiBbIFwiRmlyc3ROYW1lXCIsIFwiTGFzdE5hbWVcIiBdLFxyXG4gKiAgICAgICAgICAgICAgIGRhdGEgICA6IFtbIFwiQm9iXCIsIFwiSm9uZXNcIiBdLCBbIFwiUmlja3lcIiwgXCJCb2JieVwiIF1dIH07XHJcbiAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEEgRDMgYXhpcyBzcGVjaWZpY2F0aW9uLlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBkM2F4aXNfc3BlY1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge2Qzc2NhbGV9IFtzY2FsZT1kZXguY29uZmlnLnNjYWxlKHt0eXBlOidsaW5lYXInfSldIC0gVGhlIHNjYWxlIHRvIGJlIHVzZWQgZm9yIHRoaXMgYXhpcy5cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtvcmllbnQ9Ym90dG9tXSAtIFRoZSBvcmllbnRhdGlvbiBvZiB0aGUgYXhpcy4gKGxlZnR8cmlnaHR8dG9wfGJvdHRvbSlcclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFt0aWNrc10gLSBUaGUgbnVtYmVyIG9mIHRpY2tzIHRvIGdlbmVyYXRlIGZvciB0aGlzIGF4aXMuXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IFt0aWNrVmFsdWVzXSAtIFN1cHBseSBzcGVjaWZpYyBwbGFjZXMgdG8gZHJhdyB0aGUgdGlja3MuXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbdGlja1NpemU9WzYsNl1dIC0gU2V0cyB0aGUgbGVuZ3RoIG9mIGJvdGggdGhlIGlubmVyIGFuZCBvdXRlciB0aWNrcy5cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtpbm5lclRpY2tTaXplPWRdIC0gU2V0cyB0aGUgbGVuZ3RoIG9mIGlubmVyIHRpY2tzLlxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW291dGVyVGlja1NpemU9Nl0gLSBTZXRzIHRoZSBsZW5ndGggb2Ygb3V0ZXIgdGlja3MuXHJcbiAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbdGlja1BhZGRpbmc9M10gLSBTZXRzIHRoZSB0aWNrIHBhZGRpbmcgaW4gcGl4ZWxzLlxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW3RpY2tGb3JtYXRdIC0gU2V0cyB0aGUgZm9ybWF0IG9mIHRpY2sgbGFiZWxzLiBleDogZDMuZm9ybWF0KFwiLC4wZlwiKVxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIEQzIHNjYWxlIHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGQzc2NhbGVfc3BlY1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3R5cGU9bGluZWFyXSAtIFRoZSB0eXBlIG9mIHNjYWxlIHRvIGNyZWF0ZS4gIFZhbGlkIHR5cGVzIGFyZVxyXG4gKiAobGluZWFyfHNxcnR8cG93fHRpbWV8bG9nfG9yZGluYWx8cXVhbnRpbGV8cXVhbnRpemV8aWRlbnRpdHkpXHJcbiAqIEBwcm9wZXJ0eSB7QXJyYXl9IFtkb21haW49WzAsIDEwMF1dIC0gVGhlIGRvbWFpbiBmb3IgdGhpcyBzY2FsZS5cclxuICogQHByb3BlcnR5IHtBcnJheX0gW3JhbmdlPVswLCA4MDBdXSAtIFRoZSByYW5nZSBmb3IgdGhpcyBzY2FsZS5cclxuICogQHByb3BlcnR5IHtBcnJheX0gW3JhbmdlUm91bmRdIC0gU2V0cyB0aGUgc2NhbGUncyBvdXRwdXQgcmFuZ2UgdG8gdGhlIHNwZWNpZmllZCBhcnJheSBvZiB2YWx1ZXMsIHdoaWxlIGFsc29cclxuICogc2V0dGluZyB0aGUgc2NhbGUncyBpbnRlcnBvbGF0b3IgdG8gZDMuaW50ZXJwb2xhdGVSb3VuZC5cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtpbnRlcnBvbGF0ZV0gLSBXaGVuIHN1cHBsaWVkLCBzZXRzIHRoZSBzY2FsZSdzIG91dHB1dFxyXG4gKiBpbnRlcnBvbGF0b3IgdXNpbmcgdGhlIHNwZWNpZmllZCBmYWN0b3J5LlxyXG4gKiBAcHJvcGVydHkge1N0cmluZ30gW2NsYW1wXSAtIFNldCB0byB0cnVlIGluIG9yZGVyIHRvIGVuYWJsZSBjbGFtcGluZywgZmFsc2UgdG8gZGlzYWJsZVxyXG4gKiBpdC4gIEVuc3VyZXMgaW50ZXJwb2xhdGlvbi9leHRyYXBvbGF0aW9uIGRvZXMgbm90IGdlbmVyYXRlIHZhbHVlcyBvdXRzaWRlIG9mIHRoaXNcclxuICogc2NhbGUncyByYW5nZS5cclxuICogQHByb3BlcnR5IHtTdHJpbmd9IFtuaWNlXSAtIElmIHRydWUsIHdpbGwgZXh0ZW5kIHRoZSBzY2FsZSdzIGRvbWFpbiB0byBiZWdpbiBhbmRcclxuICogZW5kIG9uIG5pY2Ugcm91bmQgaW50ZWdlciB2YWx1ZXMuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGlja0Zvcm1hdF0gLSBPbmx5IGFwcGxpZXMgdG8gdGltZSBzY2FsZXMuICBTZXQncyB0aGUgdGlja1xyXG4gKiBmb3JtYXQuXHJcbiAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgRDMgZm9udCBzcGVjaWZpY2F0aW9uLiAgTW9yZSBpbmZvcm1hdGlvbiBjYW4gYmUgZm91bmQgaW4gdGhlIHtAbGluayBodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcvdGV4dC5odG1sfFczQyBTVkcgMS4xIFRleHQgU3BlY2lmaWNhdGlvbn0uXHJcbiAqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGQzZm9udF9zcGVjXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZGVjb3JhdGlvbj1ub25lXSAtIFRoaXMgcHJvcGVydHkgZGVzY3JpYmVzIGRlY29yYXRpb25zIHRoYXQgYXJlIGFkZGVkIHRvIHRoZSB0ZXh0IG9mIGFuIGVsZW1lbnQuXHJcbiAqIFZhbGlkIHZhbHVlczogKCBub25lIHwgdW5kZXJsaW5lIHwgb3ZlcmxpbmUgfCBsaW5lLXRocm91Z2ggfCBibGluayB8IGluaGVyaXQgKVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2ZhbWlseT1zYW5zLXNlcmlmXSAtIFRoaXMgcHJvcGVydHkgaW5kaWNhdGVzIHdoaWNoIGZvbnQgZmFtaWx5IGlzIHRvIGJlIHVzZWQgdG8gcmVuZGVyIHRoZSB0ZXh0LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2xldHRlclNwYWNpbmc9bm9ybWFsXSAtXHJcbiAqIEBwcm9wZXJ0eSB7aW50ZWdlcn0gW3NpemU9MTRdIC0gVGhlIHNpemUgb2YgdGhlIGZvbnQuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbc3R5bGU9bm9ybWFsXSAtIFRoaXMgcHJvcGVydHkgc3BlY2lmaWVzIHdoZXRoZXIgdGhlIHRleHQgaXMgdG8gYmUgcmVuZGVyZWQgdXNpbmcgYSBub3JtYWwsXHJcbiAqIGl0YWxpYyBvciBvYmxpcXVlIGZhY2UuIFZhbGlkIHZhbHVlcyBhcmU6ICggbm9ybWFsIHwgaXRhbGljIHwgb2JsaXF1ZSB8IGluaGVyaXQgKS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt3ZWlnaHQ9bm9ybWFsXSAtIFRoaXMgcHJvcGVydHkgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIHRleHQgaXMgdG8gYmUgcmVuZGVyZWQgdXNpbmcgdGhlIG5vcm1hbCBnbHlwaHNcclxuICogZm9yIGxvd2VyY2FzZSBjaGFyYWN0ZXJzIG9yIHVzaW5nIHNtYWxsLWNhcHMgZ2x5cGhzIGZvciBsb3dlcmNhc2UgY2hhcmFjdGVycy4gIFZhbGlkIHZhbHVlcyBmb3IgdGhpcyBmaWVsZCBhcmU6XHJcbiAqICggbm9ybWFsIHwgYm9sZCB8IGxpZ2h0ZXIgfCAxMDAgfCAyMDAgfCAzMDAgfCA0MDAgfCA1MDAgfCA2MDAgfCA3MDAgfCA4MDAgfCA5MDAgfCBpbmhlcml0KVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ3xpbnRlZ2VyfSBbd29yZFNwYWNpbmc9bm9ybWFsXSAtIFNwZWNpZmllcyB0aGUgYW1vdW50IG9mIHNwYWNlIHRoYXQgaXMgdG8gYmUgYWRkZWQgYmV0d2VlbiB0ZXh0IGNoYXJhY3RlcnMuXHJcbiAqIFZhbGlkIHZhbHVlczogKCBhdXRvIHwgPGludGVnZXItbGVuZ3RoPiB8IGluaGVyaXQgKVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3ZhcmlhbnQ9bm9ybWFsXSAtIGhpcyBwcm9wZXJ0eSBpbmRpY2F0ZXMgd2hldGhlciB0aGUgdGV4dCBpcyB0byBiZSByZW5kZXJlZCB1c2luZ1xyXG4gKiB0aGUgbm9ybWFsIGdseXBocyBmb3IgbG93ZXJjYXNlIGNoYXJhY3RlcnMgb3IgdXNpbmcgc21hbGwtY2FwcyBnbHlwaHMgZm9yIGxvd2VyY2FzZSBjaGFyYWN0ZXJzLlxyXG4gKiBWYWxpZCB2YWx1ZXM6ICggbm9ybWFsIHwgc21hbGwtY2FwcyB8IGluaGVyaXQgKVxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIEQzIHN0cm9rZSBzcGVjaWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBkM3N0cm9rZV9zcGVjXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7ZmxvYXR9IFt3aWR0aD0xXSAtIFRoZSB3aWR0aCAoaW4gcGl4ZWxzKSBvZiB0aGlzIHN0cm9rZS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtjb2xvcj1ibGFja10gLSBUaGUgY29sb3Igb2YgdGhpcyBzdHJva2UuXHJcbiAqIEBwcm9wZXJ0eSB7ZmxvYXR9IFtvcGFjaXR5PTFdIC0gVGhlIG9wYWNpdHkgb2YgdGhpcyBzdHJva2UgaW4gdGhlIHJhbmdlIG9mXHJcbiAqIHdoZXJlIDAgaXMgaW52aXNpYmxlIGFuZCAxIHJlcHJlc2VudHMgMTAwJSBvcGFxdWUgc3Ryb2tlLiBbMCwgMV1cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkYXNoYXJyYXldIC0gVXNlZCB0byBkcmF3IGRhc2hlZCBsaW5lcy4gIEV4OiBcIjEgMVwiIHdpbGwgZHJhd1xyXG4gKiBhIGRhc2hlZCBsaW5lIHdoaWNoIGNvbnNpc3RzIG9mIHNpbmdsZSBwaXhlbCBkYXNoZXMgc2VwYXJhdGVkIGJ5IDEgZW1wdHkgcGl4ZWwuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdHJhbnNmb3JtXSAtIEEgdHJhbnNmb3JtIHRvIGJlIGFwcGxpZWQgdG8gdGhlIHN0cm9rZS5cclxuICpcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogQSBEMyB0ZXh0IHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGQzdGV4dF9zcGVjXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7ZDNmb250X3NwZWN9IFtmb250XSAtIFRoZSBkMyBmb250IHNwZWNpZmljYXRpb24gZm9yIHRoaXMgc3Ryb2tlLlxyXG4gKiBAcHJvcGVydHkge2ludGVnZXJ9IFt4PTBdIC0gVGhlIHggY29vcmRpbmF0ZSBmb3IgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiB0aGlzIHRleHQuXHJcbiAqIEBwcm9wZXJ0eSB7aW50ZWdlcn0gW3k9MF0gLSBUaGUgeSBjb29yZGluYXRlIGZvciB0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIHRoaXMgdGV4dC5cclxuICogQHByb3BlcnR5IHtpbnRlZ2VyfSBbdGV4dExlbmd0aF0gLSBUaGUgYXV0aG9yJ3MgZXN0aW1hdGlvbiBvZiB0aGUgbGVuZ3RoIG9mIHRoaXMgdGV4dC5cclxuICogVGhlIHN5c3RlbSB3aWxsIHVzZSB0aGlzIGFzIGEgcHJlZmVyZW5jZSBhbmQgYXR0ZW1wdCB0byBzaXplIHRoZSB0ZXh0IHRvIHRoaXMgbGVuZ3RoLlxyXG4gKiBAcHJvcGVydHkge2ludGVnZXJ9IFtsZW5ndGhBZGp1c3RdIC0gSW5kaWNhdGVzIHRoZSB0eXBlIG9mIGFkanVzdG1lbnRzIHdoaWNoIHRoZSB1c2VyXHJcbiAqIGFnZW50IHNoYWxsIG1ha2UgdG8gbWFrZSB0aGUgcmVuZGVyZWQgbGVuZ3RoIG9mIHRoZSB0ZXh0IG1hdGNoIHRoZSB2YWx1ZSBzcGVjaWZpZWQgb25cclxuICogdGhlIHRleHRMZW5ndGggYXR0cmlidXRlLiAgVmFsaWQgdmFsdWVzOiAoIHNwYWNpbmcgfCBzcGFjaW5nQW5kR2x5cGhzIClcclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0cmFuc2Zvcm1dIC0gQW55IGV4dHJhIHRyYW5zZm9ybWF0aW9ucyB0byBiZSBhcHBsaWVkIHRvIHRoaXNcclxuICogdGV4dC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtnbHlwaE9yaWVudGF0aW9uVmVydGljYWxdIC0gQWxsb3dzIHRoZSB1c2VyIHRvIGNvbnRyb2wgdGhlXHJcbiAqIG9yaWVudGF0aW9uIG9mIHRleHQuICBWYWxpZCB2YWx1ZXM6ICggYXV0byB8IDxhbmdsZT4gfCBpbmhlcml0ICkuICBBbmdsZSBtYXkgYmUgZXhwcmVzc2VkXHJcbiAqIGluIGRlZ3JlZXMsIHJhZGlhbnMsIG9yIGFzIGEgZ3JhZGllbnQuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbdGV4dF0gLSBUaGUgdGV4dCB3ZSBhcmUgcmVwcmVzZW50aW5nLlxyXG4gKiBAcHJvcGVydHkge2ludGVnZXJ9IFtkeD0wXSAtIEFuIHgtYXhpcyBvZmZzZXQgdG8gYmUgYXBwbGllZCB0byB0aGlzIHRleHQuXHJcbiAqIEBwcm9wZXJ0eSB7aW50ZWdlcn0gW2R5PTBdIC0gQSB5LWF4aXMgb2Zmc2V0IHRvIGJlIGFwcGxpZWQgdG8gdGhpcyB0ZXh0LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3dyaXRpbmdNb2RlXSAtIFNwZWNpZmllcyB3aGV0aGVyIHRleHQgZmxvd3MgbGVmdCB0byByaWdodCxcclxuICogcmlnaHQgdG8gbGVmdCwgdG9wIHRvIGJvdHRvbSBvciBib3R0b20gdG8gdG9wLiAgVmFsaWQgdmFsdWVzOiAoIGxyLXRiLCBybC10YiwgdGItcmwsXHJcbiAqIGxyLCBybCwgdGIsIGluaGVyaXQgKVxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2FuY2hvcj1zdGFydF0gLSBTcGVjaWZpZXMgd2hlcmUgdGhpcyB0ZXh0IHNob3VsZCBiZSBhbmNob3JlZCB0by5cclxuICogVmFsaWQgdmFsdWVzOiAoIHN0YXJ0IHwgbWlkZGxlIHwgZW5kIClcclxuICogQHByb3BlcnR5IHtkM2ZpbGxfc3BlY30gW2ZpbGxdIC0gVGhlIGZpbGwgdG8gYmUgYXBwbGllZCB0byB0aGlzIHRleHQuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZm9ybWF0XSAtIEEgZDMgZm9ybWF0IHRvIGJlIGFwcGxpZWQgdG8gdGhlIHRleHQuXHJcbiAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgRDMgcmVjdGFuZ2xlIHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGQzcmVjdF9zcGVjXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbd2lkdGg9NTBdIC0gVGhlIHdpZHRoIG9mIHRoaXMgcmVjdGFuZ2xlLlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2hlaWdodD01MF0gLSBUaGUgaGVpZ2h0IG9mIHRoaXMgcmVjdGFuZ2xlLlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3g9MF0gLSBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSB0b3AgbGVmdCBjb3JuZXIgb2YgdGhpcyByZWN0YW5nbGUuXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbeT0wXSAtIFRoZSB5IGNvb3JkaW5hdGUgb2YgdGhlIHRvcCBsZWZ0IGNvcm5lciBvZiB0aGlzIHJlY3RhbmdsZS5cclxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyeD0wXSAtIEZvciByb3VuZGVkIHJlY3RhbmdsZXMsIHRoZSB4LWF4aXMgcmFkaXVzIG9mIHRoZSBlbGxpcHNlXHJcbiAqIHVzZWQgdG8gcm91bmQgb2ZmIHRoZSBjb3JuZXJzIG9mIHRoZSByZWN0YW5nbGUuXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbcnk9MF0gLSBGb3Igcm91bmRlZCByZWN0YW5nbGVzLCB0aGUgeS1heGlzIHJhZGl1cyBvZiB0aGUgZWxsaXBzZVxyXG4gKiB1c2VkIHRvIHJvdW5kIG9mZiB0aGUgY29ybmVycyBvZiB0aGUgcmVjdGFuZ2xlLlxyXG4gKiBAcHJvcGVydHkge2Qzc3Ryb2tlX3NwZWN9IFtzdHJva2VdIC0gVGhlIHN0cm9rZSB3aGljaCB3aWxsIGJlIHVzZWQgdG8gZHJhdyB0aGUgcmVjdGFuZ2xlLlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW29wYWNpdHk9MV0gLSBUaGUgb3BhY2l0eSBmb3IgdGhpcyByZWN0YW5nbGUgZXhwcmVzc2VkIGFzIGEgZmxvYXRpbmdcclxuICogcG9pbnQgbnVtYmVyIGluIHRoZSByYW5nZSBvZiBbIDAuMCwgMS4wIF0gd2hlcmUgMCBpcyB0cmFuc3BhcmVudCwgMSBpcyBvcGFxdWUsIGFuZCBhbGxcclxuICogb3RoZXJzIGFyZSBzb21ld2hlcmUgaW4gYmV0d2VlbiBmdWxseSB0cmFuc3BhcmVudCBhbmQgZnVsbHkgb3BhcXVlLlxyXG4gKiBAcHJvcGVydHkge2QzY29sb3JzY2FsZX0gW2NvbG9yPWQzLnNjYWxlLmNhdGVnb3J5MjAoKV0gLSBUaGUgY29sb3Igc2NhbGUgd2hpY2ggd2Ugd2lsbFxyXG4gKiB0byBjb2xvciB0aGlzIHJlY3RhbmdsZS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0cmFuc2Zvcm1dIC0gQSB0cmFuc2Zvcm0sIGlmIGFueSwgdG8gYmUgYXBwbGllZCB0byB0aGlzIHJlY3RhbmdsZS5cclxuICogQHByb3BlcnR5IHtldmVudHNfc3BlY30gW2V2ZW50c10gLSBBbnkgZXZlbnRzIHdoaWNoIHdlIHdpc2ggdG8gcmVzcG9uZCB0by5cclxuICpcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogQW4gZXZlbnRzIHNwZWNpZmljYXRpb24uICBNYW55IGV2ZW50cyBhcmUgc3VwcG9ydGVkLCB0aGUgb25lcyBsaXN0ZWQgaGVyZSBhcmUgYSBzdWJzZXRcclxuICogb2YgYWxsIG9mIHRoZSBwb3NzaWJsZSBldmVudHMuICBGb3IgYSBjb21wbGV0ZSBsaXN0LCByZWZlciB0byBNb3ppbGxhJ3MgZGV2ZWxvcGVyIGRvY3VtZW50YXRpb25cclxuICogY29uY2VybmluZyB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvRXZlbnRzI1N0YW5kYXJkX2V2ZW50c3xzdGFuZGFyZCBldmVudHN9LlxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBkZXhldmVudHNfc3BlY1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21vdXNlZG93bl0gLSBIYW5kbGVzIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHBvaW50aW5nIGRldmljZSBidXR0b24gKHVzdWFsbHkgYSBtb3VzZSlcclxuICogaXMgcHJlc3NlZCBvbiBhbiBlbGVtZW50LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21vdXNlZW50ZXJdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGEgcG9pbnRpbmcgZGV2aWNlIGlzIG1vdmVkIG9udG9cclxuICogdGhlIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGxpc3RlbmVyIGF0dGFjaGVkLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21vdXNlbGVhdmVdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGEgcG9pbnRpbmcgZGV2aWNlIGlzIG1vdmVkIG9mZlxyXG4gKiB0aGUgZWxlbWVudCB0aGF0IGhhcyB0aGUgbGlzdGVuZXIgYXR0YWNoZWQuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbW91c2Vtb3ZlXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHBvaW50aW5nIGRldmljZSBpcyBtb3ZlZCBvdmVyXHJcbiAqIGFuIGVsZW1lbnQuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbW91c2VvdXRdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGEgcG9pbnRpbmcgZGV2aWNlIGlzIG1vdmVkIG9mZlxyXG4gKiB0aGUgZWxlbWVudCB0aGF0IGhhcyB0aGUgbGlzdGVuZXIgYXR0YWNoZWQgb3Igb2ZmIG9uZSBvZiBpdHMgY2hpbGRyZW4uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbW91c2VvdmVyXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHBvaW50aW5nIGRldmljZSBpcyBtb3ZlZFxyXG4gKiBvbnRvIHRoZSBlbGVtZW50IHRoYXQgaGFzIHRoZSBsaXN0ZW5lciBhdHRhY2hlZCBvciBvbnRvIG9uZSBvZiBpdHMgY2hpbGRyZW4uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbbW91c2V1cF0gLSBIYW5kbGVzIG1vdXNlb3ZlciBldmVudHMgZ2VuZXJhdGVkIHdoZW4gYSBwb2ludGluZyBkZXZpY2UgYnV0dG9uIGlzXHJcbiAqIHJlbGVhc2VkIG92ZXIgYW4gZWxlbWVudC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkYmxjbGlja10gLSBIYW5kbGVzIG1vdXNlb3ZlciBldmVudHMgZ2VuZXJhdGVkIHdoZW4gYSBwb2ludGluZyBkZXZpY2UgaXMgcXVpY2tseVxyXG4gKiBjbGlja2VkIHR3aWNlIG9uIGFuIGVsZW1lbnQuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbd2hlZWxdIC0gVGhlIG1vdXNlIHdoZWVsIG9mIGEgcG9pbnRpbmcgZGV2aWNlIGhhcyBiZWVuIHJvdGF0ZWQgaW4gYW55IGRpcmVjdGlvbi5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtrZXlkb3duXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIGtleSBpcyBwcmVzc2VkIGRvd24uXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5cHJlc3NdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGEga2V5IGlzIHByZXNzZWQgZG93blxyXG4gKiBhbmQgdGhhdCBrZXkgbm9ybWFsbHkgcHJvZHVjZXMgYSBjaGFyYWN0ZXIgdmFsdWUuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBba2V5dXBdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGEga2V5IGlzIHJlbGVhc2VkLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW21lc3NhZ2VdIC0gQSBtZXNzYWdlIGlzIHJlY2VpdmVkIGZyb20gc29tZXRoaW5nLiAgaWU6IFdlYlNvY2tldCwgV2ViIFdvcmtlcixcclxuICogaWZyYW1lLCBwYXJlbnQgd2luZG93IG9yIG90aGVyIGV2ZW50IHNvdXJjZS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcmFnXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhbiBlbGVtZW50IG9yIHRleHQgc2VsZWN0aW9uXHJcbiAqIGlzIGJlaW5nIGRyYWdnZWQgKGV2ZXJ5IDM1MG1zKS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcmFnZW5kXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIGRyYWcgb3BlcmF0aW9uIGlzIGJlaW5nXHJcbiAqIGVuZGVkIChieSByZWxlYXNpbmcgYSBtb3VzZSBidXR0b24gb3IgaGl0dGluZyB0aGUgZXNjYXBlIGtleSkuXHJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbZHJhZ2VudGVyXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIGRyYWdnZWQgZWxlbWVudCBvclxyXG4gKiB0ZXh0IHNlbGVjdGlvbiBlbnRlcnMgYSB2YWxpZCBkcm9wIHRhcmdldC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcmFnbGVhdmVdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGEgZHJhZ2dlZCBlbGVtZW50IG9yXHJcbiAqIHRleHQgc2VsZWN0aW9uIGxlYXZlcyBhIHZhbGlkIGRyb3AgdGFyZ2V0LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2RyYWdvdmVyXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhbiBuIGVsZW1lbnQgb3IgdGV4dFxyXG4gKiBzZWxlY3Rpb24gaXMgYmVpbmcgZHJhZ2dlZCBvdmVyIGEgdmFsaWQgZHJvcCB0YXJnZXQgKGV2ZXJ5IDM1MG1zKS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFtkcmFnc3RhcnRdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIHRoZSB1c2VyIHN0YXJ0c1xyXG4gKiBkcmFnZ2luZyBhbiBlbGVtZW50IG9yIHRleHQgc2VsZWN0aW9uLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2Ryb3BdIC0gSGFuZGxlcyBtb3VzZW92ZXIgZXZlbnRzIGdlbmVyYXRlZCB3aGVuIGFuIGVsZW1lbnQgaXMgZHJvcHBlZFxyXG4gKiBvbiBhIHZhbGlkIGRyb3AgdGFyZ2V0LlxyXG4gKlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RvdWNoY2FuY2VsXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHRvdWNoIHBvaW50XHJcbiAqIGhhcyBiZWVuIGRpc3J1cHRlZCBpbiBhbiBpbXBsZW1lbnRhdGlvbi1zcGVjaWZpYyBtYW5uZXJzICh0b28gbWFueSB0b3VjaCBwb2ludHMgZm9yIGV4YW1wbGUpLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RvdWNoZW5kXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHRvdWNoIHBvaW50IGlzXHJcbiAqIHJlbW92ZWQgZnJvbSB0aGUgdG91Y2ggc3VyZmFjZS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b3VjaGVudGVyXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHRvdWNoIHBvaW50XHJcbiAqIGlzIG1vdmVkIG9udG8gdGhlIGludGVyYWN0aXZlIGFyZWEgb2YgYW4gZWxlbWVudC5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b3VjaGxlYXZlXSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHRvdWNoIHBvaW50XHJcbiAqIGlzIG1vdmVkIG9mZiB0aGUgaW50ZXJhY3RpdmUgYXJlYSBvZiBhbiBlbGVtZW50LlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RvdWNobW92ZV0gLSBIYW5kbGVzIG1vdXNlb3ZlciBldmVudHMgZ2VuZXJhdGVkIHdoZW4gYSB0b3VjaCBwb2ludFxyXG4gKiBpcyBtb3ZlZCBhbG9uZyB0aGUgdG91Y2ggc3VyZmFjZS5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0b3VjaHN0YXJ0XSAtIEhhbmRsZXMgbW91c2VvdmVyIGV2ZW50cyBnZW5lcmF0ZWQgd2hlbiBhIHRvdWNoIHBvaW50XHJcbiAqIGlzIHBsYWNlZCBvbiB0aGUgdG91Y2ggc3VyZmFjZS5cclxuICpcclxuICovXHJcblxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgRDMgbGluZSBzcGVjaWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBkM2xpbmVfc3BlY1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge2QzcG9pbnRfc3BlY30gW3N0YXJ0XSAtIFRoZSBzdGFydGluZyBwb2ludCBmb3IgdGhpcyBsaW5lLlxyXG4gKiBAcHJvcGVydHkge2QzX3BvaW50X3NwZWN9IFtlbmRdIC0gVGhlIGVuZGluZyBwb2ludCBmb3IgdGhpcyBsaW5lLlxyXG4gKiBAcHJvcGVydHkge2Qzc3Ryb2tlX3NwZWN9IFtzdHJva2NdIC0gVGhlIHN0cm9rZSB0byBiZSB1c2VkIHdoZW4gZHJhd2luZyB0aGlzIGxpbmUuXHJcbiAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgRDMgcG9pbnQgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICogQHR5cGVkZWYge09iamVjdH0gZDNwb2ludF9zcGVjXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbeF0gLSBUaGUgc3RhcnRpbmcgcG9pbnQgZm9yIHRoaXMgbGluZS5cclxuICogQHByb3BlcnR5IHtudW1iZXJ9IFt5XSAtIFRoZSBlbmRpbmcgcG9pbnQgZm9yIHRoaXMgbGluZS5cclxuICpcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogQSBEMyBjaXJjbGUgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICogQHR5cGVkZWYge09iamVjdH0gZDNwb2ludF9zcGVjXHJcbiAqXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbY3hdIC0gVGhlIHgtY29vcmRpbmF0ZSBvZiB0aGUgY2VudGVyIHBvaW50IG9mIHRoaXMgY2lyY2xlLlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2N5XSAtIFRoZSB5LWNvb3JkaW5hdGUgb2YgdGhlIGNlbnRlciBwb2ludCBvZiB0aGlzIGNpcmNsZS5cclxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtyXSAtIFRoZSByYWRpdXMgb2YgdGhlIGNpcmNsZS5cclxuICogQHByb3BlcnR5IHtkM2ZpbGxfc3BlY30gW2ZpbGxdIC0gVGhlIGNpcmNsZSdzIGZpbGwuXHJcbiAqIEBwcm9wZXJ0eSB7ZDNzdHJva2Vfc3BlY30gW3N0cm9rZV0gLSBUaGUgY2lyY2xlJ3Mgc3Ryb2tlLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RyYW5zZm9ybV0gLSBBIHRyYW5zZm9ybSwgaWYgYW55LCB0byBiZSBhcHBsaWVkIHRvIHRoaXMgY2lyY2xlLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3RpdGxlXSAtIFRoZSB0aXRsZSBvZiB0aGUgY2lyY2xlLlxyXG4gKiBAcHJvcGVydHkge2QzZXZlbnRzX3NwZWN9IFtldmVudHNdIC0gQW55IGV2ZW50cyB0byBiZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBjaXJjbGUuXHJcbiAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgRDMgdGljayBzcGVjaWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBkM3RpY2tfc3BlY1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2NvdW50XSAtIFRoZSBudW1iZXIgb2YgdGlja3MgdG8gZHJhLlxyXG4gKiBAcHJvcGVydHkge29iamVjdH0gW3NpemVdIC0gVGhlIHNpemUgb2YgdGhlIHRpY2suXHJcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbc2l6ZS5tYWpvcl0gLSBUaGUgbGVuZ3RoIG9mIHRoZSBtYWpvciB0aWNrcy5cclxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtzaXplLm1pbm9yXSAtIFRoZSBsZW5ndGggb2YgdGhlIG1pbm9yIHRpY2tzLlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3NpemUuZW5kXSAtIFRoZSBsZW5ndGggb2YgdGhlIHRpY2tzIGF0IHRoZSBlbmRzIG9mIHRoZSBheGlzLlxyXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BhZGRpbmddIC0gVGhlIHBhZGRpbmcgZm9yIHRpY2tzLlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2Zvcm1hdF0gLSBUaGUgZm9ybWF0IHRvIGJlIGFwcGxpZWQgdG8gZWFjaCB0aWNrIGxhYmVsLlxyXG4gKiBAcHJvcGVydHkge2QzdGV4dF9zcGVjfSBbbGFiZWxdIC0gVGhlIHNwZWNpZmljYXRpb24gZm9yIHRoZSBhcHBlYXJhbmNlIG9mIHRpY2tcclxuICogbGFiZWxzLlxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIEQzIHBhdGggc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICogQHR5cGVkZWYge09iamVjdH0gZDNwYXRoX3NwZWNcclxuICpcclxuICogQHByb3BlcnR5IHtkM2ZpbGxfc3BlY30gW2ZpbGxdIC0gVGhlIGZpbGwgdG8gYXBwbHkgd2hlbiBkcmF3aW5nIHRoaXMgcGF0aC5cclxuICogQHByb3BlcnR5IHtkM3N0cm9rZV9zcGVjfSBbc3Ryb2tlXSAtIFRoZSBzdHJva2UgdG8gdXNlIHdoZW4gZHJhd2luZyB0aGlzIHBhdGguXHJcbiAqXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEEgRDMgZmlsbCBzcGVjaWZpY2F0aW9uLlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBkM2ZpbGxfc3BlY1xyXG4gKlxyXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2ZpbGxDb2xvcj1ncmV5XSAtIFRoZSBjb2xvciBvZiB0aGlzIGZpbGwuXHJcbiAqIEBwcm9wZXJ0eSB7ZmxvYXR9IFtvcGFjaXR5PTFdIC0gVGhlIG9wYWNpdHkgb2YgdGhpcyBmaWxsIGluIHRoZSByYW5nZSBvZlxyXG4gKiB3aGVyZSAwIGlzIGludmlzaWJsZSBhbmQgMSByZXByZXNlbnRzIDEwMCUgb3BhcXVlIGZpbGwuIFswLCAxXVxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBBIEQzIGxpbmsgc3BlY2lmaWNhdGlvbi5cclxuICogQHR5cGVkZWYge09iamVjdH0gZDNsaW5rX3NwZWNcclxuICpcclxuICogQHByb3BlcnR5IHtkM2ZpbGx9IFtmaWxsXSAtIFRoZSBmaWxsIHRvIGJlIHVzZWQgZm9yIHRoaXMgbGluay5cclxuICogQHByb3BlcnR5IHtkM3N0cm9rZX0gW3N0cm9rZV0gLSBUaGUgc3Ryb2tlIHRvIGJlIHVzZWQgZm9yIHRoaXMgbGluay5cclxuICogQHByb3BlcnR5IHtzdHJpbmd9IFt0cmFuc2Zvcm1dIC0gVGhlIHRyYW5zZm9ybSB0byBhcHBseSB0byB0aGlzIGxpbmsuXHJcbiAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBkIC0gVGhlIGRhdGEgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyBsaW5rLlxyXG4gKiBAcHJvcGVydHkge2QzZXZlbnRzfSBbZXZlbnRzXSAtIFRoZSBldmVudHMgdG8gYXNzb2NpYXRlIHdpdGggdGhpcyBsaW5rLlxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIGlzIHRoZSBiYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgZGV4IGNvbXBvbmVudHMuICBJdCBwcm92aWRlcyBzb21lIG9mIHRoZSBjb21tb25cclxuICogZnVuY3Rpb25hbGl0eSBzdWNoIGFzIGF0dHJpYnV0ZSBnZXR0ZXJzL3NldHRlcnMsIGFiaWxpdHkgdG8gcHVibGlzaCBhbmQgc3Vic2NyaWJlXHJcbiAqIGV2ZW50cyBhcyB3ZWxsIGFzIHRoZSBhYmlsaXR5IGZvciB0aGUgdXNlciB0byBwcm92aWRlIGN1c3RvbWl6ZWQgc2V0dGluZ3MgZm9yIGFueVxyXG4gKiBjb21wb25lbnQgY29uZmlndXJhdGlvbiB2YWx1ZS5cclxuICpcclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBjbGFzc2Rlc2MgVGhpcyBpbnRlcmZhY2UgcHJvdmlkZXMgYSBjb250cmFjdCBmb3IgZGV4IGNvbXBvbmVudHMgdG8gaW1wbGVtZW50LlxyXG4gKlxyXG4gKiBAbmFtZSBkZXguY29tcG9uZW50XHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyQ29uZmlnIEEgbWFwIGNvbnRhaW5pbmcgdGhlIHZhcmlvdXMgb3B0aW9ucyB0aGUgdXNlciB3aXNoZXMgdG8gb3ZlcnJpZGUuXHJcbiAqIEBwYXJhbSBkZWZhdWx0Q29uZmlnIEEgbWFwIGNvbnRhaW5pbmcgdGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBjb21wb25lbnQuXHJcbiAqXHJcbiAqL1xyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh1c2VyQ29uZmlnLCBkZWZhdWx0Q29uZmlnKSB7XHJcbiAgdXNlckNvbmZpZyA9IHVzZXJDb25maWcgfHwge307XHJcbiAgZGVmYXVsdENvbmZpZyA9IGRlZmF1bHRDb25maWcgfHwge307XHJcblxyXG4gIHRoaXMuZGVidWcgPSBmYWxzZTtcclxuXHJcbiAgLy8gQWxsb3dzIGNvbXBvbmVudCBjb25zdHJ1Y3Rpb24gZnJvbSBvdGhlciBjb21wb25lbnRzLlxyXG4gIGlmICh1c2VyQ29uZmlnLmhhc093blByb3BlcnR5KCdjb25maWcnKSkge1xyXG4gICAgdGhpcy5jb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkodXNlckNvbmZpZy5jb25maWcsIGRlZmF1bHRDb25maWcpO1xyXG4gIH1cclxuICAvLyBFbHNlLCB3ZSBoYXZlIGEgY29uZmlndXJhdGlvbi5cclxuICBlbHNlIHtcclxuICAgIHRoaXMuY29uZmlnID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KHVzZXJDb25maWcsIGRlZmF1bHRDb25maWcpO1xyXG4gIH1cclxuXHJcbiAgZGV4LmNvbnNvbGUubG9nKFwiZGV4LmNvbXBvbmVudCBDb25maWd1cmF0aW9uXCIsIHRoaXMuY29uZmlnKTtcclxuXHJcbiAgaWYgKCF0aGlzLmNvbmZpZy5jaGFubmVsKSB7XHJcbiAgICB0aGlzLmNvbmZpZy5jaGFubmVsID0gKHRoaXMuY29uZmlnLnBhcmVudCB8fCBcIiNwYXJlbnRcIikgKyBcIi9cIiArXHJcbiAgICAodGhpcy5jb25maWcuaWQgfHwgXCJ1bmtub3duLWlkXCIpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVGhpcyBtZXRob2QgcHJvdmlkZXMgZ2V0dGVyL3NldHRlciBhY2Nlc3MgZm9yIHRoZSBjb25maWd1cmF0aW9uIG9mIGFcclxuICAgKiBEZXhDb21wb25lbnQuXHJcbiAgICpcclxuICAgKiBOYW1lcyBjYW4gZXhwcmVzcyBoaWVyYXJjaHkuICBBbiBhdHRyaWJ1dGUgbmFtZWQgJ2EnIG1heSBoYXZlIGFcclxuICAgKiBjaGlsZCBhdHRyaWJ1dGUgbmFtZWQgJ2InLiAgSW4gdGhpcyBjYXNlLCB0aGUgbmFtZSBvZiBhdHRyaWJ1dGVcclxuICAgKiAnYScgaXMgc2ltcGx5ICdhJy4gIFRoZSBuYW1lIG9mIGF0dHJpYnV0ZSAnYicgd291bGQgYmUgJ2EuYicuXHJcbiAgICpcclxuICAgKiBhdHRyKG5hbWUpIFJldHJpZXZlIHJldHJpZXZlIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUgd2l0aFxyXG4gICAqIG1hdGNoaW5nIG5hbWUuXHJcbiAgICpcclxuICAgKiBhdHRyKG5hbWUsIHZhbHVlKSBTZXQgdGhlIGF0dHJpYnV0ZSB3aXRoIHRoZSBtYXRjaGluZyBuYW1lIHRvIHRoZVxyXG4gICAqIHNwZWNpZmllZCB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBtZXRob2QgZGV4LmNvbXBvbmVudC5hdHRyXHJcbiAgICpcclxuICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlLlxyXG4gICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgb2YgdGhlIGF0dHJpYnV0ZS5cclxuICAgKlxyXG4gICAqIEBleGFtcGxlIHtAbGFuZyBqYXZhc2NyaXB0fVxyXG4gICAqIC8vIFNldCBhbiBhdHRyaWJ1dGUgbmFtZWQgXCJmb29cIiB0byBcImJhclwiXHJcbiAgICogbXlDb21wb25lbnQuYXR0cihcImZvb1wiLCBcImJhclwiKTtcclxuICAgKlxyXG4gICAqIC8vIFJldHVybnMgXCJiYXJcIlxyXG4gICAqIG15Q29tcG9uZW50LmF0dHIoXCJmb29cIik7XHJcbiAgICpcclxuICAgKiAvLyBTZXQgYW4gYXR0cmlidXRlIG5hbWVkIFwiZm9vXCIgd2hpY2ggYmVsb25ncyB0byBhbiBvYmplY3QgbmFtZWRcclxuICAgKiAvLyBuZXN0ZWQgd2hpY2ggaW4gdHVybiBiZWxvbmdzIHRvIG15Q29tcG9uZW50LlxyXG4gICAqIG15Q29tcG9uZW50LmF0dHIoXCJuZXN0ZWQuZm9vXCIsIFwiYmFyXCIpO1xyXG4gICAqXHJcbiAgICogLy8gUmV0dXJucyBcImJhclwiXHJcbiAgICogbXlDb21wb25lbnQuYXR0cihcIm5lc3RlZC5mb29cIik7XHJcbiAgICpcclxuICAgKiAvLyBEb2VzIG5vdGhpbmcsIHJldHVybnMgbXlDb21wb25lbnRcclxuICAgKiBteUNvbXBvbmVudC5hdHRyKCk7XHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7c3RyaW5nfGNvbXBvbmVudH0gSWYgb25seSBuYW1lIGlzIHByb3ZpZGVkLCBhdHRyIHdpbGwgcmV0dXJuIHRoZSB2YWx1ZSBvZlxyXG4gICAqIHRoZSByZXF1ZXN0ZWQgYXR0cmlidXRlLiAgSWYgYm90aCBuYW1lIGFuZCB2YWx1ZSBhcmUgcHJvdmlkZWQsIHRoZW5cclxuICAgKiB0aGUgYXR0cmlidXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIG5hbWUgd2lsbCBiZSBzZXQgdG8gdGhlIHN1cHBsaWVkXHJcbiAgICogdmFsdWUgYW5kIHRoZSBjb21wb25lbnQgaXRzZWxmIHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICovXHJcbiAgdGhpcy5hdHRyID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgICAvLyBSRU06IE5lZWQgdG8gZ2V0SGllcmFyY2hpY2FsXHJcbiAgICAgIHJldHVybiB0aGlzLmNvbmZpZ1tuYW1lXTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikge1xyXG4gICAgICAvL2NvbnNvbGUubG9nKFwiU2V0dGluZyBIaWVhcmFyY2hpY2FsOiBcIiArIG5hbWUgKyBcIj1cIiArIHZhbHVlKTtcclxuICAgICAgLy9jb25zb2xlLmRpcih0aGlzLmNvbmZpZyk7XHJcblxyXG4gICAgICAvLyBUaGlzIHdpbGwgaGFuZGxlIHRoZSBzZXR0aW5nIG9mIGEgc2luZ2xlIGF0dHJpYnV0ZVxyXG4gICAgICBkZXgub2JqZWN0LnNldEhpZXJhcmNoaWNhbCh0aGlzLmNvbmZpZywgbmFtZSwgdmFsdWUsICcuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBTdWJzY3JpYmUgdGhpcyBjb21wb25lbnQgdG8gdGhlIGV2ZW50cyBvZiB0eXBlIGV2ZW50VFlwZVxyXG4gICAqIGdlbmVyYXRlZCBieSB0aGUgc291cmNlIHRoaXMuICBXaGVuIGV2ZW50cyBhcmUgcmVjZWl2ZWQsXHJcbiAgICogaW52b2tlIHRoZSBjYWxsYmFjay5cclxuICAgKlxyXG4gICAqIEBtZXRob2QgZGV4LnRoaXMuc3Vic2NyaWJlXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge2NvbXBvbmVudH0gc291cmNlIC0gVGhlIHNvdXJjZSBjb21wb25lbnRcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIC0gVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHdlIGFyZSBzdWJzY3JpYmluZyB0by5cclxuICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBUaGUgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCB3aGVuIHRoaXMgZXZlbnQgaXNcclxuICAgKiByZWNlaXZlZC5cclxuICAgKlxyXG4gICAqIEByZXR1cm5zIHtoYW5kbGV8ZmFsc2V9IEZhbHNlIGlmIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbmNvcnJlY3RseS5cclxuICAgKiBPdGhlcndpc2UsIHRoZSBmdW5jdGlvbiByZXR1cm5zIGEgaGFuZGxlIHdoaWNoIGNhbiBsYXRlciBiZSB1c2VkXHJcbiAgICogdG8gdW5zdWJzY3JpYmUgdG8gdGhlIGV2ZW50cy5cclxuICAgKlxyXG4gICAqL1xyXG4gIHRoaXMuc3Vic2NyaWJlID0gZnVuY3Rpb24gKHNvdXJjZSwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMykge1xyXG4gICAgICB2YXIgY2hhbm5lbCA9IHNvdXJjZS5jb25maWcuY2hhbm5lbCArICcvJyArIGV2ZW50VHlwZTtcclxuXHJcbiAgICAgIGRleC5jb25zb2xlLmxvZyhcInN1YnNjcmliZSB0byBcIiArIGNoYW5uZWwpO1xyXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcclxuICAgICAgICBkZXguY29uc29sZS5sb2coXCJmYWlsZWRcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkZXguYnVzLnN1YnNjcmliZShjaGFubmVsLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogVW5zdWJzY3JpYmUgdGhpcyBjb21wb25lbnQuXHJcbiAgICpcclxuICAgKiBAbWV0aG9kIGRleC5jb21wb25lbnQudW5zdWJzY3JpYmVcclxuICAgKlxyXG4gICAqIEBwYXJhbSBoYW5kbGUgLSBUaGUgaGFuZGxlIGF0dGFpbmVkIHZpYSBzdWJzY3JpYmUuXHJcbiAgICpcclxuICAgKi9cclxuICB0aGlzLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGhhbmRsZSkge1xyXG4gICAgZGV4LmJ1cy51bnN1YnNjcmliZShoYW5kbGUpO1xyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogUHVibGlzaCBhbiBldmVudCB0byB0aGUgY29tcG9uZW50J3Mgc3Vic2NyaWJlcnMuXHJcbiAgICpcclxuICAgKiBAbWV0aG9kIGRleC5jb21wb25lbnQucHVibGlzaFxyXG4gICAqXHJcbiAgICogQHBhcmFtIGV2ZW50IC0gVGhlIGV2ZW50IHRvIHB1Ymxpc2guICBBbiBldmVudCBjYW4gYmUgYW55IG9iamVjdCwgaG93ZXZlcixcclxuICAgKiBpdCBtdXN0IGRlZmluZSBhIHByb3BlcnR5IG5hbWVkIFwidHlwZVwiLlxyXG4gICAqIEBwYXJhbSBldmVudC50eXBlIC0gVGhlIHR5cGUgb2YgdGhlIGV2ZW50IHdlIGFyZSBwdWJsaXNoaW5nLlxyXG4gICAqXHJcbiAgICovXHJcbiAgdGhpcy5wdWJsaXNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICB2YXIgY2hhbm5lbDtcclxuXHJcbiAgICBpZiAoIWV2ZW50IHx8ICFldmVudC50eXBlKSB7XHJcbiAgICAgIGRleC5jb25zb2xlLndhcm4oXCJwdWJsaXNoIG9mIGV2ZW50IHRvIFwiICsgdGhpcy5jaGFubmVsICsgXCIgZmFpbGVkLlwiKTtcclxuICAgICAgZGV4LmJ1cy5wdWJsaXNoKFwiZXJyb3JcIiwge1xyXG4gICAgICAgIHR5cGUgICAgICAgICAgOiBcImVycm9yXCIsXHJcbiAgICAgICAgXCJkZXNjcmlwdGlvblwiIDogXCJFcnJvciBwdWJsaXNoaW5nIGV2ZW50OiAnXCIgKyBldmVudCArIFwiJyB0byAnXCIgKyB0aGlzLmNoYW5uZWwgKyBcIidcIlxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBjaGFubmVsID0gdGhpcy5jb25maWcuY2hhbm5lbCArICcvJyArIGV2ZW50LnR5cGU7XHJcbiAgICAgIGRleC5jb25zb2xlLmxvZyhcInB1Ymxpc2ggdG8gXCIgKyBjaGFubmVsKTtcclxuICAgICAgZGV4LmJ1cy5wdWJsaXNoKGNoYW5uZWwsIGV2ZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEEgZGVmYXVsdCBuby1vcCBpbXBsZW1lbnRhdGlvbiBvZiByZW5kZXIuICBTdWJjbGFzc2VzIHNob3VsZFxyXG4gICAqIG92ZXJyaWRlIHRoaXMgbWV0aG9kIHdpdGggb25lIHdoaWNoIHByb3ZpZGVzIGFuIGluaXRpYWwgcmVuZGVyaW5nXHJcbiAgICogb2YgdGhlaXIgc3BlY2lmaWMgY29tcG9uZW50LiAgVGhpcyBpcyBhIGdyZWF0IHBsYWNlIHRvIHB1dFxyXG4gICAqIG9uZS10aW1lIG9ubHkgaW5pdGlhbGl6YXRpb24gbG9naWMuXHJcbiAgICpcclxuICAgKiBAbWV0aG9kIGRleC5jb21wb25lbnQucmVuZGVyXHJcbiAgICpcclxuICAgKi9cclxuICB0aGlzLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiVW5pbXBsZW1lbnRlZCByb3V0aW5lOiByZW5kZXIoKVwiKTtcclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEEgZGVmYXVsdCBuby1vcCBpbXBsZW1lbnRhdGlvbiBvZiB1cGRhdGUuICBUaGlzIHdpbGwgdXBkYXRlIHRoZVxyXG4gICAqIGN1cnJlbnQgY29tcG9uZW50IHJlbGF0aXZlIHRvIGFueSBuZXcgc2V0dGluZyBvciBkYXRhIGNoYW5nZXMuXHJcbiAgICpcclxuICAgKiBAbWV0aG9kIGRleC5jb21wb25lbnQudXBkYXRlXHJcbiAgICpcclxuICAgKi9cclxuICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnNvbGUubG9nKFwiVW5pbXBsZW1lbnRlZCByb3V0aW5lOiB1cGRhdGUoKVwiKTtcclxuICB9O1xyXG59OyIsIi8qKlxyXG4gKlxyXG4gKiBDb25maWcgbW9kdWxlLlxyXG4gKiBAbW9kdWxlIGNvbmZpZ1xyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIHJvdXRpbmUgc3VwcG9ydHMgYSBzaG9ydGhhbmQgbm90YXRpb24gYWxsb3dpbmcgdGhlXHJcbiAqIHVzZXIgdG8gc3BlY2lmeSBkZWVwbHkgbmVzdGVkIGNvbmZpZ3VyYXRpb24gb3B0aW9ucyB3aXRob3V0XHJcbiAqIGhhdmluZyB0byBkZWFsIHdpdGggbmVzdGVkIGpzb24gc3RydWN0dXJlcy5cclxuICpcclxuICogT3B0aW9ucyBsaWtlOlxyXG4gKlxyXG4gKiB7XHJcbiAqICAgJ2NlbGwnIDoge1xyXG4gKiAgICAgJ3JlY3QnIDoge1xyXG4gKiAgICAgICAnd2lkdGgnIDogMTAsXHJcbiAqICAgICAgICdoZWlnaHQnIDogMjAsXHJcbiAqICAgICAgICdldmVudHMnIDoge1xyXG4gKiAgICAgICAgICdtb3VzZW92ZXInIDogZnVuY3Rpb24oZCkgeyBjb25zb2xlLmxvZyhcIk1vdXNlT3ZlcjogXCIgKyBkKTsgfVxyXG4gKiAgICAgICB9XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKiB9XHJcbiAqXHJcbiAqIENhbiBub3cgYmUgZGVzY3JpYmVkIG1vcmUgc3VjY2luY3RseSBhbmQgbW9yZSByZWFkYWJseSBhczpcclxuICpcclxuICoge1xyXG4gKiAgICdjZWxsLnJlY3Qud2lkdGgnICAgICAgICAgICAgOiAxMCxcclxuICogICAnY2VsbC5yZWN0LmhlaWdodCcgICAgICAgICAgIDogMjAsXHJcbiAqICAgJ2NlbGwucmVjdC5ldmVudHMubW91c2VvdmVyJyA6IGZ1bmN0aW9uKGQpIHsgY29uc29sZS5sb2coXCJNb3VzZW92ZXI6IFwiICsgZCk7IH1cclxuICogfVxyXG4gKlxyXG4gKiBPciBhIGh5YnJpZCBzdHJhdGVneSBjYW4gYmUgdXNlZDpcclxuICpcclxuICoge1xyXG4gKiAgICdjZWxsLnJlY3QnIDoge1xyXG4gKiAgICAgJ3dpZHRoJyA6IDEwLFxyXG4gKiAgICAgJ2hlaWdodCcgOiAyMCxcclxuICogICAgICdldmVudHMubW91c2VvdmVyJyA6IGZ1bmN0aW9uKGQpIHsgY29uc29sZS5sb2coXCJNb3VzZW92ZXI6IFwiICsgZCk7IH1cclxuICogICB9XHJcbiAqIH1cclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBleHBhbmQuXHJcbiAqIEByZXR1cm5zIHsqfSBUaGUgZXhwYW5kZWQgY29uZmlndXJhdGlvbi4gIFRoZSBvcmlnaW5hbCBjb25maWd1cmF0aW9uXHJcbiAqICAgaXMgbGVmdCB1bnRvdWNoZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmV4cGFuZCA9IGZ1bmN0aW9uIGV4cGFuZChjb25maWcpIHtcclxuICB2YXIgbmFtZSwgY2k7XHJcbiAgdmFyIGV4cGFuZGVkID0ge307XHJcblxyXG4gIC8vIFdlIGhhdmUgbm90aGluZywgcmV0dXJuIG5vdGhpbmcuXHJcbiAgaWYgKCFjb25maWcpIHtcclxuICAgIHJldHVybiBjb25maWc7XHJcbiAgfVxyXG5cclxuICAvL2RleC5jb25zb2xlLmxvZyhcImRleC5jb25maWcuZXhwYW5kKGNvbmZpZz1cIiwgY29uZmlnKTtcclxuXHJcbiAgZm9yICh2YXIgbmFtZSBpbiBjb25maWcpIHtcclxuICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcclxuICAgICAgLy8gTmFtZSBjb250YWlucyBoaWVyYXJjaHk6XHJcbiAgICAgIGlmIChuYW1lICYmIG5hbWUuaW5kZXhPZignLicpID4gLTEpIHtcclxuICAgICAgICBleHBhbmRlZFtuYW1lXSA9IGNvbmZpZ1tuYW1lXTtcclxuICAgICAgICBkZXgub2JqZWN0LnNldEhpZXJhcmNoaWNhbChleHBhbmRlZCwgbmFtZSxcclxuICAgICAgICAgIGRleC5vYmplY3QuY2xvbmUoZXhwYW5kZWRbbmFtZV0pLCAnLicpO1xyXG4gICAgICAgIGRlbGV0ZSBleHBhbmRlZFtuYW1lXTtcclxuICAgICAgfVxyXG4gICAgICAvLyBTaW1wbGUgbmFtZVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAvLyBJZiB0aGUgdGFyZ2V0IGlzIGFuIG9iamVjdCB3aXRoIG5vIGNoaWxkcmVuLCBjbG9uZSBpdC5cclxuICAgICAgICBpZiAoZGV4Lm9iamVjdC5pc0VtcHR5KGNvbmZpZ1tuYW1lXSkpIHtcclxuICAgICAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiU0VUIFBSSU1JVElWRTogXCIgKyBuYW1lICsgXCI9XCIgKyBjb25maWdbbmFtZV0pO1xyXG4gICAgICAgICAgZXhwYW5kZWRbbmFtZV0gPSBkZXgub2JqZWN0LmNsb25lKGNvbmZpZ1tuYW1lXSk7XHJcbiAgICAgICAgICAvL2V4cGFuZGVkW25hbWVdID0gY29uZmlnW25hbWVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiU0VUIE9CSkVDVDogXCIgKyBuYW1lICsgXCIgdG8gdGhlIGV4cGFuc2lvbiBvZlwiLCBjb25maWdbbmFtZV0pO1xyXG4gICAgICAgICAgZXhwYW5kZWRbbmFtZV0gPSBkZXguY29uZmlnLmV4cGFuZChjb25maWdbbmFtZV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9kZXguY29uc29sZS5sb2coXCJDT05GSUdcIiwgY29uZmlnLCBcIkVYUEFOREVEXCIsIGV4cGFuZGVkKTtcclxuICByZXR1cm4gZXhwYW5kZWQ7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogVGhpcyByb3V0aW5lIHdpbGwgZXhwYW5kIGhpZWFyY2hpY2FsbHkgZGVsaW1pdGVkIG5hbWVzIHN1Y2ggYXNcclxuICogZm9vLmJhciBpbnRvIGEgc3RydWN0dXJlIHsgZm9vIDogeyBiYXIgOiB2YWx1ZX19LiAgSXQgd2lsbCBkZWxldGVcclxuICogdGhlIGhpZXJhcmNoaWNhbCBuYW1lIGFuZCBvdmVyd3JpdGUgdGhlIHZhbHVlIGludG8gdGhlIHByb3BlclxyXG4gKiBsb2NhdGlvbiBsZWF2aW5nIGFueSBwcmV2aW91cyBvYmplY3QgcHJvcGVydGllcyB1bmRpc3R1cmJlZC5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB3aGljaCB3ZSB3aWxsIGV4cGFuZC5cclxuICpcclxuICovXHJcblxyXG4vKlxyXG4gZXhwb3J0cy5leHBhbmRfZGVwcmVjYXRlID0gZnVuY3Rpb24gZXhwYW5kKGNvbmZpZykge1xyXG4gdmFyIG5hbWUsXHJcbiBjaSxcclxuIGV4cGFuZGVkO1xyXG5cclxuIC8vIFdlIGhhdmUgbm90aGluZywgcmV0dXJuIG5vdGhpbmcuXHJcbiBpZiAoIWNvbmZpZykge1xyXG4gcmV0dXJuIGNvbmZpZztcclxuIH1cclxuXHJcbiAvL2RleC5jb25zb2xlLmxvZyhcImRleC5jb25maWcuZXhwYW5kKGNvbmZpZz1cIiwgY29uZmlnKTtcclxuXHJcbiAvLyBNYWtlIGEgY2xvbmUgb2YgdGhlIHByZXZpb3VzIGNvbmZpZ3VyYXRpb24uXHJcbiBleHBhbmRlZCA9IGRleC5vYmplY3QuY2xvbmUoY29uZmlnKTtcclxuXHJcbiAvLyBJdGVyYXRlIG92ZXIgdGhlIHByb3BlcnR5IG5hbWVzLlxyXG4gZm9yIChuYW1lIGluIGNvbmZpZykge1xyXG4gLy8gSWYgdGhpcyBpcyBvdXIgcHJvcGVydHkgdGhlIHByb2Nlc3MgaXQsIG90aGVyd2lzZSBpZ25vcmUuXHJcbiBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KG5hbWUpKSB7XHJcbiAvLyBUaGUgcHJvcGVydHkgbmFtZSBpcyBub24tbnVsbC5cclxuIGlmIChuYW1lKSB7XHJcbiAvLyBEZXRlcm1pbmUgY2hhcmFjdGVyIGluZGV4LlxyXG4gY2kgPSBuYW1lLmluZGV4T2YoJy4nKTtcclxuIH1cclxuIGVsc2Uge1xyXG4gLy8gRGVmYXVsdCB0byAtMVxyXG4gY2kgPSAtMTtcclxuIH1cclxuXHJcbiAvLyBpZiBDaGFyYWN0ZXIgaW5kZXggaXMgPiAtMSwgd2UgaGF2ZSBhIGhpZXJhcmNoaWNhbCBuYW1lLlxyXG4gLy8gT3RoZXJ3aXNlIGRvIG5vdGhpbmcsIGNvcHlpbmcgd2FzIGFscmVhZHkgaGFuZGxlZCBpbiB0aGVcclxuIC8vIGNsb25pbmcgYWN0aXZpdHkuXHJcbiBpZiAoY2kgPiAtMSkge1xyXG4gLy8gU2V0IGl0Li4uXHJcbiBkZXgub2JqZWN0LnNldEhpZXJhcmNoaWNhbChleHBhbmRlZCwgbmFtZSxcclxuIGRleC5vYmplY3QuY2xvbmUoZXhwYW5kZWRbbmFtZV0pLCAnLicpO1xyXG4gLy8gRGVsZXRlIHRoZSBvbGQgbmFtZS5cclxuIGRlbGV0ZSBleHBhbmRlZFtuYW1lXTtcclxuIH1cclxuIH1cclxuIH1cclxuXHJcbiAvL2RleC5jb25zb2xlLmxvZyhcIkNPTkZJR1wiLCBjb25maWcsIFwiRVhQQU5ERURcIiwgZXhwYW5kZWQpO1xyXG4gcmV0dXJuIGV4cGFuZGVkO1xyXG4gfTtcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogVGhpcyByb3V0aW5lIHdpbGwgdGFrZSB0d28gaGllcmFyY2hpZXMsIHRvcCBhbmQgYm90dG9tLCBhbmQgZXhwYW5kIGRvdCAoJy4nKVxyXG4gKiBkZWxpbWl0ZWQgbmFtZXMgc3VjaCBhczogJ2Zvby5iYXIuYml6LmJheicgaW50byBhIHN0cnVjdHVyZTpcclxuICogeyAnZm9vJyA6IHsgJ2JhcicgOiB7ICdiaXonIDogJ2JheicgfX19XHJcbiAqIEl0IHdpbGwgdGhlbiBvdmVybGF5IHRoZSB0b3AgaGllcmFyY2h5IG9udG8gdGhlIGJvdHRvbSBvbmUuICBUaGlzIGlzIHVzZWZ1bFxyXG4gKiBmb3IgY29uZmlndXJpbmcgb2JqZWN0cyBiYXNlZCB1cG9uIGEgZGVmYXVsdCBjb25maWd1cmF0aW9uIHdoaWxlIGFsbG93aW5nXHJcbiAqIHRoZSBjbGllbnQgdG8gY29udmVuaWVudGx5IG92ZXJyaWRlIHRoZXNlIGRlZmF1bHRzIGFzIG5lZWRlZC5cclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IHRvcCAtIFRoZSB0b3Agb2JqZWN0IGhpZXJhcmNoeS5cclxuICogQHBhcmFtIHtvYmplY3R9IGJvdHRvbSAtIFRoZSBib3R0b20sIGJhc2Ugb2JqZWN0IGhpZXJhcmNoeS5cclxuICogQHJldHVybnMge29iamVjdH0gLSBBIG5ldyBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBleHBhbmRlZCB0b3Agb2JqZWN0XHJcbiAqIGhpZXJhcmNoeSBvdmVybGFpZCBvbiB0b3Agb2YgdGhlIGV4cGFuZGVkIGJvdHRvbSBvYmplY3QgaGllcmFyY2h5LlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5leHBhbmRBbmRPdmVybGF5ID0gZnVuY3Rpb24gZXhwYW5kQW5kT3ZlcmxheSh0b3AsIGJvdHRvbSkge1xyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFxyXG4gIC8vZGV4LmNvbmZpZy5nZXRDYWxsZXJTdHJpbmcoYXJndW1lbnRzLmNhbGxlZS5jYWxsZXIpLFxyXG4gIC8vXCJUT1BcIiwgdG9wLFxyXG4gIC8vXCJCT1RUT01cIiwgYm90dG9tLFxyXG4gIC8vXCJFWFBBTkRFRCBUT1BcIiwgZGV4LmNvbmZpZy5leHBhbmQodG9wKSxcclxuICAvL1wiRVhQQU5ERUQgQk9UVE9NXCIsIGRleC5jb25maWcuZXhwYW5kKGJvdHRvbSkpO1xyXG4gIHJldHVybiBkZXgub2JqZWN0Lm92ZXJsYXkoZGV4LmNvbmZpZy5leHBhbmQodG9wKSxcclxuICAgIGRleC5jb25maWcuZXhwYW5kKGJvdHRvbSkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFJldHVybiB0aGUgY29uZmlndXJhdGlvbiBmb3IgYSBmb250IGFmdGVyIHRoZSB1c2VyJ3MgY3VzdG9taXphdGlvbnNcclxuICogaGF2ZSBiZWVuIGFwcGxpZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSB7ZDNmb250X3NwZWN9IGN1c3RvbSAtIFRoZSB1c2VyIGN1c3RvbWl6YXRpb25zLlxyXG4gKiBAcmV0dXJucyB7ZDNmb250X3NwZWN9IC0gQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZvbnQncyBzcGVjaWZpY2F0aW9uc1xyXG4gKiBhZnRlciB0aGUgdXNlcidzIGN1c3RvbWl6YXRpb25zIGhhdmUgYmVlbiBhcHBsaWVkLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5mb250ID0gZnVuY3Rpb24gZm9udChjdXN0b20pIHtcclxuICB2YXIgZGVmYXVsdHMgPVxyXG4gIHtcclxuICAgICdkZWNvcmF0aW9uJyAgICA6ICdub25lJyxcclxuICAgICdmYW1pbHknICAgICAgICA6ICdzYW5zLXNlcmlmJyxcclxuICAgICdsZXR0ZXJTcGFjaW5nJyA6ICdub3JtYWwnLFxyXG4gICAgJ3NpemUnICAgICAgICAgIDogMTQsXHJcbiAgICAnc3R5bGUnICAgICAgICAgOiAnbm9ybWFsJyxcclxuICAgICd3ZWlnaHQnICAgICAgICA6ICdub3JtYWwnLFxyXG4gICAgJ3dvcmRTcGFjaW5nJyAgIDogJ25vcm1hbCcsXHJcbiAgICAndmFyaWFudCcgICAgICAgOiAnbm9ybWFsJ1xyXG4gIH07XHJcblxyXG4gIHZhciBmb250U3BlYyA9IGRleC5jb25maWcuZXhwYW5kQW5kT3ZlcmxheShjdXN0b20sIGRlZmF1bHRzKTtcclxuICByZXR1cm4gZm9udFNwZWM7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQ29uZmlndXJlIHRoZSBnaXZlbiBmb250IHdpdGggdGhlIHN1cHBsaWVkIGZvbnQgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtvYmplY3R9IG5vZGUgLSBUaGUgbm9kZSB0byBiZSBjb25maWd1cmVkLlxyXG4gKiBAcGFyYW0ge2QzZm9udF9zcGVjfSBmb250U3BlYyAtIFRoZSBmb250IHNwZWNpZmljYXRpb24gdG8gYmUgYXBwbGllZC5cclxuICpcclxuICogQHJldHVybnMgeyp9IFRoZSBub2RlIGFmdGVyIGhhdmluZyB0aGUgZm9udCBzcGVjaWZpY2F0aW9uIGFwcGxpZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmNvbmZpZ3VyZUZvbnQgPSBmdW5jdGlvbiBjb25maWd1cmVGb250KG5vZGUsIGZvbnRTcGVjLCBpKSB7XHJcbiAgLy9kZXguY29uc29sZS5sb2coXCJDT05GSUctRk9OVDogXCIgKyBpKTtcclxuICBpZiAoZm9udFNwZWMpIHtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnZm9udC1mYW1pbHknLCBmb250U3BlYy5mYW1pbHksIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICdmb250LXNpemUnLCBmb250U3BlYy5zaXplLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnZm9udC13ZWlnaHQnLCBmb250U3BlYy53ZWlnaHQsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICdmb250LXN0eWxlJywgZm9udFNwZWMuc3R5bGUsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICd0ZXh0LWRlY29yYXRpb24nLCBmb250U3BlYy5kZWNvcmF0aW9uLCBpKTtcclxuXHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgJ3dvcmQtc3BhY2luZycsIGZvbnRTcGVjLndvcmRTcGFjaW5nLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnbGV0dGVyLXNwYWNpbmcnLCBmb250U3BlYy5sZXR0ZXJTcGFjaW5nLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAndmFyaWFudCcsIGZvbnRTcGVjLnZhcmlhbnQsIGkpO1xyXG4gIH1cclxuICByZXR1cm4gbm9kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDb25zdHJ1Y3QgYSB0ZXh0IHNwZWZpY2lhdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtkM3RleHRfc3BlY30gY3VzdG9tIC0gVGhlIHVzZXIncyBhZGp1c3RtZW50cyB0byB0aGUgZGVmYXVsdCB0ZXh0XHJcbiAqIHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3RleHRfc3BlY30gQSByZXZpc2VkIHRleHQgc3BlY2lmaWNhdGlvbiBhZnRlciBoYXZpbmcgYXBwbGllZFxyXG4gKiB0aGUgdXNlcidzIG1vZGZpaWNhdGlvbnMuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLnRleHQgPSBmdW5jdGlvbiB0ZXh0KGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ2ZvbnQnICAgICAgICAgICAgICAgICAgICAgOiBkZXguY29uZmlnLmZvbnQoKSxcclxuICAgICd4JyAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcclxuICAgICd5JyAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcclxuICAgICd0ZXh0TGVuZ3RoJyAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2xlbmd0aEFkanVzdCcgICAgICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAndHJhbnNmb3JtJyAgICAgICAgICAgICAgICA6ICcnLFxyXG4gICAgJ2dseXBoT3JpZW50YXRpb25WZXJ0aWNhbCcgOiB1bmRlZmluZWQsXHJcbiAgICAndGV4dCcgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICdkeCcgICAgICAgICAgICAgICAgICAgICAgIDogMCxcclxuICAgICdkeScgICAgICAgICAgICAgICAgICAgICAgIDogMCxcclxuICAgICd3cml0aW5nTW9kZScgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2FuY2hvcicgICAgICAgICAgICAgICAgICAgOiAnc3RhcnQnLFxyXG4gICAgJ2ZpbGwnICAgICAgICAgICAgICAgICAgICAgOiBkZXguY29uZmlnLmZpbGwoKSxcclxuICAgICdmb3JtYXQnICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2V2ZW50cycgICAgICAgICAgICAgICAgICAgOiBkZXguY29uZmlnLmV2ZW50cygpXHJcbiAgfTtcclxuXHJcbiAgdmFyIHRleHRTcGVjID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiB0ZXh0U3BlYztcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIHJvdXRpbmUgd2lsbCBkeW5hbWljYWxseSBjb25maWd1cmUgYW4gU1ZHIHRleHQgZW50aXR5IGJhc2VkIHVwb24gdGhlXHJcbiAqIHN1cHBsaWVkIGNvbmZpZ3VyYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBub2RlIFRoZSBTVkcgdGV4dCBub2RlIHRvIGJlIGNvbmZpZ3VyZWQuXHJcbiAqIEBwYXJhbSB7ZDN0ZXh0X3NwZWN9IHRleHRTcGVjIFRoZSB0ZXh0IHNwZWNpZmljYXRpb24gZm9yIHRoaXMgbm9kZS5cclxuICpcclxuICogQHJldHVybnMgeyp9IFRoZSBub2RlIGFmdGVyIGhhdmluZyBhcHBsaWVkIHRoZSB0ZXh0IHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmNvbmZpZ3VyZVRleHQgPSBmdW5jdGlvbiBjb25maWd1cmVUZXh0KG5vZGUsIHRleHRTcGVjLCBpKSB7XHJcbiAgLy9kZXguY29uc29sZS5sb2coXCJDT05GSUctVEVYVDogXCIgKyBpKTtcclxuICBpZiAodGV4dFNwZWMpIHtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCBcInhcIiwgdGV4dFNwZWMueCwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgXCJ5XCIsIHRleHRTcGVjLnksIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsIFwiZHhcIiwgdGV4dFNwZWMuZHgsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsIFwiZHlcIiwgdGV4dFNwZWMuZHksIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRTdHlsZShub2RlLCBcInRleHQtYW5jaG9yXCIsIHRleHRTcGVjLmFuY2hvciwgaSk7XHJcbiAgICBkZXguY29uZmlnLmNvbmZpZ3VyZUZvbnQobm9kZSwgdGV4dFNwZWMuZm9udCwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgJ3RleHRMZW5ndGgnLCB0ZXh0U3BlYy50ZXh0TGVuZ3RoLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnbGVuZ3RoQWRqdXN0JywgdGV4dFNwZWMubGVuZ3RoQWRqdXN0LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAndHJhbnNmb3JtJywgdGV4dFNwZWMudHJhbnNmb3JtLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnZ2x5cGgtb3JpZW50YXRpb24tdmVydGljYWwnLFxyXG4gICAgICB0ZXh0U3BlYy5nbHlwaE9yaWVudGF0aW9uVmVydGljYWwsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICd3cml0aW5nLW1vZGUnLCB0ZXh0U3BlYy53cml0aW5nTW9kZSwgaSk7XHJcbiAgICBkZXguY29uZmlnLmNhbGxJZkRlZmluZWQobm9kZSwgJ3RleHQnLCB0ZXh0U3BlYy50ZXh0LCBpKTtcclxuICAgIGRleC5jb25maWcuY29uZmlndXJlRmlsbChub2RlLCB0ZXh0U3BlYy5maWxsLCBpKTtcclxuICAgIGRleC5jb25maWcuY29uZmlndXJlRXZlbnRzKG5vZGUsIHRleHRTcGVjLmV2ZW50cywgaSk7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIHN0cm9rZSBzcGVjaWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2QzdGV4dF9zcGVjfSBzdHJva2VTcGVjIC0gVGhlIHVzZXIncyBjdXN0b21pemF0aW9ucyB0byB0aGUgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICogQHJldHVybnMge2QzdGV4dF9zcGVjfSBUaGUgc3Ryb2tlIHNwZWNpZmljYXRpb24gYWZ0ZXIgaGF2aW5nIGFwcGxpZWQgdGhlIHVzZXInc1xyXG4gKiBjb25maWd1cmF0aW9uLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5zdHJva2UgPSBmdW5jdGlvbiBzdHJva2Uoc3Ryb2tlU3BlYykge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ3dpZHRoJyAgICAgOiAxLFxyXG4gICAgJ2NvbG9yJyAgICAgOiBcImJsYWNrXCIsXHJcbiAgICAnb3BhY2l0eScgICA6IDEsXHJcbiAgICAnZGFzaGFycmF5JyA6ICcnLFxyXG4gICAgJ3RyYW5zZm9ybScgOiAnJ1xyXG4gIH07XHJcblxyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoc3Ryb2tlU3BlYywgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBjb25maWc7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQXBwbHkgYSBzdHJva2Ugc3BlY2lmaWNhdGlvbiB0byBhIG5vZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBub2RlIC0gVGhlIG5vZGUgdG8gYmUgY29uZmlndXJlZC5cclxuICogQHBhcmFtIHtkM3N0cm9rZV9zcGVjfSBzdHJva2VTcGVjIC0gVGhlIHN0cm9rZSBzcGVjaWZpY2F0aW9uIHRvIGJlIGFwcGxpZWQuXHJcbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjb25maWd1cmVkIG5vZGUuXHJcbiAqL1xyXG5leHBvcnRzLmNvbmZpZ3VyZVN0cm9rZSA9IGZ1bmN0aW9uIGNvbmZpZ3VyZVN0cm9rZShub2RlLCBzdHJva2VTcGVjLCBpKSB7XHJcbiAgaWYgKHN0cm9rZVNwZWMpIHtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCBcInN0cm9rZVwiLCBzdHJva2VTcGVjLmNvbG9yLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0U3R5bGUobm9kZSwgJ3N0cm9rZS13aWR0aCcsIHN0cm9rZVNwZWMud2lkdGgsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRTdHlsZShub2RlLCAnc3Ryb2tlLW9wYWNpdHknLCBzdHJva2VTcGVjLm9wYWNpdHksIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRTdHlsZShub2RlLCAnc3Ryb2tlLWRhc2hhcnJheScsIHN0cm9rZVNwZWMuZGFzaGFycmF5LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAndHJhbnNmb3JtJywgc3Ryb2tlU3BlYy50cmFuc2Zvcm0sIGkpO1xyXG4gIH1cclxuICByZXR1cm4gbm9kZTtcclxufTtcclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIGZpbGwgc3BlY2lmaWNhdGlvbiB3aGljaCBhbGxvdyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnlcclxuICogaXRzIHNldHRpbmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2QzZmlsbF9zcGVjfSBjdXN0b20gLSBUaGUgdXNlcidzIGN1c3RvbWl6YXRpb25zLlxyXG4gKiBAcmV0dXJucyB7ZDNmaWxsX3NwZWN9IEEgZmlsbCBzcGVjaWZpY2F0aW9uIHdoaWNoIGhhcyBhcHBsaWVkIHRoZSB1c2VyJ3NcclxuICogY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmZpbGwgPSBmdW5jdGlvbiBmaWxsKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ2ZpbGxDb2xvcicgICA6IFwiZ3JleVwiLFxyXG4gICAgJ2ZpbGxPcGFjaXR5JyA6IDFcclxuICB9O1xyXG5cclxuICB2YXIgY29uZmlnID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBjb25maWc7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQXBwbHkgYSBmaWxsIHNwZWNpZmljYXRpb24gdG8gYSBub2RlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gbm9kZSAtIFRoZSBub2RlIHRvIGJlIGNvbmZpZ3VyZWQuXHJcbiAqIEBwYXJhbSB7ZDNmaWxsX3NwZWN9IGNvbmZpZyAtIFRoZSBmaWxsIHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtvYmplY3R9IFRoZSBub2RlIGFmdGVyIGhhdmluZyBhcHBsaWVkIHRoZSBmaWxsIHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmNvbmZpZ3VyZUZpbGwgPSBmdW5jdGlvbiBjb25maWd1cmVGaWxsKG5vZGUsIGNvbmZpZywgaSkge1xyXG4gIGlmIChjb25maWcpIHtcclxuICAgIGRleC5jb25maWcuc2V0U3R5bGUobm9kZSwgJ2ZpbGwnLCBjb25maWcuZmlsbENvbG9yLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0U3R5bGUobm9kZSwgJ2ZpbGwtb3BhY2l0eScsIGNvbmZpZy5maWxsT3BhY2l0eSwgaSk7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIGxpbmsgc3BlY2lmaWNhdGlvbiB3aGljaCBhbGxvd3MgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55XHJcbiAqIG9mIHRoZSBzZXR0aW5ncy5cclxuICpcclxuICogQHBhcmFtIHtkM2xpbmtfc3BlY30gY3VzdG9tIC0gVGhlIHVzZXJzIGN1c3RvbWl6YXRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7ZDNsaW5rX3NwZWN9IEEgbGluayBzcGVjaWZpY2F0aW9uIGdlbmVyYXRlZCBieSBjb21iaW5pbmcgdGhlXHJcbiAqIGRlZmF1bHQgd2l0aCB0aGUgdXNlcidzIGN1c3RvbWl6YXRpb25zLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5saW5rID0gZnVuY3Rpb24gbGluayhjdXN0b20pIHtcclxuICB2YXIgZGVmYXVsdHMgPVxyXG4gIHtcclxuICAgICdmaWxsJyAgICAgIDogZGV4LmNvbmZpZy5maWxsKCksXHJcbiAgICAnc3Ryb2tlJyAgICA6IGRleC5jb25maWcuc3Ryb2tlKCksXHJcbiAgICAndHJhbnNmb3JtJyA6ICcnLFxyXG4gICAgJ2QnICAgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAnZXZlbnRzJyAgICA6IGRleC5jb25maWcuZXZlbnRzKClcclxuICB9O1xyXG5cclxuICB2YXIgY29uZmlnID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBjb25maWc7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQXBwbHkgYSBsaW5rIHNwZWNpZmljYXRpb24gdG8gYSBub2RlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge29iamVjdH0gbm9kZSAtIFRoZSBub2RlIHRvIGFwcGx5IHRoZSBzcGVjaWZpY2F0aW9uIHRvLlxyXG4gKiBAcGFyYW0ge2QzbGlua19zcGVjfSBjb25maWcgLSBUaGUgbGluayBzcGVjaWZpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBUaGUgbm9kZSBhZnRlciBoYXZpbmcgYXBwbGllZCB0aGUgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICovXHJcbmV4cG9ydHMuY29uZmlndXJlTGluayA9IGZ1bmN0aW9uIGNvbmZpZ3VyZUxpbmsobm9kZSwgY29uZmlnLCBpKSB7XHJcbiAgaWYgKGNvbmZpZykge1xyXG4gICAgZGV4LmNvbmZpZy5jb25maWd1cmVTdHJva2Uobm9kZSwgY29uZmlnLnN0cm9rZSwgaSk7XHJcbiAgICBkZXguY29uZmlnLmNvbmZpZ3VyZUZpbGwobm9kZSwgY29uZmlnLmZpbGwsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICd0cmFuc2Zvcm0nLCBjb25maWcudHJhbnNmb3JtLCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnZCcsIGNvbmZpZy5kLCBpKTtcclxuICAgIGRleC5jb25maWcuY29uZmlndXJlRXZlbnRzKG5vZGUsIGNvbmZpZy5ldmVudHMsIGkpO1xyXG4gIH1cclxuICByZXR1cm4gbm9kZTtcclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIHJlY3RhbmdsZSBzcGVjaWZpY2F0aW9uIHdoaWNoIGFsbG93cyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnlcclxuICogb2YgdGhlIHNldHRpbmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2QzcmVjdF9zcGVjfSBjdXN0b20gLSBUaGUgdXNlcnMgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3JlY3Rfc3BlY30gQSByZWN0YW5nbGUgc3BlY2lmaWNhdGlvbiBnZW5lcmF0ZWQgYnkgY29tYmluaW5nIHRoZVxyXG4gKiBkZWZhdWx0IHdpdGggdGhlIHVzZXIncyBjdXN0b21pemF0aW9ucy5cclxuICpcclxuICovXHJcbmV4cG9ydHMucmVjdGFuZ2xlID0gZnVuY3Rpb24gcmVjdGFuZ2xlKGN1c3RvbSkge1xyXG4gIHZhciBjb25maWcgPVxyXG4gIHtcclxuICAgICd3aWR0aCcgICAgIDogNTAsXHJcbiAgICAnaGVpZ2h0JyAgICA6IDUwLFxyXG4gICAgJ3gnICAgICAgICAgOiAwLFxyXG4gICAgJ3knICAgICAgICAgOiAwLFxyXG4gICAgJ3J4JyAgICAgICAgOiAwLFxyXG4gICAgJ3J5JyAgICAgICAgOiAwLFxyXG4gICAgJ3N0cm9rZScgICAgOiBkZXguY29uZmlnLnN0cm9rZSgpLFxyXG4gICAgJ29wYWNpdHknICAgOiAxLFxyXG4gICAgJ2NvbG9yJyAgICAgOiBkMy5zY2FsZS5jYXRlZ29yeTIwKCksXHJcbiAgICAndHJhbnNmb3JtJyA6IHVuZGVmaW5lZCxcclxuICAgICdldmVudHMnICAgIDogZGV4LmNvbmZpZy5ldmVudHMoKVxyXG4gIH07XHJcbiAgaWYgKGN1c3RvbSkge1xyXG4gICAgY29uZmlnID0gZGV4Lm9iamVjdC5vdmVybGF5KGN1c3RvbSwgY29uZmlnKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMuY29uZmlndXJlUmVjdGFuZ2xlID0gZnVuY3Rpb24gY29uZmlndXJlUmVjdGFuZ2xlKG5vZGUsIGNvbmZpZywgaSkge1xyXG4gIGlmIChjb25maWcpIHtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAnd2lkdGgnLCBjb25maWcud2lkdGgsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICdoZWlnaHQnLCBjb25maWcuaGVpZ2h0LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAneCcsIGNvbmZpZy54LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAneScsIGNvbmZpZy55LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAncngnLCBjb25maWcucngsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICdyeScsIGNvbmZpZy5yeSwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgJ29wYWNpdHknLCBjb25maWcub3BhY2l0eSwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgJ2ZpbGwnLCBjb25maWcuY29sb3IsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICd0cmFuc2Zvcm0nLCBjb25maWcudHJhbnNmb3JtLCBpKTtcclxuICAgIGRleC5jb25maWcuY29uZmlndXJlU3Ryb2tlKG5vZGUsIGNvbmZpZy5zdHJva2UsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5jb25maWd1cmVFdmVudHMobm9kZSwgY29uZmlnLmV2ZW50cywgaSk7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhbiBldmVudHMgc3BlY2lmaWNhdGlvbiB3aGljaCBhbGxvd3MgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55XHJcbiAqIG9mIHRoZSBzZXR0aW5ncy5cclxuICpcclxuICogQHBhcmFtIHtkM2V2ZW50c19zcGVjfSBjdXN0b20gLSBUaGUgdXNlcnMgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM2V2ZW50c19zcGVjfSBBbiBldmVudHMgc3BlY2lmaWNhdGlvbiBnZW5lcmF0ZWQgYnkgY29tYmluaW5nIHRoZVxyXG4gKiBkZWZhdWx0IHdpdGggdGhlIHVzZXIncyBjdXN0b21pemF0aW9ucy5cclxuICpcclxuICovXHJcbmV4cG9ydHMuZXZlbnRzID0gZnVuY3Rpb24gZXZlbnRzKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ21vdXNlb3ZlcicgOiBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAvL2NvbnNvbGUubG9nKFwiRGVmYXVsdCBtb3VzZW92ZXJcIik7XHJcbiAgICB9XHJcbiAgfTtcclxuICB2YXIgY29uZmlnID0gZGVmYXVsdHM7XHJcblxyXG4gIGlmIChjdXN0b20pIHtcclxuICAgIGNvbmZpZyA9IGRleC5vYmplY3Qub3ZlcmxheShjdXN0b20sIGRlZmF1bHRzKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMuY29uZmlndXJlRXZlbnRzID0gZnVuY3Rpb24gY29uZmlndXJlRXZlbnRzKG5vZGUsIGNvbmZpZywgaSkge1xyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiQ29uZmlndXJlIEV2ZW50c1wiLCBjb25maWcsIGkpO1xyXG4gIGlmIChjb25maWcpIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBjb25maWcpIHtcclxuICAgICAgLy9kZXguY29uc29sZS5sb2coXCJLRVlcIiwga2V5LCBcIlZBTFVFXCIsIGNvbmZpZ1trZXldKTtcclxuICAgICAgZGV4LmNvbmZpZy5zZXRFdmVudEhhbmRsZXIobm9kZSwga2V5LCBjb25maWdba2V5XSwgaSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbm9kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDb25zdHJ1Y3QgYW4gbGluZSBzcGVjaWZpY2F0aW9uIHdoaWNoIGFsbG93cyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnlcclxuICogb2YgdGhlIHNldHRpbmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2QzbGluZV9zcGVjfSBjdXN0b20gLSBUaGUgdXNlcnMgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM2xpbmVfc3BlY30gQSBsaW5lIHNwZWNpZmljYXRpb24gZ2VuZXJhdGVkIGJ5IGNvbWJpbmluZyB0aGVcclxuICogZGVmYXVsdCB3aXRoIHRoZSB1c2VyJ3MgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmxpbmUgPSBmdW5jdGlvbiBsaW5lKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ3N0YXJ0JyAgICAgICA6IGRleC5jb25maWcucG9pbnQoKSxcclxuICAgICdlbmQnICAgICAgICAgOiBkZXguY29uZmlnLnBvaW50KCksXHJcbiAgICAnc3Ryb2tlJyAgICAgIDogZGV4LmNvbmZpZy5zdHJva2UoKSxcclxuICAgICdmaWxsJyAgICAgICAgOiBkZXguY29uZmlnLmZpbGwoKSxcclxuICAgICdpbnRlcnBvbGF0ZScgOiB1bmRlZmluZWRcclxuICB9O1xyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoY3VzdG9tLCBkZWZhdWx0cyk7XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMuY29uZmlndXJlTGluZSA9IGZ1bmN0aW9uIGNvbmZpZ3VyZUxpbmUobm9kZSwgY29uZmlnLCBpKSB7XHJcbiAgaWYgKGNvbmZpZykge1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsICd4MScsIGNvbmZpZy5zdGFydC54LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAneTEnLCBjb25maWcuc3RhcnQueSwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgJ3gyJywgY29uZmlnLmVuZC54LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCAneTInLCBjb25maWcuZW5kLnksIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5jb25maWd1cmVTdHJva2Uobm9kZSwgY29uZmlnLnN0cm9rZSwgaSk7XHJcbiAgICBkZXguY29uZmlnLmNvbmZpZ3VyZUZpbGwobm9kZSwgY29uZmlnLmZpbGwsIGkpO1xyXG4gICAgaWYgKGNvbmZpZy5pbnRlcnBvbGF0ZSkge1xyXG4gICAgICAvL2RleC5jb25zb2xlLmxvZyhcImludGVycG9sYXRlXCIsIG5vZGUsIGNvbmZpZywgaSk7XHJcbiAgICAgIG5vZGUuaW50ZXJwb2xhdGUoY29uZmlnLmludGVycG9sYXRlKTtcclxuICAgICAgLy8gSSB0aGluayB0aGlzIGlzIGNsb3NlciB0byBjb3JyZWN0Li4uLmJ1dCBicmVha3MgdGhlIG1vdGlvbiBsaW5lIGNoYXJ0XHJcbiAgICAgIC8vbm9kZS5pbnRlcnBvbGF0ZShkZXguY29uZmlnLm9wdGlvblZhbHVlKGNvbmZpZy5pbnRlcnBvbGF0ZSwgaSkpO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gbm9kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDb25zdHJ1Y3QgYW4gcGF0aCBzcGVjaWZpY2F0aW9uIHdoaWNoIGFsbG93cyB0aGUgdXNlciB0byBvdmVycmlkZSBhbnlcclxuICogb2YgdGhlIHNldHRpbmdzLlxyXG4gKlxyXG4gKiBAcGFyYW0ge2QzcGF0aF9zcGVjfSBjdXN0b20gLSBUaGUgdXNlcnMgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3BhdGhfc3BlY30gQSBwYXRoIHNwZWNpZmljYXRpb24gZ2VuZXJhdGVkIGJ5IGNvbWJpbmluZyB0aGVcclxuICogZGVmYXVsdCB3aXRoIHRoZSB1c2VyJ3MgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLnBhdGggPSBmdW5jdGlvbiBwYXRoKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ2ZpbGwnICAgOiBkZXguY29uZmlnLmZpbGwoKSxcclxuICAgICdzdHJva2UnIDogZGV4LmNvbmZpZy5zdHJva2UoKVxyXG4gIH07XHJcbiAgdmFyIGNvbmZpZyA9IGRleC5jb25maWcuZXhwYW5kQW5kT3ZlcmxheShjdXN0b20sIGRlZmF1bHRzKTtcclxuICByZXR1cm4gY29uZmlnO1xyXG59O1xyXG5cclxuZXhwb3J0cy5jb25maWd1cmVQYXRoID0gZnVuY3Rpb24gY29uZmlndXJlUGF0aChub2RlLCBjb25maWcsIGkpIHtcclxuICBpZiAoY29uZmlnKSB7XHJcbiAgICBkZXguY29uZmlnLmNvbmZpZ3VyZUZpbGwobm9kZSwgY29uZmlnLmZpbGwsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5jb25maWd1cmVTdHJva2Uobm9kZSwgY29uZmlnLnN0cm9rZSwgaSk7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRDYWxsZXJzID0gZnVuY3Rpb24gZ2V0Q2FsbGVycyhjYWxsZXIpIHtcclxuICB2YXIgY2FsbGVycyA9IFtdO1xyXG4gIHZhciBjdXJyZW50Q2FsbGVyID0gY2FsbGVyO1xyXG4gIGZvciAoOyBjdXJyZW50Q2FsbGVyOyBjdXJyZW50Q2FsbGVyID0gY3VycmVudENhbGxlci5jYWxsZXIpIHtcclxuICAgIGlmIChjdXJyZW50Q2FsbGVyLm5hbWUpIHtcclxuICAgICAgY2FsbGVycy5wdXNoKGN1cnJlbnRDYWxsZXIubmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2FsbGVycy5yZXZlcnNlKCk7XHJcbn1cclxuXHJcbmV4cG9ydHMuZ2V0Q2FsbGVyU3RyaW5nID0gZnVuY3Rpb24gZ2V0Q2FsbGVyU3RyaW5nKGNhbGxlcikge1xyXG4gIHJldHVybiBkZXguY29uZmlnLmdldENhbGxlcnMoY2FsbGVyKS5qb2luKFwiLT5cIik7XHJcbn1cclxuXHJcbmV4cG9ydHMuc2V0RXZlbnRIYW5kbGVyID0gZnVuY3Rpb24gc2V0RXZlbnRIYW5kbGVyKG5vZGUsIGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyLCBpKSB7XHJcbiAgdmFyIGNhbGxlclN0ciA9IGRleC5jb25maWcuZ2V0Q2FsbGVyU3RyaW5nKGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyKTtcclxuXHJcbiAgLy9kZXguY29uc29sZS5kZWJ1ZyhjYWxsZXJTdHIgKyBcIjogc2V0RXZlbnRIYW5kbGVyKG5vZGU9XCIgKyBub2RlICsgXCIsIGV2ZW50VHlwZT1cIiArIGV2ZW50VHlwZSArIFwiLCBldmVudEhhbmRsZXI9XCIgKyBldmVudEhhbmRsZXIpO1xyXG4gIGlmICghbm9kZSkge1xyXG4gICAgZGV4LmNvbnNvbGUud2FybihjYWxsZXJTdHIgKyBcIjogZGV4LmNvbmZpZy5zZXRFdmVudEhhbmRsZXIoZXZlbnRUeXBlPSdcIiArIGV2ZW50VHlwZSArIFwiZXZlbnRIYW5kbGVyPVwiICsgZXZlbnRIYW5kbGVyICsgXCIpIDogbm9kZSBpcyBudWxsLlwiKTtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuICBpZiAoIWRleC5vYmplY3QuaXNGdW5jdGlvbihub2RlLm9uKSkge1xyXG4gICAgZGV4LmNvbnNvbGUud2FybihjYWxsZXJTdHIgKyBcIjogZGV4LmNvbmZpZy5zZXRFdmVudEhhbmRsZXIoZXZlbnRUeXBlPSdcIiArIGV2ZW50VHlwZSArIFwiJywgZXZlbnRIYW5kbGVyPSdcIiArIGV2ZW50SGFuZGxlciArXHJcbiAgICBcIicpIDogdGFyZ2V0IG5vZGUgaXMgbWlzc2luZyBmdW5jdGlvbjogbm9kZS5vbihldmVudFR5cGUsZXZlbnRIYW5kbGVyKS4gIE5vZGUgZHVtcDpcIiwgbm9kZSk7XHJcbiAgICByZXR1cm4gbm9kZTtcclxuICB9XHJcbiAgaWYgKHR5cGVvZiBldmVudEhhbmRsZXIgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIGRleC5jb25zb2xlLmRlYnVnKGNhbGxlclN0ciArIFwiOiBTZXQgRXZlbnQgSGFuZGxlcjogJ1wiICsgZXZlbnRUeXBlICsgXCInPSdcIiArIGV2ZW50SGFuZGxlciArIFwiJ1wiKTtcclxuICAgIG5vZGUub24oZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGRleC5jb25zb2xlLmRlYnVnKGNhbGxlclN0ciArPSBcIjogVW5kZWZpbmVkIEV2ZW50IEhhbmRsZXI6ICdcIiArIGV2ZW50VHlwZSArIFwiJz0nXCIgKyBldmVudEhhbmRsZXIgKyBcIidcIik7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuZXhwb3J0cy5zZXRBdHRyID0gZnVuY3Rpb24gc2V0QXR0cihub2RlLCBuYW1lLCB2YWx1ZSwgaSkge1xyXG4gIHZhciBjYWxsZXJTdHIgPSBkZXguY29uZmlnLmdldENhbGxlclN0cmluZyhhcmd1bWVudHMuY2FsbGVlLmNhbGxlcik7XHJcbiAgaWYgKCFub2RlKSB7XHJcbiAgICBkZXguY29uc29sZS53YXJuKGNhbGxlclN0ciArIFwiOiBkZXguY29uZmlnLnNldEF0dHIobmFtZT0nXCIgKyBuYW1lICsgXCJ2YWx1ZT1cIiArIHZhbHVlICsgXCIpIDogbm9kZSBpcyBudWxsLlwiKTtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuICBpZiAoIWRleC5vYmplY3QuaXNGdW5jdGlvbihub2RlLmF0dHIpKSB7XHJcbiAgICBkZXguY29uc29sZS53YXJuKGNhbGxlclN0ciArIFwiOiBkZXguY29uZmlnLnNldEF0dHIobmFtZT0nXCIgKyBuYW1lICsgXCInLCB2YWx1ZT0nXCIgKyB2YWx1ZSArXHJcbiAgICBcIicpIDogdGFyZ2V0IG5vZGUgaXMgbWlzc2luZyBmdW5jdGlvbjogbm9kZS5hdHRyLiAgTm9kZSBkdW1wOlwiLCBub2RlKTtcclxuICAgIHJldHVybiBub2RlO1xyXG4gIH1cclxuICBpZiAodHlwZW9mIHZhbHVlICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICBkZXguY29uc29sZS5kZWJ1ZyhjYWxsZXJTdHIgKyBcIjogU2V0IEF0dHI6ICdcIiArIG5hbWUgKyBcIic9J1wiICsgdmFsdWUgKyBcIidcIik7XHJcbiAgICBub2RlLmF0dHIobmFtZSwgZGV4LmNvbmZpZy5vcHRpb25WYWx1ZSh2YWx1ZSwgaSkpO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGRleC5jb25zb2xlLmRlYnVnKGNhbGxlclN0ciArPSBcIjogVW5kZWZpbmVkIEF0dHI6ICdcIiArIG5hbWUgKyBcIic9J1wiICsgdmFsdWUgKyBcIidcIik7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuZXhwb3J0cy5zZXRTdHlsZSA9IGZ1bmN0aW9uIHNldFN0eWxlKG5vZGUsIG5hbWUsIHZhbHVlLCBpKSB7XHJcbiAgdmFyIGNhbGxlclN0ciA9IGRleC5jb25maWcuZ2V0Q2FsbGVyU3RyaW5nKGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyKTtcclxuICBpZiAoIW5vZGUpIHtcclxuICAgIGRleC5jb25zb2xlLndhcm4oY2FsbGVyU3RyICsgXCI6IGRleC5jb25maWcuc2V0QXR0cihuYW1lPSdcIiArIG5hbWUgKyBcInZhbHVlPVwiICsgdmFsdWUgKyBcIikgOiBub2RlIGlzIG51bGwuXCIpO1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG4gIGlmICghZGV4Lm9iamVjdC5pc0Z1bmN0aW9uKG5vZGUuc3R5bGUpKSB7XHJcbiAgICBkZXguY29uc29sZS53YXJuKGNhbGxlclN0ciArIFwiOiBkZXguY29uZmlnLnNldFN0eWxlKG5hbWU9J1wiICsgbmFtZSArIFwiJywgdmFsdWU9J1wiICsgdmFsdWUgK1xyXG4gICAgXCInKSA6IHRhcmdldCBub2RlIGlzIG1pc3NpbmcgZnVuY3Rpb246IG5vZGUuc3R5bGUuICBOb2RlIER1bXA6XCIsIG5vZGUpO1xyXG4gICAgcmV0dXJuIG5vZGU7XHJcbiAgfVxyXG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnICYmIG5vZGUgJiYgZGV4Lm9iamVjdC5pc0Z1bmN0aW9uKG5vZGUuc3R5bGUpKSB7XHJcbiAgICBkZXguY29uc29sZS5kZWJ1ZyhjYWxsZXJTdHIgKyBcIjogU2V0IFN0eWxlOiBuYW1lPSdcIiArIG5hbWUgKyBcIicsIFZhbHVlIER1bXA6XCIsXHJcbiAgICAgIGRleC5jb25maWcub3B0aW9uVmFsdWUodmFsdWUsIGkpKTtcclxuICAgIG5vZGUuc3R5bGUobmFtZSwgZGV4LmNvbmZpZy5vcHRpb25WYWx1ZSh2YWx1ZSwgaSkpO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGRleC5jb25zb2xlLmRlYnVnKGNhbGxlclN0ciArIFwiOiBVbmRlZmluZWQgU3R5bGU6IG5hbWU9J1wiICsgbmFtZSArIFwiJywgVmFsdWUgRHVtcDpcIiwgdmFsdWUpO1xyXG4gIH1cclxuICByZXR1cm4gbm9kZTtcclxufTtcclxuXHJcbmV4cG9ydHMub3B0aW9uVmFsdWUgPSBmdW5jdGlvbiBvcHRpb25WYWx1ZShvcHRpb24sIGkpIHtcclxuICAvL2RleC5jb25zb2xlLmxvZyhcIk9QVElPTi1JOiBcIiArIGkpO1xyXG5cclxuICAvLyBDdXJyeSB2YWx1ZSBpOlxyXG4gIGlmICh0eXBlb2YgaSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCkge1xyXG4gICAgICAvL2RleC5jb25zb2xlLmxvZyhcIk9QVElPTlwiLCBvcHRpb24sIFwiRFwiLCBkLCBcIklcIiwgaSk7XHJcbiAgICAgIGlmIChkZXgub2JqZWN0LmlzRnVuY3Rpb24ob3B0aW9uKSkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb24oZCwgaSk7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbjtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGkpIHtcclxuICAgICAgLy9kZXguY29uc29sZS5sb2coXCJPUFRJT05cIiwgb3B0aW9uLCBcIkRcIiwgZCwgXCJJXCIsIGkpO1xyXG4gICAgICBpZiAoZGV4Lm9iamVjdC5pc0Z1bmN0aW9uKG9wdGlvbikpIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9uKGQsIGkpO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb247XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIElzIHRoaXMgY29ycmVjdD8gIEl0IGxvb2tzIHN1c3BlY3QgdG8gbWUuXHJcbiAqXHJcbiAqIEBwYXJhbSBub2RlXHJcbiAqIEBwYXJhbSBmblxyXG4gKiBAcGFyYW0gdmFsdWVcclxuICogQHBhcmFtIGlcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5leHBvcnRzLmNhbGxJZkRlZmluZWQgPSBmdW5jdGlvbiBjYWxsSWZEZWZpbmVkKG5vZGUsIGZuLCB2YWx1ZSwgaSkge1xyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiQ0FMTC1JRi1ERUZJTkVEOiBmbj1cIiArIGZuICsgXCIsIHZhbHVlPVwiICsgdmFsdWUgKyBcIiwgST1cIiArIGkpO1xyXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAvL2RleC5jb25zb2xlLmxvZyhcIlNraXBwaW5nOiBcIiArIGZuICsgXCIoKVwiKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICAvL2RleC5jb25zb2xlLmxvZyhcIkNhbGxpbmc6ICdcIiArIGZuICsgXCIoXCIgKyB2YWx1ZSArIFwiKVwiKTtcclxuICAgIHJldHVybiBub2RlW2ZuXShkZXguY29uZmlnLm9wdGlvblZhbHVlKHZhbHVlLCBpKSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbm9kZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDb25zdHJ1Y3QgYW4gcG9pbnQgc3BlY2lmaWNhdGlvbiB3aGljaCBhbGxvd3MgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55XHJcbiAqIG9mIHRoZSBzZXR0aW5ncy5cclxuICpcclxuICogQHBhcmFtIHtkM3BvaW50X3NwZWN9IGN1c3RvbSAtIFRoZSB1c2VycyBjdXN0b21pemF0aW9ucy5cclxuICpcclxuICogQHJldHVybnMge2QzcG9pbnRfc3BlY30gQSBwb2ludCBzcGVjaWZpY2F0aW9uIGdlbmVyYXRlZCBieSBjb21iaW5pbmcgdGhlXHJcbiAqIGRlZmF1bHQgd2l0aCB0aGUgdXNlcidzIGN1c3RvbWl6YXRpb25zLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5wb2ludCA9IGZ1bmN0aW9uIHBvaW50KGN1c3RvbSkge1xyXG4gIHZhciBjb25maWcgPVxyXG4gIHtcclxuICAgICd4JyA6IHVuZGVmaW5lZCxcclxuICAgICd5JyA6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgaWYgKGN1c3RvbSkge1xyXG4gICAgY29uZmlnID0gZGV4Lm9iamVjdC5vdmVybGF5KGN1c3RvbSwgY29uZmlnKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMuY29uZmlndXJlUG9pbnQgPSBmdW5jdGlvbiBjb25maWd1cmVQb2ludChub2RlLCBjb25maWcsIGkpIHtcclxuICBpZiAoY29uZmlnKSB7XHJcbiAgICBub2RlXHJcbiAgICAgIC5hdHRyKCd4JywgZGV4LmNvbmZpZy5vcHRpb25WYWx1ZShjb25maWcuY2VudGVyLmN4LCBpKSlcclxuICAgICAgLmF0dHIoJ3knLCBkZXguY29uZmlnLm9wdGlvblZhbHVlKGNvbmZpZy5jZW50ZXIuY3ksIGkpKTtcclxuICB9XHJcbiAgcmV0dXJuIG5vZGU7XHJcbn07XHJcblxyXG4vLyBDb25maWd1cmVzOiBvcGFjaXR5LCBjb2xvciwgc3Ryb2tlLlxyXG5leHBvcnRzLmNvbmZpZ3VyZVNoYXBlU3R5bGUgPSBmdW5jdGlvbiBjb25maWd1cmVTaGFwZVN0eWxlKG5vZGUsIGNvbmZpZywgaSkge1xyXG4gIGlmIChjb25maWcpIHtcclxuICAgIG5vZGVcclxuICAgICAgLmNhbGwoZGV4LmNvbmZpZy5jb25maWd1cmVTdHJva2UsIGNvbmZpZy5zdHJva2UsIGkpXHJcbiAgICAgIC5hdHRyKCdvcGFjaXR5JywgY29uZmlnLm9wYWNpdHkpXHJcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGNvbmZpZy5jb2xvcik7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhbiBjaXJjbGUgc3BlY2lmaWNhdGlvbiB3aGljaCBhbGxvd3MgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55XHJcbiAqIG9mIHRoZSBzZXR0aW5ncy5cclxuICpcclxuICogQHBhcmFtIHtkM2NpcmNsZV9zcGVjfSBjdXN0b20gLSBUaGUgdXNlcnMgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM2NpcmNsZV9zcGVjfSBBIGNpcmNsZSBzcGVjaWZpY2F0aW9uIGdlbmVyYXRlZCBieSBjb21iaW5pbmcgdGhlXHJcbiAqIGRlZmF1bHQgd2l0aCB0aGUgdXNlcidzIGN1c3RvbWl6YXRpb25zLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5jaXJjbGUgPSBmdW5jdGlvbiBjaXJjbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGNvbmZpZyA9XHJcbiAge1xyXG4gICAgJ2N4JyAgICAgICAgOiAwLFxyXG4gICAgJ2N5JyAgICAgICAgOiAwLFxyXG4gICAgJ3InICAgICAgICAgOiAxMCxcclxuICAgICdmaWxsJyAgICAgIDogZGV4LmNvbmZpZy5maWxsKCksXHJcbiAgICAnc3Ryb2tlJyAgICA6IGRleC5jb25maWcuc3Ryb2tlKCksXHJcbiAgICAndHJhbnNmb3JtJyA6ICcnLFxyXG4gICAgJ3RpdGxlJyAgICAgOiAnJyxcclxuICAgICdldmVudHMnICAgIDogZGV4LmNvbmZpZy5ldmVudHMoKVxyXG4gIH07XHJcbiAgaWYgKGN1c3RvbSkge1xyXG4gICAgY29uZmlnID0gZGV4Lm9iamVjdC5vdmVybGF5KGN1c3RvbSwgY29uZmlnKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMuY29uZmlndXJlQ2lyY2xlID0gZnVuY3Rpb24gY29uZmlndXJlQ2lyY2xlKG5vZGUsIGNvbmZpZywgaSkge1xyXG4gIGlmIChjb25maWcpIHtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCBcInJcIiwgY29uZmlnLnIsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5zZXRBdHRyKG5vZGUsIFwiY3hcIiwgY29uZmlnLmN4LCBpKTtcclxuICAgIGRleC5jb25maWcuc2V0QXR0cihub2RlLCBcImN5XCIsIGNvbmZpZy5jeSwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgXCJ0cmFuc2Zvcm1cIiwgY29uZmlnLnRyYW5zZm9ybSwgaSk7XHJcbiAgICBkZXguY29uZmlnLnNldEF0dHIobm9kZSwgXCJ0aXRsZVwiLCBjb25maWcudGl0bGUsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5jb25maWd1cmVTdHJva2Uobm9kZSwgY29uZmlnLnN0cm9rZSwgaSk7XHJcbiAgICBkZXguY29uZmlnLmNvbmZpZ3VyZUZpbGwobm9kZSwgY29uZmlnLmZpbGwsIGkpO1xyXG4gICAgZGV4LmNvbmZpZy5jb25maWd1cmVFdmVudHMobm9kZSwgY29uZmlnLmV2ZW50cywgaSk7XHJcbiAgfVxyXG4gIHJldHVybiBub2RlO1xyXG59O1xyXG5cclxuLypcclxuIGV4cG9ydHMuY29uZmlndXJlQXhpc19kZXByZWNhdGVkID0gZnVuY3Rpb24gY29uZmlndXJlQXhpc19kZXByZWNhdGVkKGNvbmZpZykge1xyXG4gdmFyIGF4aXM7XHJcblxyXG4gaWYgKGNvbmZpZykge1xyXG4gdmFyIGF4aXMgPSBkMy5zdmcuYXhpcygpXHJcbiAudGlja3MoY29uZmlnLnRpY2suY291bnQpXHJcbiAudGlja1N1YmRpdmlkZShjb25maWcudGljay5zdWJkaXZpZGUpXHJcbiAudGlja1NpemUoY29uZmlnLnRpY2suc2l6ZS5tYWpvciwgY29uZmlnLnRpY2suc2l6ZS5taW5vcixcclxuIGNvbmZpZy50aWNrLnNpemUuZW5kKVxyXG4gLnRpY2tQYWRkaW5nKGNvbmZpZy50aWNrLnBhZGRpbmcpO1xyXG5cclxuIC8vIFJFTTogSG9ycmlibGUgd2F5IG9mIGRvaW5nIHRoaXMuICBOZWVkIGEgZnVuY3Rpb24gd2hpY2hcclxuIC8vIGlzIG1vcmUgZ2VuZXJpYyBhbmQgc21hcnRlciB0byBzaG9ydCBjaXJjdWl0IHN0dWZmIGxpa2VcclxuIC8vIHRoaXMuICBCdXQuLi5mb3Igbm93IGl0IGRvZXMgd2hhdCBJIHdhbnQuXHJcbiBpZiAoIWRleC5vYmplY3QuaXNGdW5jdGlvbihjb25maWcudGljay5mb3JtYXQpKSB7XHJcbiBheGlzLnRpY2tGb3JtYXQoY29uZmlnLnRpY2suZm9ybWF0KTtcclxuIH1cclxuXHJcbiBheGlzXHJcbiAub3JpZW50KGNvbmZpZy5vcmllbnQpXHJcbiAuc2NhbGUoY29uZmlnLnNjYWxlKTtcclxuIH1cclxuIGVsc2Uge1xyXG4gYXhpcyA9IGQzLnN2Zy5heGlzKCk7XHJcbiB9XHJcbiAvL2F4aXMuc2NhbGUgPSBjb25maWcuc2NhbGU7XHJcbiByZXR1cm4gYXhpcztcclxuIH07XHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhbiB0aWNrIHNwZWNpZmljYXRpb24gd2hpY2ggYWxsb3dzIHRoZSB1c2VyIHRvIG92ZXJyaWRlIGFueVxyXG4gKiBvZiB0aGUgc2V0dGluZ3MuXHJcbiAqXHJcbiAqIEBwYXJhbSB7ZDN0aWNrX3NwZWN9IGN1c3RvbSAtIFRoZSB1c2VycyBjdXN0b21pemF0aW9ucy5cclxuICpcclxuICogQHJldHVybnMge2QzdGlja19zcGVjfSBBIHRpY2sgc3BlY2lmaWNhdGlvbiBnZW5lcmF0ZWQgYnkgY29tYmluaW5nIHRoZVxyXG4gKiBkZWZhdWx0IHdpdGggdGhlIHVzZXIncyBjdXN0b21pemF0aW9ucy5cclxuICpcclxuICovXHJcbmV4cG9ydHMudGljayA9IGZ1bmN0aW9uIHRpY2soY3VzdG9tKSB7XHJcbiAgdmFyIGNvbmZpZyA9XHJcbiAge1xyXG4gICAgJ2NvdW50JyAgICAgOiA1LFxyXG4gICAgLy8ndGlja1ZhbHVlcycgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3N1YmRpdmlkZScgOiAzLFxyXG4gICAgJ3NpemUnICAgICAgOiB7XHJcbiAgICAgICdtYWpvcicgOiA1LFxyXG4gICAgICAnbWlub3InIDogMyxcclxuICAgICAgJ2VuZCcgICA6IDVcclxuICAgIH0sXHJcbiAgICAncGFkZGluZycgICA6IDUsXHJcbiAgICAnZm9ybWF0JyAgICA6IGQzLmZvcm1hdChcIixkXCIpLFxyXG4gICAgJ2xhYmVsJyAgICAgOiBkZXguY29uZmlnLnRleHQoKVxyXG4gIH07XHJcbiAgaWYgKGN1c3RvbSkge1xyXG4gICAgY29uZmlnID0gZGV4Lm9iamVjdC5vdmVybGF5KGN1c3RvbSwgY29uZmlnKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbi8qXHJcbiBleHBvcnRzLnhheGlzX2RlcHJlY2F0ZSA9IGZ1bmN0aW9uIChjdXN0b20pIHtcclxuIHZhciBjb25maWcgPVxyXG4ge1xyXG4gJ3NjYWxlJyAgOiBkMy5zY2FsZS5saW5lYXIoKSxcclxuICdvcmllbnQnIDogXCJib3R0b21cIixcclxuICd0aWNrJyAgIDogdGhpcy50aWNrKCksXHJcbiAnbGFiZWwnICA6IGRleC5jb25maWcudGV4dCgpXHJcbiB9O1xyXG4gaWYgKGN1c3RvbSkge1xyXG4gY29uZmlnID0gZGV4Lm9iamVjdC5vdmVybGF5KGN1c3RvbSwgY29uZmlnKTtcclxuIH1cclxuIHJldHVybiBjb25maWc7XHJcbiB9O1xyXG5cclxuIGV4cG9ydHMueWF4aXNfZGVwcmVjYXRlID0gZnVuY3Rpb24gKGN1c3RvbSkge1xyXG4gdmFyIGNvbmZpZyA9XHJcbiB7XHJcbiAnc2NhbGUnICA6IGQzLnNjYWxlLmxpbmVhcigpLFxyXG4gJ29yaWVudCcgOiAnbGVmdCcsXHJcbiAndGljaycgICA6IHRoaXMudGljaygpLFxyXG4gJ2xhYmVsJyAgOiBkZXguY29uZmlnLnRleHQoeyd0cmFuc2Zvcm0nIDogJ3JvdGF0ZSgtOTApJ30pXHJcbiB9O1xyXG4gaWYgKGN1c3RvbSkge1xyXG4gY29uZmlnID0gZGV4Lm9iamVjdC5vdmVybGF5KGN1c3RvbSwgY29uZmlnKTtcclxuIH1cclxuIHJldHVybiBjb25maWc7XHJcbiB9O1xyXG4gKi9cclxuXHJcbmV4cG9ydHMuY2FsbENvbmRpdGlvbmFsbHkgPSBmdW5jdGlvbiBjYWxsQ29uZGl0aW9uYWxseShmbiwgdmFsdWUsIGkpIHtcclxuICAvL2RleC5jb25zb2xlLmxvZyhcIi0gRk46XCIgKyBmbik7XHJcbiAgLy9kZXguY29uc29sZS5sb2coXCItIFZBTFVFOlwiICsgdmFsdWUpO1xyXG4gIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAvL2RleC5jb25zb2xlLmxvZyhcIi0gQ0FMTElORzogXCIgKyBmbiArIFwiIG9mIFwiICsgdmFsdWUpO1xyXG4gICAgaWYgKGkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBmbih2YWx1ZSwgaSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgZm4odmFsdWUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIHtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQ29uZmlndXJlIHRoZSBpbnB1dCBwYXJhbWV0ZXJzIGZvciBjb25maWd1cmluZyBhbiBheGlzLlxyXG4gKiBDZXJ0YWluIGRlZmF1bHRzIGFyZSBpbXBvc2VkIHNob3VsZCB0aGUgXCJjdXN0b21cIiB2YXJpYWJsZVxyXG4gKiBub3Qgc3BlY2lmeSB0aGF0IHBhcmFtZXRlci5cclxuICpcclxuICogQHBhcmFtIGN1c3RvbSBUaGUgdXNlciBzdXBwbGllZCBheGlzIGNvbmZpZ3VyYXRpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM2F4aXNfc3BlY30gVGhlIGF4aXMgc3BlY2lmaWNhdGlvbiB3aXRoXHJcbiAqIHVzZXIgc3VwcGxpZWQgb3ZlcnJpZGVzIGFwcGxpZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmF4aXMgPSBmdW5jdGlvbiBheGlzKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ3NjYWxlJyAgICAgICAgIDogZGV4LmNvbmZpZy5zY2FsZSh7J3R5cGUnIDogJ2xpbmVhcid9KSxcclxuICAgICdvcmllbnQnICAgICAgICA6ICdib3R0b20nLFxyXG4gICAgJ3RpY2tzJyAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3RpY2tWYWx1ZXMnICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3RpY2tTaXplJyAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2lubmVyVGlja1NpemUnIDogdW5kZWZpbmVkLFxyXG4gICAgJ291dGVyVGlja1NpemUnIDogdW5kZWZpbmVkLFxyXG4gICAgJ3RpY2tQYWRkaW5nJyAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3RpY2tGb3JtYXQnICAgIDogdW5kZWZpbmVkXHJcbiAgICAvLydsYWJlbCcgICAgICAgICA6IGRleC5jb25maWcudGV4dCgpXHJcbiAgfTtcclxuXHJcbiAgdmFyIGF4aXNTcGVjID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBheGlzU3BlYztcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDcmVhdGUgYW4gYXhpcyB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlndXJhdGlvbi5cclxuICpcclxuICogQHBhcmFtIGF4aXMgVGhlIGF4aXMgdG8gY29uZmlndXJlLlxyXG4gKiBAcGFyYW0gY29uZmlnIFRoZSB1c2VyIHNwZWNpZmllZCBheGlzIGNvbmZpZ3VyYXRpb24uXHJcbiAqXHJcbiAqIEByZXR1cm5zIHsqfSBUaGUgbmV3bHkgY29uZmlndXJlZCBheGlzLlxyXG4gKi9cclxuZXhwb3J0cy5jb25maWd1cmVBeGlzID0gZnVuY3Rpb24gY29uZmlndXJlQXhpcyhheGlzLCBjb25maWcsIGkpIHtcclxuICAvL2RleC5jb25zb2xlLmxvZyhcIkNPTkZBWElTOiBcIiArIGkpO1xyXG4gIGlmIChjb25maWcpIHtcclxuICAgIFtcclxuICAgICAgJ3NjYWxlJyxcclxuICAgICAgJ29yaWVudCcsXHJcbiAgICAgICd0aWNrcycsXHJcbiAgICAgICd0aWNrVmFsdWVzJyxcclxuICAgICAgJ3RpY2tTaXplJyxcclxuICAgICAgJ2lubmVyVGlja1NpemUnLFxyXG4gICAgICAnb3V0ZXJUaWNrU2l6ZScsXHJcbiAgICAgICd0aWNrUGFkZGluZycsXHJcbiAgICAgICd0aWNrRm9ybWF0J1xyXG4gICAgXS5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiQ2FsbGluZzogXCIgKyBmbik7XHJcbiAgICAgICAgZGV4LmNvbmZpZy5jYWxsQ29uZGl0aW9uYWxseShheGlzW2ZuXSwgY29uZmlnW2ZuXSwgaSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gYXhpcztcclxufTtcclxuXHJcbmV4cG9ydHMuY3JlYXRlQXhpcyA9IGZ1bmN0aW9uIGNyZWF0ZUF4aXModXNlckNvbmZpZywgaSkge1xyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmF4aXModXNlckNvbmZpZyk7XHJcbiAgcmV0dXJuIGRleC5jb25maWcuY29uZmlndXJlQXhpcyhkMy5zdmcuYXhpcygpLCBjb25maWcsIGkpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIHtkM2F4aXNfc3BlY30gYmFzZWQgb24gcmVhc29uYWJsZSBkZWZhdWx0cyB3aXRoXHJcbiAqIHVzZXIgY3VzdG9taXphdGlvbnMgYXBwbGllZCBvbiB0b3AuXHJcbiAqXHJcbiAqIEBwYXJhbSBjdXN0b20gVGhlIHVzZXIgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3NjYWxlX3NwZWN9IFRoZSBzY2FsZSBzcGVjaWZpY2F0aW9uIHdpdGhcclxuICogdXNlciBzdXBwbGllZCBvdmVycmlkZXMgYXBwbGllZC5cclxuICpcclxuICovXHJcbmV4cG9ydHMuc2NhbGUgPSBmdW5jdGlvbiBzY2FsZShjdXN0b20pIHtcclxuICB2YXIgZm1hcCA9XHJcbiAge1xyXG4gICAgJ2xpbmVhcicgICA6IGRleC5jb25maWcubGluZWFyU2NhbGUsXHJcbiAgICAnc3FydCcgICAgIDogZGV4LmNvbmZpZy5zcXJ0U2NhbGUsXHJcbiAgICAncG93JyAgICAgIDogZGV4LmNvbmZpZy5wb3dTY2FsZSxcclxuICAgICd0aW1lJyAgICAgOiBkZXguY29uZmlnLnRpbWVTY2FsZSxcclxuICAgICdsb2cnICAgICAgOiBkZXguY29uZmlnLmxvZ1NjYWxlLFxyXG4gICAgJ29yZGluYWwnICA6IGRleC5jb25maWcub3JkaW5hbFNjYWxlLFxyXG4gICAgJ3F1YW50aWxlJyA6IGRleC5jb25maWcucXVhbnRpbGVTY2FsZSxcclxuICAgICdxdWFudGl6ZScgOiBkZXguY29uZmlnLnF1YW50aXplU2NhbGUsXHJcbiAgICAnaWRlbnRpdHknIDogZGV4LmNvbmZpZy5pZGVudGl0eVNjYWxlXHJcbiAgfTtcclxuXHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgOiAnbGluZWFyJ1xyXG4gIH07XHJcblxyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoY3VzdG9tLCBkZWZhdWx0cyk7XHJcblxyXG4gIHJldHVybiBmbWFwW2NvbmZpZy50eXBlXShjb25maWcpO1xyXG59XHJcblxyXG4vKipcclxuICpcclxuICogR2l2ZW4gYSBzY2FsZSBzcGVjaWZpY2F0aW9uLCBjcmVhdGUsIGNvbmZpZ3VyZSwgYW5kIHJldHVybiBhXHJcbiAqIHNjYWxlIHdoaWNoIG1lZXRzIHRoYXQgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtkM3NjYWxlX3NwZWN9IHNjYWxlU3BlY1xyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGEgZDMuc2NhbGUgd2l0aCB0aGUgc3VwcGxpZWQgc3BlY2lmaWNhdGlvbi5cclxuICpcclxuICovXHJcbmV4cG9ydHMuY3JlYXRlU2NhbGUgPSBmdW5jdGlvbiBjcmVhdGVTY2FsZShzY2FsZVNwZWMpIHtcclxuICB2YXIgc2NhbGU7XHJcblxyXG4gIHZhciBmbWFwID1cclxuICB7XHJcbiAgICAnbGluZWFyJyAgIDogZDMuc2NhbGUubGluZWFyLFxyXG4gICAgJ3NxcnQnICAgICA6IGQzLnNjYWxlLnNxcnQsXHJcbiAgICAncG93JyAgICAgIDogZDMuc2NhbGUucG93LFxyXG4gICAgJ3RpbWUnICAgICA6IGQzLnRpbWUuc2NhbGUsXHJcbiAgICAnbG9nJyAgICAgIDogZDMuc2NhbGUubG9nLFxyXG4gICAgJ29yZGluYWwnICA6IGQzLnNjYWxlLm9yZGluYWwsXHJcbiAgICAncXVhbnRpbGUnIDogZDMuc2NhbGUucXVhbnRpbGUsXHJcbiAgICAncXVhbnRpemUnIDogZDMuc2NhbGUucXVhbnRpemUsXHJcbiAgICAnaWRlbnRpdHknIDogZDMuc2NhbGUuaWRlbnRpdHlcclxuICB9O1xyXG5cclxuICBpZiAoc2NhbGVTcGVjKSB7XHJcbiAgICBzY2FsZSA9IGZtYXBbc2NhbGVTcGVjLnR5cGVdKCk7XHJcblxyXG4gICAgLy8gU2luY2Ugd2UgY3JlYXRlIGEgbm9uLXBhcmFtZXRlcml6ZWQgc2NhbGUsIGhlcmUgd2UgcGFyYW1ldGVyaXplIGl0IGJhc2VkIHVwb25cclxuICAgIC8vIHRoZSBzdXBwbGllZCBzcGVjaWZpY2F0aW9uXHJcbiAgICBkZXguY29uZmlnLmNvbmZpZ3VyZVNjYWxlKHNjYWxlLCBzY2FsZVNwZWMpO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHNjYWxlID0gZDMuc2NhbGUubGluZWFyKCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2NhbGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDb25zdHJ1Y3QgYSBsaW5lYXIge2Qzc2NhbGVfc3BlY30gYmFzZWQgb24gcmVhc29uYWJsZVxyXG4gKiBkZWZhdWx0cyB3aXRoIHVzZXIgY3VzdG9taXphdGlvbnMgYXBwbGllZCBvbiB0b3AuXHJcbiAqXHJcbiAqIEBwYXJhbSBjdXN0b20gVGhlIHVzZXIgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3NjYWxlX3NwZWN9IFRoZSBsaW5lYXIgc2NhbGUgc3BlY2lmaWNhdGlvbiB3aXRoXHJcbiAqIHVzZXIgc3VwcGxpZWQgb3ZlcnJpZGVzIGFwcGxpZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmxpbmVhclNjYWxlID0gZnVuY3Rpb24gbGluZWFyU2NhbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgICAgICAgIDogJ2xpbmVhcicsXHJcbiAgICAnZG9tYWluJyAgICAgIDogWzAsIDEwMF0sXHJcbiAgICAncmFuZ2UnICAgICAgIDogWzAsIDgwMF0sXHJcbiAgICAncmFuZ2VSb3VuZCcgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2ludGVycG9sYXRlJyA6IHVuZGVmaW5lZCxcclxuICAgICdjbGFtcCcgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAnbmljZScgICAgICAgIDogdW5kZWZpbmVkXHJcbiAgfTtcclxuXHJcbiAgdmFyIGxpbmVhclNjYWxlU3BlYyA9IGRleC5jb25maWcuZXhwYW5kQW5kT3ZlcmxheShjdXN0b20sIGRlZmF1bHRzKTtcclxuICByZXR1cm4gbGluZWFyU2NhbGVTcGVjO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIHBvd2VyIHtkM3NjYWxlX3NwZWN9IGJhc2VkIG9uIHJlYXNvbmFibGVcclxuICogZGVmYXVsdHMgd2l0aCB1c2VyIGN1c3RvbWl6YXRpb25zIGFwcGxpZWQgb24gdG9wLlxyXG4gKlxyXG4gKiBAcGFyYW0gY3VzdG9tIFRoZSB1c2VyIGN1c3RvbWl6YXRpb25zLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7ZDNzY2FsZV9zcGVjfSBUaGUgcG93ZXIgc2NhbGUgc3BlY2lmaWNhdGlvbiB3aXRoXHJcbiAqIHVzZXIgc3VwcGxpZWQgb3ZlcnJpZGVzIGFwcGxpZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLnBvd1NjYWxlID0gZnVuY3Rpb24gcG93U2NhbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgICAgICAgIDogJ3BvdycsXHJcbiAgICAnZG9tYWluJyAgICAgIDogWzAsIDEwMF0sXHJcbiAgICAncmFuZ2UnICAgICAgIDogWzAsIDgwMF0sXHJcbiAgICAncmFuZ2VSb3VuZCcgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2ludGVycG9sYXRlJyA6IHVuZGVmaW5lZCxcclxuICAgICdjbGFtcCcgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAnbmljZScgICAgICAgIDogdW5kZWZpbmVkXHJcbiAgfTtcclxuXHJcbiAgdmFyIGNvbmZpZyA9IGRleC5jb25maWcuZXhwYW5kQW5kT3ZlcmxheShjdXN0b20sIGRlZmF1bHRzKTtcclxuICByZXR1cm4gY29uZmlnO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbnN0cnVjdCBhIHNxcnQge2Qzc2NhbGVfc3BlY30gYmFzZWQgb24gcmVhc29uYWJsZVxyXG4gKiBkZWZhdWx0cyB3aXRoIHVzZXIgY3VzdG9taXphdGlvbnMgYXBwbGllZCBvbiB0b3AuXHJcbiAqXHJcbiAqIEBwYXJhbSBjdXN0b20gVGhlIHVzZXIgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3NjYWxlX3NwZWN9IFRoZSBzcXJ0IHNjYWxlIHNwZWNpZmljYXRpb24gd2l0aFxyXG4gKiB1c2VyIHN1cHBsaWVkIG92ZXJyaWRlcyBhcHBsaWVkLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5zcXJ0U2NhbGUgPSBmdW5jdGlvbiBzcXJ0U2NhbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgICAgICAgIDogJ3NxcnQnLFxyXG4gICAgJ2RvbWFpbicgICAgICA6IFswLCAxMDBdLFxyXG4gICAgJ3JhbmdlJyAgICAgICA6IFswLCA4MDBdLFxyXG4gICAgJ3JhbmdlUm91bmQnICA6IHVuZGVmaW5lZCxcclxuICAgICdpbnRlcnBvbGF0ZScgOiB1bmRlZmluZWQsXHJcbiAgICAnY2xhbXAnICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ25pY2UnICAgICAgICA6IHVuZGVmaW5lZFxyXG4gIH07XHJcblxyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoY3VzdG9tLCBkZWZhdWx0cyk7XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBDb25zdHJ1Y3QgYSBsb2cge2Qzc2NhbGVfc3BlY30gYmFzZWQgb24gcmVhc29uYWJsZVxyXG4gKiBkZWZhdWx0cyB3aXRoIHVzZXIgY3VzdG9taXphdGlvbnMgYXBwbGllZCBvbiB0b3AuXHJcbiAqXHJcbiAqIEBwYXJhbSBjdXN0b20gVGhlIHVzZXIgY3VzdG9taXphdGlvbnMuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkM3NjYWxlX3NwZWN9IFRoZSBsb2cgc2NhbGUgc3BlY2lmaWNhdGlvbiB3aXRoXHJcbiAqIHVzZXIgc3VwcGxpZWQgb3ZlcnJpZGVzIGFwcGxpZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmxvZ1NjYWxlID0gZnVuY3Rpb24gbG9nU2NhbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgICAgICAgIDogJ2xvZycsXHJcbiAgICAnZG9tYWluJyAgICAgIDogWzAsIDEwMF0sXHJcbiAgICAncmFuZ2UnICAgICAgIDogWzAsIDgwMF0sXHJcbiAgICAncmFuZ2VSb3VuZCcgIDogdW5kZWZpbmVkLFxyXG4gICAgJ2ludGVycG9sYXRlJyA6IHVuZGVmaW5lZCxcclxuICAgICdjbGFtcCcgICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAnbmljZScgICAgICAgIDogdW5kZWZpbmVkXHJcbiAgfTtcclxuXHJcbiAgdmFyIGxvZ1NwZWMgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoY3VzdG9tLCBkZWZhdWx0cyk7XHJcbiAgcmV0dXJuIGxvZ1NwZWM7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQ29uc3RydWN0IGEgb3JkaW5hbCB7ZDNzY2FsZV9zcGVjfSBiYXNlZCBvbiByZWFzb25hYmxlXHJcbiAqIGRlZmF1bHRzIHdpdGggdXNlciBjdXN0b21pemF0aW9ucyBhcHBsaWVkIG9uIHRvcC5cclxuICpcclxuICogQHBhcmFtIGN1c3RvbSAtIFRoZSB1c2VyIGN1c3RvbWl6YXRpb25zLlxyXG4gKiBAcGFyYW0ge29iamVjdH0gW2N1c3RvbS5yYW5nZVJvdW5kQmFuZHNdIC1cclxuICogQHBhcmFtIHtvYmplY3R9IFtjdXN0b20ucmFuZ2VCYW5kc10gLVxyXG4gKiBAcGFyYW0ge29iamVjdH0gW2N1c3RvbS5yYW5nZVBvaW50c10gLSByYW5nZVBvaW50cyhpbnRlcnZhbCBbLCBwYWRkaW5nXSkgOiBTZXRzIHRoZSBvdXRwdXQgcmFuZ2UgZnJvbSB0aGUgc3BlY2lmaWVkIGNvbnRpbnVvdXNcclxuICogaW50ZXJ2YWwuIFRoZSBhcnJheSBpbnRlcnZhbCBjb250YWlucyB0d28gZWxlbWVudHMgcmVwcmVzZW50aW5nIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtXHJcbiAqIG51bWVyaWMgdmFsdWUuIFRoaXMgaW50ZXJ2YWwgaXMgc3ViZGl2aWRlZCBpbnRvIG4gZXZlbmx5LXNwYWNlZCBwb2ludHMsIHdoZXJlIG4gaXMgdGhlXHJcbiAqIG51bWJlciBvZiAodW5pcXVlKSB2YWx1ZXMgaW4gdGhlIGlucHV0IGRvbWFpbi4gVGhlIGZpcnN0IGFuZCBsYXN0IHBvaW50IG1heSBiZSBvZmZzZXRcclxuICogZnJvbSB0aGUgZWRnZSBvZiB0aGUgaW50ZXJ2YWwgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgcGFkZGluZywgd2hpY2ggZGVmYXVsdHMgdG8gemVyby5cclxuICogVGhlIHBhZGRpbmcgaXMgZXhwcmVzc2VkIGFzIGEgbXVsdGlwbGUgb2YgdGhlIHNwYWNpbmcgYmV0d2VlbiBwb2ludHMuIEEgcmVhc29uYWJsZSB2YWx1ZVxyXG4gKiBpcyAxLjAsIHN1Y2ggdGhhdCB0aGUgZmlyc3QgYW5kIGxhc3QgcG9pbnQgd2lsbCBiZSBvZmZzZXQgZnJvbSB0aGUgbWluaW11bSBhbmQgbWF4aW11bVxyXG4gKiB2YWx1ZSBieSBoYWxmIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHBvaW50cy5cclxuICogQHBhcmFtIHtvYmplY3R9IFtjdXN0b20ucmFuZ2VCYW5kc10gLVxyXG4gKlxyXG4gKiBAcmV0dXJucyB7ZDNzY2FsZV9zcGVjfSBUaGUgb3JkaW5hbCBzY2FsZSBzcGVjaWZpY2F0aW9uIHdpdGhcclxuICogdXNlciBzdXBwbGllZCBvdmVycmlkZXMgYXBwbGllZC5cclxuICpcclxuICovXHJcbmV4cG9ydHMub3JkaW5hbFNjYWxlID0gZnVuY3Rpb24gb3JkaW5hbFNjYWxlKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ3R5cGUnICAgICAgICAgICAgOiAnb3JkaW5hbCcsXHJcbiAgICAnZG9tYWluJyAgICAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICdyYW5nZScgICAgICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3JhbmdlUm91bmRCYW5kcycgOiB1bmRlZmluZWQsXHJcbiAgICAncmFuZ2VQb2ludHMnICAgICA6IHVuZGVmaW5lZCxcclxuICAgICdyYW5nZUJhbmRzJyAgICAgIDogdW5kZWZpbmVkXHJcbiAgfTtcclxuXHJcbiAgdmFyIG9yZGluYWxTcGVjID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBvcmRpbmFsU3BlYztcclxufTtcclxuXHJcbmV4cG9ydHMudGltZVNjYWxlID0gZnVuY3Rpb24gdGltZVNjYWxlKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ3R5cGUnICAgICAgICA6ICd0aW1lJyxcclxuICAgICdkb21haW4nICAgICAgOiB1bmRlZmluZWQsXHJcbiAgICAncmFuZ2UnICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3JhbmdlUm91bmQnICA6IHVuZGVmaW5lZCxcclxuICAgICdpbnRlcnBvbGF0ZScgOiB1bmRlZmluZWQsXHJcbiAgICAnY2xhbXAnICAgICAgIDogdW5kZWZpbmVkLFxyXG4gICAgJ3RpY2tzJyAgICAgICA6IHVuZGVmaW5lZCxcclxuICAgICd0aWNrRm9ybWF0JyAgOiB1bmRlZmluZWRcclxuICB9O1xyXG5cclxuICB2YXIgY29uZmlnID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBjb25maWc7XHJcbn07XHJcblxyXG5leHBvcnRzLnF1YW50aWxlU2NhbGUgPSBmdW5jdGlvbiBxdWFudGlsZVNjYWxlKGN1c3RvbSkge1xyXG4gIHZhciBkZWZhdWx0cyA9XHJcbiAge1xyXG4gICAgJ3R5cGUnICAgOiAncXVhbnRpbGUnLFxyXG4gICAgJ2RvbWFpbicgOiB1bmRlZmluZWQsXHJcbiAgICAncmFuZ2UnICA6IHVuZGVmaW5lZFxyXG4gIH07XHJcblxyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoY3VzdG9tLCBkZWZhdWx0cyk7XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMucXVhbnRpemVTY2FsZSA9IGZ1bmN0aW9uIHF1YW50aXplU2NhbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgICA6ICdxdWFudGl6ZScsXHJcbiAgICAnZG9tYWluJyA6IHVuZGVmaW5lZCxcclxuICAgICdyYW5nZScgIDogdW5kZWZpbmVkXHJcbiAgfTtcclxuXHJcbiAgdmFyIGNvbmZpZyA9IGRleC5jb25maWcuZXhwYW5kQW5kT3ZlcmxheShjdXN0b20sIGRlZmF1bHRzKTtcclxuICByZXR1cm4gY29uZmlnO1xyXG59O1xyXG5cclxuZXhwb3J0cy5pZGVudGl0eVNjYWxlID0gZnVuY3Rpb24gaWRlbnRpdHlTY2FsZShjdXN0b20pIHtcclxuICB2YXIgZGVmYXVsdHMgPVxyXG4gIHtcclxuICAgICd0eXBlJyAgIDogJ2lkZW50aXR5JyxcclxuICAgICdkb21haW4nIDogdW5kZWZpbmVkLFxyXG4gICAgJ3JhbmdlJyAgOiB1bmRlZmluZWRcclxuICB9O1xyXG5cclxuICB2YXIgY29uZmlnID0gZGV4LmNvbmZpZy5leHBhbmRBbmRPdmVybGF5KGN1c3RvbSwgZGVmYXVsdHMpO1xyXG4gIHJldHVybiBjb25maWc7XHJcbn07XHJcblxyXG5leHBvcnRzLnRocmVzaG9sZFNjYWxlID0gZnVuY3Rpb24gdGhyZXNob2xkU2NhbGUoY3VzdG9tKSB7XHJcbiAgdmFyIGRlZmF1bHRzID1cclxuICB7XHJcbiAgICAndHlwZScgICA6ICd0aHJlc2hvbGQnLFxyXG4gICAgJ2RvbWFpbicgOiB1bmRlZmluZWQsXHJcbiAgICAncmFuZ2UnICA6IHVuZGVmaW5lZFxyXG4gIH07XHJcblxyXG4gIHZhciBjb25maWcgPSBkZXguY29uZmlnLmV4cGFuZEFuZE92ZXJsYXkoY3VzdG9tLCBkZWZhdWx0cyk7XHJcbiAgcmV0dXJuIGNvbmZpZztcclxufTtcclxuXHJcbmV4cG9ydHMuY29uZmlndXJlU2NhbGUgPSBmdW5jdGlvbiBjb25maWd1cmVTY2FsZShzY2FsZSwgY29uZmlnKSB7XHJcbiAgaWYgKGNvbmZpZykge1xyXG4gICAgZm9yICh2YXIgcHJvcGVydHkgaW4gY29uZmlnKSB7XHJcbiAgICAgIGRleC5jb25zb2xlLnRyYWNlKFwiQ29uZmlndXJlU2NhbGUgUHJvcGVydHk6ICdcIiArIHByb3BlcnR5ICsgXCInXCIpO1xyXG4gICAgICBpZiAoY29uZmlnLmhhc093blByb3BlcnR5KHByb3BlcnR5KSAmJiBwcm9wZXJ0eSAhPT0gJ3R5cGUnICYmIGNvbmZpZ1twcm9wZXJ0eV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGRleC5jb25zb2xlLnRyYWNlKFwiUHJvcGVydHk6ICdcIiArIHByb3BlcnR5ICsgXCInXCIpO1xyXG4gICAgICAgIGRleC5jb25maWcuY2FsbENvbmRpdGlvbmFsbHkoc2NhbGVbcHJvcGVydHldLCBjb25maWdbcHJvcGVydHldKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICBkZXguY29uc29sZS5kZWJ1ZyhcIk1pc3NpbmcgUHJvcGVydHk6ICdcIiArIHByb3BlcnR5ICsgXCInXCIpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc2NhbGU7XHJcbn07XHJcblxyXG4vL21vZHVsZS5leHBvcnRzID0gY29uZmlnOyIsIi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBjb25zb2xlIGxvZ2dpbmcgY2FwYWJpbGl0aWVzLlxyXG4gKlxyXG4gKiBAbW9kdWxlIGNvbnNvbGVcclxuICpcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogQHR5cGUge3tUUkFDRTogbnVtYmVyLCBERUJVRzogbnVtYmVyLCBOT1JNQUw6IG51bWJlciwgV0FSTjogbnVtYmVyLCBGQVRBTDogbnVtYmVyLCBOT05FOiBudW1iZXJ9fVxyXG4gKi9cclxudmFyIGxvZ0xldmVscyA9IHtcclxuICAnVFJBQ0UnICA6IDUsXHJcbiAgJ0RFQlVHJyAgOiA0LFxyXG4gICdOT1JNQUwnIDogMyxcclxuICAnV0FSTicgICA6IDIsXHJcbiAgJ0ZBVEFMJyAgOiAxLFxyXG4gICdOT05FJyAgIDogMFxyXG59O1xyXG5cclxuZXhwb3J0cy5sb2dMZXZlbHMgPSBsb2dMZXZlbHM7XHJcblxyXG52YXIgbG9nTGV2ZWwgPSBsb2dMZXZlbHMuTk9STUFMO1xyXG5cclxuZXhwb3J0cy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xyXG5cclxuLy8vL1xyXG4vL1xyXG4vLyBkZXguY29uc29sZSA6IFRoaXMgbW9kdWxlIHByb3ZpZGVzIHJvdXRpbmVzIGFzc2lzdGluZyB3aXRoIGNvbnNvbGUgb3V0cHV0LlxyXG4vL1xyXG4vLy8vXHJcblxyXG4vKipcclxuICogTG9nIHRoaXMgbWVzc2FnZSBpZiB0aGUgY3VycmVudCBsb2cgbGV2ZWwgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsXHJcbiAqIHRvIGRleC5jb25zb2xlLmxvZ0xldmVsLlxyXG4gKlxyXG4gKiBAcGFyYW0gbXNnTGV2ZWwgVGhlIGxvZyBsZXZlbCBmb3IgdGhpcyBtZXNzYWdlLlxyXG4gKiBAcGFyYW0gbXNnIE9uZSBvciBtb3JlIG1lc3NhZ2VzIHRvIGJlIGxvZ2dlZC4gIFN0cmluZ3Mgd2lsbCBzaW1wbHlcclxuICogdXNlIGNvbnNvbGUubG9nIHdoaWxlIG9iamVjdHMgd2lsbCB1c2UgY29uc29sZS5kaXIuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkZXguY29uc29sZX1cclxuICovXHJcbmV4cG9ydHMubG9nV2l0aExldmVsID0gZnVuY3Rpb24gKG1zZ0xldmVsLCBtc2cpIHtcclxuLy8gIGNvbnNvbGUubG9nKGRleC5jb25zb2xlLmxvZ0xldmVsKCkpO1xyXG4vLyAgY29uc29sZS5sb2cobXNnTGV2ZWwpO1xyXG4vLyAgY29uc29sZS5kaXIobXNnKTtcclxuXHJcbiAgaWYgKGRleC5jb25zb2xlLmxvZ0xldmVsKCkgPj0gbXNnTGV2ZWwpIHtcclxuICAgIGZvciAoaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHR5cGVvZiBtc2dbaV0gPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zb2xlLmRpcihtc2dbaV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1zZ1tpXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRoaXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBXcml0ZSBvbmUgb3IgbW9yZSBUUkFDRSBsZXZlbCBtZXNzYWdlcy5cclxuICpcclxuICogQHBhcmFtIG1zZyBPbmUgb3IgbW9yZSBUUkFDRSBtZXNzYWdlcyB0byBsb2cuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkZXguY29uc29sZXwqfVxyXG4gKi9cclxuZXhwb3J0cy50cmFjZSA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gZGV4LmNvbnNvbGUubG9nV2l0aExldmVsKGxvZ0xldmVscy5UUkFDRSwgYXJndW1lbnRzKVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlIG9uZSBvciBtb3JlIERFQlVHIGxldmVsIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKiBAcGFyYW0gbXNnIE9uZSBvciBtb3JlIERFQlVHIG1lc3NhZ2VzIHRvIGxvZy5cclxuICpcclxuICogQHJldHVybnMge2RleC5jb25zb2xlfCp9XHJcbiAqL1xyXG5leHBvcnRzLmRlYnVnID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBkZXguY29uc29sZS5sb2dXaXRoTGV2ZWwobG9nTGV2ZWxzLkRFQlVHLCBhcmd1bWVudHMpXHJcbn07XHJcblxyXG4vKipcclxuICogV3JpdGUgb25lIG9yIG1vcmUgTk9STUFMIGxldmVsIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKiBAcGFyYW0gbXNnIE9uZSBvciBtb3JlIE5PUk1BTCBtZXNzYWdlcyB0byBsb2cuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkZXguY29uc29sZXwqfVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5sb2cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgLy9jb25zb2xlLmxvZyhcImNhbGxlciBpcyBcIiArIGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyLnRvU3RyaW5nKCkpO1xyXG4gIHJldHVybiBkZXguY29uc29sZS5sb2dXaXRoTGV2ZWwobG9nTGV2ZWxzLk5PUk1BTCwgYXJndW1lbnRzKVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFdyaXRlIG9uZSBvciBtb3JlIFdBUk4gbGV2ZWwgbWVzc2FnZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBtc2cgT25lIG9yIG1vcmUgV0FSTiBtZXNzYWdlcyB0byBsb2cuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkZXguY29uc29sZXwqfVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy53YXJuID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBkZXguY29uc29sZS5sb2dXaXRoTGV2ZWwobG9nTGV2ZWxzLldBUk4sIGFyZ3VtZW50cylcclxufTtcclxuXHJcbi8qKlxyXG4gKiBXcml0ZSBvbmUgb3IgbW9yZSBGQVRBTCBsZXZlbCBtZXNzYWdlcy5cclxuICpcclxuICogQHBhcmFtIG1zZyBPbmUgb3IgbW9yZSBGQVRBTCBtZXNzYWdlcyB0byBsb2cuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtkZXguY29uc29sZXwqfVxyXG4gKi9cclxuZXhwb3J0cy5mYXRhbCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gZGV4LmNvbnNvbGUubG9nV2l0aExldmVsKGxvZ0xldmVscy5GQVRBTCwgYXJndW1lbnRzKVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgY3VycmVudCBsb2cgbGV2ZWwuXHJcbiAqXHJcbiAqIEByZXR1cm5zIFRoZSBjdXJyZW50IGxvZyBsZXZlbC5cclxuICpcclxuICovXHJcbmV4cG9ydHMubG9nTGV2ZWwgPSBmdW5jdGlvbiAoXykge1xyXG4gIGlmICghYXJndW1lbnRzLmxlbmd0aCkgcmV0dXJuIGxvZ0xldmVsO1xyXG4gIGxvZ0xldmVsID0gbG9nTGV2ZWxzW19dO1xyXG4gIHJldHVybiBsb2dMZXZlbDtcclxufTtcclxuXHJcbmV4cG9ydHMubG9nTGV2ZWxzID0gZnVuY3Rpb24gKCkge1xyXG4gIHJldHVybiBsb2dMZXZlbHM7XHJcbn07XHJcbiIsIi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBzdXBwb3J0IGZvciBkZWFsaW5nIHdpdGggY3N2IHN0cnVjdHVyZXMuICBUaGlzXHJcbiAqIGlzIHRoZSBjb3JlIGRhdGF0eXBlIG9uIHdoaWNoIGRleGpzIGNvbXBvbmVudHMgb3BlcmF0ZS5cclxuICpcclxuICogQG1vZHVsZSBjc3ZcclxuICpcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGhlYWRlclxyXG4gKiBAcGFyYW0gZGF0YVxyXG4gKiBAcmV0dXJucyB7e2hlYWRlcjogKiwgZGF0YTogKn19XHJcbiAqL1xyXG5leHBvcnRzLmNzdiA9IGZ1bmN0aW9uIChoZWFkZXIsIGRhdGEpIHtcclxuICB2YXIgY3N2ID1cclxuICB7XHJcbiAgICBcImhlYWRlclwiOiBoZWFkZXIsXHJcbiAgICBcImRhdGFcIjogZGF0YVxyXG4gIH07XHJcblxyXG4gIHJldHVybiBjc3Y7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcmV0dXJucyB7e2hlYWRlcjogKiwgZGF0YToge2hlYWRlciwgZGF0YX19fVxyXG4gKi9cclxuZXhwb3J0cy50cmFuc3Bvc2UgPSBmdW5jdGlvbiAoY3N2KSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIFwiaGVhZGVyXCI6IGNzdi5oZWFkZXIsXHJcbiAgICBcImRhdGFcIjogZGV4Lm1hdHJpeC50cmFuc3Bvc2UoY3N2LmRhdGEpXHJcbiAgfTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBHaXZlbiBhIENTViwgY3JlYXRlIGEgY29ubmVjdGlvbiBtYXRyaXggc3VpdGFibGUgZm9yIGZlZWRpbmcgaW50byBhIGNob3JkXHJcbiAqIGRpYWdyYW0uICBFeCwgZ2l2ZW4gQ1NWOlxyXG4gKlxyXG4gKiBAcGFyYW0gY3N2XHJcbiAqIEByZXR1cm5zIHt7aGVhZGVyOiBBcnJheSwgY29ubmVjdGlvbnM6IEFycmF5fXwqfVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5nZXRDb25uZWN0aW9uTWF0cml4ID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIHZhciBtYXRyaXggPSBbXTtcclxuICB2YXIgcmksIGNpO1xyXG4gIHZhciByb3c7XHJcbiAgdmFyIGNpZDtcclxuICB2YXIgaGVhZGVyID0gW107XHJcbiAgdmFyIG5hbWVUb0luZGV4ID0ge307XHJcbiAgdmFyIGNvbm5lY3Rpb25NYXRyaXg7XHJcbiAgdmFyIHVuaXF1ZXM7XHJcbiAgdmFyIG5hbWVJbmRpY2VzID0gW107XHJcbiAgdmFyIHNyYywgZGVzdDtcclxuXHJcbiAgLy8gQ3JlYXRlIGEgbGlzdCBvZiB1bmlxdWUgdmFsdWVzIHRvIHJlbGF0ZSB0byBvbmUgYW5vdGhlci5cclxuICB1bmlxdWVzID0gZGV4Lm1hdHJpeC51bmlxdWVzKGNzdi5kYXRhKTtcclxuICAvLyBGbGF0dGVuIHRoZW0gaW50byBvdXIgaGVhZGVyLlxyXG4gIGhlYWRlciA9IGRleC5tYXRyaXguZmxhdHRlbih1bmlxdWVzKTtcclxuXHJcbiAgLy8gQ3JlYXRlIGEgbWFwIG9mIG5hbWVzIHRvIGhlYWRlciBpbmRleCBmb3IgZWFjaCBjb2x1bW4uXHJcbiAgbmFtZVRvSW5kZXggPSBuZXcgQXJyYXkodW5pcXVlcy5sZW5ndGgpO1xyXG4gIGZvciAocmkgPSAwLCBjaWQgPSAwOyByaSA8IHVuaXF1ZXMubGVuZ3RoOyByaSsrKSB7XHJcbiAgICBuYW1lVG9JbmRleFtyaV0gPVxyXG4gICAge307XHJcbiAgICBmb3IgKGNpID0gMDsgY2kgPCB1bmlxdWVzW3JpXS5sZW5ndGg7IGNpKyspIHtcclxuICAgICAgbmFtZVRvSW5kZXhbcmldW2hlYWRlcltjaWRdXSA9IGNpZDtcclxuICAgICAgY2lkICs9IDE7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBDcmVhdGUgYSBOIHggTiBtYXRyaXggb2YgemVybyB2YWx1ZXMuXHJcbiAgbWF0cml4ID0gbmV3IEFycmF5KGhlYWRlci5sZW5ndGgpO1xyXG4gIGZvciAocmkgPSAwOyByaSA8IGhlYWRlci5sZW5ndGg7IHJpKyspIHtcclxuICAgIHJvdyA9IG5ldyBBcnJheShoZWFkZXIubGVuZ3RoKTtcclxuICAgIGZvciAoY2kgPSAwOyBjaSA8IGhlYWRlci5sZW5ndGg7IGNpKyspIHtcclxuICAgICAgcm93W2NpXSA9IDA7XHJcbiAgICB9XHJcbiAgICBtYXRyaXhbcmldID0gcm93O1xyXG4gIH1cclxuICAvL2RleC5jb25zb2xlLmxvZyhcIm5hbWVUb0luZGV4XCIsIG5hbWVUb0luZGV4LCBcIm1hdHJpeFwiLCBtYXRyaXgpO1xyXG5cclxuICBmb3IgKHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpKyspIHtcclxuICAgIGZvciAoY2kgPSAxOyBjaSA8IGNzdi5oZWFkZXIubGVuZ3RoOyBjaSsrKSB7XHJcbiAgICAgIHNyYyA9IG5hbWVUb0luZGV4W2NpIC0gMV1bY3N2LmRhdGFbcmldW2NpIC0gMV1dO1xyXG4gICAgICBkZXN0ID0gbmFtZVRvSW5kZXhbY2ldW2Nzdi5kYXRhW3JpXVtjaV1dO1xyXG5cclxuICAgICAgLy9kZXguY29uc29sZS5sb2coY3N2LmRhdGFbcmldW2NpLTFdICsgXCI8LT5cIiArIGNzdi5kYXRhW3JpXVtjaV0sIHNyYyArIFwiPC0+XCIgKyBkZXN0KTtcclxuICAgICAgbWF0cml4W3NyY11bZGVzdF0gPSAxO1xyXG4gICAgICBtYXRyaXhbZGVzdF1bc3JjXSA9IDE7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25uZWN0aW9uTWF0cml4ID0ge1wiaGVhZGVyXCI6IGhlYWRlciwgXCJjb25uZWN0aW9uc1wiOiBtYXRyaXh9O1xyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiQ29ubmVjdGlvbiBNYXRyaXhcIiwgY29ubmVjdGlvbk1hdHJpeCk7XHJcbiAgcmV0dXJuIGNvbm5lY3Rpb25NYXRyaXg7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcGFyYW0ga2V5SW5kZXhcclxuICogQHJldHVybnMge3t9fVxyXG4gKi9cclxuZXhwb3J0cy5jcmVhdGVNYXAgPSBmdW5jdGlvbiAoY3N2LCBrZXlJbmRleCkge1xyXG4gIHZhciByaSwgY2ksIHJvd01hcCwgbWFwID1cclxuICB7fTtcclxuXHJcbiAgZm9yIChyaSA9IDA7IHJpIDwgY3N2LmRhdGEubGVuZ3RoOyByaSArPSAxKSB7XHJcbiAgICBpZiAoY3N2LmRhdGFbcmldLmxlbmd0aCA9PT0gY3N2LmhlYWRlci5sZW5ndGgpIHtcclxuICAgICAgcm93TWFwID1cclxuICAgICAge307XHJcblxyXG4gICAgICBmb3IgKGNpID0gMDsgY2kgPCBjc3YuaGVhZGVyLmxlbmd0aDsgY2kgKz0gMSkge1xyXG4gICAgICAgIHJvd01hcFtjc3YuaGVhZGVyW2NpXV0gPSBjc3YuZGF0YVtyaV1bY2ldO1xyXG4gICAgICB9XHJcbiAgICAgIG1hcFtjc3YuZGF0YVtyaV1ba2V5SW5kZXhdXSA9IHJvd01hcDtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1hcDtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY3N2XHJcbiAqIEBwYXJhbSByb3dJbmRleFxyXG4gKiBAcGFyYW0gY29sdW1uSW5kZXhcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5leHBvcnRzLnRvSnNvbiA9IGZ1bmN0aW9uIChjc3YsIHJvd0luZGV4LCBjb2x1bW5JbmRleCkge1xyXG4gIHZhciBqc29uRGF0YSA9IFtdO1xyXG4gIHZhciByaSwgY2ksIGpzb25Sb3c7XHJcblxyXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDMpIHtcclxuICAgIGpzb25Sb3cgPSB7fTtcclxuICAgIGpzb25Sb3dbY3N2LmhlYWRlcltjb2x1bW5JbmRleF1dID0gY3N2LmRhdGFbcm93SW5kZXhdW2NvbHVtbkluZGV4XTtcclxuICAgIHJldHVybiBqc29uUm93O1xyXG4gIH1cclxuICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICB2YXIganNvblJvdyA9XHJcbiAgICB7fTtcclxuICAgIGZvciAoY2kgPSAwOyBjaSA8IGNzdi5oZWFkZXIubGVuZ3RoOyBjaSArPSAxKSB7XHJcbiAgICAgIGpzb25Sb3dbY3N2LmhlYWRlcltjaV1dID0gY3N2LmRhdGFbcm93SW5kZXhdW2NpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBqc29uUm93O1xyXG4gIH1cclxuICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICBmb3IgKHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpKyspIHtcclxuICAgICAgdmFyIGpzb25Sb3cgPVxyXG4gICAgICB7fTtcclxuICAgICAgZm9yIChjaSA9IDA7IGNpIDwgY3N2LmhlYWRlci5sZW5ndGg7IGNpKyspIHtcclxuICAgICAgICBqc29uUm93W2Nzdi5oZWFkZXJbY2ldXSA9IGNzdi5kYXRhW3JpXVtjaV07XHJcbiAgICAgICAgLy9kZXguY29uc29sZS5sb2coY3N2LmhlYWRlcltjaV0gKyBcIj1cIiArIGNzdi5kYXRhW3JpXVtjaV0sIGpzb25Sb3cpO1xyXG4gICAgICB9XHJcbiAgICAgIGpzb25EYXRhLnB1c2goanNvblJvdyk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBqc29uRGF0YTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY3N2XHJcbiAqIEByZXR1cm5zIHt7fX1cclxuICovXHJcbmV4cG9ydHMudG9Db2x1bW5BcnJheUpzb24gPSBmdW5jdGlvbiAoY3N2KSB7XHJcbiAgdmFyIGpzb24gPSB7fTtcclxuICB2YXIgcmksIGNpLCBqc29uUm93O1xyXG5cclxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgZm9yIChjaSA9IDA7IGNpIDwgY3N2LmhlYWRlci5sZW5ndGg7IGNpKyspIHtcclxuICAgICAganNvbltjc3YuaGVhZGVyW2NpXV0gPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpKyspIHtcclxuICAgICAgZm9yIChjaSA9IDA7IGNpIDwgY3N2LmhlYWRlci5sZW5ndGg7IGNpKyspIHtcclxuICAgICAgICBqc29uW2Nzdi5oZWFkZXJbY2ldXS5wdXNoKGNzdi5kYXRhW3JpXVtjaV0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4ganNvbjtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY3N2XHJcbiAqIEByZXR1cm5zIHt7aGVhZGVyOiAqLCBkYXRhOiAqfX1cclxuICpcclxuICovXHJcbmV4cG9ydHMuY29weSA9IGZ1bmN0aW9uIChjc3YpIHtcclxuICB2YXIgY29weSA9IHtcclxuICAgICdoZWFkZXInOiBkZXguYXJyYXkuY29weShjc3YuaGVhZGVyKSxcclxuICAgICdkYXRhJzogZGV4Lm1hdHJpeC5jb3B5KGNzdi5kYXRhKVxyXG4gIH07XHJcbiAgcmV0dXJuIGNvcHk7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQSB1dGlsaXR5IHRyYW5zZm9ybSBmb3IgZGVhbGluZyB3aXRoIHNvbWUgb2YgRDMncyBtb3JlIGZpbmlreSBmb3JtYXRzLlxyXG4gKlxyXG4gKiBjc3YgPVxyXG4gKiB7XHJcbiAqIFx0IGhlYWRlciA6IHtDMSxDMixDM30sXHJcbiAqICAgZGF0YSAgIDogW1xyXG4gKiAgICAgW0EsQixDXSxcclxuICogICAgIFtBLEIsRF1cclxuICogICBdXHJcbiAqIH1cclxuICogaW50bzpcclxuICoganNvbiA9XHJcbiAqIHtcclxuICogXHRcIm5hbWVcIiAgICAgOiByb290TmFtZSxcclxuICogIFwiY2F0ZWdvcnlcIiA6IGNhdGVnb3J5LFxyXG4gKiAgXCJjaGlsZHJlblwiIDpcclxuICogIFtcclxuICogICAgXCJjaGlsZHJlblwiIDpcclxuICogICAgIFtcclxuICogICAgICAge1xyXG4gKiAgICAgICAgIFwibmFtZVwiICAgICA6IFwiQVwiLFxyXG4gKiAgICAgICAgIFwiY2F0ZWdvcnlcIiA6IFwiQzFcIixcclxuICogICAgICAgICBcImNoaWxkcmVuXCIgOlxyXG4gKiAgICAgICAgIFtcclxuICogICAgICAgICAgIHtcclxuICogXHQgICAgICAgICAgIFwibmFtZVwiIDogXCJCXCIsXHJcbiAqICAgICAgICAgICAgIFwiY2F0ZWdvcnlcIiA6IFwiQzJcIixcclxuICogICAgICAgICAgICAgXCJjaGlsZHJlblwiIDpcclxuICogICAgICAgICAgICAgW1xyXG4gKiAgICAgICAgICAgICAgIHtcclxuICogICAgICAgICAgICAgICAgIFwibmFtZVwiICAgICA6IFwiQ1wiLFxyXG4gKiAgICAgICAgICAgICAgICAgXCJjYXRlZ29yeVwiIDogXCJDM1wiLFxyXG4gKiAgICAgICAgICAgICAgICAgXCJzaXplXCIgICAgIDogMVxyXG4gKiAgICAgICAgICAgICAgIH1cclxuICogICAgICAgICAgICAgICB7XHJcbiAqICAgICAgICAgICAgICAgICBcIm5hbWVcIiAgICAgOiBcIkRcIixcclxuICogICAgICAgICAgICAgICAgIFwiY2F0ZWdvcnlcIiA6IFwiQzNcIixcclxuICogICAgICAgICAgICAgICAgIFwic2l6ZVwiICAgICA6IDFcclxuICogICAgICAgICAgICAgICB9XHJcbiAqICAgICAgICAgICAgIF1cclxuICogICAgICAgICAgIH1cclxuICogICAgICAgICBdXHJcbiAqICAgICAgIH1cclxuICogICAgIF1cclxuICogIF1cclxuICogfVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY3N2XHJcbiAqL1xyXG5leHBvcnRzLnRvSGllcmFyY2hpY2FsSnNvbiA9IGZ1bmN0aW9uIChjc3YpIHtcclxuICB2YXIgY29ubmVjdGlvbnMgPSBkZXguY3N2LmNvbm5lY3Rpb25zKGNzdik7XHJcbiAgcmV0dXJuIGdldENoaWxkcmVuKGNvbm5lY3Rpb25zLCAwKTtcclxuXHJcbiAgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4oY29ubmVjdGlvbnMsIGRlcHRoKSB7XHJcbiAgICAvL2RleC5jb25zb2xlLmxvZyhcImNvbm5lY3Rpb25zOlwiLCBjb25uZWN0aW9ucywgXCJkZXB0aD1cIitkZXB0aCk7XHJcbiAgICB2YXIga2lkcyA9IFtdLCBjbmFtZTtcclxuXHJcbiAgICBpZiAodHlwZW9mIGNvbm5lY3Rpb25zID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICByZXR1cm4ga2lkcztcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKGNuYW1lIGluIGNvbm5lY3Rpb25zKSB7XHJcbiAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiQ05BTUVcIiwgY25hbWUpO1xyXG4gICAgICBpZiAoY29ubmVjdGlvbnMuaGFzT3duUHJvcGVydHkoY25hbWUpKSB7XHJcbiAgICAgICAga2lkcy5wdXNoKGNyZWF0ZUNoaWxkKGNuYW1lLCBjc3YuaGVhZGVyW2RlcHRoXSxcclxuICAgICAgICAgIGdldENoaWxkcmVuKGNvbm5lY3Rpb25zW2NuYW1lXSwgZGVwdGggKyAxKSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGtpZHM7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVDaGlsZChuYW1lLCBjYXRlZ29yeSwgY2hpbGRyZW4pIHtcclxuICAgIHZhciBjaGlsZCA9XHJcbiAgICB7XHJcbiAgICAgIFwibmFtZVwiOiBuYW1lLFxyXG4gICAgICBcImNhdGVnb3J5XCI6IGNhdGVnb3J5LFxyXG4gICAgICBcImNoaWxkcmVuXCI6IGNoaWxkcmVuXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIGNoaWxkO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUcmFuc2Zvcm1zOlxyXG4gKiBjc3YgPVxyXG4gKiB7XHJcbiAqIFx0IGhlYWRlciA6IHtDMSxDMixDM30sXHJcbiAqICAgZGF0YSAgIDogW1xyXG4gKiAgICAgW0EsQixDXSxcclxuICogICAgIFtBLEIsRF1cclxuICogICBdXHJcbiAqIH1cclxuICogaW50bzpcclxuICogY29ubmVjdGlvbnMgPVxyXG4gKiB7IEE6e0I6e0M6e30sRDp7fX19fVxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY3N2XHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmNvbm5lY3Rpb25zID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIHZhciBjb25uZWN0aW9ucyA9XHJcbiAge307XHJcbiAgdmFyIHJpO1xyXG5cclxuICBmb3IgKHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpKyspIHtcclxuICAgIGRleC5vYmplY3QuY29ubmVjdChjb25uZWN0aW9ucywgY3N2LmRhdGFbcmldKTtcclxuICB9XHJcblxyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiY29ubmVjdGlvbnM6XCIsIGNvbm5lY3Rpb25zKTtcclxuICByZXR1cm4gY29ubmVjdGlvbnM7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcGFyYW0ga2V5SW5kZXhcclxuICogQHJldHVybnMge3t9fVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5jcmVhdGVSb3dNYXAgPSBmdW5jdGlvbiAoY3N2LCBrZXlJbmRleCkge1xyXG4gIHZhciBtYXAgPVxyXG4gIHt9O1xyXG4gIHZhciByaTtcclxuXHJcbiAgZm9yIChyaSA9IDA7IHJpIDwgY3N2LmRhdGEubGVuZ3RoOyByaSsrKSB7XHJcbiAgICBpZiAoY3N2LmRhdGFbcmldLmxlbmd0aCA9PSBjc3YuaGVhZGVyLmxlbmd0aCkge1xyXG4gICAgICBtYXBbY3N2LmRhdGFbcmldW2tleUluZGV4XV0gPSBjc3YuZGF0YVtyaV07XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBtYXA7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcGFyYW0gY29sdW1uc1xyXG4gKiBAcmV0dXJucyB7e319XHJcbiAqL1xyXG5leHBvcnRzLmNvbHVtblNsaWNlID0gZnVuY3Rpb24gKGNzdiwgY29sdW1ucykge1xyXG4gIHZhciBzbGljZSA9IHt9O1xyXG4gIHNsaWNlLmhlYWRlciA9IGRleC5hcnJheS5zbGljZShjc3YuaGVhZGVyLCBjb2x1bW5zKTtcclxuICBzbGljZS5kYXRhID0gZGV4Lm1hdHJpeC5zbGljZShjc3YuZGF0YSwgY29sdW1ucyk7XHJcblxyXG4gIHJldHVybiBzbGljZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY3N2XHJcbiAqIEByZXR1cm5zIHtBcnJheX1cclxuICovXHJcbmV4cG9ydHMuZ2V0TnVtZXJpY0NvbHVtbk5hbWVzID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIHZhciBwb3NzaWJsZU51bWVyaWMgPVxyXG4gIHt9O1xyXG4gIHZhciBpLCBqLCByaSwgY2k7XHJcbiAgdmFyIG51bWVyaWNDb2x1bW5zID0gW107XHJcblxyXG4gIGZvciAoaSA9IDA7IGkgPCBjc3YuaGVhZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBwb3NzaWJsZU51bWVyaWNbY3N2LmhlYWRlcltpXV0gPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgLy8gSXRlcmF0ZSB0aHJ1IHRoZSBkYXRhLCBza2lwIHRoZSBoZWFkZXIuXHJcbiAgZm9yIChyaSA9IDA7IHJpIDwgY3N2LmRhdGEubGVuZ3RoOyByaSsrKSB7XHJcbiAgICBmb3IgKGNpID0gMDsgY2kgPCBjc3YuZGF0YVtyaV0ubGVuZ3RoICYmIGNpIDwgY3N2LmhlYWRlci5sZW5ndGg7IGNpKyspIHtcclxuICAgICAgaWYgKHBvc3NpYmxlTnVtZXJpY1tjc3YuaGVhZGVyW2NpXV0gJiYgIWRleC5vYmplY3QuaXNOdW1lcmljKGNzdi5kYXRhW3JpXVtjaV0pKSB7XHJcbiAgICAgICAgcG9zc2libGVOdW1lcmljW2Nzdi5oZWFkZXJbY2ldXSA9IGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmb3IgKGNpID0gMDsgY2kgPCBjc3YuaGVhZGVyLmxlbmd0aDsgY2krKykge1xyXG4gICAgaWYgKHBvc3NpYmxlTnVtZXJpY1tjc3YuaGVhZGVyW2NpXV0pIHtcclxuICAgICAgbnVtZXJpY0NvbHVtbnMucHVzaChjc3YuaGVhZGVyW2NpXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVtZXJpY0NvbHVtbnM7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAqL1xyXG5leHBvcnRzLmd1ZXNzVHlwZXMgPSBmdW5jdGlvbiAoY3N2KSB7XHJcbiAgdmFyIGkgPSAwO1xyXG4gIHZhciB0ZXN0UmVzdWx0cyA9IFtdO1xyXG4gIGNzdi5oZWFkZXIuZm9yRWFjaChmdW5jdGlvbiAoaGRyKSB7XHJcbiAgICB0ZXN0UmVzdWx0cy5wdXNoKHt9KVxyXG4gIH0pO1xyXG4gIHZhciBudW1Db2xzID0gY3N2LmhlYWRlci5sZW5ndGg7XHJcblxyXG4gIGNzdi5kYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykge1xyXG4gICAgZm9yIChpID0gMDsgaSA8IG51bUNvbHM7IGkrKykge1xyXG5cclxuICAgICAgaWYgKCF0ZXN0UmVzdWx0c1tpXVtcIm5vdERhdGVcIl0pIHtcclxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHJvd1tpXSk7XHJcbiAgICAgICAgaWYgKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgZGV4LmNvbnNvbGUubG9nKFwibm90IGRhdGVcIiArIGkpO1xyXG4gICAgICAgICAgdGVzdFJlc3VsdHNbaV1bXCJub3REYXRlXCJdID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghdGVzdFJlc3VsdHNbaV1bXCJub3ROdW1iZXJcIl0pIHtcclxuICAgICAgICBpZiAoaXNOYU4ocm93W2ldKSkge1xyXG4gICAgICAgICAgdGVzdFJlc3VsdHNbaV1bXCJub3ROdW1iZXJcIl0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICB2YXIgdHlwZXMgPSBbXTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IG51bUNvbHM7IGkrKykge1xyXG4gICAgdmFyIHJlc3VsdHMgPSB0ZXN0UmVzdWx0c1tpXTtcclxuICAgIGlmICghcmVzdWx0cy5ub3REYXRlICYmIHJlc3VsdHMubm90TnVtYmVyKSB7XHJcbiAgICAgIHR5cGVzLnB1c2goJ2RhdGUnKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCFyZXN1bHRzLm5vdE51bWJlcikge1xyXG4gICAgICB0eXBlcy5wdXNoKCdudW1iZXInKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0eXBlcy5wdXNoKCdzdHJpbmcnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB0eXBlcztcclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjc3ZcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5leHBvcnRzLnN0cmljdFR5cGVzID0gZnVuY3Rpb24gc3RyaWN0VHlwZXMoY3N2KSB7XHJcbiAgdmFyIHR5cGVzID0gZGV4LmNzdi5ndWVzc1R5cGVzKGNzdik7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmICh0eXBlc1tpXSA9PSAnZGF0ZScpIHtcclxuICAgICAgY3N2LmRhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93LCByaSkge1xyXG4gICAgICAgIGRleC5jb25zb2xlLmxvZyhcInJvd1tcIiArIHJpICsgXCJdPVwiICsgcm93W3JpXSk7XHJcbiAgICAgICAgY3N2LmRhdGFbcmldW2ldID0gbmV3IERhdGUoY3N2LmRhdGFbcmldW2ldKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBpZiAodHlwZXNbaV0gPT0gJ251bWJlcicpIHtcclxuICAgICAgICBjc3YuZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChyb3csIHJpKSB7XHJcbiAgICAgICAgICBkZXguY29uc29sZS5sb2coXCJyb3dbXCIgKyByaSArIFwiXT1cIiArIHJvd1tyaV0pO1xyXG4gICAgICAgICAgY3N2LmRhdGFbcmldW2ldID0gbmV3IERvdWJsZShjc3YuZGF0YVtyaV1baV0pO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBjc3Y7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAqL1xyXG5leHBvcnRzLmdldE51bWVyaWNJbmRpY2VzID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIHZhciBwb3NzaWJsZU51bWVyaWMgPVxyXG4gIHt9O1xyXG4gIHZhciBpLCBqO1xyXG4gIHZhciBudW1lcmljSW5kaWNlcyA9IFtdO1xyXG5cclxuICBmb3IgKGkgPSAwOyBpIDwgY3N2LmhlYWRlci5sZW5ndGg7IGkrKykge1xyXG4gICAgcG9zc2libGVOdW1lcmljW2Nzdi5oZWFkZXJbaV1dID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIC8vIEl0ZXJhdGUgdGhydSB0aGUgZGF0YSwgc2tpcCB0aGUgaGVhZGVyLlxyXG4gIGZvciAoaSA9IDE7IGkgPCBjc3YuZGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgZm9yIChqID0gMDsgaiA8IGNzdi5kYXRhW2ldLmxlbmd0aCAmJiBqIDwgY3N2LmhlYWRlci5sZW5ndGg7IGorKykge1xyXG4gICAgICBpZiAocG9zc2libGVOdW1lcmljW2Nzdi5oZWFkZXJbal1dICYmICFkZXgub2JqZWN0LmlzTnVtZXJpYyhjc3YuZGF0YVtpXVtqXSkpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNzdi5oZWFkZXJbXCIgKyBqICsgXCJdPVwiICsgY3N2LmhlYWRlcltqXSArIFwiIGlzIG5vdCBudW1lcmljIGR1ZSB0byBjc3YuZGF0YVtcIiArIGkgKyBcIl1bXCJcclxuICAgICAgICAgICsgaiArIFwiXT1cIiArIGNzdi5kYXRhW2ldW2pdKTtcclxuICAgICAgICBwb3NzaWJsZU51bWVyaWNbY3N2LmhlYWRlcltqXV0gPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGNzdi5oZWFkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmIChwb3NzaWJsZU51bWVyaWNbY3N2LmhlYWRlcltpXV0pIHtcclxuICAgICAgbnVtZXJpY0luZGljZXMucHVzaChpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBudW1lcmljSW5kaWNlcztcclxufTtcclxuXHJcbmV4cG9ydHMuZ2V0Q2F0ZWdvcmljYWxJbmRpY2VzID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIHZhciBwb3NzaWJsZU51bWVyaWMgPVxyXG4gIHt9O1xyXG4gIHZhciBpLCBqO1xyXG4gIHZhciBjYXRlZ29yaWNhbEluZGljZXMgPSBbXTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGNzdi5oZWFkZXIubGVuZ3RoOyBpKyspIHtcclxuICAgIHBvc3NpYmxlTnVtZXJpY1tjc3YuaGVhZGVyW2ldXSA9IHRydWU7XHJcbiAgfVxyXG5cclxuICAvLyBJdGVyYXRlIHRocnUgdGhlIGRhdGEsIHNraXAgdGhlIGhlYWRlci5cclxuICBmb3IgKGkgPSAxOyBpIDwgY3N2LmRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgIGZvciAoaiA9IDA7IGogPCBjc3YuZGF0YVtpXS5sZW5ndGggJiYgaiA8IGNzdi5oZWFkZXIubGVuZ3RoOyBqKyspIHtcclxuICAgICAgaWYgKHBvc3NpYmxlTnVtZXJpY1tjc3YuaGVhZGVyW2pdXSAmJiAhZGV4Lm9iamVjdC5pc051bWVyaWMoY3N2LmRhdGFbaV1bal0pKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJjc3YuaGVhZGVyW1wiICsgaiArIFwiXT1cIiArIGNzdi5oZWFkZXJbal0gKyBcIiBpcyBub3QgbnVtZXJpYyBkdWUgdG8gY3N2LmRhdGFbXCIgKyBpICsgXCJdW1wiXHJcbiAgICAgICAgICArIGogKyBcIl09XCIgKyBjc3YuZGF0YVtpXVtqXSk7XHJcbiAgICAgICAgcG9zc2libGVOdW1lcmljW2Nzdi5oZWFkZXJbal1dID0gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvciAoaSA9IDA7IGkgPCBjc3YuaGVhZGVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoIXBvc3NpYmxlTnVtZXJpY1tjc3YuaGVhZGVyW2ldXSkge1xyXG4gICAgICBjYXRlZ29yaWNhbEluZGljZXMucHVzaChpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBjYXRlZ29yaWNhbEluZGljZXM7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcGFyYW0gY29sdW1uTnVtXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZXhwb3J0cy5pc0NvbHVtbk51bWVyaWMgPSBmdW5jdGlvbiAoY3N2LCBjb2x1bW5OdW0pIHtcclxuICB2YXIgaTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IGNzdi5kYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoIWRleC5vYmplY3QuaXNOdW1lcmljKGNzdi5kYXRhW2ldW2NvbHVtbk51bV0pKSB7XHJcbiAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcGFyYW0gY29sdW1uc1xyXG4gKiBAcmV0dXJucyB7Kn1cclxuICovXHJcbmV4cG9ydHMuZ3JvdXAgPSBmdW5jdGlvbiAoY3N2LCBjb2x1bW5zKSB7XHJcbiAgdmFyIHJpLCBjaTtcclxuICB2YXIgZ3JvdXBzID0ge307XHJcbiAgdmFyIHJldHVybkdyb3VwcyA9IFtdO1xyXG4gIHZhciB2YWx1ZXM7XHJcbiAgdmFyIGtleTtcclxuICB2YXIgb3RoZXJDb2x1bW5zO1xyXG4gIHZhciBvdGhlckhlYWRlcnM7XHJcbiAgdmFyIGdyb3VwTmFtZTtcclxuXHJcbiAgaWYgKGFyZ3VtZW50cyA8IDIpIHtcclxuICAgIHJldHVybiBjc3Y7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21wYXJlKGEsIGIpIHtcclxuICAgIHZhciBzaSwgaDtcclxuXHJcbiAgICBmb3IgKHNpID0gMDsgc2kgPCBjb2x1bW5zLmxlbmd0aDsgc2krKykge1xyXG4gICAgICBoID0gY3N2LmhlYWRlcltjb2x1bW5zW3NpXV1cclxuICAgICAgaWYgKGFbaF0gPCBiW2hdKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2UgaWYgKGFbaF0gPiBiW2hdKSB7XHJcbiAgICAgICAgcmV0dXJuIDFcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAwO1xyXG4gIH1cclxuXHJcbiAgLy9vdGhlckNvbHVtbnMgPSBkZXguYXJyYXkuZGlmZmVyZW5jZShkZXgucmFuZ2UoMCwgY3N2LmhlYWRlci5sZW5ndGgpLCBjb2x1bW5zKTtcclxuICAvL290aGVySGVhZGVycyA9IGRleC5hcnJheS5zbGljZShjc3YuaGVhZGVyLCBvdGhlckNvbHVtbnMpO1xyXG5cclxuICBmb3IgKHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpICs9IDEpIHtcclxuICAgIHZhbHVlcyA9IGRleC5hcnJheS5zbGljZShjc3YuZGF0YVtyaV0sIGNvbHVtbnMpO1xyXG4gICAga2V5ID0gdmFsdWVzLmpvaW4oJzo6OicpO1xyXG5cclxuICAgIGlmIChncm91cHNba2V5XSkge1xyXG4gICAgICBncm91cCA9IGdyb3Vwc1trZXldO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgIC8vZ3JvdXAgPSB7ICdjc3YnIDogZGV4LmNzdi5jc3Yob3RoZXJIZWFkZXJzLCBbXSkgfTtcclxuICAgICAgZ3JvdXAgPVxyXG4gICAgICB7XHJcbiAgICAgICAgJ2tleSc6IGtleSxcclxuICAgICAgICAndmFsdWVzJzogW10sXHJcbiAgICAgICAgJ2Nzdic6IGRleC5jc3YuY3N2KGNzdi5oZWFkZXIsIFtdKVxyXG4gICAgICB9O1xyXG4gICAgICBmb3IgKGNpID0gMDsgY2kgPCB2YWx1ZXMubGVuZ3RoOyBjaSsrKSB7XHJcbiAgICAgICAgZ3JvdXAudmFsdWVzLnB1c2goeyduYW1lJzogY3N2LmhlYWRlcltjb2x1bW5zW2NpXV0sICd2YWx1ZSc6IHZhbHVlc1tjaV19KTtcclxuICAgICAgfVxyXG4gICAgICBncm91cHNba2V5XSA9IGdyb3VwO1xyXG4gICAgfVxyXG4gICAgLy9ncm91cC5jc3YuZGF0YS5wdXNoKGRleC5hcnJheS5zbGljZShjc3YuZGF0YVtyaV0sIG90aGVyQ29sdW1ucykpO1xyXG4gICAgZ3JvdXAuY3N2LmRhdGEucHVzaChjc3YuZGF0YVtyaV0pO1xyXG4gICAgLy9ncm91cHNba2V5XSA9IGdyb3VwO1xyXG4gIH1cclxuXHJcbiAgZm9yIChncm91cE5hbWUgaW4gZ3JvdXBzKSB7XHJcbiAgICBpZiAoZ3JvdXBzLmhhc093blByb3BlcnR5KGdyb3VwTmFtZSkpIHtcclxuICAgICAgcmV0dXJuR3JvdXBzLnB1c2goZ3JvdXBzW2dyb3VwTmFtZV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJldHVybkdyb3Vwcy5zb3J0KGNvbXBhcmUpO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjc3ZcclxuICogQHBhcmFtIGZ1bmNcclxuICovXHJcbmV4cG9ydHMudmlzaXRDZWxscyA9IGZ1bmN0aW9uIChjc3YsIGZ1bmMpIHtcclxuICB2YXIgY2ksIHJpO1xyXG5cclxuICBmb3IgKHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpKyspIHtcclxuICAgIGZvciAoY2kgPSAwOyBjaSA8IGNzdi5oZWFkZXIubGVuZ3RoOyBjaSsrKSB7XHJcbiAgICAgIGZ1bmMoY2ksIHJpLCBjc3YuZGF0YVtyaV1bY2ldKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNzdlxyXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gKi9cclxuZXhwb3J0cy5sb25nZXN0V29yZCA9IGZ1bmN0aW9uIChjc3YpIHtcclxuICB2YXIgbG9uZ2VzdCA9IDA7XHJcbiAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgY3N2LmRhdGEubGVuZ3RoOyByb3crKykge1xyXG4gICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgY3N2LmRhdGFbcm93XS5sZW5ndGg7IGNvbCsrKSB7XHJcbiAgICAgIGlmIChsb25nZXN0IDwgY3N2LmRhdGFbcm93XVtjb2xdLmxlbmd0aCkge1xyXG4gICAgICAgIGxvbmdlc3QgPSBjc3YuZGF0YVtyb3ddW2NvbF0ubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBsb25nZXN0O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBjc3ZcclxuICogQHJldHVybnMge3t9fCp9XHJcbiAqL1xyXG5leHBvcnRzLm51bWVyaWNTdWJzZXQgPSBmdW5jdGlvbiAoY3N2KSB7XHJcbiAgcmV0dXJuIGRleC5jc3YuY29sdW1uU2xpY2UoY3N2LCBkZXguY3N2LmdldE51bWVyaWNJbmRpY2VzKGNzdikpO1xyXG59O1xyXG5cclxuZXhwb3J0cy5jYXRlZ29yaWNhbFN1YnNldCA9IGZ1bmN0aW9uIChjc3YpIHtcclxuICByZXR1cm4gZGV4LmNzdi5jb2x1bW5TbGljZShjc3YsIGRleC5jc3YuZ2V0Q2F0ZWdvcmljYWxJbmRpY2VzKGNzdikpO1xyXG59O1xyXG5cclxuLypcclxuIHZhciBkYXRhID1cclxuXHJcbiAqL1xyXG5leHBvcnRzLnRvSnNvbkhpZXJhcmNoeSA9IGZ1bmN0aW9uIChjc3YsIGNpKSB7XHJcbiAgLy8gSWYgMSBhcmd1bWVudCwgdGhlbiBzZXR1cCBhbmQgY2FsbCB3aXRoIDIuXHJcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkge1xyXG4gICAgdmFyIHJlc3VsdCA9IHsnbmFtZSc6ICdyb290JywgY2hpbGRyZW46IGRleC5jc3YudG9Kc29uSGllcmFyY2h5KGNzdiwgMCl9O1xyXG4gICAgZGV4LmNvbnNvbGUubG9nKFwiUkVTVUxUXCIsIHJlc3VsdCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcclxuICAgIHZhciB2YWx1ZU1hcCA9IHt9O1xyXG5cclxuICAgIGZvciAodmFyIHJpID0gMDsgcmkgPCBjc3YuZGF0YS5sZW5ndGg7IHJpKyspIHtcclxuICAgICAgaWYgKHZhbHVlTWFwLmhhc093blByb3BlcnR5KGNzdi5kYXRhW3JpXVtjaV0pKSB7XHJcbiAgICAgICAgdmFsdWVNYXBbY3N2LmRhdGFbcmldW2NpXV0rKztcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICB2YWx1ZU1hcFtjc3YuZGF0YVtyaV1bY2ldXSA9IDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2kgPj0gY3N2LmhlYWRlci5sZW5ndGggLSAxKSB7XHJcbiAgICAgIHJldHVybiBfLmtleXModmFsdWVNYXApLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsnbmFtZSc6IGtleSwgJ3NpemUnOiB2YWx1ZU1hcFtrZXldfTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgcmV0dXJuIF8ua2V5cyh2YWx1ZU1hcCkubWFwKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgICAgICByZXR1cm4geyduYW1lJzoga2V5LCAnc2l6ZSc6IHZhbHVlTWFwW2tleV19O1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5leHBvcnRzLmdldEdyYXBoID0gZnVuY3Rpb24gKGNzdikge1xyXG5cclxuICB2YXIgbm9kZXMgPSBbXTtcclxuICB2YXIgbGlua3MgPSBbXTtcclxuICB2YXIgbm9kZU51bSA9IDA7XHJcbiAgdmFyIGluZGV4TWFwID0gW107XHJcblxyXG4gIC8vIFJlY29yZCB1bmlxdWVzIGFjcm9zcyB0aGUgZGF0YSwgdHJlYXRpbmcgZWFjaCBjb2x1bW4gYXMgaXQncyBvd24gbmFtZXNwYWNlLlxyXG4gIGNzdi5oZWFkZXIubWFwKGZ1bmN0aW9uIChjb2wsIGNpKSB7XHJcbiAgICBpbmRleE1hcC5wdXNoKHt9KTtcclxuICAgIGNzdi5kYXRhLm1hcChmdW5jdGlvbiAocm93LCByaSkge1xyXG4gICAgICBpZiAoXy5pc1VuZGVmaW5lZChpbmRleE1hcFtjaV1bcm93W2NpXV0pKVxyXG4gICAgICB7XHJcbiAgICAgICAgaW5kZXhNYXBbY2ldW3Jvd1tjaV1dPSBub2RlTnVtO1xyXG4gICAgICAgIG5vZGVzLnB1c2goeyduYW1lJyA6IHJvd1tjaV19KTtcclxuICAgICAgICBub2RlTnVtKys7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBmb3IgKHZhciBjaT0xOyBjaTxjc3YuaGVhZGVyLmxlbmd0aDsgY2krKylcclxuICB7XHJcbiAgICBjc3YuZGF0YS5tYXAoZnVuY3Rpb24gKHJvdywgcmkpIHtcclxuICAgICAgbGlua3MucHVzaCh7ICdzb3VyY2UnIDogaW5kZXhNYXBbY2ktMV1bcm93W2NpLTFdXSwgJ3RhcmdldCcgOiBpbmRleE1hcFtjaV1bcm93W2NpXV0sICd2YWx1ZScgOiAxfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiTk9ERVNcIiwgbm9kZXMsIGxpbmtzLCBpbmRleE1hcCk7XHJcbiAgcmV0dXJuIHsgJ25vZGVzJyA6IG5vZGVzLCAnbGlua3MnIDogbGlua3MgfTtcclxufTtcclxuXHJcbmV4cG9ydHMudG9OZXN0ZWRKc29uID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIGRleC5jb25zb2xlLmxvZyhcIkNNQVBcIiwgZGV4LmNzdi5nZXRDb25uZWN0aW9uTWFwKGNzdikpO1xyXG4gIHZhciByZXN1bHQgPSB7J25hbWUnOiBjc3YuaGVhZGVyWzBdLCAnY2hpbGRyZW4nOiBkZXguY3N2LnRvTmVzdGVkSnNvbkNoaWxkcmVuKGRleC5jc3YuZ2V0Q29ubmVjdGlvbk1hcChjc3YpKX07XHJcbiAgZGV4LmNvbnNvbGUubG9nKFwiUkVTVUxUXCIsIHJlc3VsdCk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuXHJcbmV4cG9ydHMudG9OZXN0ZWRKc29uQ2hpbGRyZW4gPSBmdW5jdGlvbiAoY21hcCkge1xyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiQ01BUFwiLCBjbWFwKTtcclxuICB2YXIgY2hpbGRyZW4gPSBbXTtcclxuXHJcbiAgXy5rZXlzKGNtYXApLm1hcChmdW5jdGlvbiAoa2V5KSB7XHJcbiAgICB2YXIgY2hpbGRNYXAgPSBjbWFwW2tleV07XHJcbiAgICBpZiAoXy5rZXlzKGNoaWxkTWFwKS5sZW5ndGggPD0gMCkge1xyXG4gICAgICBjaGlsZHJlbi5wdXNoKHsnbmFtZSc6IGtleSwgJ3NpemUnOiAxMDAwfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgaWYgKF8ua2V5cyhjaGlsZE1hcCkubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAvL3ZhciBncmFuZENoaWxkTWFwID0gY2hpbGRNYXBbXy5rZXlzKGNoaWxkTWFwKVswXV07XHJcblxyXG4gICAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiR0NNQVBcIiwgZ3JhbmRDaGlsZE1hcCk7XHJcbiAgICAgICAgLy9pZiAoXy5rZXlzKGdyYW5kQ2hpbGRNYXApLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgLy8gIGNoaWxkcmVuLnB1c2goeyduYW1lJzoga2V5LCAnc2l6ZSc6IDEwMH0pO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICAgIC8vZWxzZSB7XHJcbiAgICAgICAgY2hpbGRyZW4ucHVzaCh7J25hbWUnOiBrZXksICdjaGlsZHJlbic6IGRleC5jc3YudG9OZXN0ZWRKc29uQ2hpbGRyZW4oY21hcFtrZXldKX0pO1xyXG4gICAgICAgIC8vfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIGNoaWxkcmVuLnB1c2goeyduYW1lJzoga2V5LCAnY2hpbGRyZW4nOiBkZXguY3N2LnRvTmVzdGVkSnNvbkNoaWxkcmVuKGNtYXBba2V5XSl9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgcmV0dXJuIGNoaWxkcmVuO1xyXG59O1xyXG5cclxuZXhwb3J0cy5nZXRDb25uZWN0aW9uTWFwID0gZnVuY3Rpb24gKGNzdikge1xyXG4gIHZhciByb290TWFwID0ge307XHJcbiAgdmFyIGN1ck1hcCA9IHt9XHJcblxyXG4gIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IGNzdi5kYXRhLmxlbmd0aDsgcm93KyspIHtcclxuICAgIGN1ck1hcCA9IHJvb3RNYXA7XHJcblxyXG4gICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgY3N2LmhlYWRlci5sZW5ndGg7IGNvbCsrKSB7XHJcbiAgICAgIGlmICghXy5oYXMoY3VyTWFwLCBjc3YuZGF0YVtyb3ddW2NvbF0pKSB7XHJcbiAgICAgICAgY3VyTWFwW2Nzdi5kYXRhW3Jvd11bY29sXV0gPSB7fTtcclxuICAgICAgfVxyXG4gICAgICBjdXJNYXAgPSBjdXJNYXBbY3N2LmRhdGFbcm93XVtjb2xdXTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiByb290TWFwO1xyXG59OyIsIi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1vZHVsZSBwcm92aWRlcyBzdXBwb3J0IGZvciBjcmVhdGluZyB2YXJpb3VzIGRhdGFzZXRzLlxyXG4gKlxyXG4gKiBAbW9kdWxlIGRhdGFnZW5cclxuICpcclxuICovXHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG1hdHJpeCBvZiByYW5kb20gaW50ZWdlcnMgd2l0aGluIHRoZSBzcGVjaWZpZWQgcmFuZ2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBzcGVjIFRoZSBtYXRyaXggc3BlY2lmaWNhdGlvbi4gIEV4OiBcXHtyb3dzOjEwLCBjb2x1bW5zOiA0LCBtaW46IDAsIG1heDoxMDBcXH1cclxuICpcclxuICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBjb250YWluaW5nIHNwZWMucm93cyBudW1iZXIgb2Ygcm93cy4gIEVhY2ggcm93IGNvbnNpc3Rpbmcgb2ZcclxuICogYW4gYXJyYXkgY29udGFpbmluZyBzcGVjLmNvbHVtbnMgZWxlbWVudHMuICBFYWNoIGVsZW1lbnQgaXMgYSByYW5kb21seSBnZW5lcmF0ZWQgaW50ZWdlclxyXG4gKiB3aXRoaW4gdGhlIHJhbmdlIFtzcGVjLm1pbiwgc3BlYy5tYXhdXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLnJhbmRvbU1hdHJpeCA9IGZ1bmN0aW9uIChzcGVjKSB7XHJcbiAgdmFyIHJpLCBjaTtcclxuXHJcbiAgLy97cm93czoxMCwgY29sdW1uczogNCwgbWluLCAwLCBtYXg6MTAwfSlcclxuICB2YXIgbWF0cml4ID0gW107XHJcbiAgdmFyIHJhbmdlID0gc3BlYy5tYXggLSBzcGVjLm1pbjtcclxuICBmb3IgKHJpID0gMDsgcmkgPCBzcGVjLnJvd3M7IHJpKyspIHtcclxuICAgIHZhciByb3cgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNpID0gMDsgY2kgPCBzcGVjLmNvbHVtbnM7IGNpKyspIHtcclxuICAgICAgcm93LnB1c2goTWF0aC5yYW5kb20oKSAqIHJhbmdlICsgc3BlYy5taW4pO1xyXG4gICAgfVxyXG4gICAgbWF0cml4LnB1c2gocm93KTtcclxuICB9XHJcbiAgcmV0dXJuIG1hdHJpeDtcclxufTtcclxuXHJcbmV4cG9ydHMucmFuZG9tSW5kZXhlZE1hdHJpeCA9IGZ1bmN0aW9uIChzcGVjKSB7XHJcbiAgdmFyIHJpLCBjaTtcclxuXHJcbiAgLy97cm93czoxMCwgY29sdW1uczogNCwgbWluLCAwLCBtYXg6MTAwfSlcclxuICB2YXIgbWF0cml4ID0gW107XHJcbiAgdmFyIHJhbmdlID0gc3BlYy5tYXggLSBzcGVjLm1pbjtcclxuICBmb3IgKHJpID0gMDsgcmkgPCBzcGVjLnJvd3M7IHJpKyspIHtcclxuICAgIHZhciByb3cgPSBbXTtcclxuXHJcbiAgICByb3cucHVzaChyaSsxKTtcclxuICAgIGZvciAoY2kgPSAwOyBjaSA8IHNwZWMuY29sdW1ucyAtIDE7IGNpKyspIHtcclxuICAgICAgcm93LnB1c2goTWF0aC5yYW5kb20oKSAqIHJhbmdlICsgc3BlYy5taW4pO1xyXG4gICAgfVxyXG4gICAgbWF0cml4LnB1c2gocm93KTtcclxuICB9XHJcbiAgcmV0dXJuIG1hdHJpeDtcclxufTtcclxuXHJcbmV4cG9ydHMucmFuZG9tSW50ZWdlck1hdHJpeCA9IGZ1bmN0aW9uIChzcGVjKSB7XHJcbiAgdmFyIHJpLCBjaTtcclxuXHJcbiAgLy97cm93czoxMCwgY29sdW1uczogNCwgbWluLCAwLCBtYXg6MTAwfSlcclxuICB2YXIgbWF0cml4ID0gW107XHJcbiAgdmFyIHJhbmdlID0gc3BlYy5tYXggLSBzcGVjLm1pbjtcclxuICBmb3IgKHJpID0gMDsgcmkgPCBzcGVjLnJvd3M7IHJpKyspIHtcclxuICAgIHZhciByb3cgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNpID0gMDsgY2kgPCBzcGVjLmNvbHVtbnM7IGNpKyspIHtcclxuICAgICAgcm93LnB1c2goTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogcmFuZ2UgKyBzcGVjLm1pbikpO1xyXG4gICAgfVxyXG4gICAgbWF0cml4LnB1c2gocm93KTtcclxuICB9XHJcbiAgcmV0dXJuIG1hdHJpeDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbWF0cml4IG9mIHJhbmRvbSBpbnRlZ2VycyB3aXRoaW4gdGhlIHNwZWNpZmllZCByYW5nZS5cclxuICpcclxuICogQHBhcmFtIHNwZWMgVGhlIG1hdHJpeCBzcGVjaWZpY2F0aW9uLiAgRXg6IFxce3Jvd3M6MTAsIGNvbHVtbnM6NCBcXH1cclxuICpcclxuICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBjb250YWluaW5nIHNwZWMucm93cyBudW1iZXIgb2Ygcm93cy4gIEVhY2ggcm93IGNvbnNpc3Rpbmcgb2ZcclxuICogYW4gYXJyYXkgY29udGFpbmluZyBzcGVjLmNvbHVtbnMgZWxlbWVudHMuICBFYWNoIGVsZW1lbnQgaXMgYSByYW5kb21seSBnZW5lcmF0ZWQgaW50ZWdlclxyXG4gKiB3aXRoaW4gdGhlIHJhbmdlIFtzcGVjLm1pbiwgc3BlYy5tYXhdXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmlkZW50aXR5Q3N2ID0gZnVuY3Rpb24gKHNwZWMpIHtcclxuICB2YXIgcmksIGNpO1xyXG4gIHZhciBjc3YgPSB7fTtcclxuICBjc3YuaGVhZGVyID0gZGV4LmRhdGFnZW4uaWRlbnRpdHlIZWFkZXIoc3BlYyk7XHJcbiAgY3N2LmRhdGEgPSBkZXguZGF0YWdlbi5pZGVudGl0eU1hdHJpeChzcGVjKTtcclxuICByZXR1cm4gY3N2O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGFuIGlkZW50aXR5IGZ1bmN0aW9uIG1lZXRpbmcgdGhlIHN1cHBsaWVkXHJcbiAqIHNwZWNpZmljYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSBzcGVjIC0gVGhlIGlkZW50aXR5TWF0cml4IHNwZWNpZmljYXRpb24uXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGVjLnJvd3MgLSBUaGUgbnVtYmVyIG9mIHJvd3MgdG8gZ2VuZXJhdGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzcGVjLmNvbHVtbnMgLSBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgdG8gZ2VuZXJhdGUuXHJcbiAqIEBleGFtcGxlIHtAbGFuZyBqYXZhc2NyaXB0fVxyXG4gKiAvLyBSZXR1cm5zOiBbWydSMUMxJywgJ1IxQzInIF0sIFsnUjJDMScsICdSMkMyJ10sIFsnUjNDMScsICdSM0MyJ11dXHJcbiAqIGlkZW50aXR5TWF0cml4KHtyb3dzOiAzLCBjb2x1bW5zOiAyfSk7XHJcbiAqIEByZXR1cm5zIHttYXRyaXh9XHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmlkZW50aXR5TWF0cml4ID0gZnVuY3Rpb24gKHNwZWMpIHtcclxuICB2YXIgcmksIGNpO1xyXG5cclxuICAvLyB7IHJvd3M6MTAsIGNvbHVtbnM6NCB9KVxyXG4gIHZhciBtYXRyaXggPSBbXTtcclxuICBmb3IgKHJpID0gMDsgcmkgPCBzcGVjLnJvd3M7IHJpKyspIHtcclxuICAgIHZhciByb3cgPSBbXTtcclxuXHJcbiAgICBmb3IgKGNpID0gMDsgY2kgPCBzcGVjLmNvbHVtbnM7IGNpKyspIHtcclxuICAgICAgcm93LnB1c2goXCJSXCIgKyAocmkgKyAxKSArIFwiQ1wiICsgKGNpICsgMSkpO1xyXG4gICAgfVxyXG4gICAgbWF0cml4LnB1c2gocm93KTtcclxuICB9XHJcbiAgcmV0dXJuIG1hdHJpeDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIGlkZW50aXR5IGhlYWRlciBhcnJheS5cclxuICpcclxuICogQHBhcmFtIHNwZWMgLSBUaGUgc3BlY2lmaWNhdGlvbiBmb3IgdGhlIGhlYWRlciBhcnJheS5cclxuICogQHBhcmFtIHNwZWMuY29sdW1ucyAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBnZW5lcmF0ZS5cclxuICogQGV4YW1wbGVcclxuICogLy8gUmV0dXJuczogWyAnQzEnLCAnQzInLCAnQzMnIF1cclxuICogaWRlbnRpdHlIZWFkZXIoeyBjb2x1bW5zOiAzIH0pO1xyXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHNwZWNpZmllZCBjb2x1bW5zLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5pZGVudGl0eUhlYWRlciA9IGZ1bmN0aW9uIChzcGVjKSB7XHJcbiAgcmV0dXJuIGRleC5yYW5nZSgxLCBzcGVjLmNvbHVtbnMpLm1hcChmdW5jdGlvbiAoaSkge1xyXG4gICAgcmV0dXJuIFwiQ1wiICsgaTtcclxuICB9KTtcclxufTtcclxuIiwiLyoqXHJcbiAqXHJcbiAqIFRoaXMgbW9kdWxlIHByb3ZpZGVzIHJvdXRpbmVzIGRlYWxpbmcgd2l0aCBqc29uIGRhdGEuXHJcbiAqXHJcbiAqIEBtb2R1bGUganNvblxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBDb252ZXJ0cyBKU09OIGFuZCBhIGhlYWRlciB0byBhIENTViBmaWxlLiAgSXQgaXMgdXNlZCBmb3IgcGFyYWxsZWwgY29vcmRpbmF0ZSBicnVzaFxyXG4gKiBldmVudHMgd2hlcmUgdGhlIHNlbGVjdGVkIGJydXNoIG11c3QgYmUgcHVibGlzaGVkIHRvIGV2ZW50cyBhcyBhIGNzdi5cclxuICpcclxuICogRm9yIGV4YW1wbGUsIGdpdmVuOlxyXG4gKlxyXG4gKiBqc29uICAgPSBbIHsgQTogMSwgQjogMywgQzogNSwgRDogNyB9LFxyXG4gKiAgICAgICAgICAgIHsgQTogMiwgQjogNCwgQzogNiwgRDogOCB9IF07XHJcbiAqIGhlYWRlciA9IFsgJ0EnLCAnQicsICdDJywgJ0QnIF07XHJcbiAqXHJcbiAqIFRoaXMgd2lsbCByZXR1cm4gYSBjc3Ygd2hlcmU6XHJcbiAqXHJcbiAqIGNzdiA9IHsgaGVhZGVyOiBbICdBJywgJ0InLCAnQycsICdEJyBdLFxyXG4gKiAgICAgICAgIGRhdGEgICAgW1sgMSwgNCwgNSwgNyBdLCBbIDIsIDQsIDYsIDggXV07XHJcbiAqXHJcbiAqIEBwYXJhbSBqc29uXHJcbiAqIEBwYXJhbSBoZWFkZXJcclxuICogQHJldHVybnMgeyp9XHJcbiAqL1xyXG5leHBvcnRzLnRvQ3N2ID0gZnVuY3Rpb24gKGpzb24sIGhlYWRlcikge1xyXG4gIHZhciBjc3Y7XHJcbiAgdmFyIHJpLCBjaTtcclxuICB2YXIgZGF0YSA9IFtdO1xyXG5cclxuICAvLyBLZXlzIGFyZSBwcm92aWRlZC5cclxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShqc29uKSkge1xyXG4gICAgICBmb3IgKHJpID0gMDsgcmkgPCBqc29uLmxlbmd0aDsgcmkrKykge1xyXG4gICAgICAgIHZhciByb3cgPSBbXTtcclxuICAgICAgICBmb3IgKGNpID0gMDsgY2kgPCBoZWFkZXIubGVuZ3RoOyBjaSsrKSB7XHJcbiAgICAgICAgICByb3cucHVzaChqc29uW3JpXVtoZWFkZXJbY2ldXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRhdGEucHVzaChyb3cpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdmFyIHJvdyA9IFtdO1xyXG4gICAgICBmb3IgKGNpID0gMDsgY2kgPCBoZWFkZXIubGVuZ3RoOyBjaSsrKSB7XHJcbiAgICAgICAgcm93LnB1c2goanNvbltyaV1baGVhZGVyW2NpXV0pO1xyXG4gICAgICB9XHJcbiAgICAgIGRhdGEucHVzaChyb3cpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRleC5jc3YuY3N2KGhlYWRlciwgZGF0YSk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgcmV0dXJuIGRleC5qc29uLnRvQ3N2KGpzb24sIGRleC5qc29uLmtleXMoanNvbikpO1xyXG4gIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFsbCBrZXlzIGZvdW5kIGluIGEganNvbiBzdHJ1Y3R1cmUgb3IgYXJyYXkgb2YganNvbiBzdHJ1Y3R1cmVzLlxyXG4gKlxyXG4gKiBAcGFyYW0ganNvbiAgVGhlIGpzb24gc3RydWN0dXJlIG9yIGFycmF5IG9mIGpzb24gc3RydWN0dXJlcy5cclxuICogQHJldHVybnMge0FycmF5fSBBIGxpc3Qgb2Yga2V5cyBmb3VuZCB3aXRoaW4ganNvbi5cclxuICpcclxuICovXHJcbmV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgdmFyIGtleU1hcCA9IHt9O1xyXG4gIHZhciBrZXlzID0gW107XHJcbiAgdmFyIHJpLCBrZXk7XHJcblxyXG4gIGlmIChBcnJheS5pc0FycmF5KGpzb24pKSB7XHJcbiAgICBmb3IgKHJpID0gMDsgcmkgPCBqc29uLmxlbmd0aDsgcmkrKykge1xyXG4gICAgICBmb3IgKGtleSBpbiBqc29uW3JpXSkge1xyXG4gICAgICAgIGtleU1hcFtrZXldID0gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGZvciAoa2V5IGluIGpzb24pIHtcclxuICAgICAga2V5TWFwW2tleV0gPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9yIChrZXkgaW4ga2V5TWFwKSB7XHJcbiAgICBrZXlzLnB1c2goa2V5KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBrZXlzO1xyXG59O1xyXG4iLCIvKipcclxuICpcclxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgcm91dGluZXMgZGVhbGluZyB3aXRoIG1hdHJpY2VzLlxyXG4gKlxyXG4gKiBAbW9kdWxlIG1hdHJpeFxyXG4gKlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBSZXR1cm4gdGhlIHNwZWNpZmllZCBzbGljZSBvZiB0aGUgbWF0cml4LiAgVGhlIG9yaWdpbmFsIG1hdHJpeCBpc1xyXG4gKiBub3QgYWx0ZXJlZC5cclxuICpcclxuICogQHBhcmFtIHttYXRyaXh9IG1hdHJpeCBUaGUgbWF0cml4IHRvIGJlIHNsaWNlZC5cclxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gY29sdW1ucyAtIEFuIGFycmF5IG9mIGNvbHVtbiBpbmRpY2VzIHRvIGluY2x1ZGUgd2l0aGluIHRoZSBzbGljZS5cclxuICogQHBhcmFtIHtudW1iZXJ9IFtyb3dzXSBJZiBzdXBwbGllZCwgdGhlIHNsaWNlIHdpbGwgY29uc2lzdCBvbmx5IG9mIHRoZSBzcGVjaWZpZWRcclxuICogbnVtYmVyIG9mIHJvd3MuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHttYXRyaXh9XHJcbiAqL1xyXG5leHBvcnRzLnNsaWNlID0gZnVuY3Rpb24gKG1hdHJpeCwgY29sdW1ucywgcm93cykge1xyXG4gIHZhciBtYXRyaXhTbGljZSA9IG5ldyBBcnJheSgwKTtcclxuICAvL2RleC5jb25zb2xlLmxvZyhcIlBSRS1TTElDRSAobWF0cml4U2xpemUpOlwiICsgbWF0cml4U2xpY2UpO1xyXG4gIHZhciByaTtcclxuXHJcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcclxuICAgIGZvciAocmkgPSAwOyByaSA8IHJvd3MubGVuZ3RoOyByaSsrKSB7XHJcbiAgICAgIG1hdHJpeFNsaWNlLnB1c2goZGV4LmFycmF5LnNsaWNlKG1hdHJpeFtyb3dzW3JpXV0pKTtcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBmb3IgKHJpID0gMDsgcmkgPCBtYXRyaXgubGVuZ3RoOyByaSsrKSB7XHJcbiAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiTUFUUklYLVNMSUNFLUJFRk9SRVtcIiArIHJpICsgXCJdOlwiICsgbWF0cml4U2xpY2UpO1xyXG4gICAgICBtYXRyaXhTbGljZS5wdXNoKGRleC5hcnJheS5zbGljZShtYXRyaXhbcmldLCBjb2x1bW5zKSk7XHJcbiAgICAgIC8vZGV4LmNvbnNvbGUubG9nKFwiTUFUUklYLVNMSUNFLUFGVEVSW1wiICsgcmkgKyBcIl1cIiArIG1hdHJpeFNsaWNlKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG1hdHJpeFNsaWNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFJldHVybnMgYSBtYXRyaXggY29uc2lzdGluZyBvZiB1bmlxdWUgdmFsdWVzIHJlbGF0aXZlIHRvIGVhY2hcclxuICogY29sdW1uLlxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdHJpeH0gbWF0cml4IFRoZSBtYXRyaXggdG8gZXZhbHVhdGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtBcnJheS48QXJyYXkuPE9iamVjdD4+fSBUaGUgdW5pcXVlIHZhbHVlcyByZWxhdGl2ZSB0byBlYWNoIGNvbHVtbi4gSW4gdGhlIGZvcm1cclxuICogb2YgW1sgY29sdW1uIDEgdW5pcXVlIHZhbHVlc10sIFtjb2x1bW4gMiB1bmlxdWUgdmFsdWVzXSwgLi4uXV1cclxuICpcclxuICovXHJcbmV4cG9ydHMudW5pcXVlcyA9IGZ1bmN0aW9uIChtYXRyaXgpIHtcclxuICB2YXIgY2k7XHJcbiAgdmFyIHVuaXF1ZXMgPSBbXTtcclxuICB2YXIgdG1hdHJpeCA9IGRleC5tYXRyaXgudHJhbnNwb3NlKG1hdHJpeCk7XHJcbiAgdmFyIG5jb2wgPSB0bWF0cml4Lmxlbmd0aDtcclxuXHJcbiAgZm9yIChjaSA9IDA7IGNpIDwgbmNvbDsgY2kgKz0gMSkge1xyXG4gICAgdW5pcXVlcy5wdXNoKF8udW5pcSh0bWF0cml4W2NpXSkpO1xyXG4gIH1cclxuICByZXR1cm4gdW5pcXVlcztcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBSZXR1cm5zIGEgdHJhbnNwb3NlZCBtYXRyaXggd2hlcmUgdGhlIHJvd3Mgb2YgdGhlIG5ldyBtYXRyaXggYXJlIHRyYW5zcG9zZWRcclxuICogd2l0aCBpdCdzIGNvbHVtbnMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0cml4fSBtYXRyaXggLSBUaGUgbWF0cml4IHRvIHRyYW5zcG9zZS5cclxuICpcclxuICogQHJldHVybnMge21hdHJpeH0gVGhlIHRyYW5zcG9zZWQgbWF0cml4LCBsZWF2aW5nIHRoZSBvcmlnaW5hbCBtYXRyaXggdW50b3VjaGVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZSB7QGxhbmcgamF2YXNjcmlwdH1cclxuICogLy8gUmV0dXJucyBbWydSMUMxJywgJ1IyQzEnLCAnUjNDMSddLCBbJ1IxQzInLCAnUjJDMicsICdSM0MyJyBdXVxyXG4gKiB0cmFuc3Bvc2UoW1snUjFDMScsICdSMUMyJ10sIFsnUjJDMScsICdSMkMyXSwgWydSM0MxJywgJ1IzQzInXV0pO1xyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy50cmFuc3Bvc2UgPSBmdW5jdGlvbiAobWF0cml4KSB7XHJcbiAgdmFyIGNpO1xyXG4gIHZhciBuY29scztcclxuICB2YXIgdHJhbnNwb3NlZE1hdHJpeCA9IFtdO1xyXG4gIC8vZGV4LmNvbnNvbGUubG9nKFwiVHJhbnNwb3Npbmc6XCIsIG1hdHJpeCk7XHJcblxyXG4gIGlmICghbWF0cml4IHx8IG1hdHJpeC5sZW5ndGggPD0gMCB8fCAhbWF0cml4WzBdIHx8IG1hdHJpeFswXS5sZW5ndGggPD0gMCkge1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuXHJcbiAgbmNvbHMgPSBtYXRyaXhbMF0ubGVuZ3RoO1xyXG5cclxuICBmb3IgKGNpID0gMDsgY2kgPCBuY29sczsgY2krKykge1xyXG4gICAgdHJhbnNwb3NlZE1hdHJpeC5wdXNoKG1hdHJpeC5tYXAoZnVuY3Rpb24gKHJvdykge1xyXG4gICAgICByZXR1cm4gcm93W2NpXTtcclxuICAgIH0pKTtcclxuICB9XHJcblxyXG4gIHJldHVybiB0cmFuc3Bvc2VkTWF0cml4O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFJldHVybiBhIHNsaWNlIG9mIHRoaXMgbWF0cml4IGJhc2VkIHVwb24gdGhlIHN1cHBsaWVkIGNvbHVtbnMuXHJcbiAqIFRoZSBvcmlnaW5hbCBtYXRyaXggd2lsbCBiZSBsZWZ0IHVudG91Y2hlZC5cclxuICpcclxuICogQHBhcmFtIHttYXRyaXh9IG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gc2xpY2UuXHJcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGNvbHVtbnMgLSBBbiBhcnJheSBvZiBjb2x1bW4gaW5kZXhlcyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgc2xpY2UuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKlxyXG4gKi9cclxuLypcclxuIGV4cG9ydHMuY29sdW1uU2xpY2UgPSBmdW5jdGlvbiAobWF0cml4LCBjb2x1bW5zKSB7XHJcbiAvLyBUT0RPOiBEZXRlcm1pbmUsIGlzIHRoaXMgZGVzdHJ1Y3RpdmU/XHJcbiB2YXIgc2xpY2UgPSBbXTtcclxuIHZhciByaTtcclxuIHZhciB0cmFuc3Bvc2VNYXRyaXg7XHJcblxyXG4gaWYgKGFyZ3VtZW50cy5sZW5ndGggIT0gMikge1xyXG4gcmV0dXJuIG1hdHJpeDtcclxuIH1cclxuXHJcbiB0cmFuc3Bvc2VNYXRyaXggPSBkZXgubWF0cml4LnRyYW5zcG9zZShtYXRyaXgpO1xyXG4gLy9kZXguY29uc29sZS5sb2coXCJ0cmFuc3Bvc2luZ1wiLCBtYXRyaXgsIFwidHJhbnNwb3NlXCIsIHRyYW5zcG9zZWRNYXRyaXgpO1xyXG5cclxuIC8vIFNwZWNpZmljIGNvbHVtbnMgdGFyZ2V0dGVkOlxyXG4gaWYgKEFycmF5LmlzQXJyYXkoY29sdW1ucykpIHtcclxuIGZvciAocmkgPSAwOyByaSA8IGNvbHVtbnMubGVuZ3RoOyByaSArPSAxKSB7XHJcbiBzbGljZS5wdXNoKHRyYW5zcG9zZU1hdHJpeFtjb2x1bW5zW3JpXV0pO1xyXG4gfVxyXG4gfVxyXG4gLy8gU2luZ2xlIGNvbHVtbi5cclxuIGVsc2Uge1xyXG4gc2xpY2UucHVzaCh0cmFuc3Bvc2VNYXRyaXhbY29sdW1uc10pO1xyXG4gfVxyXG5cclxuIC8vIEJhY2sgdG8gcm93L2NvbHVtbiBmb3JtYXQuXHJcbiByZXR1cm4gZGV4Lm1hdHJpeC50cmFuc3Bvc2Uoc2xpY2UpO1xyXG4gfTtcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogUmV0dXJuIGEgZmxhdHRlbmVkIHZlcnNpb24gb2YgdGhlIG1hdHJpeC5cclxuICpcclxuICogQHBhcmFtIHttYXRyaXh9IG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gZmxhdHRlbi5cclxuICpcclxuICogQHJldHVybnMge0FycmF5LjxPYmplY3Q+fSBBIGZsYXR0ZW5lZCB2ZXJzaW9uIG9mIHRoZSBtYXRyaXguXHJcbiAqXHJcbiAqIEBleGFtcGxlIHtAbGFuZyBqYXZhc2NyaXB0fVxyXG4gKiAvLyBEZWZpbmUgYSBzaW1wbGUgbWF0cml4LlxyXG4gKiB2YXIgbWF0cml4ID0gW1sncjFjMScsICdyMWMyJ10sIFsncjJjMScsICdyMmMyJ11dXHJcbiAqXHJcbiAqIC8vIFJldHVybnM6IFsncjFjMScsICdyMWMyJywgJ3IyYzEnLCAncjJjMiddXHJcbiAqIGZsYXR0ZW4obWF0cml4KTtcclxuICpcclxuICovXHJcbmV4cG9ydHMuZmxhdHRlbiA9IGZ1bmN0aW9uIChtYXRyaXgpIHtcclxuICByZXR1cm4gXy5mbGF0dGVuKG1hdHJpeCk7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgbWluaW11bSBhbmQgbWF4aW11bSB2YWx1ZSBpbiB0aGUgZm9ybSBvZjogW21pbixtYXhdXHJcbiAqIGZyb20gdGhlIHNwZWNpZmllZCBzdWJzZXQgb2YgdGhlIG1hdHJpeC5cclxuICpcclxuICogQHBhcmFtIHttYXRyaXh9IG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gc2Nhbi5cclxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxudW1iZXJdIFtpbmRpY2VzXSAtIFdoZW4gc3VwcGxpZWQsIHdpbGwgY29udHJhaW4gdGhlIGV4dGVudFxyXG4gKiBzZWFyY2ggdG8ganVzdCB0aG9zZSBjb2x1bW5zIHNwZWNpZmllZCBieSB0aGlzIGxpc3Qgb2YgaW5kaWNlcy5cclxuICpcclxuICogQHJldHVybnMge0FycmF5LjxudW1iZXI+fSBBbiBhcnJheSBvZiB0d28gZWxlbWVudHM6IFsgbWluLCBtYXggXVxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5leHRlbnQgPSBmdW5jdGlvbiAobWF0cml4LCBpbmRpY2VzKSB7XHJcbiAgdmFyIHZhbHVlcyA9IG1hdHJpeDtcclxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgdmFsdWVzID0gZGV4Lm1hdHJpeC5mbGF0dGVuKGRleC5tYXRyaXguc2xpY2UobWF0cml4LCBpbmRpY2VzKSk7XHJcbiAgICB2YXIgbWF4ID0gTWF0aC5tYXguYXBwbHkobnVsbCwgdmFsdWVzKTtcclxuICAgIHZhciBtaW4gPSBNYXRoLm1pbi5hcHBseShudWxsLCB2YWx1ZXMpO1xyXG4gICAgcmV0dXJuIFttaW4sIG1heF07XHJcbiAgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIENvbWJpbmUgZWFjaCBjb2x1bW4gaW4gbWF0cml4MSB3aXRoIGVhY2ggY29sdW1uIGluIG1hdHJpeDIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0cml4fSBtYXRyaXgxIFRoZSBmaXJzdCBtYXRyaXggdG8gY29tYmluZS5cclxuICogQHBhcmFtIHttYXRyaXh9IG1hdHJpeDIgVGhlIHNlY29uZCBtYXRyaXggdG8gY29tYmluZS5cclxuICpcclxuICogQHJldHVybnMge21hdHJpeH0gVGhlIGNvbWJpbmVkIG1hdHJpeC5cclxuICpcclxuICogQGV4YW1wbGUge0BsYW5nIGphdmFzY3JpcHR9XHJcbiAqIHZhciBtYXRyaXgxID0gW1snbTFyMWMxJywgJ20xcjFjMiddLCBbJ20xcjJjMScsICdtMXIyYzInXV1cclxuICogdmFyIG1hdHJpeDIgPSBbWydtMnIxYzEnLCAnbTJyMWMyJ10sIFsnbTJyMmMxJywgJ20ycjJjMiddXVxyXG4gKlxyXG4gKiAvLyBSZXR1cm5zOiBbWydtMXIxYzEnLCAnbTFyMWMyJywgJ20ycjFjMScsICdtMnIxYzInXSwgWydtMXIyYzEnLCAnbTFyMmMyJywgJ20ycjJjMScsICdtMnIyYzInXV1cclxuICogdmFyIHJlc3VsdCA9IGNvbWJpbmUobWF0cml4MSwgbWF0cml4Mik7XHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmNvbWJpbmUgPSBmdW5jdGlvbiAobWF0cml4MSwgbWF0cml4Mikge1xyXG4gIHZhciByZXN1bHQgPSBfLmNsb25lKG1hdHJpeDEpO1xyXG5cclxuICB2YXIgcmk7XHJcblxyXG4gIGZvciAocmkgPSAwOyByaSA8IG1hdHJpeDIubGVuZ3RoOyByaSsrKSB7XHJcbiAgICByZXN1bHRbcmldID0gcmVzdWx0W3JpXS5jb25jYXQobWF0cml4MltyaV0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBSZXR1cm4gYSBjb3B5IG9mIHRoZSBzdXBwbGllZCBtYXRyaXguXHJcbiAqXHJcbiAqIEBwYXJhbSB7bWF0cml4fSBtYXRyaXggVGhlIG1hdHJpeCB0byBjb3B5LlxyXG4gKlxyXG4gKiBAcmV0dXJucyB7QXJyYXl9IEEgY29weSBvZiB0aGUgb3JpZ2luYWwgbWF0cml4LlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5jb3B5ID0gZnVuY3Rpb24gKG1hdHJpeCkge1xyXG4gIHJldHVybiBtYXRyaXgubWFwKGZ1bmN0aW9uIChyb3cpIHtcclxuICAgIHJldHVybiBfLmNsb25lKHJvdyk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogSW5zZXJ0IGEgbmV3IGNvbHVtbiBhdCBwb3NpdGlvbiAwIHdpdGhpbiB0aGlzIG1hdHJpeCB3aGljaCB3aWxsIGNvbnRhaW5cclxuICogaW50ZWdlciB2YWx1ZXMgc3RhcnRpbmcgYXQgMSwgMiwgMywgLi4uICBUaGlzIGlzIHVzZWZ1bCBpZiB5b3VyIGRhdGFzZXRcclxuICogbGFja3MgYW4gZXhpc3RpbmcgdW5pcXVlIGluZGV4LlxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdHJpeH0gbWF0cml4IC0gVGhlIG1hdHJpeCB0byBpbmRleC5cclxuICogQHJldHVybnMge21hdHJpeH0gQSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBtYXRyaXggd2l0aCB0aGUgaW5kZXggaW5zZXJ0ZWQuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmFkZEluZGV4ID0gZnVuY3Rpb24gKG1hdHJpeCkge1xyXG4gIHZhciBpbmRleE1hdHJpeCA9IGRleC5tYXRyaXguY29weShtYXRyaXgpO1xyXG5cclxuICBmb3IgKHZhciByaSA9IDA7IHJpIDwgbWF0cml4Lmxlbmd0aDsgcmkrKykge1xyXG4gICAgaW5kZXhNYXRyaXhbcmldLnVuc2hpZnQocmkgKyAxKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBpbmRleE1hdHJpeDtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgc3VwcGxpZWQgY29sdW1uTnVtIHdpdGhpbiB0aGUgc3VwcGxpZWQgbWF0cml4IGlzXHJcbiAqIG51bWVyaWMgb3Igbm90LlxyXG4gKlxyXG4gKiBAcGFyYW0ge21hdHJpeH0gbWF0cml4IC0gVGhlIG1hdHJpeCB0byBldmFsdWF0ZS5cclxuICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtbk51bSAtIFRoZSBjb2x1bW4gd2l0aGluIHRoZSBtYXRyaXggdG8gZXZhbHVhdGUuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb2x1bW4gaXMgbnVtZXJpYywgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5pc0NvbHVtbk51bWVyaWMgPSBmdW5jdGlvbiAobWF0cml4LCBjb2x1bW5OdW0pIHtcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdHJpeC5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKCFfLmlzTnVtYmVyKG1hdHJpeFtpXVtjb2x1bW5OdW1dKSkge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB0cnVlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFJldHVybiB0aGUgbWF4aW11bSB2YWx1ZSBvZiB0aGUgc3BlY2lmaWVkIGNvbHVtbk51bSB3aXRoaW4gdGhlXHJcbiAqIHN1cHBsaWVkIG1hdHJpeC5cclxuICpcclxuICogQHBhcmFtIG1hdHJpeCBUaGUgbWF0cml4IHRvIGV2YWx1YXRlLlxyXG4gKiBAcGFyYW0gY29sdW1uTnVtIFRoZSBjb2x1bW4gbnVtYmVyIHdpdGhpbiB0aGUgbWF0cml4IHRvIGV2YWx1YXRlLlxyXG4gKiBAcmV0dXJucyB7Kn0gVGhlIG1heGltdW0gdmFsdWUgb2YgdGhlIHNwZWNpZmllZCBjb2x1bW4gd2l0aGluIHRoZVxyXG4gKiBzdXBwbGllZCBtYXRyaXguXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLm1heCA9IGZ1bmN0aW9uIChtYXRyaXgsIGNvbHVtbk51bSkge1xyXG4gIHZhciBtYXhWYWx1ZSA9IG1hdHJpeFswXVtjb2x1bW5OdW1dO1xyXG4gIHZhciBpO1xyXG5cclxuICBpZiAoZGV4Lm1hdHJpeC5pc0NvbHVtbk51bWVyaWMobWF0cml4LCBjb2x1bW5OdW0pKSB7XHJcbiAgICBtYXhWYWx1ZSA9IHBhcnNlRmxvYXQobWF0cml4WzBdW2NvbHVtbk51bV0pO1xyXG4gICAgZm9yIChpID0gMTsgaSA8IG1hdHJpeC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAobWF4VmFsdWUgPCBwYXJzZUZsb2F0KG1hdHJpeFtpXVtjb2x1bW5OdW1dKSkge1xyXG4gICAgICAgIG1heFZhbHVlID0gcGFyc2VGbG9hdChtYXRyaXhbaV1bY29sdW1uTnVtXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBmb3IgKGkgPSAxOyBpIDwgbWF0cml4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChtYXhWYWx1ZSA8IG1hdHJpeFtpXVtjb2x1bW5OdW1dKSB7XHJcbiAgICAgICAgbWF4VmFsdWUgPSBtYXRyaXhbaV1bY29sdW1uTnVtXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1heFZhbHVlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFJldHVybiB0aGUgbWluaW11bSB2YWx1ZSBvZiB0aGUgc3BlY2lmaWVkIGNvbHVtbk51bSB3aXRoaW4gdGhlXHJcbiAqIHN1cHBsaWVkIG1hdHJpeC5cclxuICpcclxuICogQHBhcmFtIHttYXRyaXh9IG1hdHJpeCAtIFRoZSBtYXRyaXggdG8gZXZhbHVhdGUuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW5OdW0gLSBUaGUgY29sdW1uIG51bWJlciB3aXRoaW4gdGhlIG1hdHJpeCB0byBldmFsdWF0ZS5cclxuICogQHJldHVybnMge251bWJlcn0gVGhlIG1pbmltdW0gdmFsdWUgb2YgdGhlIHNwZWNpZmllZCBjb2x1bW4gd2l0aGluIHRoZVxyXG4gKiBzdXBwbGllZCBtYXRyaXguXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLm1pbiA9IGZ1bmN0aW9uIChtYXRyaXgsIGNvbHVtbk51bSkge1xyXG4gIHZhciBtaW5WYWx1ZSA9IG1hdHJpeFswXVtjb2x1bW5OdW1dO1xyXG4gIHZhciBpO1xyXG5cclxuICBpZiAoZGV4Lm1hdHJpeC5pc0NvbHVtbk51bWVyaWMobWF0cml4LCBjb2x1bW5OdW0pKSB7XHJcbiAgICBtaW5WYWx1ZSA9IHBhcnNlRmxvYXQobWF0cml4WzBdW2NvbHVtbk51bV0pO1xyXG4gICAgZm9yIChpID0gMTsgaSA8IG1hdHJpeC5sZW5ndGg7IGkrKykge1xyXG4gICAgICBpZiAobWluVmFsdWUgPiBwYXJzZUZsb2F0KG1hdHJpeFtpXVtjb2x1bW5OdW1dKSkge1xyXG4gICAgICAgIG1pblZhbHVlID0gcGFyc2VGbG9hdChtYXRyaXhbaV1bY29sdW1uTnVtXSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBmb3IgKGkgPSAxOyBpIDwgbWF0cml4Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmIChtaW5WYWx1ZSA+IG1hdHJpeFtpXVtjb2x1bW5OdW1dKSB7XHJcbiAgICAgICAgbWluVmFsdWUgPSBtYXRyaXhbaV1bY29sdW1uTnVtXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIG1pblZhbHVlO1xyXG59O1xyXG4iLCIvKipcclxuICpcclxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgcm91dGluZXMgZGVhbGluZyB3aXRoIGphdmFzY3JpcHQgb2JqZWN0cy5cclxuICpcclxuICogQG1vZHVsZSBvYmplY3RcclxuICpcclxuICovXHJcblxyXG4vKipcclxuICpcclxuICogUmV0dXJuIHRoZSBsY2NhbCBrZXlzIG9mIHRoaXMgb2JqZWN0IHdpdGhvdXQgdGhlIGluaGVyaXRlZCBvbmVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqIFRoZSBvYmplY3Qgd2hvc2UgbG9jYWwga2V5cyB3ZSBhcmUgaW50ZXJlc3RlZCBpbi5cclxuICpcclxuICogQHJldHVybnMge0FycmF5fSBBbiBhcnJheSBvZiAwIG9yIG1vcmUgbGNjYWwga2V5cy5cclxuICovXHJcbmV4cG9ydHMua2V5cyA9IGZ1bmN0aW9uIGtleXMob2JqKSB7XHJcbiAgdmFyIGtleXMgPSBbXTtcclxuXHJcbiAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgIGtleXMucHVzaChrZXkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGtleXM7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogQSBwcmV0dHkgZ29vZCwgYnV0IGltcGVyZmVjdCBtZWNoYW5pc20gZm9yIHBlcmZvcm1pbmcgYSBkZWVwXHJcbiAqIGNsb25lIG9mIGFuIG9iamVjdC5cclxuICpcclxuICogQHBhcmFtIG9iaiBUaGUgb2JqZWN0IHRvIGNsb25lLlxyXG4gKiBAcmV0dXJucyB7Kn0gVGhlIGNsb25lZCBvYmplY3QuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmNsb25lID0gZnVuY3Rpb24gY2xvbmUob2JqKSB7XHJcbiAgdmFyIGksIGF0dHIsIGxlbjtcclxuXHJcbiAgLy8gSGFuZGxlIHRoZSAzIHNpbXBsZSB0eXBlcywgYW5kIG51bGwgb3IgdW5kZWZpbmVkXHJcbiAgaWYgKG51bGwgPT0gb2JqIHx8IFwib2JqZWN0XCIgIT0gdHlwZW9mIG9iailcclxuICAgIHJldHVybiBvYmo7XHJcblxyXG4gIC8vIEhhbmRsZSBEYXRlXHJcbiAgaWYgKG9iaiBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgIHZhciBjb3B5ID0gbmV3IERhdGUoKTtcclxuICAgIGNvcHkuc2V0VGltZShvYmouZ2V0VGltZSgpKTtcclxuICAgIHJldHVybiBjb3B5O1xyXG4gIH1cclxuXHJcbiAgLy8gSGFuZGxlIEFycmF5XHJcbiAgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICB2YXIgY29weSA9IFtdO1xyXG4gICAgZm9yIChpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGNvcHlbaV0gPSBkZXgub2JqZWN0LmNsb25lKG9ialtpXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29weTtcclxuICB9XHJcblxyXG4gIC8vIERPTSBOb2RlcyBhcmUgbm90aGluZyBidXQgdHJvdWJsZS5cclxuICBpZiAoZGV4Lm9iamVjdC5pc0VsZW1lbnQob2JqKSB8fFxyXG4gICAgZGV4Lm9iamVjdC5pc05vZGUob2JqKSkge1xyXG4gICAgcmV0dXJuIG9iajtcclxuICB9XHJcblxyXG4gIC8vIEhhbmRsZSBPYmplY3RcclxuICBpZiAob2JqIGluc3RhbmNlb2YgT2JqZWN0KSB7XHJcbiAgICB2YXIgY29weSA9IHt9O1xyXG4gICAgLy9qUXVlcnkuZXh0ZW5kKGNvcHksIG9iaik7XHJcbiAgICBmb3IgKGF0dHIgaW4gb2JqKSB7XHJcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoYXR0cikpIHtcclxuICAgICAgICBjb3B5W2F0dHJdID0gZGV4Lm9iamVjdC5jbG9uZShvYmpbYXR0cl0pO1xyXG4gICAgICAgIC8vY29weVthdHRyXSA9IG9ialthdHRyXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvcHk7XHJcbiAgfVxyXG5cclxuICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gY29weSBvYmohIEl0cyB0eXBlIGlzbid0IHN1cHBvcnRlZC5cIik7XHJcbn07XHJcblxyXG4vKlxyXG4gIFRoaXMgdmVyc2lvbiBjYXVzZXMgZXhwYW5kIHRvIGNvbnRpbnVlIGZvcmV2ZXIuXHJcblxyXG5leHBvcnRzLmlzRW1wdHkgPSBmdW5jdGlvbiBpc0VtcHR5KG9iaikge1xyXG4gIHJldHVybiBfLmlzRW1wdHkob2JqKTtcclxufTtcclxuKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBLaW5kIG9mIG1pc2xlYWRpbmcuICBUaGlzIHJlYWxseSBzaWduYWxzIHdoZW4gZXhwYW5kIHNob3VsZCBxdWl0XHJcbiAqIGV4cGFuZGluZy4gIEkgbmVlZCB0byBjbGVhbiB0aGlzIHVwLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZXhwb3J0cy5pc0VtcHR5ID0gZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAvL2RleC5jb25zb2xlLmxvZyhcImlzRW1wdHkoXCIgKyBvYmogKyBcIikgdHlwZW9mPVwiICsgKHR5cGVvZiBvYmopKTtcclxuICBpZiAoIW9iaiB8fCBvYmogaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG4gIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiBvYmopIHtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgLy9kZXguY29uc29sZS5sb2coXCJPQko6IFwiLCBvYmosIFwiIGNvbnRhaW5zIGtleSAnXCIgKyBrZXkgKyBcIidcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIE92ZXJsYXkgdGhlIHRvcCBvYmplY3Qgb24gdG9wIG9mIHRoZSBib3R0b20uICBUaGlzIG1ldGhvZCB3aWxsIGZpcnN0IGNsb25lXHJcbiAqIHRoZSBib3R0b20gb2JqZWN0LiAgVGhlbiBpdCB3aWxsIGRyb3AgdGhlIHZhbHVlcyB3aXRoaW4gdGhlIHRvcCBvYmplY3RcclxuICogaW50byB0aGUgY2xvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b3AgLSBUaGUgb2JqZWN0IHdobydzIHByb3BlcnRpZXMgd2lsbCBiZSBvbiB0b3AuXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBib3R0b20gLSBUaGUgb2JqZWN0IHdobydzIHByb3BlcnRpZXMgd2lsbCBiZSBvbiBib3R0b20uXHJcbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIG92ZXJsYWlkIG9iamVjdCB3aGVyZSB0aGUgcHJvcGVydGllcyBpbiB0b3Agb3ZlcnJpZGVcclxuICogICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIGluIGJvdHRvbS4gIFRoZSByZXR1cm4gb2JqZWN0IGlzIGEgY2xvbmUgb3JcclxuICogICAgICAgICAgICAgICAgICBjb3B5LlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5vdmVybGF5ID0gZnVuY3Rpb24gb3ZlcmxheSh0b3AsIGJvdHRvbSkge1xyXG4gIC8vIE1ha2UgYSBjbG9uZSBvZiB0aGUgYm90dG9tIG9iamVjdC5cclxuICB2YXIgb3ZlcmxheSA9IGRleC5vYmplY3QuY2xvbmUoYm90dG9tKTtcclxuICB2YXIgcHJvcDtcclxuXHJcbiAgLy8gSWYgd2UgaGF2ZSBwYXJhbWV0ZXJzIGluIHRoZSB0b3Agb2JqZWN0LCBvdmVybGF5IHRoZW0gb24gdG9wXHJcbiAgLy8gb2YgdGhlIGJvdHRvbSBvYmplY3QuXHJcbiAgaWYgKHRvcCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIC8vIEl0ZXJhdGUgb3ZlciB0aGUgcHJvcHMgaW4gdG9wLlxyXG4gICAgZm9yIChwcm9wIGluIHRvcCkge1xyXG4gICAgICAvLyBBcnJheXMgYXJlIHNwZWNpYWwgY2FzZXMuIFtBXSBvbiB0b3Agb2YgW0EsQl0gc2hvdWxkIGdpdmUgW0FdLCBub3QgW0EsQl1cclxuICAgICAgaWYgKHR5cGVvZiB0b3BbcHJvcF0gPT0gJ29iamVjdCcgJiYgb3ZlcmxheVtwcm9wXSAhPSBudWxsICYmICEodG9wW3Byb3BdIGluc3RhbmNlb2YgQXJyYXkpKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcIlBST1A6IFwiICsgcHJvcCArIFwiLCB0b3A9XCIgKyB0b3AgKyBcIiwgb3ZlcmxheT1cIiArIG92ZXJsYXkpO1xyXG4gICAgICAgIG92ZXJsYXlbcHJvcF0gPSBkZXgub2JqZWN0Lm92ZXJsYXkodG9wW3Byb3BdLCBvdmVybGF5W3Byb3BdKTtcclxuICAgICAgfVxyXG4gICAgICAvLyBTaW1wbHkgb3ZlcndyaXRlIGZvciBzaW1wbGUgY2FzZXMgYW5kIGFycmF5cy5cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgb3ZlcmxheVtwcm9wXSA9IHRvcFtwcm9wXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy9jb25zb2xlLmRpcihjb25maWcpO1xyXG4gIHJldHVybiBvdmVybGF5O1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIHN1cHBsaWVkIG9iamVjdCBpcyBhIE5vZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmogLSBUaGUgb2JqZWN0IHRvIHRlc3QuXHJcbiAqXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIG9iaiBpcyBhIE5vZGUsIGZhbHNlIG90aGVyd2lzZS5cclxuICpcclxuICovXHJcbmV4cG9ydHMuaXNOb2RlID0gZnVuY3Rpb24gaXNOb2RlKG9iaikge1xyXG4gIHJldHVybiAoXHJcbiAgICB0eXBlb2YgTm9kZSA9PT0gXCJvYmplY3RcIiA/IG9iaiBpbnN0YW5jZW9mIE5vZGUgOlxyXG4gICAgb2JqICYmIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG9iai5ub2RlVHlwZSA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2Ygb2JqLm5vZGVOYW1lID09PSBcInN0cmluZ1wiXHJcbiAgKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBzdXBwbGllZCBvYmplY3QgaXMgYVxyXG4gKiBET00gbm9kZS5cclxuICpcclxuICogQHBhcmFtIHtPYmplY3R9IG9iaiAtIFRoZSBvYmplY3QgdG8gdGVzdC5cclxuICpcclxuICogQHJldHVybnMge2Jvb2xlYW59IC0gVHJ1ZSBpZiBvYmogaXMgYSBET00gbm9kZSwgZmFsc2Ugb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKi9cclxuZXhwb3J0cy5pc0VsZW1lbnQgPSBmdW5jdGlvbiBpc0VsZW1lbnQob2JqKSB7XHJcbiAgcmV0dXJuIChcclxuICAgIHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gXCJvYmplY3RcIiA/IG9iaiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IDogLy9ET00yXHJcbiAgICBvYmogJiYgdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmoubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIG9iai5ub2RlTmFtZSA9PT0gXCJzdHJpbmdcIlxyXG4gICk7XHJcbn07XHJcblxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgcmV0dXJucyBhIGJvb2xlYW4gcmVwcmVzZW50aW5nIHdoZXRoZXIgb2JqIGlzIGNvbnRhaW5lZFxyXG4gKiB3aXRoaW4gY29udGFpbmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byB0ZXN0LlxyXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIC0gVGhlIG9iamVjdCB0byB0ZXN0LlxyXG4gKlxyXG4gKiBAcmV0dXJuIFRydWUgaWYgY29udGFpbmVyIGNvbnRhaW5zIG9iai4gIEZhbHNlIG90aGVyd2lzZS5cclxuICovXHJcbmV4cG9ydHMuY29udGFpbnMgPSBmdW5jdGlvbiBjb250YWlucyhjb250YWluZXIsIG9iaikge1xyXG4gIHZhciBpID0gY29udGFpbmVyLmxlbmd0aDtcclxuICB3aGlsZSAoaS0tKSB7XHJcbiAgICBpZiAoY29udGFpbmVyW2ldID09PSBvYmopIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBSZXR1cm4gd2hldGhlciBvciBub3QgdGhlIHN1cHBsaWVkIG9iamVjdCBpcyBhIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqIFRoZSBvYmplY3QgdG8gY2hlY2suXHJcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIG9iaiBpcyBhIGZ1bmN0aW9uLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqXHJcbiAqL1xyXG5leHBvcnRzLmlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKG9iaikge1xyXG4gIC8vcmV0dXJuIHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbic7XHJcbiAgcmV0dXJuIF8uaXNGdW5jdGlvbihvYmopO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIFZpc2l0IGVhY2ggbG9jYWwgcHJvcGVydHkgd2l0aGluLlxyXG4gKlxyXG4gKiBAcGFyYW0gb2JqXHJcbiAqIEBwYXJhbSBmdW5jXHJcbiAqL1xyXG4vKlxyXG5leHBvcnRzLnZpc2l0ID0gZnVuY3Rpb24gKG9iaiwgZnVuYykge1xyXG4gIHZhciBwcm9wO1xyXG4gIGZ1bmMob2JqKTtcclxuICBmb3IgKHByb3AgaW4gb2JqKSB7XHJcbiAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgIGlmICh0eXBlb2Ygb2JqW3Byb3BdID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGRleC5vYmplY3QudmlzaXQob2JqW3Byb3BdLCBmdW5jKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuKi9cclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gbWFwXHJcbiAqIEBwYXJhbSB2YWx1ZXNcclxuICogQHJldHVybnMge2V4cG9ydHN9XHJcbiAqL1xyXG5leHBvcnRzLmNvbm5lY3QgPSBmdW5jdGlvbiBjb25uZWN0KG1hcCwgdmFsdWVzKSB7XHJcbiAgZGV4LmNvbnNvbGUubG9nKFwibWFwOlwiLCBtYXAsIFwidmFsdWVzOlwiLCB2YWx1ZXMpO1xyXG5cclxuICBpZiAoIXZhbHVlcyB8fCB2YWx1ZXMubGVuZ3RoIDw9IDApIHtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxuICBpZiAoIW1hcFt2YWx1ZXNbMF1dKSB7XHJcbiAgICBtYXBbdmFsdWVzWzBdXSA9IHt9O1xyXG4gIH1cclxuICBkZXgub2JqZWN0LmNvbm5lY3QobWFwW3ZhbHVlc1swXV0sIHZhbHVlcy5zbGljZSgxKSk7XHJcblxyXG4gIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBvYmpcclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG5leHBvcnRzLmlzTnVtZXJpYyA9IGZ1bmN0aW9uIChvYmopIHtcclxuICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQob2JqKSkgJiYgaXNGaW5pdGUob2JqKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gaGllcmFyY2h5XHJcbiAqIEBwYXJhbSBuYW1lXHJcbiAqIEBwYXJhbSB2YWx1ZVxyXG4gKiBAcGFyYW0gZGVsaW1pdGVyXHJcbiAqIEByZXR1cm5zIHsqfVxyXG4gKi9cclxuZXhwb3J0cy5zZXRIaWVyYXJjaGljYWwgPSBmdW5jdGlvbiAoaGllcmFyY2h5LCBuYW1lLCB2YWx1ZSwgZGVsaW1pdGVyKSB7XHJcbiAgaWYgKGhpZXJhcmNoeSA9PSBudWxsKSB7XHJcbiAgICBoaWVyYXJjaHkgPSB7fTtcclxuICB9XHJcblxyXG4gIGlmICh0eXBlb2YgaGllcmFyY2h5ICE9ICdvYmplY3QnKSB7XHJcbiAgICByZXR1cm4gaGllcmFyY2h5O1xyXG4gIH1cclxuXHJcbiAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIG5hbWVzIGJ5IHNwbGl0dGluZyBkZWxpbWl0ZXIsIHRoZW4gY2FsbFxyXG4gIC8vIHRoaXMgZnVuY3Rpb24gaW4gdGhlIDMgYXJndW1lbnQgKEFycmF5IG9mIHBhdGhzKSBjb250ZXh0LlxyXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDQpIHtcclxuICAgIHJldHVybiBkZXgub2JqZWN0LnNldEhpZXJhcmNoaWNhbChoaWVyYXJjaHksXHJcbiAgICAgIG5hbWUuc3BsaXQoZGVsaW1pdGVyKSwgdmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgLy8gQXJyYXkgb2YgcGF0aHMgY29udGV4dC5cclxuICBlbHNlIHtcclxuICAgIC8vIFRoaXMgaXMgdGhlIGxhc3QgdmFyaWFibGUgbmFtZSwganVzdCBzZXQgdGhlIHZhbHVlLlxyXG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIGhpZXJhcmNoeVtuYW1lWzBdXSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgLy8gV2Ugc3RpbGwgaGF2ZSB0byB0cmF2ZXJzZS5cclxuICAgIGVsc2Uge1xyXG4gICAgICAvLyBVbmRlZmluZWQgY29udGFpbmVyIG9iamVjdCwganVzdCBjcmVhdGUgYW4gZW1wdHkuXHJcbiAgICAgIGlmICghKG5hbWVbMF0gaW4gaGllcmFyY2h5KSkge1xyXG4gICAgICAgIGhpZXJhcmNoeVtuYW1lWzBdXSA9IHt9O1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBSZWN1cnNpdmVseSB0cmF2ZXJzZSBkb3duIHRoZSBoaWVyYXJjaHkuXHJcbiAgICAgIGRleC5vYmplY3Quc2V0SGllcmFyY2hpY2FsKGhpZXJhcmNoeVtuYW1lWzBdXSwgbmFtZS5zcGxpY2UoMSksIHZhbHVlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBoaWVyYXJjaHk7XHJcbn07XHJcbiJdfQ==



</script>

<script>
var csv = { 'header' : ["x1","y1","x2","y2","x3","y3","x4","y4"],
 'data' : [["10","8.04","10","9.14","10","7.46","8","6.58"],
["8","6.95","8","8.14","8","6.77","8","5.76"],
["13","7.58","13","8.74","13","12.74","8","7.71"],
["9","8.81","9","8.77","9","7.11","8","8.84"],
["11","8.33","11","9.26","11","7.81","8","8.47"],
["14","9.96","14","8.1","14","8.84","8","7.04"],
["6","7.24","6","6.13","6","6.08","8","5.25"],
["4","4.26","4","3.1","4","5.39","19","12.5"],
["12","10.84","12","9.13","12","8.15","8","5.56"],
["7","4.82","7","7.26","7","6.42","8","7.91"],
["5","5.68","5","4.74","5","5.73","8","6.89"]] }

  var gtypes = dex.csv.guessTypes(csv);
  dex.console.log("TYPES", gtypes);
  var ncsv = dex.csv.numericSubset(csv);
  var columns = dex.csv.transpose(ncsv);

  for (var ci=0; ci<columns.header.length; ci++)
  {
    columns.data[ci].unshift(columns.header[ci]);
  }
  //dex.console.log("NCSV", ncsv);
  
  var config = {
    'bindto' : "#ChartArea",
    data: {
        'x': columns.header[0],
        columns: columns.data
    },
    subchart: {
        show: true
    },
    zoom: {
        enabled: true
    },
    legend: {
      position : 'right'
    }
};

// Set categorical axis if first column is a string.
//if (gtypes[0] == "string")
//{
//  config['axis'] = { 'x' : { 
//    'type' : 'category',
//    'categories': dex.csv.transpose(dex.csv.columnSlice(csv, [0])).data[0]
//  }};
//}

  var chart = c3.generate(config);

</script>
</body>
</html>